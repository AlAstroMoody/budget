var $v=Object.defineProperty;var wg=g=>{throw TypeError(g)};var Hv=(g,e,t)=>e in g?$v(g,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):g[e]=t;var At=(g,e,t)=>Hv(g,typeof e!="symbol"?e+"":e,t),Lp=(g,e,t)=>e.has(g)||wg("Cannot "+t);var A=(g,e,t)=>(Lp(g,e,"read from private field"),t?t.call(g):e.get(g)),tt=(g,e,t)=>e.has(g)?wg("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(g):e.set(g,t),K=(g,e,t,r)=>(Lp(g,e,"write to private field"),r?r.call(g,t):e.set(g,t),t),et=(g,e,t)=>(Lp(g,e,"access private method"),t);var rs=(g,e,t,r)=>({set _(l){K(g,e,l,t)},get _(){return A(g,e,r)}});/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function O0(g){const e=Object.create(null);for(const t of g.split(","))e[t]=1;return t=>t in e}const Ke={},Fl=[],Yn=()=>{},Uv=()=>!1,fp=g=>g.charCodeAt(0)===111&&g.charCodeAt(1)===110&&(g.charCodeAt(2)>122||g.charCodeAt(2)<97),N0=g=>g.startsWith("onUpdate:"),ms=Object.assign,D0=(g,e)=>{const t=g.indexOf(e);t>-1&&g.splice(t,1)},Vv=Object.prototype.hasOwnProperty,Le=(g,e)=>Vv.call(g,e),re=Array.isArray,jl=g=>bd(g)==="[object Map]",pp=g=>bd(g)==="[object Set]",_g=g=>bd(g)==="[object Date]",ue=g=>typeof g=="function",vr=g=>typeof g=="string",Sn=g=>typeof g=="symbol",Qe=g=>g!==null&&typeof g=="object",xb=g=>(Qe(g)||ue(g))&&ue(g.then)&&ue(g.catch),Sb=Object.prototype.toString,bd=g=>Sb.call(g),Wv=g=>bd(g).slice(8,-1),Ab=g=>bd(g)==="[object Object]",L0=g=>vr(g)&&g!=="NaN"&&g[0]!=="-"&&""+parseInt(g,10)===g,Cu=O0(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),mp=g=>{const e=Object.create(null);return t=>e[t]||(e[t]=g(t))},qv=/-(\w)/g,nn=mp(g=>g.replace(qv,(e,t)=>t?t.toUpperCase():"")),Xv=/\B([A-Z])/g,Xa=mp(g=>g.replace(Xv,"-$1").toLowerCase()),gp=mp(g=>g.charAt(0).toUpperCase()+g.slice(1)),Fp=mp(g=>g?`on${gp(g)}`:""),Ba=(g,e)=>!Object.is(g,e),Wd=(g,...e)=>{for(let t=0;t<g.length;t++)g[t](...e)},nm=(g,e,t,r=!1)=>{Object.defineProperty(g,e,{configurable:!0,enumerable:!1,writable:r,value:t})},Tf=g=>{const e=parseFloat(g);return isNaN(e)?g:e};let xg;const bp=()=>xg||(xg=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function F0(g){if(re(g)){const e={};for(let t=0;t<g.length;t++){const r=g[t],l=vr(r)?Zv(r):F0(r);if(l)for(const i in l)e[i]=l[i]}return e}else if(vr(g)||Qe(g))return g}const Gv=/;(?![^(]*\))/g,Kv=/:([^]+)/,Yv=/\/\*[^]*?\*\//g;function Zv(g){const e={};return g.replace(Yv,"").split(Gv).forEach(t=>{if(t){const r=t.split(Kv);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Cr(g){let e="";if(vr(g))e=g;else if(re(g))for(let t=0;t<g.length;t++){const r=Cr(g[t]);r&&(e+=r+" ")}else if(Qe(g))for(const t in g)g[t]&&(e+=t+" ");return e.trim()}const Jv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Qv=O0(Jv);function kb(g){return!!g||g===""}function t2(g,e){if(g.length!==e.length)return!1;let t=!0;for(let r=0;t&&r<g.length;r++)t=yp(g[r],e[r]);return t}function yp(g,e){if(g===e)return!0;let t=_g(g),r=_g(e);if(t||r)return t&&r?g.getTime()===e.getTime():!1;if(t=Sn(g),r=Sn(e),t||r)return g===e;if(t=re(g),r=re(e),t||r)return t&&r?t2(g,e):!1;if(t=Qe(g),r=Qe(e),t||r){if(!t||!r)return!1;const l=Object.keys(g).length,i=Object.keys(e).length;if(l!==i)return!1;for(const s in g){const a=g.hasOwnProperty(s),o=e.hasOwnProperty(s);if(a&&!o||!a&&o||!yp(g[s],e[s]))return!1}}return String(g)===String(e)}function e2(g,e){return g.findIndex(t=>yp(t,e))}const Eb=g=>!!(g&&g.__v_isRef===!0),ie=g=>vr(g)?g:g==null?"":re(g)||Qe(g)&&(g.toString===Sb||!ue(g.toString))?Eb(g)?ie(g.value):JSON.stringify(g,Cb,2):String(g),Cb=(g,e)=>Eb(e)?Cb(g,e.value):jl(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[r,l],i)=>(t[jp(r,i)+" =>"]=l,t),{})}:pp(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>jp(t))}:Sn(e)?jp(e):Qe(e)&&!re(e)&&!Ab(e)?String(e):e,jp=(g,e="")=>{var t;return Sn(g)?`Symbol(${(t=g.description)!=null?t:e})`:g};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let xs;class r2{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=xs,!e&&xs&&(this.index=(xs.scopes||(xs.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=xs;try{return xs=this,e()}finally{xs=t}}}on(){++this._on===1&&(this.prevScope=xs,xs=this)}off(){this._on>0&&--this._on===0&&(xs=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(this.effects.length=0,t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const l=this.parent.scopes.pop();l&&l!==this&&(this.parent.scopes[this.index]=l,l.index=this.index)}this.parent=void 0}}}function s2(){return xs}let Ze;const Bp=new WeakSet;class Tb{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,xs&&xs.active&&xs.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Bp.has(this)&&(Bp.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Rb(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Sg(this),Ib(this);const e=Ze,t=xn;Ze=this,xn=!0;try{return this.fn()}finally{Pb(this),Ze=e,xn=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)z0(e);this.deps=this.depsTail=void 0,Sg(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Bp.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){im(this)&&this.run()}get dirty(){return im(this)}}let Mb=0,Tu,Mu;function Rb(g,e=!1){if(g.flags|=8,e){g.next=Mu,Mu=g;return}g.next=Tu,Tu=g}function j0(){Mb++}function B0(){if(--Mb>0)return;if(Mu){let e=Mu;for(Mu=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let g;for(;Tu;){let e=Tu;for(Tu=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){g||(g=r)}e=t}}if(g)throw g}function Ib(g){for(let e=g.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Pb(g){let e,t=g.depsTail,r=t;for(;r;){const l=r.prevDep;r.version===-1?(r===t&&(t=l),z0(r),n2(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=l}g.deps=e,g.depsTail=t}function im(g){for(let e=g.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Ob(e.dep.computed)||e.dep.version!==e.version))return!0;return!!g._dirty}function Ob(g){if(g.flags&4&&!(g.flags&16)||(g.flags&=-17,g.globalVersion===Nu)||(g.globalVersion=Nu,!g.isSSR&&g.flags&128&&(!g.deps&&!g._dirty||!im(g))))return;g.flags|=2;const e=g.dep,t=Ze,r=xn;Ze=g,xn=!0;try{Ib(g);const l=g.fn(g._value);(e.version===0||Ba(l,g._value))&&(g.flags|=128,g._value=l,e.version++)}catch(l){throw e.version++,l}finally{Ze=t,xn=r,Pb(g),g.flags&=-3}}function z0(g,e=!1){const{dep:t,prevSub:r,nextSub:l}=g;if(r&&(r.nextSub=l,g.prevSub=void 0),l&&(l.prevSub=r,g.nextSub=void 0),t.subs===g&&(t.subs=r,!r&&t.computed)){t.computed.flags&=-5;for(let i=t.computed.deps;i;i=i.nextDep)z0(i,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function n2(g){const{prevDep:e,nextDep:t}=g;e&&(e.nextDep=t,g.prevDep=void 0),t&&(t.prevDep=e,g.nextDep=void 0)}let xn=!0;const Nb=[];function Ui(){Nb.push(xn),xn=!1}function Vi(){const g=Nb.pop();xn=g===void 0?!0:g}function Sg(g){const{cleanup:e}=g;if(g.cleanup=void 0,e){const t=Ze;Ze=void 0;try{e()}finally{Ze=t}}}let Nu=0;class i2{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class $0{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Ze||!xn||Ze===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==Ze)t=this.activeLink=new i2(Ze,this),Ze.deps?(t.prevDep=Ze.depsTail,Ze.depsTail.nextDep=t,Ze.depsTail=t):Ze.deps=Ze.depsTail=t,Db(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const r=t.nextDep;r.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=r),t.prevDep=Ze.depsTail,t.nextDep=void 0,Ze.depsTail.nextDep=t,Ze.depsTail=t,Ze.deps===t&&(Ze.deps=r)}return t}trigger(e){this.version++,Nu++,this.notify(e)}notify(e){j0();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{B0()}}}function Db(g){if(g.dep.sc++,g.sub.flags&4){const e=g.dep.computed;if(e&&!g.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Db(r)}const t=g.dep.subs;t!==g&&(g.prevSub=t,t&&(t.nextSub=g)),g.dep.subs=g}}const am=new WeakMap,ml=Symbol(""),om=Symbol(""),Du=Symbol("");function Jr(g,e,t){if(xn&&Ze){let r=am.get(g);r||am.set(g,r=new Map);let l=r.get(t);l||(r.set(t,l=new $0),l.map=r,l.key=t),l.track()}}function ji(g,e,t,r,l,i){const s=am.get(g);if(!s){Nu++;return}const a=o=>{o&&o.trigger()};if(j0(),e==="clear")s.forEach(a);else{const o=re(g),n=o&&L0(t);if(o&&t==="length"){const c=Number(r);s.forEach((d,u)=>{(u==="length"||u===Du||!Sn(u)&&u>=c)&&a(d)})}else switch((t!==void 0||s.has(void 0))&&a(s.get(t)),n&&a(s.get(Du)),e){case"add":o?n&&a(s.get("length")):(a(s.get(ml)),jl(g)&&a(s.get(om)));break;case"delete":o||(a(s.get(ml)),jl(g)&&a(s.get(om)));break;case"set":jl(g)&&a(s.get(ml));break}}B0()}function kl(g){const e=De(g);return e===g?e:(Jr(e,"iterate",Du),rn(g)?e:e.map(Ur))}function vp(g){return Jr(g=De(g),"iterate",Du),g}const a2={__proto__:null,[Symbol.iterator](){return zp(this,Symbol.iterator,Ur)},concat(...g){return kl(this).concat(...g.map(e=>re(e)?kl(e):e))},entries(){return zp(this,"entries",g=>(g[1]=Ur(g[1]),g))},every(g,e){return ei(this,"every",g,e,void 0,arguments)},filter(g,e){return ei(this,"filter",g,e,t=>t.map(Ur),arguments)},find(g,e){return ei(this,"find",g,e,Ur,arguments)},findIndex(g,e){return ei(this,"findIndex",g,e,void 0,arguments)},findLast(g,e){return ei(this,"findLast",g,e,Ur,arguments)},findLastIndex(g,e){return ei(this,"findLastIndex",g,e,void 0,arguments)},forEach(g,e){return ei(this,"forEach",g,e,void 0,arguments)},includes(...g){return $p(this,"includes",g)},indexOf(...g){return $p(this,"indexOf",g)},join(g){return kl(this).join(g)},lastIndexOf(...g){return $p(this,"lastIndexOf",g)},map(g,e){return ei(this,"map",g,e,void 0,arguments)},pop(){return eu(this,"pop")},push(...g){return eu(this,"push",g)},reduce(g,...e){return Ag(this,"reduce",g,e)},reduceRight(g,...e){return Ag(this,"reduceRight",g,e)},shift(){return eu(this,"shift")},some(g,e){return ei(this,"some",g,e,void 0,arguments)},splice(...g){return eu(this,"splice",g)},toReversed(){return kl(this).toReversed()},toSorted(g){return kl(this).toSorted(g)},toSpliced(...g){return kl(this).toSpliced(...g)},unshift(...g){return eu(this,"unshift",g)},values(){return zp(this,"values",Ur)}};function zp(g,e,t){const r=vp(g),l=r[e]();return r!==g&&!rn(g)&&(l._next=l.next,l.next=()=>{const i=l._next();return i.value&&(i.value=t(i.value)),i}),l}const o2=Array.prototype;function ei(g,e,t,r,l,i){const s=vp(g),a=s!==g&&!rn(g),o=s[e];if(o!==o2[e]){const d=o.apply(g,i);return a?Ur(d):d}let n=t;s!==g&&(a?n=function(d,u){return t.call(this,Ur(d),u,g)}:t.length>2&&(n=function(d,u){return t.call(this,d,u,g)}));const c=o.call(s,n,r);return a&&l?l(c):c}function Ag(g,e,t,r){const l=vp(g);let i=t;return l!==g&&(rn(g)?t.length>3&&(i=function(s,a,o){return t.call(this,s,a,o,g)}):i=function(s,a,o){return t.call(this,s,Ur(a),o,g)}),l[e](i,...r)}function $p(g,e,t){const r=De(g);Jr(r,"iterate",Du);const l=r[e](...t);return(l===-1||l===!1)&&W0(t[0])?(t[0]=De(t[0]),r[e](...t)):l}function eu(g,e,t=[]){Ui(),j0();const r=De(g)[e].apply(g,t);return B0(),Vi(),r}const l2=O0("__proto__,__v_isRef,__isVue"),Lb=new Set(Object.getOwnPropertyNames(Symbol).filter(g=>g!=="arguments"&&g!=="caller").map(g=>Symbol[g]).filter(Sn));function c2(g){Sn(g)||(g=String(g));const e=De(this);return Jr(e,"has",g),e.hasOwnProperty(g)}class Fb{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,r){if(t==="__v_skip")return e.__v_skip;const l=this._isReadonly,i=this._isShallow;if(t==="__v_isReactive")return!l;if(t==="__v_isReadonly")return l;if(t==="__v_isShallow")return i;if(t==="__v_raw")return r===(l?i?v2:$b:i?zb:Bb).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const s=re(e);if(!l){let o;if(s&&(o=a2[t]))return o;if(t==="hasOwnProperty")return c2}const a=Reflect.get(e,t,ts(e)?e:r);return(Sn(t)?Lb.has(t):l2(t))||(l||Jr(e,"get",t),i)?a:ts(a)?s&&L0(t)?a:a.value:Qe(a)?l?Hb(a):U0(a):a}}class jb extends Fb{constructor(e=!1){super(!1,e)}set(e,t,r,l){let i=e[t];if(!this._isShallow){const o=$a(i);if(!rn(r)&&!$a(r)&&(i=De(i),r=De(r)),!re(e)&&ts(i)&&!ts(r))return o?!1:(i.value=r,!0)}const s=re(e)&&L0(t)?Number(t)<e.length:Le(e,t),a=Reflect.set(e,t,r,ts(e)?e:l);return e===De(l)&&(s?Ba(r,i)&&ji(e,"set",t,r):ji(e,"add",t,r)),a}deleteProperty(e,t){const r=Le(e,t);e[t];const l=Reflect.deleteProperty(e,t);return l&&r&&ji(e,"delete",t,void 0),l}has(e,t){const r=Reflect.has(e,t);return(!Sn(t)||!Lb.has(t))&&Jr(e,"has",t),r}ownKeys(e){return Jr(e,"iterate",re(e)?"length":ml),Reflect.ownKeys(e)}}class u2 extends Fb{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const h2=new jb,d2=new u2,f2=new jb(!0);const lm=g=>g,Nd=g=>Reflect.getPrototypeOf(g);function p2(g,e,t){return function(...r){const l=this.__v_raw,i=De(l),s=jl(i),a=g==="entries"||g===Symbol.iterator&&s,o=g==="keys"&&s,n=l[g](...r),c=t?lm:e?Mf:Ur;return!e&&Jr(i,"iterate",o?om:ml),{next(){const{value:d,done:u}=n.next();return u?{value:d,done:u}:{value:a?[c(d[0]),c(d[1])]:c(d),done:u}},[Symbol.iterator](){return this}}}}function Dd(g){return function(...e){return g==="delete"?!1:g==="clear"?void 0:this}}function m2(g,e){const t={get(l){const i=this.__v_raw,s=De(i),a=De(l);g||(Ba(l,a)&&Jr(s,"get",l),Jr(s,"get",a));const{has:o}=Nd(s),n=e?lm:g?Mf:Ur;if(o.call(s,l))return n(i.get(l));if(o.call(s,a))return n(i.get(a));i!==s&&i.get(l)},get size(){const l=this.__v_raw;return!g&&Jr(De(l),"iterate",ml),Reflect.get(l,"size",l)},has(l){const i=this.__v_raw,s=De(i),a=De(l);return g||(Ba(l,a)&&Jr(s,"has",l),Jr(s,"has",a)),l===a?i.has(l):i.has(l)||i.has(a)},forEach(l,i){const s=this,a=s.__v_raw,o=De(a),n=e?lm:g?Mf:Ur;return!g&&Jr(o,"iterate",ml),a.forEach((c,d)=>l.call(i,n(c),n(d),s))}};return ms(t,g?{add:Dd("add"),set:Dd("set"),delete:Dd("delete"),clear:Dd("clear")}:{add(l){!e&&!rn(l)&&!$a(l)&&(l=De(l));const i=De(this);return Nd(i).has.call(i,l)||(i.add(l),ji(i,"add",l,l)),this},set(l,i){!e&&!rn(i)&&!$a(i)&&(i=De(i));const s=De(this),{has:a,get:o}=Nd(s);let n=a.call(s,l);n||(l=De(l),n=a.call(s,l));const c=o.call(s,l);return s.set(l,i),n?Ba(i,c)&&ji(s,"set",l,i):ji(s,"add",l,i),this},delete(l){const i=De(this),{has:s,get:a}=Nd(i);let o=s.call(i,l);o||(l=De(l),o=s.call(i,l)),a&&a.call(i,l);const n=i.delete(l);return o&&ji(i,"delete",l,void 0),n},clear(){const l=De(this),i=l.size!==0,s=l.clear();return i&&ji(l,"clear",void 0,void 0),s}}),["keys","values","entries",Symbol.iterator].forEach(l=>{t[l]=p2(l,g,e)}),t}function H0(g,e){const t=m2(g,e);return(r,l,i)=>l==="__v_isReactive"?!g:l==="__v_isReadonly"?g:l==="__v_raw"?r:Reflect.get(Le(t,l)&&l in r?t:r,l,i)}const g2={get:H0(!1,!1)},b2={get:H0(!1,!0)},y2={get:H0(!0,!1)};const Bb=new WeakMap,zb=new WeakMap,$b=new WeakMap,v2=new WeakMap;function w2(g){switch(g){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function _2(g){return g.__v_skip||!Object.isExtensible(g)?0:w2(Wv(g))}function U0(g){return $a(g)?g:V0(g,!1,h2,g2,Bb)}function x2(g){return V0(g,!1,f2,b2,zb)}function Hb(g){return V0(g,!0,d2,y2,$b)}function V0(g,e,t,r,l){if(!Qe(g)||g.__v_raw&&!(e&&g.__v_isReactive))return g;const i=_2(g);if(i===0)return g;const s=l.get(g);if(s)return s;const a=new Proxy(g,i===2?r:t);return l.set(g,a),a}function Bl(g){return $a(g)?Bl(g.__v_raw):!!(g&&g.__v_isReactive)}function $a(g){return!!(g&&g.__v_isReadonly)}function rn(g){return!!(g&&g.__v_isShallow)}function W0(g){return g?!!g.__v_raw:!1}function De(g){const e=g&&g.__v_raw;return e?De(e):g}function S2(g){return!Le(g,"__v_skip")&&Object.isExtensible(g)&&nm(g,"__v_skip",!0),g}const Ur=g=>Qe(g)?U0(g):g,Mf=g=>Qe(g)?Hb(g):g;function ts(g){return g?g.__v_isRef===!0:!1}function Me(g){return A2(g,!1)}function A2(g,e){return ts(g)?g:new k2(g,e)}class k2{constructor(e,t){this.dep=new $0,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:De(e),this._value=t?e:Ur(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,r=this.__v_isShallow||rn(e)||$a(e);e=r?e:De(e),Ba(e,t)&&(this._rawValue=e,this._value=r?e:Ur(e),this.dep.trigger())}}function E2(g){return ts(g)?g.value:g}const C2={get:(g,e,t)=>e==="__v_raw"?g:E2(Reflect.get(g,e,t)),set:(g,e,t,r)=>{const l=g[e];return ts(l)&&!ts(t)?(l.value=t,!0):Reflect.set(g,e,t,r)}};function Ub(g){return Bl(g)?g:new Proxy(g,C2)}class T2{constructor(e,t,r){this.fn=e,this.setter=t,this._value=void 0,this.dep=new $0(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Nu-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Ze!==this)return Rb(this,!0),!0}get value(){const e=this.dep.track();return Ob(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function M2(g,e,t=!1){let r,l;return ue(g)?r=g:(r=g.get,l=g.set),new T2(r,l,t)}const Ld={},Rf=new WeakMap;let Ja;function R2(g,e=!1,t=Ja){if(t){let r=Rf.get(t);r||Rf.set(t,r=[]),r.push(g)}}function I2(g,e,t=Ke){const{immediate:r,deep:l,once:i,scheduler:s,augmentJob:a,call:o}=t,n=E=>l?E:rn(E)||l===!1||l===0?Bi(E,1):Bi(E);let c,d,u,h,p=!1,m=!1;if(ts(g)?(d=()=>g.value,p=rn(g)):Bl(g)?(d=()=>n(g),p=!0):re(g)?(m=!0,p=g.some(E=>Bl(E)||rn(E)),d=()=>g.map(E=>{if(ts(E))return E.value;if(Bl(E))return n(E);if(ue(E))return o?o(E,2):E()})):ue(g)?e?d=o?()=>o(g,2):g:d=()=>{if(u){Ui();try{u()}finally{Vi()}}const E=Ja;Ja=c;try{return o?o(g,3,[h]):g(h)}finally{Ja=E}}:d=Yn,e&&l){const E=d,M=l===!0?1/0:l;d=()=>Bi(E(),M)}const f=s2(),b=()=>{c.stop(),f&&f.active&&D0(f.effects,c)};if(i&&e){const E=e;e=(...M)=>{E(...M),b()}}let y=m?new Array(g.length).fill(Ld):Ld;const _=E=>{if(!(!(c.flags&1)||!c.dirty&&!E))if(e){const M=c.run();if(l||p||(m?M.some((D,z)=>Ba(D,y[z])):Ba(M,y))){u&&u();const D=Ja;Ja=c;try{const z=[M,y===Ld?void 0:m&&y[0]===Ld?[]:y,h];y=M,o?o(e,3,z):e(...z)}finally{Ja=D}}}else c.run()};return a&&a(_),c=new Tb(d),c.scheduler=s?()=>s(_,!1):_,h=E=>R2(E,!1,c),u=c.onStop=()=>{const E=Rf.get(c);if(E){if(o)o(E,4);else for(const M of E)M();Rf.delete(c)}},e?r?_(!0):y=c.run():s?s(_.bind(null,!0),!0):c.run(),b.pause=c.pause.bind(c),b.resume=c.resume.bind(c),b.stop=b,b}function Bi(g,e=1/0,t){if(e<=0||!Qe(g)||g.__v_skip||(t=t||new Set,t.has(g)))return g;if(t.add(g),e--,ts(g))Bi(g.value,e,t);else if(re(g))for(let r=0;r<g.length;r++)Bi(g[r],e,t);else if(pp(g)||jl(g))g.forEach(r=>{Bi(r,e,t)});else if(Ab(g)){for(const r in g)Bi(g[r],e,t);for(const r of Object.getOwnPropertySymbols(g))Object.prototype.propertyIsEnumerable.call(g,r)&&Bi(g[r],e,t)}return g}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function yd(g,e,t,r){try{return r?g(...r):g()}catch(l){wp(l,e,t)}}function Zn(g,e,t,r){if(ue(g)){const l=yd(g,e,t,r);return l&&xb(l)&&l.catch(i=>{wp(i,e,t)}),l}if(re(g)){const l=[];for(let i=0;i<g.length;i++)l.push(Zn(g[i],e,t,r));return l}}function wp(g,e,t,r=!0){const l=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:s}=e&&e.appContext.config||Ke;if(e){let a=e.parent;const o=e.proxy,n=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const c=a.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](g,o,n)===!1)return}a=a.parent}if(i){Ui(),yd(i,null,10,[g,o,n]),Vi();return}}P2(g,t,l,r,s)}function P2(g,e,t,r=!0,l=!1){if(l)throw g;console.error(g)}const hs=[];let Rn=-1;const zl=[];let Ji=null,El=0;const Vb=Promise.resolve();let If=null;function Ru(g){const e=If||Vb;return g?e.then(this?g.bind(this):g):e}function O2(g){let e=Rn+1,t=hs.length;for(;e<t;){const r=e+t>>>1,l=hs[r],i=Lu(l);i<g||i===g&&l.flags&2?e=r+1:t=r}return e}function q0(g){if(!(g.flags&1)){const e=Lu(g),t=hs[hs.length-1];!t||!(g.flags&2)&&e>=Lu(t)?hs.push(g):hs.splice(O2(e),0,g),g.flags|=1,Wb()}}function Wb(){If||(If=Vb.then(Xb))}function N2(g){re(g)?zl.push(...g):Ji&&g.id===-1?Ji.splice(El+1,0,g):g.flags&1||(zl.push(g),g.flags|=1),Wb()}function kg(g,e,t=Rn+1){for(;t<hs.length;t++){const r=hs[t];if(r&&r.flags&2){if(g&&r.id!==g.uid)continue;hs.splice(t,1),t--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function qb(g){if(zl.length){const e=[...new Set(zl)].sort((t,r)=>Lu(t)-Lu(r));if(zl.length=0,Ji){Ji.push(...e);return}for(Ji=e,El=0;El<Ji.length;El++){const t=Ji[El];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}Ji=null,El=0}}const Lu=g=>g.id==null?g.flags&2?-1:1/0:g.id;function Xb(g){try{for(Rn=0;Rn<hs.length;Rn++){const e=hs[Rn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),yd(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Rn<hs.length;Rn++){const e=hs[Rn];e&&(e.flags&=-2)}Rn=-1,hs.length=0,qb(),If=null,(hs.length||zl.length)&&Xb()}}let Wr=null,Gb=null;function Pf(g){const e=Wr;return Wr=g,Gb=g&&g.type.__scopeId||null,e}function ta(g,e=Wr,t){if(!e||g._n)return g;const r=(...l)=>{r._d&&Dg(-1);const i=Pf(e);let s;try{s=g(...l)}finally{Pf(i),r._d&&Dg(1)}return s};return r._n=!0,r._c=!0,r._d=!0,r}function tn(g,e){if(Wr===null)return g;const t=Ap(Wr),r=g.dirs||(g.dirs=[]);for(let l=0;l<e.length;l++){let[i,s,a,o=Ke]=e[l];i&&(ue(i)&&(i={mounted:i,updated:i}),i.deep&&Bi(s),r.push({dir:i,instance:t,value:s,oldValue:void 0,arg:a,modifiers:o}))}return g}function Ya(g,e,t,r){const l=g.dirs,i=e&&e.dirs;for(let s=0;s<l.length;s++){const a=l[s];i&&(a.oldValue=i[s].value);let o=a.dir[r];o&&(Ui(),Zn(o,t,8,[g.el,a,g,e]),Vi())}}const D2=Symbol("_vte"),L2=g=>g.__isTeleport;function X0(g,e){g.shapeFlag&6&&g.component?(g.transition=e,X0(g.component.subTree,e)):g.shapeFlag&128?(g.ssContent.transition=e.clone(g.ssContent),g.ssFallback.transition=e.clone(g.ssFallback)):g.transition=e}function Kb(g){g.ids=[g.ids[0]+g.ids[2]+++"-",0,0]}function Iu(g,e,t,r,l=!1){if(re(g)){g.forEach((p,m)=>Iu(p,e&&(re(e)?e[m]:e),t,r,l));return}if($l(r)&&!l){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Iu(g,e,t,r.component.subTree);return}const i=r.shapeFlag&4?Ap(r.component):r.el,s=l?null:i,{i:a,r:o}=g,n=e&&e.r,c=a.refs===Ke?a.refs={}:a.refs,d=a.setupState,u=De(d),h=d===Ke?()=>!1:p=>Le(u,p);if(n!=null&&n!==o&&(vr(n)?(c[n]=null,h(n)&&(d[n]=null)):ts(n)&&(n.value=null)),ue(o))yd(o,a,12,[s,c]);else{const p=vr(o),m=ts(o);if(p||m){const f=()=>{if(g.f){const b=p?h(o)?d[o]:c[o]:o.value;l?re(b)&&D0(b,i):re(b)?b.includes(i)||b.push(i):p?(c[o]=[i],h(o)&&(d[o]=c[o])):(o.value=[i],g.k&&(c[g.k]=o.value))}else p?(c[o]=s,h(o)&&(d[o]=s)):m&&(o.value=s,g.k&&(c[g.k]=s))};s?(f.id=-1,ks(f,t)):f()}}}bp().requestIdleCallback;bp().cancelIdleCallback;const $l=g=>!!g.type.__asyncLoader,Yb=g=>g.type.__isKeepAlive;function F2(g,e){Zb(g,"a",e)}function j2(g,e){Zb(g,"da",e)}function Zb(g,e,t=Qr){const r=g.__wdc||(g.__wdc=()=>{let l=t;for(;l;){if(l.isDeactivated)return;l=l.parent}return g()});if(_p(e,r,t),t){let l=t.parent;for(;l&&l.parent;)Yb(l.parent.vnode)&&B2(r,e,t,l),l=l.parent}}function B2(g,e,t,r){const l=_p(e,g,r,!0);G0(()=>{D0(r[e],l)},t)}function _p(g,e,t=Qr,r=!1){if(t){const l=t[g]||(t[g]=[]),i=e.__weh||(e.__weh=(...s)=>{Ui();const a=wd(t),o=Zn(e,t,g,s);return a(),Vi(),o});return r?l.unshift(i):l.push(i),i}}const Xi=g=>(e,t=Qr)=>{(!ju||g==="sp")&&_p(g,(...r)=>e(...r),t)},z2=Xi("bm"),vd=Xi("m"),$2=Xi("bu"),H2=Xi("u"),U2=Xi("bum"),G0=Xi("um"),V2=Xi("sp"),W2=Xi("rtg"),q2=Xi("rtc");function X2(g,e=Qr){_p("ec",g,e)}const G2="components";function K2(g,e){return Z2(G2,g,!0,e)||g}const Y2=Symbol.for("v-ndc");function Z2(g,e,t=!0,r=!1){const l=Wr||Qr;if(l){const i=l.type;{const a=jw(i,!1);if(a&&(a===e||a===nn(e)||a===gp(nn(e))))return i}const s=Eg(l[g]||i[g],e)||Eg(l.appContext[g],e);return!s&&r?i:s}}function Eg(g,e){return g&&(g[e]||g[nn(e)]||g[gp(nn(e))])}function wn(g,e,t,r){let l;const i=t,s=re(g);if(s||vr(g)){const a=s&&Bl(g);let o=!1,n=!1;a&&(o=!rn(g),n=$a(g),g=vp(g)),l=new Array(g.length);for(let c=0,d=g.length;c<d;c++)l[c]=e(o?n?Mf(Ur(g[c])):Ur(g[c]):g[c],c,void 0,i)}else if(typeof g=="number"){l=new Array(g);for(let a=0;a<g;a++)l[a]=e(a+1,a,void 0,i)}else if(Qe(g))if(g[Symbol.iterator])l=Array.from(g,(a,o)=>e(a,o,void 0,i));else{const a=Object.keys(g);l=new Array(a.length);for(let o=0,n=a.length;o<n;o++){const c=a[o];l[o]=e(g[c],c,o,i)}}else l=[];return l}function Of(g,e,t={},r,l){if(Wr.ce||Wr.parent&&$l(Wr.parent)&&Wr.parent.ce)return e!=="default"&&(t.name=e),Ut(),Zc(Ge,null,[mr("slot",t,r)],64);let i=g[e];i&&i._c&&(i._d=!1),Ut();const s=i&&Jb(i(t)),a=t.key||s&&s.key,o=Zc(Ge,{key:(a&&!Sn(a)?a:`_${e}`)+""},s||[],s&&g._===1?64:-2);return!l&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),i&&i._c&&(i._d=!0),o}function Jb(g){return g.some(e=>Z0(e)?!(e.type===Wi||e.type===Ge&&!Jb(e.children)):!0)?g:null}const cm=g=>g?v1(g)?Ap(g):cm(g.parent):null,Pu=ms(Object.create(null),{$:g=>g,$el:g=>g.vnode.el,$data:g=>g.data,$props:g=>g.props,$attrs:g=>g.attrs,$slots:g=>g.slots,$refs:g=>g.refs,$parent:g=>cm(g.parent),$root:g=>cm(g.root),$host:g=>g.ce,$emit:g=>g.emit,$options:g=>t1(g),$forceUpdate:g=>g.f||(g.f=()=>{q0(g.update)}),$nextTick:g=>g.n||(g.n=Ru.bind(g.proxy)),$watch:g=>vw.bind(g)}),Hp=(g,e)=>g!==Ke&&!g.__isScriptSetup&&Le(g,e),J2={get({_:g},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:r,data:l,props:i,accessCache:s,type:a,appContext:o}=g;let n;if(e[0]!=="$"){const h=s[e];if(h!==void 0)switch(h){case 1:return r[e];case 2:return l[e];case 4:return t[e];case 3:return i[e]}else{if(Hp(r,e))return s[e]=1,r[e];if(l!==Ke&&Le(l,e))return s[e]=2,l[e];if((n=g.propsOptions[0])&&Le(n,e))return s[e]=3,i[e];if(t!==Ke&&Le(t,e))return s[e]=4,t[e];um&&(s[e]=0)}}const c=Pu[e];let d,u;if(c)return e==="$attrs"&&Jr(g.attrs,"get",""),c(g);if((d=a.__cssModules)&&(d=d[e]))return d;if(t!==Ke&&Le(t,e))return s[e]=4,t[e];if(u=o.config.globalProperties,Le(u,e))return u[e]},set({_:g},e,t){const{data:r,setupState:l,ctx:i}=g;return Hp(l,e)?(l[e]=t,!0):r!==Ke&&Le(r,e)?(r[e]=t,!0):Le(g.props,e)||e[0]==="$"&&e.slice(1)in g?!1:(i[e]=t,!0)},has({_:{data:g,setupState:e,accessCache:t,ctx:r,appContext:l,propsOptions:i}},s){let a;return!!t[s]||g!==Ke&&Le(g,s)||Hp(e,s)||(a=i[0])&&Le(a,s)||Le(r,s)||Le(Pu,s)||Le(l.config.globalProperties,s)},defineProperty(g,e,t){return t.get!=null?g._.accessCache[e]=0:Le(t,"value")&&this.set(g,e,t.value,null),Reflect.defineProperty(g,e,t)}};function Cg(g){return re(g)?g.reduce((e,t)=>(e[t]=null,e),{}):g}let um=!0;function Q2(g){const e=t1(g),t=g.proxy,r=g.ctx;um=!1,e.beforeCreate&&Tg(e.beforeCreate,g,"bc");const{data:l,computed:i,methods:s,watch:a,provide:o,inject:n,created:c,beforeMount:d,mounted:u,beforeUpdate:h,updated:p,activated:m,deactivated:f,beforeDestroy:b,beforeUnmount:y,destroyed:_,unmounted:E,render:M,renderTracked:D,renderTriggered:z,errorCaptured:O,serverPrefetch:N,expose:B,inheritAttrs:H,components:$,directives:C,filters:R}=e;if(n&&tw(n,r,null),s)for(const w in s){const x=s[w];ue(x)&&(r[w]=x.bind(t))}if(l){const w=l.call(t,t);Qe(w)&&(g.data=U0(w))}if(um=!0,i)for(const w in i){const x=i[w],S=ue(x)?x.bind(t,t):ue(x.get)?x.get.bind(t,t):Yn,T=!ue(x)&&ue(x.set)?x.set.bind(t):Yn,L=Vr({get:S,set:T});Object.defineProperty(r,w,{enumerable:!0,configurable:!0,get:()=>L.value,set:j=>L.value=j})}if(a)for(const w in a)Qb(a[w],r,t,w);if(o){const w=ue(o)?o.call(t):o;Reflect.ownKeys(w).forEach(x=>{aw(x,w[x])})}c&&Tg(c,g,"c");function v(w,x){re(x)?x.forEach(S=>w(S.bind(t))):x&&w(x.bind(t))}if(v(z2,d),v(vd,u),v($2,h),v(H2,p),v(F2,m),v(j2,f),v(X2,O),v(q2,D),v(W2,z),v(U2,y),v(G0,E),v(V2,N),re(B))if(B.length){const w=g.exposed||(g.exposed={});B.forEach(x=>{Object.defineProperty(w,x,{get:()=>t[x],set:S=>t[x]=S})})}else g.exposed||(g.exposed={});M&&g.render===Yn&&(g.render=M),H!=null&&(g.inheritAttrs=H),$&&(g.components=$),C&&(g.directives=C),N&&Kb(g)}function tw(g,e,t=Yn){re(g)&&(g=hm(g));for(const r in g){const l=g[r];let i;Qe(l)?"default"in l?i=qd(l.from||r,l.default,!0):i=qd(l.from||r):i=qd(l),ts(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:s=>i.value=s}):e[r]=i}}function Tg(g,e,t){Zn(re(g)?g.map(r=>r.bind(e.proxy)):g.bind(e.proxy),e,t)}function Qb(g,e,t,r){let l=r.includes(".")?f1(t,r):()=>t[r];if(vr(g)){const i=e[g];ue(i)&&Ul(l,i)}else if(ue(g))Ul(l,g.bind(t));else if(Qe(g))if(re(g))g.forEach(i=>Qb(i,e,t,r));else{const i=ue(g.handler)?g.handler.bind(t):e[g.handler];ue(i)&&Ul(l,i,g)}}function t1(g){const e=g.type,{mixins:t,extends:r}=e,{mixins:l,optionsCache:i,config:{optionMergeStrategies:s}}=g.appContext,a=i.get(e);let o;return a?o=a:!l.length&&!t&&!r?o=e:(o={},l.length&&l.forEach(n=>Nf(o,n,s,!0)),Nf(o,e,s)),Qe(e)&&i.set(e,o),o}function Nf(g,e,t,r=!1){const{mixins:l,extends:i}=e;i&&Nf(g,i,t,!0),l&&l.forEach(s=>Nf(g,s,t,!0));for(const s in e)if(!(r&&s==="expose")){const a=ew[s]||t&&t[s];g[s]=a?a(g[s],e[s]):e[s]}return g}const ew={data:Mg,props:Rg,emits:Rg,methods:ou,computed:ou,beforeCreate:ss,created:ss,beforeMount:ss,mounted:ss,beforeUpdate:ss,updated:ss,beforeDestroy:ss,beforeUnmount:ss,destroyed:ss,unmounted:ss,activated:ss,deactivated:ss,errorCaptured:ss,serverPrefetch:ss,components:ou,directives:ou,watch:sw,provide:Mg,inject:rw};function Mg(g,e){return e?g?function(){return ms(ue(g)?g.call(this,this):g,ue(e)?e.call(this,this):e)}:e:g}function rw(g,e){return ou(hm(g),hm(e))}function hm(g){if(re(g)){const e={};for(let t=0;t<g.length;t++)e[g[t]]=g[t];return e}return g}function ss(g,e){return g?[...new Set([].concat(g,e))]:e}function ou(g,e){return g?ms(Object.create(null),g,e):e}function Rg(g,e){return g?re(g)&&re(e)?[...new Set([...g,...e])]:ms(Object.create(null),Cg(g),Cg(e??{})):e}function sw(g,e){if(!g)return e;if(!e)return g;const t=ms(Object.create(null),g);for(const r in e)t[r]=ss(g[r],e[r]);return t}function e1(){return{app:null,config:{isNativeTag:Uv,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let nw=0;function iw(g,e){return function(r,l=null){ue(r)||(r=ms({},r)),l!=null&&!Qe(l)&&(l=null);const i=e1(),s=new WeakSet,a=[];let o=!1;const n=i.app={_uid:nw++,_component:r,_props:l,_container:null,_context:i,_instance:null,version:zw,get config(){return i.config},set config(c){},use(c,...d){return s.has(c)||(c&&ue(c.install)?(s.add(c),c.install(n,...d)):ue(c)&&(s.add(c),c(n,...d))),n},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),n},component(c,d){return d?(i.components[c]=d,n):i.components[c]},directive(c,d){return d?(i.directives[c]=d,n):i.directives[c]},mount(c,d,u){if(!o){const h=n._ceVNode||mr(r,l);return h.appContext=i,u===!0?u="svg":u===!1&&(u=void 0),g(h,c,u),o=!0,n._container=c,c.__vue_app__=n,Ap(h.component)}},onUnmount(c){a.push(c)},unmount(){o&&(Zn(a,n._instance,16),g(null,n._container),delete n._container.__vue_app__)},provide(c,d){return i.provides[c]=d,n},runWithContext(c){const d=Hl;Hl=n;try{return c()}finally{Hl=d}}};return n}}let Hl=null;function aw(g,e){if(Qr){let t=Qr.provides;const r=Qr.parent&&Qr.parent.provides;r===t&&(t=Qr.provides=Object.create(r)),t[g]=e}}function qd(g,e,t=!1){const r=Qr||Wr;if(r||Hl){let l=Hl?Hl._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(l&&g in l)return l[g];if(arguments.length>1)return t&&ue(e)?e.call(r&&r.proxy):e}}const r1={},s1=()=>Object.create(r1),n1=g=>Object.getPrototypeOf(g)===r1;function ow(g,e,t,r=!1){const l={},i=s1();g.propsDefaults=Object.create(null),i1(g,e,l,i);for(const s in g.propsOptions[0])s in l||(l[s]=void 0);t?g.props=r?l:x2(l):g.type.props?g.props=l:g.props=i,g.attrs=i}function lw(g,e,t,r){const{props:l,attrs:i,vnode:{patchFlag:s}}=g,a=De(l),[o]=g.propsOptions;let n=!1;if((r||s>0)&&!(s&16)){if(s&8){const c=g.vnode.dynamicProps;for(let d=0;d<c.length;d++){let u=c[d];if(xp(g.emitsOptions,u))continue;const h=e[u];if(o)if(Le(i,u))h!==i[u]&&(i[u]=h,n=!0);else{const p=nn(u);l[p]=dm(o,a,p,h,g,!1)}else h!==i[u]&&(i[u]=h,n=!0)}}}else{i1(g,e,l,i)&&(n=!0);let c;for(const d in a)(!e||!Le(e,d)&&((c=Xa(d))===d||!Le(e,c)))&&(o?t&&(t[d]!==void 0||t[c]!==void 0)&&(l[d]=dm(o,a,d,void 0,g,!0)):delete l[d]);if(i!==a)for(const d in i)(!e||!Le(e,d))&&(delete i[d],n=!0)}n&&ji(g.attrs,"set","")}function i1(g,e,t,r){const[l,i]=g.propsOptions;let s=!1,a;if(e)for(let o in e){if(Cu(o))continue;const n=e[o];let c;l&&Le(l,c=nn(o))?!i||!i.includes(c)?t[c]=n:(a||(a={}))[c]=n:xp(g.emitsOptions,o)||(!(o in r)||n!==r[o])&&(r[o]=n,s=!0)}if(i){const o=De(t),n=a||Ke;for(let c=0;c<i.length;c++){const d=i[c];t[d]=dm(l,o,d,n[d],g,!Le(n,d))}}return s}function dm(g,e,t,r,l,i){const s=g[t];if(s!=null){const a=Le(s,"default");if(a&&r===void 0){const o=s.default;if(s.type!==Function&&!s.skipFactory&&ue(o)){const{propsDefaults:n}=l;if(t in n)r=n[t];else{const c=wd(l);r=n[t]=o.call(null,e),c()}}else r=o;l.ce&&l.ce._setProp(t,r)}s[0]&&(i&&!a?r=!1:s[1]&&(r===""||r===Xa(t))&&(r=!0))}return r}const cw=new WeakMap;function a1(g,e,t=!1){const r=t?cw:e.propsCache,l=r.get(g);if(l)return l;const i=g.props,s={},a=[];let o=!1;if(!ue(g)){const c=d=>{o=!0;const[u,h]=a1(d,e,!0);ms(s,u),h&&a.push(...h)};!t&&e.mixins.length&&e.mixins.forEach(c),g.extends&&c(g.extends),g.mixins&&g.mixins.forEach(c)}if(!i&&!o)return Qe(g)&&r.set(g,Fl),Fl;if(re(i))for(let c=0;c<i.length;c++){const d=nn(i[c]);Ig(d)&&(s[d]=Ke)}else if(i)for(const c in i){const d=nn(c);if(Ig(d)){const u=i[c],h=s[d]=re(u)||ue(u)?{type:u}:ms({},u),p=h.type;let m=!1,f=!0;if(re(p))for(let b=0;b<p.length;++b){const y=p[b],_=ue(y)&&y.name;if(_==="Boolean"){m=!0;break}else _==="String"&&(f=!1)}else m=ue(p)&&p.name==="Boolean";h[0]=m,h[1]=f,(m||Le(h,"default"))&&a.push(d)}}const n=[s,a];return Qe(g)&&r.set(g,n),n}function Ig(g){return g[0]!=="$"&&!Cu(g)}const K0=g=>g[0]==="_"||g==="$stable",Y0=g=>re(g)?g.map(Gn):[Gn(g)],uw=(g,e,t)=>{if(e._n)return e;const r=ta((...l)=>Y0(e(...l)),t);return r._c=!1,r},o1=(g,e,t)=>{const r=g._ctx;for(const l in g){if(K0(l))continue;const i=g[l];if(ue(i))e[l]=uw(l,i,r);else if(i!=null){const s=Y0(i);e[l]=()=>s}}},l1=(g,e)=>{const t=Y0(e);g.slots.default=()=>t},c1=(g,e,t)=>{for(const r in e)(t||!K0(r))&&(g[r]=e[r])},hw=(g,e,t)=>{const r=g.slots=s1();if(g.vnode.shapeFlag&32){const l=e.__;l&&nm(r,"__",l,!0);const i=e._;i?(c1(r,e,t),t&&nm(r,"_",i,!0)):o1(e,r)}else e&&l1(g,e)},dw=(g,e,t)=>{const{vnode:r,slots:l}=g;let i=!0,s=Ke;if(r.shapeFlag&32){const a=e._;a?t&&a===1?i=!1:c1(l,e,t):(i=!e.$stable,o1(e,l)),s=e}else e&&(l1(g,e),s={default:1});if(i)for(const a in l)!K0(a)&&s[a]==null&&delete l[a]},ks=Ew;function fw(g){return pw(g)}function pw(g,e){const t=bp();t.__VUE__=!0;const{insert:r,remove:l,patchProp:i,createElement:s,createText:a,createComment:o,setText:n,setElementText:c,parentNode:d,nextSibling:u,setScopeId:h=Yn,insertStaticContent:p}=g,m=(G,q,J,it=null,nt=null,Z=null,st=void 0,rt=null,lt=!!q.dynamicChildren)=>{if(G===q)return;G&&!ru(G,q)&&(it=X(G),j(G,nt,Z,!0),G=null),q.patchFlag===-2&&(lt=!1,q.dynamicChildren=null);const{type:at,ref:ct,shapeFlag:ut}=q;switch(at){case Sp:f(G,q,J,it);break;case Wi:b(G,q,J,it);break;case Xd:G==null&&y(q,J,it,st);break;case Ge:$(G,q,J,it,nt,Z,st,rt,lt);break;default:ut&1?M(G,q,J,it,nt,Z,st,rt,lt):ut&6?C(G,q,J,it,nt,Z,st,rt,lt):(ut&64||ut&128)&&at.process(G,q,J,it,nt,Z,st,rt,lt,V)}ct!=null&&nt?Iu(ct,G&&G.ref,Z,q||G,!q):ct==null&&G&&G.ref!=null&&Iu(G.ref,null,Z,G,!0)},f=(G,q,J,it)=>{if(G==null)r(q.el=a(q.children),J,it);else{const nt=q.el=G.el;q.children!==G.children&&n(nt,q.children)}},b=(G,q,J,it)=>{G==null?r(q.el=o(q.children||""),J,it):q.el=G.el},y=(G,q,J,it)=>{[G.el,G.anchor]=p(G.children,q,J,it,G.el,G.anchor)},_=({el:G,anchor:q},J,it)=>{let nt;for(;G&&G!==q;)nt=u(G),r(G,J,it),G=nt;r(q,J,it)},E=({el:G,anchor:q})=>{let J;for(;G&&G!==q;)J=u(G),l(G),G=J;l(q)},M=(G,q,J,it,nt,Z,st,rt,lt)=>{q.type==="svg"?st="svg":q.type==="math"&&(st="mathml"),G==null?D(q,J,it,nt,Z,st,rt,lt):N(G,q,nt,Z,st,rt,lt)},D=(G,q,J,it,nt,Z,st,rt)=>{let lt,at;const{props:ct,shapeFlag:ut,transition:dt,dirs:gt}=G;if(lt=G.el=s(G.type,Z,ct&&ct.is,ct),ut&8?c(lt,G.children):ut&16&&O(G.children,lt,null,it,nt,Up(G,Z),st,rt),gt&&Ya(G,null,it,"created"),z(lt,G,G.scopeId,st,it),ct){for(const _t in ct)_t!=="value"&&!Cu(_t)&&i(lt,_t,null,ct[_t],Z,it);"value"in ct&&i(lt,"value",null,ct.value,Z),(at=ct.onVnodeBeforeMount)&&En(at,it,G)}gt&&Ya(G,null,it,"beforeMount");const vt=mw(nt,dt);vt&&dt.beforeEnter(lt),r(lt,q,J),((at=ct&&ct.onVnodeMounted)||vt||gt)&&ks(()=>{at&&En(at,it,G),vt&&dt.enter(lt),gt&&Ya(G,null,it,"mounted")},nt)},z=(G,q,J,it,nt)=>{if(J&&h(G,J),it)for(let Z=0;Z<it.length;Z++)h(G,it[Z]);if(nt){let Z=nt.subTree;if(q===Z||m1(Z.type)&&(Z.ssContent===q||Z.ssFallback===q)){const st=nt.vnode;z(G,st,st.scopeId,st.slotScopeIds,nt.parent)}}},O=(G,q,J,it,nt,Z,st,rt,lt=0)=>{for(let at=lt;at<G.length;at++){const ct=G[at]=rt?Qi(G[at]):Gn(G[at]);m(null,ct,q,J,it,nt,Z,st,rt)}},N=(G,q,J,it,nt,Z,st)=>{const rt=q.el=G.el;let{patchFlag:lt,dynamicChildren:at,dirs:ct}=q;lt|=G.patchFlag&16;const ut=G.props||Ke,dt=q.props||Ke;let gt;if(J&&Za(J,!1),(gt=dt.onVnodeBeforeUpdate)&&En(gt,J,q,G),ct&&Ya(q,G,J,"beforeUpdate"),J&&Za(J,!0),(ut.innerHTML&&dt.innerHTML==null||ut.textContent&&dt.textContent==null)&&c(rt,""),at?B(G.dynamicChildren,at,rt,J,it,Up(q,nt),Z):st||x(G,q,rt,null,J,it,Up(q,nt),Z,!1),lt>0){if(lt&16)H(rt,ut,dt,J,nt);else if(lt&2&&ut.class!==dt.class&&i(rt,"class",null,dt.class,nt),lt&4&&i(rt,"style",ut.style,dt.style,nt),lt&8){const vt=q.dynamicProps;for(let _t=0;_t<vt.length;_t++){const wt=vt[_t],Ot=ut[wt],Pt=dt[wt];(Pt!==Ot||wt==="value")&&i(rt,wt,Ot,Pt,nt,J)}}lt&1&&G.children!==q.children&&c(rt,q.children)}else!st&&at==null&&H(rt,ut,dt,J,nt);((gt=dt.onVnodeUpdated)||ct)&&ks(()=>{gt&&En(gt,J,q,G),ct&&Ya(q,G,J,"updated")},it)},B=(G,q,J,it,nt,Z,st)=>{for(let rt=0;rt<q.length;rt++){const lt=G[rt],at=q[rt],ct=lt.el&&(lt.type===Ge||!ru(lt,at)||lt.shapeFlag&198)?d(lt.el):J;m(lt,at,ct,null,it,nt,Z,st,!0)}},H=(G,q,J,it,nt)=>{if(q!==J){if(q!==Ke)for(const Z in q)!Cu(Z)&&!(Z in J)&&i(G,Z,q[Z],null,nt,it);for(const Z in J){if(Cu(Z))continue;const st=J[Z],rt=q[Z];st!==rt&&Z!=="value"&&i(G,Z,rt,st,nt,it)}"value"in J&&i(G,"value",q.value,J.value,nt)}},$=(G,q,J,it,nt,Z,st,rt,lt)=>{const at=q.el=G?G.el:a(""),ct=q.anchor=G?G.anchor:a("");let{patchFlag:ut,dynamicChildren:dt,slotScopeIds:gt}=q;gt&&(rt=rt?rt.concat(gt):gt),G==null?(r(at,J,it),r(ct,J,it),O(q.children||[],J,ct,nt,Z,st,rt,lt)):ut>0&&ut&64&&dt&&G.dynamicChildren?(B(G.dynamicChildren,dt,J,nt,Z,st,rt),(q.key!=null||nt&&q===nt.subTree)&&u1(G,q,!0)):x(G,q,J,ct,nt,Z,st,rt,lt)},C=(G,q,J,it,nt,Z,st,rt,lt)=>{q.slotScopeIds=rt,G==null?q.shapeFlag&512?nt.ctx.activate(q,J,it,st,lt):R(q,J,it,nt,Z,st,lt):k(G,q,lt)},R=(G,q,J,it,nt,Z,st)=>{const rt=G.component=Ow(G,it,nt);if(Yb(G)&&(rt.ctx.renderer=V),Nw(rt,!1,st),rt.asyncDep){if(nt&&nt.registerDep(rt,v,st),!G.el){const lt=rt.subTree=mr(Wi);b(null,lt,q,J)}}else v(rt,G,q,J,nt,Z,st)},k=(G,q,J)=>{const it=q.component=G.component;if(Aw(G,q,J))if(it.asyncDep&&!it.asyncResolved){w(it,q,J);return}else it.next=q,it.update();else q.el=G.el,it.vnode=q},v=(G,q,J,it,nt,Z,st)=>{const rt=()=>{if(G.isMounted){let{next:ut,bu:dt,u:gt,parent:vt,vnode:_t}=G;{const jt=h1(G);if(jt){ut&&(ut.el=_t.el,w(G,ut,st)),jt.asyncDep.then(()=>{G.isUnmounted||rt()});return}}let wt=ut,Ot;Za(G,!1),ut?(ut.el=_t.el,w(G,ut,st)):ut=_t,dt&&Wd(dt),(Ot=ut.props&&ut.props.onVnodeBeforeUpdate)&&En(Ot,vt,ut,_t),Za(G,!0);const Pt=Og(G),Dt=G.subTree;G.subTree=Pt,m(Dt,Pt,d(Dt.el),X(Dt),G,nt,Z),ut.el=Pt.el,wt===null&&kw(G,Pt.el),gt&&ks(gt,nt),(Ot=ut.props&&ut.props.onVnodeUpdated)&&ks(()=>En(Ot,vt,ut,_t),nt)}else{let ut;const{el:dt,props:gt}=q,{bm:vt,m:_t,parent:wt,root:Ot,type:Pt}=G,Dt=$l(q);Za(G,!1),vt&&Wd(vt),!Dt&&(ut=gt&&gt.onVnodeBeforeMount)&&En(ut,wt,q),Za(G,!0);{Ot.ce&&Ot.ce._def.shadowRoot!==!1&&Ot.ce._injectChildStyle(Pt);const jt=G.subTree=Og(G);m(null,jt,J,it,G,nt,Z),q.el=jt.el}if(_t&&ks(_t,nt),!Dt&&(ut=gt&&gt.onVnodeMounted)){const jt=q;ks(()=>En(ut,wt,jt),nt)}(q.shapeFlag&256||wt&&$l(wt.vnode)&&wt.vnode.shapeFlag&256)&&G.a&&ks(G.a,nt),G.isMounted=!0,q=J=it=null}};G.scope.on();const lt=G.effect=new Tb(rt);G.scope.off();const at=G.update=lt.run.bind(lt),ct=G.job=lt.runIfDirty.bind(lt);ct.i=G,ct.id=G.uid,lt.scheduler=()=>q0(ct),Za(G,!0),at()},w=(G,q,J)=>{q.component=G;const it=G.vnode.props;G.vnode=q,G.next=null,lw(G,q.props,it,J),dw(G,q.children,J),Ui(),kg(G),Vi()},x=(G,q,J,it,nt,Z,st,rt,lt=!1)=>{const at=G&&G.children,ct=G?G.shapeFlag:0,ut=q.children,{patchFlag:dt,shapeFlag:gt}=q;if(dt>0){if(dt&128){T(at,ut,J,it,nt,Z,st,rt,lt);return}else if(dt&256){S(at,ut,J,it,nt,Z,st,rt,lt);return}}gt&8?(ct&16&&F(at,nt,Z),ut!==at&&c(J,ut)):ct&16?gt&16?T(at,ut,J,it,nt,Z,st,rt,lt):F(at,nt,Z,!0):(ct&8&&c(J,""),gt&16&&O(ut,J,it,nt,Z,st,rt,lt))},S=(G,q,J,it,nt,Z,st,rt,lt)=>{G=G||Fl,q=q||Fl;const at=G.length,ct=q.length,ut=Math.min(at,ct);let dt;for(dt=0;dt<ut;dt++){const gt=q[dt]=lt?Qi(q[dt]):Gn(q[dt]);m(G[dt],gt,J,null,nt,Z,st,rt,lt)}at>ct?F(G,nt,Z,!0,!1,ut):O(q,J,it,nt,Z,st,rt,lt,ut)},T=(G,q,J,it,nt,Z,st,rt,lt)=>{let at=0;const ct=q.length;let ut=G.length-1,dt=ct-1;for(;at<=ut&&at<=dt;){const gt=G[at],vt=q[at]=lt?Qi(q[at]):Gn(q[at]);if(ru(gt,vt))m(gt,vt,J,null,nt,Z,st,rt,lt);else break;at++}for(;at<=ut&&at<=dt;){const gt=G[ut],vt=q[dt]=lt?Qi(q[dt]):Gn(q[dt]);if(ru(gt,vt))m(gt,vt,J,null,nt,Z,st,rt,lt);else break;ut--,dt--}if(at>ut){if(at<=dt){const gt=dt+1,vt=gt<ct?q[gt].el:it;for(;at<=dt;)m(null,q[at]=lt?Qi(q[at]):Gn(q[at]),J,vt,nt,Z,st,rt,lt),at++}}else if(at>dt)for(;at<=ut;)j(G[at],nt,Z,!0),at++;else{const gt=at,vt=at,_t=new Map;for(at=vt;at<=dt;at++){const kt=q[at]=lt?Qi(q[at]):Gn(q[at]);kt.key!=null&&_t.set(kt.key,at)}let wt,Ot=0;const Pt=dt-vt+1;let Dt=!1,jt=0;const Mt=new Array(Pt);for(at=0;at<Pt;at++)Mt[at]=0;for(at=gt;at<=ut;at++){const kt=G[at];if(Ot>=Pt){j(kt,nt,Z,!0);continue}let Nt;if(kt.key!=null)Nt=_t.get(kt.key);else for(wt=vt;wt<=dt;wt++)if(Mt[wt-vt]===0&&ru(kt,q[wt])){Nt=wt;break}Nt===void 0?j(kt,nt,Z,!0):(Mt[Nt-vt]=at+1,Nt>=jt?jt=Nt:Dt=!0,m(kt,q[Nt],J,null,nt,Z,st,rt,lt),Ot++)}const St=Dt?gw(Mt):Fl;for(wt=St.length-1,at=Pt-1;at>=0;at--){const kt=vt+at,Nt=q[kt],Lt=kt+1<ct?q[kt+1].el:it;Mt[at]===0?m(null,Nt,J,Lt,nt,Z,st,rt,lt):Dt&&(wt<0||at!==St[wt]?L(Nt,J,Lt,2):wt--)}}},L=(G,q,J,it,nt=null)=>{const{el:Z,type:st,transition:rt,children:lt,shapeFlag:at}=G;if(at&6){L(G.component.subTree,q,J,it);return}if(at&128){G.suspense.move(q,J,it);return}if(at&64){st.move(G,q,J,V);return}if(st===Ge){r(Z,q,J);for(let ut=0;ut<lt.length;ut++)L(lt[ut],q,J,it);r(G.anchor,q,J);return}if(st===Xd){_(G,q,J);return}if(it!==2&&at&1&&rt)if(it===0)rt.beforeEnter(Z),r(Z,q,J),ks(()=>rt.enter(Z),nt);else{const{leave:ut,delayLeave:dt,afterLeave:gt}=rt,vt=()=>{G.ctx.isUnmounted?l(Z):r(Z,q,J)},_t=()=>{ut(Z,()=>{vt(),gt&&gt()})};dt?dt(Z,vt,_t):_t()}else r(Z,q,J)},j=(G,q,J,it=!1,nt=!1)=>{const{type:Z,props:st,ref:rt,children:lt,dynamicChildren:at,shapeFlag:ct,patchFlag:ut,dirs:dt,cacheIndex:gt}=G;if(ut===-2&&(nt=!1),rt!=null&&(Ui(),Iu(rt,null,J,G,!0),Vi()),gt!=null&&(q.renderCache[gt]=void 0),ct&256){q.ctx.deactivate(G);return}const vt=ct&1&&dt,_t=!$l(G);let wt;if(_t&&(wt=st&&st.onVnodeBeforeUnmount)&&En(wt,q,G),ct&6)Y(G.component,J,it);else{if(ct&128){G.suspense.unmount(J,it);return}vt&&Ya(G,null,q,"beforeUnmount"),ct&64?G.type.remove(G,q,J,V,it):at&&!at.hasOnce&&(Z!==Ge||ut>0&&ut&64)?F(at,q,J,!1,!0):(Z===Ge&&ut&384||!nt&&ct&16)&&F(lt,q,J),it&&U(G)}(_t&&(wt=st&&st.onVnodeUnmounted)||vt)&&ks(()=>{wt&&En(wt,q,G),vt&&Ya(G,null,q,"unmounted")},J)},U=G=>{const{type:q,el:J,anchor:it,transition:nt}=G;if(q===Ge){W(J,it);return}if(q===Xd){E(G);return}const Z=()=>{l(J),nt&&!nt.persisted&&nt.afterLeave&&nt.afterLeave()};if(G.shapeFlag&1&&nt&&!nt.persisted){const{leave:st,delayLeave:rt}=nt,lt=()=>st(J,Z);rt?rt(G.el,Z,lt):lt()}else Z()},W=(G,q)=>{let J;for(;G!==q;)J=u(G),l(G),G=J;l(q)},Y=(G,q,J)=>{const{bum:it,scope:nt,job:Z,subTree:st,um:rt,m:lt,a:at,parent:ct,slots:{__:ut}}=G;Pg(lt),Pg(at),it&&Wd(it),ct&&re(ut)&&ut.forEach(dt=>{ct.renderCache[dt]=void 0}),nt.stop(),Z&&(Z.flags|=8,j(st,G,q,J)),rt&&ks(rt,q),ks(()=>{G.isUnmounted=!0},q),q&&q.pendingBranch&&!q.isUnmounted&&G.asyncDep&&!G.asyncResolved&&G.suspenseId===q.pendingId&&(q.deps--,q.deps===0&&q.resolve())},F=(G,q,J,it=!1,nt=!1,Z=0)=>{for(let st=Z;st<G.length;st++)j(G[st],q,J,it,nt)},X=G=>{if(G.shapeFlag&6)return X(G.component.subTree);if(G.shapeFlag&128)return G.suspense.next();const q=u(G.anchor||G.el),J=q&&q[D2];return J?u(J):q};let P=!1;const I=(G,q,J)=>{G==null?q._vnode&&j(q._vnode,null,null,!0):m(q._vnode||null,G,q,null,null,null,J),q._vnode=G,P||(P=!0,kg(),qb(),P=!1)},V={p:m,um:j,m:L,r:U,mt:R,mc:O,pc:x,pbc:B,n:X,o:g};return{render:I,hydrate:void 0,createApp:iw(I)}}function Up({type:g,props:e},t){return t==="svg"&&g==="foreignObject"||t==="mathml"&&g==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function Za({effect:g,job:e},t){t?(g.flags|=32,e.flags|=4):(g.flags&=-33,e.flags&=-5)}function mw(g,e){return(!g||g&&!g.pendingBranch)&&e&&!e.persisted}function u1(g,e,t=!1){const r=g.children,l=e.children;if(re(r)&&re(l))for(let i=0;i<r.length;i++){const s=r[i];let a=l[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=l[i]=Qi(l[i]),a.el=s.el),!t&&a.patchFlag!==-2&&u1(s,a)),a.type===Sp&&(a.el=s.el),a.type===Wi&&!a.el&&(a.el=s.el)}}function gw(g){const e=g.slice(),t=[0];let r,l,i,s,a;const o=g.length;for(r=0;r<o;r++){const n=g[r];if(n!==0){if(l=t[t.length-1],g[l]<n){e[r]=l,t.push(r);continue}for(i=0,s=t.length-1;i<s;)a=i+s>>1,g[t[a]]<n?i=a+1:s=a;n<g[t[i]]&&(i>0&&(e[r]=t[i-1]),t[i]=r)}}for(i=t.length,s=t[i-1];i-- >0;)t[i]=s,s=e[s];return t}function h1(g){const e=g.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:h1(e)}function Pg(g){if(g)for(let e=0;e<g.length;e++)g[e].flags|=8}const bw=Symbol.for("v-scx"),yw=()=>qd(bw);function Ul(g,e,t){return d1(g,e,t)}function d1(g,e,t=Ke){const{immediate:r,deep:l,flush:i,once:s}=t,a=ms({},t),o=e&&r||!e&&i!=="post";let n;if(ju){if(i==="sync"){const h=yw();n=h.__watcherHandles||(h.__watcherHandles=[])}else if(!o){const h=()=>{};return h.stop=Yn,h.resume=Yn,h.pause=Yn,h}}const c=Qr;a.call=(h,p,m)=>Zn(h,c,p,m);let d=!1;i==="post"?a.scheduler=h=>{ks(h,c&&c.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(h,p)=>{p?h():q0(h)}),a.augmentJob=h=>{e&&(h.flags|=4),d&&(h.flags|=2,c&&(h.id=c.uid,h.i=c))};const u=I2(g,e,a);return ju&&(n?n.push(u):o&&u()),u}function vw(g,e,t){const r=this.proxy,l=vr(g)?g.includes(".")?f1(r,g):()=>r[g]:g.bind(r,r);let i;ue(e)?i=e:(i=e.handler,t=e);const s=wd(this),a=d1(l,i.bind(r),t);return s(),a}function f1(g,e){const t=e.split(".");return()=>{let r=g;for(let l=0;l<t.length&&r;l++)r=r[t[l]];return r}}const ww=(g,e)=>e==="modelValue"||e==="model-value"?g.modelModifiers:g[`${e}Modifiers`]||g[`${nn(e)}Modifiers`]||g[`${Xa(e)}Modifiers`];function _w(g,e,...t){if(g.isUnmounted)return;const r=g.vnode.props||Ke;let l=t;const i=e.startsWith("update:"),s=i&&ww(r,e.slice(7));s&&(s.trim&&(l=t.map(c=>vr(c)?c.trim():c)),s.number&&(l=t.map(Tf)));let a,o=r[a=Fp(e)]||r[a=Fp(nn(e))];!o&&i&&(o=r[a=Fp(Xa(e))]),o&&Zn(o,g,6,l);const n=r[a+"Once"];if(n){if(!g.emitted)g.emitted={};else if(g.emitted[a])return;g.emitted[a]=!0,Zn(n,g,6,l)}}function p1(g,e,t=!1){const r=e.emitsCache,l=r.get(g);if(l!==void 0)return l;const i=g.emits;let s={},a=!1;if(!ue(g)){const o=n=>{const c=p1(n,e,!0);c&&(a=!0,ms(s,c))};!t&&e.mixins.length&&e.mixins.forEach(o),g.extends&&o(g.extends),g.mixins&&g.mixins.forEach(o)}return!i&&!a?(Qe(g)&&r.set(g,null),null):(re(i)?i.forEach(o=>s[o]=null):ms(s,i),Qe(g)&&r.set(g,s),s)}function xp(g,e){return!g||!fp(e)?!1:(e=e.slice(2).replace(/Once$/,""),Le(g,e[0].toLowerCase()+e.slice(1))||Le(g,Xa(e))||Le(g,e))}function Og(g){const{type:e,vnode:t,proxy:r,withProxy:l,propsOptions:[i],slots:s,attrs:a,emit:o,render:n,renderCache:c,props:d,data:u,setupState:h,ctx:p,inheritAttrs:m}=g,f=Pf(g);let b,y;try{if(t.shapeFlag&4){const E=l||r,M=E;b=Gn(n.call(M,E,c,d,h,u,p)),y=a}else{const E=e;b=Gn(E.length>1?E(d,{attrs:a,slots:s,emit:o}):E(d,null)),y=e.props?a:xw(a)}}catch(E){Ou.length=0,wp(E,g,1),b=mr(Wi)}let _=b;if(y&&m!==!1){const E=Object.keys(y),{shapeFlag:M}=_;E.length&&M&7&&(i&&E.some(N0)&&(y=Sw(y,i)),_=Jc(_,y,!1,!0))}return t.dirs&&(_=Jc(_,null,!1,!0),_.dirs=_.dirs?_.dirs.concat(t.dirs):t.dirs),t.transition&&X0(_,t.transition),b=_,Pf(f),b}const xw=g=>{let e;for(const t in g)(t==="class"||t==="style"||fp(t))&&((e||(e={}))[t]=g[t]);return e},Sw=(g,e)=>{const t={};for(const r in g)(!N0(r)||!(r.slice(9)in e))&&(t[r]=g[r]);return t};function Aw(g,e,t){const{props:r,children:l,component:i}=g,{props:s,children:a,patchFlag:o}=e,n=i.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&o>=0){if(o&1024)return!0;if(o&16)return r?Ng(r,s,n):!!s;if(o&8){const c=e.dynamicProps;for(let d=0;d<c.length;d++){const u=c[d];if(s[u]!==r[u]&&!xp(n,u))return!0}}}else return(l||a)&&(!a||!a.$stable)?!0:r===s?!1:r?s?Ng(r,s,n):!0:!!s;return!1}function Ng(g,e,t){const r=Object.keys(e);if(r.length!==Object.keys(g).length)return!0;for(let l=0;l<r.length;l++){const i=r[l];if(e[i]!==g[i]&&!xp(t,i))return!0}return!1}function kw({vnode:g,parent:e},t){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===g&&(r.el=g.el),r===g)(g=e.vnode).el=t,e=e.parent;else break}}const m1=g=>g.__isSuspense;function Ew(g,e){e&&e.pendingBranch?re(g)?e.effects.push(...g):e.effects.push(g):N2(g)}const Ge=Symbol.for("v-fgt"),Sp=Symbol.for("v-txt"),Wi=Symbol.for("v-cmt"),Xd=Symbol.for("v-stc"),Ou=[];let Vs=null;function Ut(g=!1){Ou.push(Vs=g?null:[])}function Cw(){Ou.pop(),Vs=Ou[Ou.length-1]||null}let Fu=1;function Dg(g,e=!1){Fu+=g,g<0&&Vs&&e&&(Vs.hasOnce=!0)}function g1(g){return g.dynamicChildren=Fu>0?Vs||Fl:null,Cw(),Fu>0&&Vs&&Vs.push(g),g}function Zt(g,e,t,r,l,i){return g1(ft(g,e,t,r,l,i,!0))}function Zc(g,e,t,r,l){return g1(mr(g,e,t,r,l,!0))}function Z0(g){return g?g.__v_isVNode===!0:!1}function ru(g,e){return g.type===e.type&&g.key===e.key}const b1=({key:g})=>g??null,Gd=({ref:g,ref_key:e,ref_for:t})=>(typeof g=="number"&&(g=""+g),g!=null?vr(g)||ts(g)||ue(g)?{i:Wr,r:g,k:e,f:!!t}:g:null);function ft(g,e=null,t=null,r=0,l=null,i=g===Ge?0:1,s=!1,a=!1){const o={__v_isVNode:!0,__v_skip:!0,type:g,props:e,key:e&&b1(e),ref:e&&Gd(e),scopeId:Gb,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:l,dynamicChildren:null,appContext:null,ctx:Wr};return a?(J0(o,t),i&128&&g.normalize(o)):t&&(o.shapeFlag|=vr(t)?8:16),Fu>0&&!s&&Vs&&(o.patchFlag>0||i&6)&&o.patchFlag!==32&&Vs.push(o),o}const mr=Tw;function Tw(g,e=null,t=null,r=0,l=null,i=!1){if((!g||g===Y2)&&(g=Wi),Z0(g)){const a=Jc(g,e,!0);return t&&J0(a,t),Fu>0&&!i&&Vs&&(a.shapeFlag&6?Vs[Vs.indexOf(g)]=a:Vs.push(a)),a.patchFlag=-2,a}if(Bw(g)&&(g=g.__vccOpts),e){e=Mw(e);let{class:a,style:o}=e;a&&!vr(a)&&(e.class=Cr(a)),Qe(o)&&(W0(o)&&!re(o)&&(o=ms({},o)),e.style=F0(o))}const s=vr(g)?1:m1(g)?128:L2(g)?64:Qe(g)?4:ue(g)?2:0;return ft(g,e,t,r,l,s,i,!0)}function Mw(g){return g?W0(g)||n1(g)?ms({},g):g:null}function Jc(g,e,t=!1,r=!1){const{props:l,ref:i,patchFlag:s,children:a,transition:o}=g,n=e?Rw(l||{},e):l,c={__v_isVNode:!0,__v_skip:!0,type:g.type,props:n,key:n&&b1(n),ref:e&&e.ref?t&&i?re(i)?i.concat(Gd(e)):[i,Gd(e)]:Gd(e):i,scopeId:g.scopeId,slotScopeIds:g.slotScopeIds,children:a,target:g.target,targetStart:g.targetStart,targetAnchor:g.targetAnchor,staticCount:g.staticCount,shapeFlag:g.shapeFlag,patchFlag:e&&g.type!==Ge?s===-1?16:s|16:s,dynamicProps:g.dynamicProps,dynamicChildren:g.dynamicChildren,appContext:g.appContext,dirs:g.dirs,transition:o,component:g.component,suspense:g.suspense,ssContent:g.ssContent&&Jc(g.ssContent),ssFallback:g.ssFallback&&Jc(g.ssFallback),el:g.el,anchor:g.anchor,ctx:g.ctx,ce:g.ce};return o&&r&&X0(c,o.clone(c)),c}function io(g=" ",e=0){return mr(Sp,null,g,e)}function y1(g,e){const t=mr(Xd,null,g);return t.staticCount=e,t}function hr(g="",e=!1){return e?(Ut(),Zc(Wi,null,g)):mr(Wi,null,g)}function Gn(g){return g==null||typeof g=="boolean"?mr(Wi):re(g)?mr(Ge,null,g.slice()):Z0(g)?Qi(g):mr(Sp,null,String(g))}function Qi(g){return g.el===null&&g.patchFlag!==-1||g.memo?g:Jc(g)}function J0(g,e){let t=0;const{shapeFlag:r}=g;if(e==null)e=null;else if(re(e))t=16;else if(typeof e=="object")if(r&65){const l=e.default;l&&(l._c&&(l._d=!1),J0(g,l()),l._c&&(l._d=!0));return}else{t=32;const l=e._;!l&&!n1(e)?e._ctx=Wr:l===3&&Wr&&(Wr.slots._===1?e._=1:(e._=2,g.patchFlag|=1024))}else ue(e)?(e={default:e,_ctx:Wr},t=32):(e=String(e),r&64?(t=16,e=[io(e)]):t=8);g.children=e,g.shapeFlag|=t}function Rw(...g){const e={};for(let t=0;t<g.length;t++){const r=g[t];for(const l in r)if(l==="class")e.class!==r.class&&(e.class=Cr([e.class,r.class]));else if(l==="style")e.style=F0([e.style,r.style]);else if(fp(l)){const i=e[l],s=r[l];s&&i!==s&&!(re(i)&&i.includes(s))&&(e[l]=i?[].concat(i,s):s)}else l!==""&&(e[l]=r[l])}return e}function En(g,e,t,r=null){Zn(g,e,7,[t,r])}const Iw=e1();let Pw=0;function Ow(g,e,t){const r=g.type,l=(e?e.appContext:g.appContext)||Iw,i={uid:Pw++,vnode:g,type:r,parent:e,appContext:l,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new r2(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(l.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:a1(r,l),emitsOptions:p1(r,l),emit:null,emitted:null,propsDefaults:Ke,inheritAttrs:r.inheritAttrs,ctx:Ke,data:Ke,props:Ke,attrs:Ke,slots:Ke,refs:Ke,setupState:Ke,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=_w.bind(null,i),g.ce&&g.ce(i),i}let Qr=null,Df,fm;{const g=bp(),e=(t,r)=>{let l;return(l=g[t])||(l=g[t]=[]),l.push(r),i=>{l.length>1?l.forEach(s=>s(i)):l[0](i)}};Df=e("__VUE_INSTANCE_SETTERS__",t=>Qr=t),fm=e("__VUE_SSR_SETTERS__",t=>ju=t)}const wd=g=>{const e=Qr;return Df(g),g.scope.on(),()=>{g.scope.off(),Df(e)}},Lg=()=>{Qr&&Qr.scope.off(),Df(null)};function v1(g){return g.vnode.shapeFlag&4}let ju=!1;function Nw(g,e=!1,t=!1){e&&fm(e);const{props:r,children:l}=g.vnode,i=v1(g);ow(g,r,i,e),hw(g,l,t||e);const s=i?Dw(g,e):void 0;return e&&fm(!1),s}function Dw(g,e){const t=g.type;g.accessCache=Object.create(null),g.proxy=new Proxy(g.ctx,J2);const{setup:r}=t;if(r){Ui();const l=g.setupContext=r.length>1?Fw(g):null,i=wd(g),s=yd(r,g,0,[g.props,l]),a=xb(s);if(Vi(),i(),(a||g.sp)&&!$l(g)&&Kb(g),a){if(s.then(Lg,Lg),e)return s.then(o=>{Fg(g,o)}).catch(o=>{wp(o,g,0)});g.asyncDep=s}else Fg(g,s)}else w1(g)}function Fg(g,e,t){ue(e)?g.type.__ssrInlineRender?g.ssrRender=e:g.render=e:Qe(e)&&(g.setupState=Ub(e)),w1(g)}function w1(g,e,t){const r=g.type;g.render||(g.render=r.render||Yn);{const l=wd(g);Ui();try{Q2(g)}finally{Vi(),l()}}}const Lw={get(g,e){return Jr(g,"get",""),g[e]}};function Fw(g){const e=t=>{g.exposed=t||{}};return{attrs:new Proxy(g.attrs,Lw),slots:g.slots,emit:g.emit,expose:e}}function Ap(g){return g.exposed?g.exposeProxy||(g.exposeProxy=new Proxy(Ub(S2(g.exposed)),{get(e,t){if(t in e)return e[t];if(t in Pu)return Pu[t](g)},has(e,t){return t in e||t in Pu}})):g.proxy}function jw(g,e=!0){return ue(g)?g.displayName||g.name:g.name||e&&g.__name}function Bw(g){return ue(g)&&"__vccOpts"in g}const Vr=(g,e)=>M2(g,e,ju),zw="3.5.17";/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let pm;const jg=typeof window<"u"&&window.trustedTypes;if(jg)try{pm=jg.createPolicy("vue",{createHTML:g=>g})}catch{}const _1=pm?g=>pm.createHTML(g):g=>g,$w="http://www.w3.org/2000/svg",Hw="http://www.w3.org/1998/Math/MathML",ii=typeof document<"u"?document:null,Bg=ii&&ii.createElement("template"),Uw={insert:(g,e,t)=>{e.insertBefore(g,t||null)},remove:g=>{const e=g.parentNode;e&&e.removeChild(g)},createElement:(g,e,t,r)=>{const l=e==="svg"?ii.createElementNS($w,g):e==="mathml"?ii.createElementNS(Hw,g):t?ii.createElement(g,{is:t}):ii.createElement(g);return g==="select"&&r&&r.multiple!=null&&l.setAttribute("multiple",r.multiple),l},createText:g=>ii.createTextNode(g),createComment:g=>ii.createComment(g),setText:(g,e)=>{g.nodeValue=e},setElementText:(g,e)=>{g.textContent=e},parentNode:g=>g.parentNode,nextSibling:g=>g.nextSibling,querySelector:g=>ii.querySelector(g),setScopeId(g,e){g.setAttribute(e,"")},insertStaticContent(g,e,t,r,l,i){const s=t?t.previousSibling:e.lastChild;if(l&&(l===i||l.nextSibling))for(;e.insertBefore(l.cloneNode(!0),t),!(l===i||!(l=l.nextSibling)););else{Bg.innerHTML=_1(r==="svg"?`<svg>${g}</svg>`:r==="mathml"?`<math>${g}</math>`:g);const a=Bg.content;if(r==="svg"||r==="mathml"){const o=a.firstChild;for(;o.firstChild;)a.appendChild(o.firstChild);a.removeChild(o)}e.insertBefore(a,t)}return[s?s.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},Vw=Symbol("_vtc");function Ww(g,e,t){const r=g[Vw];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?g.removeAttribute("class"):t?g.setAttribute("class",e):g.className=e}const zg=Symbol("_vod"),qw=Symbol("_vsh"),Xw=Symbol(""),Gw=/(^|;)\s*display\s*:/;function Kw(g,e,t){const r=g.style,l=vr(t);let i=!1;if(t&&!l){if(e)if(vr(e))for(const s of e.split(";")){const a=s.slice(0,s.indexOf(":")).trim();t[a]==null&&Kd(r,a,"")}else for(const s in e)t[s]==null&&Kd(r,s,"");for(const s in t)s==="display"&&(i=!0),Kd(r,s,t[s])}else if(l){if(e!==t){const s=r[Xw];s&&(t+=";"+s),r.cssText=t,i=Gw.test(t)}}else e&&g.removeAttribute("style");zg in g&&(g[zg]=i?r.display:"",g[qw]&&(r.display="none"))}const $g=/\s*!important$/;function Kd(g,e,t){if(re(t))t.forEach(r=>Kd(g,e,r));else if(t==null&&(t=""),e.startsWith("--"))g.setProperty(e,t);else{const r=Yw(g,e);$g.test(t)?g.setProperty(Xa(r),t.replace($g,""),"important"):g[r]=t}}const Hg=["Webkit","Moz","ms"],Vp={};function Yw(g,e){const t=Vp[e];if(t)return t;let r=nn(e);if(r!=="filter"&&r in g)return Vp[e]=r;r=gp(r);for(let l=0;l<Hg.length;l++){const i=Hg[l]+r;if(i in g)return Vp[e]=i}return e}const Ug="http://www.w3.org/1999/xlink";function Vg(g,e,t,r,l,i=Qv(e)){r&&e.startsWith("xlink:")?t==null?g.removeAttributeNS(Ug,e.slice(6,e.length)):g.setAttributeNS(Ug,e,t):t==null||i&&!kb(t)?g.removeAttribute(e):g.setAttribute(e,i?"":Sn(t)?String(t):t)}function Wg(g,e,t,r,l){if(e==="innerHTML"||e==="textContent"){t!=null&&(g[e]=e==="innerHTML"?_1(t):t);return}const i=g.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?g.getAttribute("value")||"":g.value,o=t==null?g.type==="checkbox"?"on":"":String(t);(a!==o||!("_value"in g))&&(g.value=o),t==null&&g.removeAttribute(e),g._value=t;return}let s=!1;if(t===""||t==null){const a=typeof g[e];a==="boolean"?t=kb(t):t==null&&a==="string"?(t="",s=!0):a==="number"&&(t=0,s=!0)}try{g[e]=t}catch{}s&&g.removeAttribute(l||e)}function ro(g,e,t,r){g.addEventListener(e,t,r)}function Zw(g,e,t,r){g.removeEventListener(e,t,r)}const qg=Symbol("_vei");function Jw(g,e,t,r,l=null){const i=g[qg]||(g[qg]={}),s=i[e];if(r&&s)s.value=r;else{const[a,o]=Qw(e);if(r){const n=i[e]=r3(r,l);ro(g,a,n,o)}else s&&(Zw(g,a,s,o),i[e]=void 0)}}const Xg=/(?:Once|Passive|Capture)$/;function Qw(g){let e;if(Xg.test(g)){e={};let r;for(;r=g.match(Xg);)g=g.slice(0,g.length-r[0].length),e[r[0].toLowerCase()]=!0}return[g[2]===":"?g.slice(3):Xa(g.slice(2)),e]}let Wp=0;const t3=Promise.resolve(),e3=()=>Wp||(t3.then(()=>Wp=0),Wp=Date.now());function r3(g,e){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;Zn(s3(r,t.value),e,5,[r])};return t.value=g,t.attached=e3(),t}function s3(g,e){if(re(e)){const t=g.stopImmediatePropagation;return g.stopImmediatePropagation=()=>{t.call(g),g._stopped=!0},e.map(r=>l=>!l._stopped&&r&&r(l))}else return e}const Gg=g=>g.charCodeAt(0)===111&&g.charCodeAt(1)===110&&g.charCodeAt(2)>96&&g.charCodeAt(2)<123,n3=(g,e,t,r,l,i)=>{const s=l==="svg";e==="class"?Ww(g,r,s):e==="style"?Kw(g,t,r):fp(e)?N0(e)||Jw(g,e,t,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):i3(g,e,r,s))?(Wg(g,e,r),!g.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Vg(g,e,r,s,i,e!=="value")):g._isVueCE&&(/[A-Z]/.test(e)||!vr(r))?Wg(g,nn(e),r,i,e):(e==="true-value"?g._trueValue=r:e==="false-value"&&(g._falseValue=r),Vg(g,e,r,s))};function i3(g,e,t,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in g&&Gg(e)&&ue(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&g.tagName==="INPUT"||e==="type"&&g.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const l=g.tagName;if(l==="IMG"||l==="VIDEO"||l==="CANVAS"||l==="SOURCE")return!1}return Gg(e)&&vr(t)?!1:e in g}const Lf=g=>{const e=g.props["onUpdate:modelValue"]||!1;return re(e)?t=>Wd(e,t):e};function a3(g){g.target.composing=!0}function Kg(g){const e=g.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Vl=Symbol("_assign"),za={created(g,{modifiers:{lazy:e,trim:t,number:r}},l){g[Vl]=Lf(l);const i=r||l.props&&l.props.type==="number";ro(g,e?"change":"input",s=>{if(s.target.composing)return;let a=g.value;t&&(a=a.trim()),i&&(a=Tf(a)),g[Vl](a)}),t&&ro(g,"change",()=>{g.value=g.value.trim()}),e||(ro(g,"compositionstart",a3),ro(g,"compositionend",Kg),ro(g,"change",Kg))},mounted(g,{value:e}){g.value=e??""},beforeUpdate(g,{value:e,oldValue:t,modifiers:{lazy:r,trim:l,number:i}},s){if(g[Vl]=Lf(s),g.composing)return;const a=(i||g.type==="number")&&!/^0\d/.test(g.value)?Tf(g.value):g.value,o=e??"";a!==o&&(document.activeElement===g&&g.type!=="range"&&(r&&e===t||l&&g.value.trim()===o)||(g.value=o))}},Ff={deep:!0,created(g,{value:e,modifiers:{number:t}},r){const l=pp(e);ro(g,"change",()=>{const i=Array.prototype.filter.call(g.options,s=>s.selected).map(s=>t?Tf(jf(s)):jf(s));g[Vl](g.multiple?l?new Set(i):i:i[0]),g._assigning=!0,Ru(()=>{g._assigning=!1})}),g[Vl]=Lf(r)},mounted(g,{value:e}){Yg(g,e)},beforeUpdate(g,e,t){g[Vl]=Lf(t)},updated(g,{value:e}){g._assigning||Yg(g,e)}};function Yg(g,e){const t=g.multiple,r=re(e);if(!(t&&!r&&!pp(e))){for(let l=0,i=g.options.length;l<i;l++){const s=g.options[l],a=jf(s);if(t)if(r){const o=typeof a;o==="string"||o==="number"?s.selected=e.some(n=>String(n)===String(a)):s.selected=e2(e,a)>-1}else s.selected=e.has(a);else if(yp(jf(s),e)){g.selectedIndex!==l&&(g.selectedIndex=l);return}}!t&&g.selectedIndex!==-1&&(g.selectedIndex=-1)}}function jf(g){return"_value"in g?g._value:g.value}const o3=["ctrl","shift","alt","meta"],l3={stop:g=>g.stopPropagation(),prevent:g=>g.preventDefault(),self:g=>g.target!==g.currentTarget,ctrl:g=>!g.ctrlKey,shift:g=>!g.shiftKey,alt:g=>!g.altKey,meta:g=>!g.metaKey,left:g=>"button"in g&&g.button!==0,middle:g=>"button"in g&&g.button!==1,right:g=>"button"in g&&g.button!==2,exact:(g,e)=>o3.some(t=>g[`${t}Key`]&&!e.includes(t))},Bu=(g,e)=>{const t=g._withMods||(g._withMods={}),r=e.join(".");return t[r]||(t[r]=(l,...i)=>{for(let s=0;s<e.length;s++){const a=l3[e[s]];if(a&&a(l,e))return}return g(l,...i)})},c3={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},u3=(g,e)=>{const t=g._withKeys||(g._withKeys={}),r=e.join(".");return t[r]||(t[r]=l=>{if(!("key"in l))return;const i=Xa(l.key);if(e.some(s=>s===i||c3[s]===i))return g(l)})},h3=ms({patchProp:n3},Uw);let Zg;function d3(){return Zg||(Zg=fw(h3))}const Sx=(...g)=>{const e=d3().createApp(...g),{mount:t}=e;return e.mount=r=>{const l=p3(r);if(!l)return;const i=e._component;!ue(i)&&!i.render&&!i.template&&(i.template=l.innerHTML),l.nodeType===1&&(l.textContent="");const s=t(l,!1,f3(l));return l instanceof Element&&(l.removeAttribute("v-cloak"),l.setAttribute("data-v-app","")),s},e};function f3(g){if(g instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&g instanceof MathMLElement)return"mathml"}function p3(g){return vr(g)?document.querySelector(g):g}var ve=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function m3(g){return g&&g.__esModule&&Object.prototype.hasOwnProperty.call(g,"default")?g.default:g}function Fd(g){throw new Error('Could not dynamically require "'+g+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var qp={exports:{}};/*! ExcelJS 19-10-2023 */var Jg;function g3(){return Jg||(Jg=1,function(g,e){(function(t){g.exports=t()})(function(){return function t(r,l,i){function s(n,c){if(!l[n]){if(!r[n]){var d=typeof Fd=="function"&&Fd;if(!c&&d)return d(n,!0);if(a)return a(n,!0);var u=new Error("Cannot find module '"+n+"'");throw u.code="MODULE_NOT_FOUND",u}var h=l[n]={exports:{}};r[n][0].call(h.exports,function(p){return s(r[n][1][p]||p)},h,h.exports,t,r,l,i)}return l[n].exports}for(var a=typeof Fd=="function"&&Fd,o=0;o<i.length;o++)s(i[o]);return s}({1:[function(t,r,l){const i=t("fs"),s=t("fast-csv"),a=t("dayjs/plugin/customParseFormat"),o=t("dayjs/plugin/utc"),n=t("dayjs").extend(a).extend(o),c=t("../utils/stream-buf"),{fs:{exists:d}}=t("../utils/utils"),u={true:!0,false:!1,"#N/A":{error:"#N/A"},"#REF!":{error:"#REF!"},"#NAME?":{error:"#NAME?"},"#DIV/0!":{error:"#DIV/0!"},"#NULL!":{error:"#NULL!"},"#VALUE!":{error:"#VALUE!"},"#NUM!":{error:"#NUM!"}};r.exports=class{constructor(h){this.workbook=h,this.worksheet=null}async readFile(h,p){if(p=p||{},!await d(h))throw new Error("File not found: "+h);const m=i.createReadStream(h),f=await this.read(m,p);return m.close(),f}read(h,p){return p=p||{},new Promise((m,f)=>{const b=this.workbook.addWorksheet(p.sheetName),y=p.dateFormats||["YYYY-MM-DD[T]HH:mm:ssZ","YYYY-MM-DD[T]HH:mm:ss","MM-DD-YYYY","YYYY-MM-DD"],_=p.map||function(M){if(M==="")return null;const D=Number(M);if(!Number.isNaN(D)&&D!==1/0)return D;const z=y.reduce((N,B)=>{if(N)return N;const H=n(M,B,!0);return H.isValid()?H:null},null);if(z)return new Date(z.valueOf());const O=u[M];return O!==void 0?O:M},E=s.parse(p.parserOptions).on("data",M=>{b.addRow(M.map(_))}).on("end",()=>{E.emit("worksheet",b)});E.on("worksheet",m).on("error",f),h.pipe(E)})}createInputStream(){throw new Error("`CSV#createInputStream` is deprecated. You should use `CSV#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}write(h,p){return new Promise((m,f)=>{p=p||{};const b=this.workbook.getWorksheet(p.sheetName||p.sheetId),y=s.format(p.formatterOptions);h.on("finish",()=>{m()}),y.on("error",f),y.pipe(h);const{dateFormat:_,dateUTC:E}=p,M=p.map||(O=>{if(O){if(O.text||O.hyperlink)return O.hyperlink||O.text||"";if(O.formula||O.result)return O.result||"";if(O instanceof Date)return _?E?n.utc(O).format(_):n(O).format(_):E?n.utc(O).format():n(O).format();if(O.error)return O.error;if(typeof O=="object")return JSON.stringify(O)}return O}),D=p.includeEmptyRows===void 0||p.includeEmptyRows;let z=1;b&&b.eachRow((O,N)=>{if(D)for(;z++<N-1;)y.write([]);const{values:B}=O;B.shift(),y.write(B.map(M)),z=N}),y.end()})}writeFile(h,p){const m={encoding:(p=p||{}).encoding||"utf8"},f=i.createWriteStream(h,m);return this.write(f,p)}async writeBuffer(h){const p=new c;return await this.write(p,h),p.read()}}},{"../utils/stream-buf":24,"../utils/utils":27,dayjs:391,"dayjs/plugin/customParseFormat":392,"dayjs/plugin/utc":393,"fast-csv":424,fs:216}],2:[function(t,r,l){const i=t("../utils/col-cache");class s{constructor(o,n){let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(this.worksheet=o,n)if(typeof n=="string"){const d=i.decodeAddress(n);this.nativeCol=d.col+c,this.nativeColOff=0,this.nativeRow=d.row+c,this.nativeRowOff=0}else n.nativeCol!==void 0?(this.nativeCol=n.nativeCol||0,this.nativeColOff=n.nativeColOff||0,this.nativeRow=n.nativeRow||0,this.nativeRowOff=n.nativeRowOff||0):n.col!==void 0?(this.col=n.col+c,this.row=n.row+c):(this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0);else this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0}static asInstance(o){return o instanceof s||o==null?o:new s(o)}get col(){return this.nativeCol+Math.min(this.colWidth-1,this.nativeColOff)/this.colWidth}set col(o){this.nativeCol=Math.floor(o),this.nativeColOff=Math.floor((o-this.nativeCol)*this.colWidth)}get row(){return this.nativeRow+Math.min(this.rowHeight-1,this.nativeRowOff)/this.rowHeight}set row(o){this.nativeRow=Math.floor(o),this.nativeRowOff=Math.floor((o-this.nativeRow)*this.rowHeight)}get colWidth(){return this.worksheet&&this.worksheet.getColumn(this.nativeCol+1)&&this.worksheet.getColumn(this.nativeCol+1).isCustomWidth?Math.floor(1e4*this.worksheet.getColumn(this.nativeCol+1).width):64e4}get rowHeight(){return this.worksheet&&this.worksheet.getRow(this.nativeRow+1)&&this.worksheet.getRow(this.nativeRow+1).height?Math.floor(1e4*this.worksheet.getRow(this.nativeRow+1).height):18e4}get model(){return{nativeCol:this.nativeCol,nativeColOff:this.nativeColOff,nativeRow:this.nativeRow,nativeRowOff:this.nativeRowOff}}set model(o){this.nativeCol=o.nativeCol,this.nativeColOff=o.nativeColOff,this.nativeRow=o.nativeRow,this.nativeRowOff=o.nativeRowOff}}r.exports=s},{"../utils/col-cache":19}],3:[function(t,r,l){const i=t("../utils/col-cache"),s=t("../utils/under-dash"),a=t("./enums"),{slideFormula:o}=t("../utils/shared-formula"),n=t("./note");class c{constructor(h,p,m){if(!h||!p)throw new Error("A Cell needs a Row");this._row=h,this._column=p,i.validateAddress(m),this._address=m,this._value=d.create(c.Types.Null,this),this.style=this._mergeStyle(h.style,p.style,{}),this._mergeCount=0}get worksheet(){return this._row.worksheet}get workbook(){return this._row.worksheet.workbook}destroy(){delete this.style,delete this._value,delete this._row,delete this._column,delete this._address}get numFmt(){return this.style.numFmt}set numFmt(h){this.style.numFmt=h}get font(){return this.style.font}set font(h){this.style.font=h}get alignment(){return this.style.alignment}set alignment(h){this.style.alignment=h}get border(){return this.style.border}set border(h){this.style.border=h}get fill(){return this.style.fill}set fill(h){this.style.fill=h}get protection(){return this.style.protection}set protection(h){this.style.protection=h}_mergeStyle(h,p,m){const f=h&&h.numFmt||p&&p.numFmt;f&&(m.numFmt=f);const b=h&&h.font||p&&p.font;b&&(m.font=b);const y=h&&h.alignment||p&&p.alignment;y&&(m.alignment=y);const _=h&&h.border||p&&p.border;_&&(m.border=_);const E=h&&h.fill||p&&p.fill;E&&(m.fill=E);const M=h&&h.protection||p&&p.protection;return M&&(m.protection=M),m}get address(){return this._address}get row(){return this._row.number}get col(){return this._column.number}get $col$row(){return`$${this._column.letter}$${this.row}`}get type(){return this._value.type}get effectiveType(){return this._value.effectiveType}toCsvString(){return this._value.toCsvString()}addMergeRef(){this._mergeCount++}releaseMergeRef(){this._mergeCount--}get isMerged(){return this._mergeCount>0||this.type===c.Types.Merge}merge(h,p){this._value.release(),this._value=d.create(c.Types.Merge,this,h),p||(this.style=h.style)}unmerge(){this.type===c.Types.Merge&&(this._value.release(),this._value=d.create(c.Types.Null,this),this.style=this._mergeStyle(this._row.style,this._column.style,{}))}isMergedTo(h){return this._value.type===c.Types.Merge&&this._value.isMergedTo(h)}get master(){return this.type===c.Types.Merge?this._value.master:this}get isHyperlink(){return this._value.type===c.Types.Hyperlink}get hyperlink(){return this._value.hyperlink}get value(){return this._value.value}set value(h){this.type!==c.Types.Merge?(this._value.release(),this._value=d.create(d.getType(h),this,h)):this._value.master.value=h}get note(){return this._comment&&this._comment.note}set note(h){this._comment=new n(h)}get text(){return this._value.toString()}get html(){return s.escapeHtml(this.text)}toString(){return this.text}_upgradeToHyperlink(h){this.type===c.Types.String&&(this._value=d.create(c.Types.Hyperlink,this,{text:this._value.value,hyperlink:h}))}get formula(){return this._value.formula}get result(){return this._value.result}get formulaType(){return this._value.formulaType}get fullAddress(){const{worksheet:h}=this._row;return{sheetName:h.name,address:this.address,row:this.row,col:this.col}}get name(){return this.names[0]}set name(h){this.names=[h]}get names(){return this.workbook.definedNames.getNamesEx(this.fullAddress)}set names(h){const{definedNames:p}=this.workbook;p.removeAllNames(this.fullAddress),h.forEach(m=>{p.addEx(this.fullAddress,m)})}addName(h){this.workbook.definedNames.addEx(this.fullAddress,h)}removeName(h){this.workbook.definedNames.removeEx(this.fullAddress,h)}removeAllNames(){this.workbook.definedNames.removeAllNames(this.fullAddress)}get _dataValidations(){return this.worksheet.dataValidations}get dataValidation(){return this._dataValidations.find(this.address)}set dataValidation(h){this._dataValidations.add(this.address,h)}get model(){const{model:h}=this._value;return h.style=this.style,this._comment&&(h.comment=this._comment.model),h}set model(h){if(this._value.release(),this._value=d.create(h.type,this),this._value.model=h,h.comment)switch(h.comment.type){case"note":this._comment=n.fromModel(h.comment)}h.style?this.style=h.style:this.style={}}}c.Types=a.ValueType;const d={getType:u=>u==null?c.Types.Null:u instanceof String||typeof u=="string"?c.Types.String:typeof u=="number"?c.Types.Number:typeof u=="boolean"?c.Types.Boolean:u instanceof Date?c.Types.Date:u.text&&u.hyperlink?c.Types.Hyperlink:u.formula||u.sharedFormula?c.Types.Formula:u.richText?c.Types.RichText:u.sharedString?c.Types.SharedString:u.error?c.Types.Error:c.Types.JSON,types:[{t:c.Types.Null,f:class{constructor(u){this.model={address:u.address,type:c.Types.Null}}get value(){return null}set value(u){}get type(){return c.Types.Null}get effectiveType(){return c.Types.Null}get address(){return this.model.address}set address(u){this.model.address=u}toCsvString(){return""}release(){}toString(){return""}}},{t:c.Types.Number,f:class{constructor(u,h){this.model={address:u.address,type:c.Types.Number,value:h}}get value(){return this.model.value}set value(u){this.model.value=u}get type(){return c.Types.Number}get effectiveType(){return c.Types.Number}get address(){return this.model.address}set address(u){this.model.address=u}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:c.Types.String,f:class{constructor(u,h){this.model={address:u.address,type:c.Types.String,value:h}}get value(){return this.model.value}set value(u){this.model.value=u}get type(){return c.Types.String}get effectiveType(){return c.Types.String}get address(){return this.model.address}set address(u){this.model.address=u}toCsvString(){return`"${this.model.value.replace(/"/g,'""')}"`}release(){}toString(){return this.model.value}}},{t:c.Types.Date,f:class{constructor(u,h){this.model={address:u.address,type:c.Types.Date,value:h}}get value(){return this.model.value}set value(u){this.model.value=u}get type(){return c.Types.Date}get effectiveType(){return c.Types.Date}get address(){return this.model.address}set address(u){this.model.address=u}toCsvString(){return this.model.value.toISOString()}release(){}toString(){return this.model.value.toString()}}},{t:c.Types.Hyperlink,f:class{constructor(u,h){this.model={address:u.address,type:c.Types.Hyperlink,text:h?h.text:void 0,hyperlink:h?h.hyperlink:void 0},h&&h.tooltip&&(this.model.tooltip=h.tooltip)}get value(){const u={text:this.model.text,hyperlink:this.model.hyperlink};return this.model.tooltip&&(u.tooltip=this.model.tooltip),u}set value(u){this.model={text:u.text,hyperlink:u.hyperlink},u.tooltip&&(this.model.tooltip=u.tooltip)}get text(){return this.model.text}set text(u){this.model.text=u}get hyperlink(){return this.model.hyperlink}set hyperlink(u){this.model.hyperlink=u}get type(){return c.Types.Hyperlink}get effectiveType(){return c.Types.Hyperlink}get address(){return this.model.address}set address(u){this.model.address=u}toCsvString(){return this.model.hyperlink}release(){}toString(){return this.model.text}}},{t:c.Types.Formula,f:class{constructor(u,h){this.cell=u,this.model={address:u.address,type:c.Types.Formula,shareType:h?h.shareType:void 0,ref:h?h.ref:void 0,formula:h?h.formula:void 0,sharedFormula:h?h.sharedFormula:void 0,result:h?h.result:void 0}}_copyModel(u){const h={},p=m=>{const f=u[m];f&&(h[m]=f)};return p("formula"),p("result"),p("ref"),p("shareType"),p("sharedFormula"),h}get value(){return this._copyModel(this.model)}set value(u){this.model=this._copyModel(u)}validate(u){switch(d.getType(u)){case c.Types.Null:case c.Types.String:case c.Types.Number:case c.Types.Date:break;case c.Types.Hyperlink:case c.Types.Formula:default:throw new Error("Cannot process that type of result value")}}get dependencies(){return{ranges:this.formula.match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g),cells:this.formula.replace(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g,"").match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}/g)}}get formula(){return this.model.formula||this._getTranslatedFormula()}set formula(u){this.model.formula=u}get formulaType(){return this.model.formula?a.FormulaType.Master:this.model.sharedFormula?a.FormulaType.Shared:a.FormulaType.None}get result(){return this.model.result}set result(u){this.model.result=u}get type(){return c.Types.Formula}get effectiveType(){const u=this.model.result;return u==null?a.ValueType.Null:u instanceof String||typeof u=="string"?a.ValueType.String:typeof u=="number"?a.ValueType.Number:u instanceof Date?a.ValueType.Date:u.text&&u.hyperlink?a.ValueType.Hyperlink:u.formula?a.ValueType.Formula:a.ValueType.Null}get address(){return this.model.address}set address(u){this.model.address=u}_getTranslatedFormula(){if(!this._translatedFormula&&this.model.sharedFormula){const{worksheet:u}=this.cell,h=u.findCell(this.model.sharedFormula);this._translatedFormula=h&&o(h.formula,h.address,this.model.address)}return this._translatedFormula}toCsvString(){return""+(this.model.result||"")}release(){}toString(){return this.model.result?this.model.result.toString():""}}},{t:c.Types.Merge,f:class{constructor(u,h){this.model={address:u.address,type:c.Types.Merge,master:h?h.address:void 0},this._master=h,h&&h.addMergeRef()}get value(){return this._master.value}set value(u){u instanceof c?(this._master&&this._master.releaseMergeRef(),u.addMergeRef(),this._master=u):this._master.value=u}isMergedTo(u){return u===this._master}get master(){return this._master}get type(){return c.Types.Merge}get effectiveType(){return this._master.effectiveType}get address(){return this.model.address}set address(u){this.model.address=u}toCsvString(){return""}release(){this._master.releaseMergeRef()}toString(){return this.value.toString()}}},{t:c.Types.JSON,f:class{constructor(u,h){this.model={address:u.address,type:c.Types.String,value:JSON.stringify(h),rawValue:h}}get value(){return this.model.rawValue}set value(u){this.model.rawValue=u,this.model.value=JSON.stringify(u)}get type(){return c.Types.String}get effectiveType(){return c.Types.String}get address(){return this.model.address}set address(u){this.model.address=u}toCsvString(){return this.model.value}release(){}toString(){return this.model.value}}},{t:c.Types.SharedString,f:class{constructor(u,h){this.model={address:u.address,type:c.Types.SharedString,value:h}}get value(){return this.model.value}set value(u){this.model.value=u}get type(){return c.Types.SharedString}get effectiveType(){return c.Types.SharedString}get address(){return this.model.address}set address(u){this.model.address=u}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:c.Types.RichText,f:class{constructor(u,h){this.model={address:u.address,type:c.Types.String,value:h}}get value(){return this.model.value}set value(u){this.model.value=u}toString(){return this.model.value.richText.map(u=>u.text).join("")}get type(){return c.Types.RichText}get effectiveType(){return c.Types.RichText}get address(){return this.model.address}set address(u){this.model.address=u}toCsvString(){return`"${this.text.replace(/"/g,'""')}"`}release(){}}},{t:c.Types.Boolean,f:class{constructor(u,h){this.model={address:u.address,type:c.Types.Boolean,value:h}}get value(){return this.model.value}set value(u){this.model.value=u}get type(){return c.Types.Boolean}get effectiveType(){return c.Types.Boolean}get address(){return this.model.address}set address(u){this.model.address=u}toCsvString(){return this.model.value?1:0}release(){}toString(){return this.model.value.toString()}}},{t:c.Types.Error,f:class{constructor(u,h){this.model={address:u.address,type:c.Types.Error,value:h}}get value(){return this.model.value}set value(u){this.model.value=u}get type(){return c.Types.Error}get effectiveType(){return c.Types.Error}get address(){return this.model.address}set address(u){this.model.address=u}toCsvString(){return this.toString()}release(){}toString(){return this.model.value.error.toString()}}}].reduce((u,h)=>(u[h.t]=h.f,u),[]),create(u,h,p){const m=this.types[u];if(!m)throw new Error("Could not create Value of type "+u);return new m(h,p)}};r.exports=c},{"../utils/col-cache":19,"../utils/shared-formula":23,"../utils/under-dash":26,"./enums":7,"./note":9}],4:[function(t,r,l){const i=t("../utils/under-dash"),s=t("./enums"),a=t("../utils/col-cache");class o{constructor(c,d,u){this._worksheet=c,this._number=d,u!==!1&&(this.defn=u)}get number(){return this._number}get worksheet(){return this._worksheet}get letter(){return a.n2l(this._number)}get isCustomWidth(){return this.width!==void 0&&this.width!==9}get defn(){return{header:this._header,key:this.key,width:this.width,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel}}set defn(c){c?(this.key=c.key,this.width=c.width!==void 0?c.width:9,this.outlineLevel=c.outlineLevel,c.style?this.style=c.style:this.style={},this.header=c.header,this._hidden=!!c.hidden):(delete this._header,delete this._key,delete this.width,this.style={},this.outlineLevel=0)}get headers(){return this._header&&this._header instanceof Array?this._header:[this._header]}get header(){return this._header}set header(c){c!==void 0?(this._header=c,this.headers.forEach((d,u)=>{this._worksheet.getCell(u+1,this.number).value=d})):this._header=void 0}get key(){return this._key}set key(c){(this._key&&this._worksheet.getColumnKey(this._key))===this&&this._worksheet.deleteColumnKey(this._key),this._key=c,c&&this._worksheet.setColumnKey(this._key,this)}get hidden(){return!!this._hidden}set hidden(c){this._hidden=c}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(c){this._outlineLevel=c}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelCol)}toString(){return JSON.stringify({key:this.key,width:this.width,headers:this.headers.length?this.headers:void 0})}equivalentTo(c){return this.width===c.width&&this.hidden===c.hidden&&this.outlineLevel===c.outlineLevel&&i.isEqual(this.style,c.style)}get isDefault(){if(this.isCustomWidth||this.hidden||this.outlineLevel)return!1;const c=this.style;return!c||!(c.font||c.numFmt||c.alignment||c.border||c.fill||c.protection)}get headerCount(){return this.headers.length}eachCell(c,d){const u=this.number;d||(d=c,c=null),this._worksheet.eachRow(c,(h,p)=>{d(h.getCell(u),p)})}get values(){const c=[];return this.eachCell((d,u)=>{d&&d.type!==s.ValueType.Null&&(c[u]=d.value)}),c}set values(c){if(!c)return;const d=this.number;let u=0;c.hasOwnProperty("0")&&(u=1),c.forEach((h,p)=>{this._worksheet.getCell(p+u,d).value=h})}_applyStyle(c,d){return this.style[c]=d,this.eachCell(u=>{u[c]=d}),d}get numFmt(){return this.style.numFmt}set numFmt(c){this._applyStyle("numFmt",c)}get font(){return this.style.font}set font(c){this._applyStyle("font",c)}get alignment(){return this.style.alignment}set alignment(c){this._applyStyle("alignment",c)}get protection(){return this.style.protection}set protection(c){this._applyStyle("protection",c)}get border(){return this.style.border}set border(c){this._applyStyle("border",c)}get fill(){return this.style.fill}set fill(c){this._applyStyle("fill",c)}static toModel(c){const d=[];let u=null;return c&&c.forEach((h,p)=>{h.isDefault?u&&(u=null):u&&h.equivalentTo(u)?u.max=p+1:(u={min:p+1,max:p+1,width:h.width!==void 0?h.width:9,style:h.style,isCustomWidth:h.isCustomWidth,hidden:h.hidden,outlineLevel:h.outlineLevel,collapsed:h.collapsed},d.push(u))}),d.length?d:void 0}static fromModel(c,d){const u=[];let h=1,p=0;for(d=(d=d||[]).sort(function(m,f){return m.min-f.min});p<d.length;){const m=d[p++];for(;h<m.min;)u.push(new o(c,h++));for(;h<=m.max;)u.push(new o(c,h++,m))}return u.length?u:null}}r.exports=o},{"../utils/col-cache":19,"../utils/under-dash":26,"./enums":7}],5:[function(t,r,l){r.exports=class{constructor(i){this.model=i||{}}add(i,s){return this.model[i]=s}find(i){return this.model[i]}remove(i){this.model[i]=void 0}}},{}],6:[function(t,r,l){const i=t("../utils/under-dash"),s=t("../utils/col-cache"),a=t("../utils/cell-matrix"),o=t("./range"),n=/[$](\w+)[$](\d+)(:[$](\w+)[$](\d+))?/;r.exports=class{constructor(){this.matrixMap={}}getMatrix(c){return this.matrixMap[c]||(this.matrixMap[c]=new a)}add(c,d){const u=s.decodeEx(c);this.addEx(u,d)}addEx(c,d){const u=this.getMatrix(d);if(c.top)for(let h=c.left;h<=c.right;h++)for(let p=c.top;p<=c.bottom;p++){const m={sheetName:c.sheetName,address:s.n2l(h)+p,row:p,col:h};u.addCellEx(m)}else u.addCellEx(c)}remove(c,d){const u=s.decodeEx(c);this.removeEx(u,d)}removeEx(c,d){this.getMatrix(d).removeCellEx(c)}removeAllNames(c){i.each(this.matrixMap,d=>{d.removeCellEx(c)})}forEach(c){i.each(this.matrixMap,(d,u)=>{d.forEach(h=>{c(u,h)})})}getNames(c){return this.getNamesEx(s.decodeEx(c))}getNamesEx(c){return i.map(this.matrixMap,(d,u)=>d.findCellEx(c)&&u).filter(Boolean)}_explore(c,d){d.mark=!1;const{sheetName:u}=d,h=new o(d.row,d.col,d.row,d.col,u);let p,m;function f(y,_){const E=c.findCellAt(u,y,d.col);return!(!E||!E.mark)&&(h[_]=y,E.mark=!1,!0)}for(m=d.row-1;f(m,"top");m--);for(m=d.row+1;f(m,"bottom");m++);function b(y,_){const E=[];for(m=h.top;m<=h.bottom;m++){const M=c.findCellAt(u,m,y);if(!M||!M.mark)return!1;E.push(M)}h[_]=y;for(let M=0;M<E.length;M++)E[M].mark=!1;return!0}for(p=d.col-1;b(p,"left");p--);for(p=d.col+1;b(p,"right");p++);return h}getRanges(c,d){return(d=d||this.matrixMap[c])?(d.forEach(u=>{u.mark=!0}),{name:c,ranges:d.map(u=>u.mark&&this._explore(d,u)).filter(Boolean).map(u=>u.$shortRange)}):{name:c,ranges:[]}}normaliseMatrix(c,d){c.forEachInSheet(d,(u,h,p)=>{u&&(u.row===h&&u.col===p||(u.row=h,u.col=p,u.address=s.n2l(p)+h))})}spliceRows(c,d,u,h){i.each(this.matrixMap,p=>{p.spliceRows(c,d,u,h),this.normaliseMatrix(p,c)})}spliceColumns(c,d,u,h){i.each(this.matrixMap,p=>{p.spliceColumns(c,d,u,h),this.normaliseMatrix(p,c)})}get model(){return i.map(this.matrixMap,(c,d)=>this.getRanges(d,c)).filter(c=>c.ranges.length)}set model(c){const d=this.matrixMap={};c.forEach(u=>{const h=d[u.name]=new a;u.ranges.forEach(p=>{n.test(p.split("!").pop()||"")&&h.addCell(p)})})}}},{"../utils/cell-matrix":18,"../utils/col-cache":19,"../utils/under-dash":26,"./range":10}],7:[function(t,r,l){r.exports={ValueType:{Null:0,Merge:1,Number:2,String:3,Date:4,Hyperlink:5,Formula:6,SharedString:7,RichText:8,Boolean:9,Error:10},FormulaType:{None:0,Master:1,Shared:2},RelationshipType:{None:0,OfficeDocument:1,Worksheet:2,CalcChain:3,SharedStrings:4,Styles:5,Theme:6,Hyperlink:7},DocumentType:{Xlsx:1},ReadingOrder:{LeftToRight:1,RightToLeft:2},ErrorValue:{NotApplicable:"#N/A",Ref:"#REF!",Name:"#NAME?",DivZero:"#DIV/0!",Null:"#NULL!",Value:"#VALUE!",Num:"#NUM!"}}},{}],8:[function(t,r,l){const i=t("../utils/col-cache"),s=t("./anchor");r.exports=class{constructor(a,o){this.worksheet=a,this.model=o}get model(){switch(this.type){case"background":return{type:this.type,imageId:this.imageId};case"image":return{type:this.type,imageId:this.imageId,hyperlinks:this.range.hyperlinks,range:{tl:this.range.tl.model,br:this.range.br&&this.range.br.model,ext:this.range.ext,editAs:this.range.editAs}};default:throw new Error("Invalid Image Type")}}set model(a){let{type:o,imageId:n,range:c,hyperlinks:d}=a;if(this.type=o,this.imageId=n,o==="image")if(typeof c=="string"){const u=i.decode(c);this.range={tl:new s(this.worksheet,{col:u.left,row:u.top},-1),br:new s(this.worksheet,{col:u.right,row:u.bottom},0),editAs:"oneCell"}}else this.range={tl:new s(this.worksheet,c.tl,0),br:c.br&&new s(this.worksheet,c.br,0),ext:c.ext,editAs:c.editAs,hyperlinks:d||c.hyperlinks}}}},{"../utils/col-cache":19,"./anchor":2}],9:[function(t,r,l){const i=t("../utils/under-dash");class s{constructor(o){this.note=o}get model(){let o=null;switch(typeof this.note){case"string":o={type:"note",note:{texts:[{text:this.note}]}};break;default:o={type:"note",note:this.note}}return i.deepMerge({},s.DEFAULT_CONFIGS,o)}set model(o){const{note:n}=o,{texts:c}=n;c.length===1&&Object.keys(c[0]).length===1?this.note=c[0].text:this.note=n}static fromModel(o){const n=new s;return n.model=o,n}}s.DEFAULT_CONFIGS={note:{margins:{insetmode:"auto",inset:[.13,.13,.25,.25]},protection:{locked:"True",lockText:"True"},editAs:"absolute"}},r.exports=s},{"../utils/under-dash":26}],10:[function(t,r,l){const i=t("../utils/col-cache");class s{constructor(){this.decode(arguments)}setTLBR(o,n,c,d,u){if(arguments.length<4){const h=i.decodeAddress(o),p=i.decodeAddress(n);this.model={top:Math.min(h.row,p.row),left:Math.min(h.col,p.col),bottom:Math.max(h.row,p.row),right:Math.max(h.col,p.col),sheetName:c},this.setTLBR(h.row,h.col,p.row,p.col,u)}else this.model={top:Math.min(o,c),left:Math.min(n,d),bottom:Math.max(o,c),right:Math.max(n,d),sheetName:u}}decode(o){switch(o.length){case 5:this.setTLBR(o[0],o[1],o[2],o[3],o[4]);break;case 4:this.setTLBR(o[0],o[1],o[2],o[3]);break;case 3:this.setTLBR(o[0],o[1],o[2]);break;case 2:this.setTLBR(o[0],o[1]);break;case 1:{const n=o[0];if(n instanceof s)this.model={top:n.model.top,left:n.model.left,bottom:n.model.bottom,right:n.model.right,sheetName:n.sheetName};else if(n instanceof Array)this.decode(n);else if(n.top&&n.left&&n.bottom&&n.right)this.model={top:n.top,left:n.left,bottom:n.bottom,right:n.right,sheetName:n.sheetName};else{const c=i.decodeEx(n);c.top?this.model={top:c.top,left:c.left,bottom:c.bottom,right:c.right,sheetName:c.sheetName}:this.model={top:c.row,left:c.col,bottom:c.row,right:c.col,sheetName:c.sheetName}}break}case 0:this.model={top:0,left:0,bottom:0,right:0};break;default:throw new Error("Invalid number of arguments to _getDimensions() - "+o.length)}}get top(){return this.model.top||1}set top(o){this.model.top=o}get left(){return this.model.left||1}set left(o){this.model.left=o}get bottom(){return this.model.bottom||1}set bottom(o){this.model.bottom=o}get right(){return this.model.right||1}set right(o){this.model.right=o}get sheetName(){return this.model.sheetName}set sheetName(o){this.model.sheetName=o}get _serialisedSheetName(){const{sheetName:o}=this.model;return o?/^[a-zA-Z0-9]*$/.test(o)?o+"!":`'${o}'!`:""}expand(o,n,c,d){(!this.model.top||o<this.top)&&(this.top=o),(!this.model.left||n<this.left)&&(this.left=n),(!this.model.bottom||c>this.bottom)&&(this.bottom=c),(!this.model.right||d>this.right)&&(this.right=d)}expandRow(o){if(o){const{dimensions:n,number:c}=o;n&&this.expand(c,n.min,c,n.max)}}expandToAddress(o){const n=i.decodeEx(o);this.expand(n.row,n.col,n.row,n.col)}get tl(){return i.n2l(this.left)+this.top}get $t$l(){return`$${i.n2l(this.left)}$${this.top}`}get br(){return i.n2l(this.right)+this.bottom}get $b$r(){return`$${i.n2l(this.right)}$${this.bottom}`}get range(){return`${this._serialisedSheetName+this.tl}:${this.br}`}get $range(){return`${this._serialisedSheetName+this.$t$l}:${this.$b$r}`}get shortRange(){return this.count>1?this.range:this._serialisedSheetName+this.tl}get $shortRange(){return this.count>1?this.$range:this._serialisedSheetName+this.$t$l}get count(){return(1+this.bottom-this.top)*(1+this.right-this.left)}toString(){return this.range}intersects(o){return(!o.sheetName||!this.sheetName||o.sheetName===this.sheetName)&&!(o.bottom<this.top)&&!(o.top>this.bottom)&&!(o.right<this.left)&&!(o.left>this.right)}contains(o){const n=i.decodeEx(o);return this.containsEx(n)}containsEx(o){return(!o.sheetName||!this.sheetName||o.sheetName===this.sheetName)&&o.row>=this.top&&o.row<=this.bottom&&o.col>=this.left&&o.col<=this.right}forEachAddress(o){for(let n=this.left;n<=this.right;n++)for(let c=this.top;c<=this.bottom;c++)o(i.encodeAddress(c,n),c,n)}}r.exports=s},{"../utils/col-cache":19}],11:[function(t,r,l){const i=t("../utils/under-dash"),s=t("./enums"),a=t("../utils/col-cache"),o=t("./cell");r.exports=class{constructor(n,c){this._worksheet=n,this._number=c,this._cells=[],this.style={},this.outlineLevel=0}get number(){return this._number}get worksheet(){return this._worksheet}commit(){this._worksheet._commitRow(this)}destroy(){delete this._worksheet,delete this._cells,delete this.style}findCell(n){return this._cells[n-1]}getCellEx(n){let c=this._cells[n.col-1];if(!c){const d=this._worksheet.getColumn(n.col);c=new o(this,d,n.address),this._cells[n.col-1]=c}return c}getCell(n){if(typeof n=="string"){const c=this._worksheet.getColumnKey(n);n=c?c.number:a.l2n(n)}return this._cells[n-1]||this.getCellEx({address:a.encodeAddress(this._number,n),row:this._number,col:n})}splice(n,c){const d=n+c;for(var u=arguments.length,h=new Array(u>2?u-2:0),p=2;p<u;p++)h[p-2]=arguments[p];const m=h.length-c,f=this._cells.length;let b,y,_;if(m<0)for(b=n+h.length;b<=f;b++)_=this._cells[b-1],y=this._cells[b-m-1],y?(_=this.getCell(b),_.value=y.value,_.style=y.style,_._comment=y._comment):_&&(_.value=null,_.style={},_._comment=void 0);else if(m>0)for(b=f;b>=d;b--)y=this._cells[b-1],y?(_=this.getCell(b+m),_.value=y.value,_.style=y.style,_._comment=y._comment):this._cells[b+m-1]=void 0;for(b=0;b<h.length;b++)_=this.getCell(n+b),_.value=h[b],_.style={},_._comment=void 0}eachCell(n,c){if(c||(c=n,n=null),n&&n.includeEmpty){const d=this._cells.length;for(let u=1;u<=d;u++)c(this.getCell(u),u)}else this._cells.forEach((d,u)=>{d&&d.type!==s.ValueType.Null&&c(d,u+1)})}addPageBreak(n,c){const d=this._worksheet,u=Math.max(0,n-1)||0,h=Math.max(0,c-1)||16838,p={id:this._number,max:h,man:1};u&&(p.min=u),d.rowBreaks.push(p)}get values(){const n=[];return this._cells.forEach(c=>{c&&c.type!==s.ValueType.Null&&(n[c.col]=c.value)}),n}set values(n){if(this._cells=[],n)if(n instanceof Array){let c=0;n.hasOwnProperty("0")&&(c=1),n.forEach((d,u)=>{d!==void 0&&(this.getCellEx({address:a.encodeAddress(this._number,u+c),row:this._number,col:u+c}).value=d)})}else this._worksheet.eachColumnKey((c,d)=>{n[d]!==void 0&&(this.getCellEx({address:a.encodeAddress(this._number,c.number),row:this._number,col:c.number}).value=n[d])})}get hasValues(){return i.some(this._cells,n=>n&&n.type!==s.ValueType.Null)}get cellCount(){return this._cells.length}get actualCellCount(){let n=0;return this.eachCell(()=>{n++}),n}get dimensions(){let n=0,c=0;return this._cells.forEach(d=>{d&&d.type!==s.ValueType.Null&&((!n||n>d.col)&&(n=d.col),c<d.col&&(c=d.col))}),n>0?{min:n,max:c}:null}_applyStyle(n,c){return this.style[n]=c,this._cells.forEach(d=>{d&&(d[n]=c)}),c}get numFmt(){return this.style.numFmt}set numFmt(n){this._applyStyle("numFmt",n)}get font(){return this.style.font}set font(n){this._applyStyle("font",n)}get alignment(){return this.style.alignment}set alignment(n){this._applyStyle("alignment",n)}get protection(){return this.style.protection}set protection(n){this._applyStyle("protection",n)}get border(){return this.style.border}set border(n){this._applyStyle("border",n)}get fill(){return this.style.fill}set fill(n){this._applyStyle("fill",n)}get hidden(){return!!this._hidden}set hidden(n){this._hidden=n}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(n){this._outlineLevel=n}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelRow)}get model(){const n=[];let c=0,d=0;return this._cells.forEach(u=>{if(u){const h=u.model;h&&((!c||c>u.col)&&(c=u.col),d<u.col&&(d=u.col),n.push(h))}}),this.height||n.length?{cells:n,number:this.number,min:c,max:d,height:this.height,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel,collapsed:this.collapsed}:null}set model(n){if(n.number!==this._number)throw new Error("Invalid row number in model");let c;this._cells=[],n.cells.forEach(d=>{switch(d.type){case o.Types.Merge:break;default:{let u;if(d.address)u=a.decodeAddress(d.address);else if(c){const{row:h}=c,p=c.col+1;u={row:h,col:p,address:a.encodeAddress(h,p),$col$row:`$${a.n2l(p)}$${h}`}}c=u,this.getCellEx(u).model=d;break}}}),n.height?this.height=n.height:delete this.height,this.hidden=n.hidden,this.outlineLevel=n.outlineLevel||0,this.style=n.style&&JSON.parse(JSON.stringify(n.style))||{}}}},{"../utils/col-cache":19,"../utils/under-dash":26,"./cell":3,"./enums":7}],12:[function(t,r,l){const i=t("../utils/col-cache");class s{constructor(o,n,c){this.table=o,this.column=n,this.index=c}_set(o,n){this.table.cacheState(),this.column[o]=n}get name(){return this.column.name}set name(o){this._set("name",o)}get filterButton(){return this.column.filterButton}set filterButton(o){this.column.filterButton=o}get style(){return this.column.style}set style(o){this.column.style=o}get totalsRowLabel(){return this.column.totalsRowLabel}set totalsRowLabel(o){this._set("totalsRowLabel",o)}get totalsRowFunction(){return this.column.totalsRowFunction}set totalsRowFunction(o){this._set("totalsRowFunction",o)}get totalsRowResult(){return this.column.totalsRowResult}set totalsRowResult(o){this._set("totalsRowResult",o)}get totalsRowFormula(){return this.column.totalsRowFormula}set totalsRowFormula(o){this._set("totalsRowFormula",o)}}r.exports=class{constructor(a,o){this.worksheet=a,o&&(this.table=o,this.validate(),this.store())}getFormula(a){switch(a.totalsRowFunction){case"none":return null;case"average":return`SUBTOTAL(101,${this.table.name}[${a.name}])`;case"countNums":return`SUBTOTAL(102,${this.table.name}[${a.name}])`;case"count":return`SUBTOTAL(103,${this.table.name}[${a.name}])`;case"max":return`SUBTOTAL(104,${this.table.name}[${a.name}])`;case"min":return`SUBTOTAL(105,${this.table.name}[${a.name}])`;case"stdDev":return`SUBTOTAL(106,${this.table.name}[${a.name}])`;case"var":return`SUBTOTAL(107,${this.table.name}[${a.name}])`;case"sum":return`SUBTOTAL(109,${this.table.name}[${a.name}])`;case"custom":return a.totalsRowFormula;default:throw new Error("Invalid Totals Row Function: "+a.totalsRowFunction)}}get width(){return this.table.columns.length}get height(){return this.table.rows.length}get filterHeight(){return this.height+(this.table.headerRow?1:0)}get tableHeight(){return this.filterHeight+(this.table.totalsRow?1:0)}validate(){const{table:a}=this,o=(m,f,b)=>{m[f]===void 0&&(m[f]=b)};o(a,"headerRow",!0),o(a,"totalsRow",!1),o(a,"style",{}),o(a.style,"theme","TableStyleMedium2"),o(a.style,"showFirstColumn",!1),o(a.style,"showLastColumn",!1),o(a.style,"showRowStripes",!1),o(a.style,"showColumnStripes",!1);const n=(m,f)=>{if(!m)throw new Error(f)};n(a.ref,"Table must have ref"),n(a.columns,"Table must have column definitions"),n(a.rows,"Table must have row definitions"),a.tl=i.decodeAddress(a.ref);const{row:c,col:d}=a.tl;n(c>0,"Table must be on valid row"),n(d>0,"Table must be on valid col");const{width:u,filterHeight:h,tableHeight:p}=this;a.autoFilterRef=i.encode(c,d,c+h-1,d+u-1),a.tableRef=i.encode(c,d,c+p-1,d+u-1),a.columns.forEach((m,f)=>{n(m.name,`Column ${f} must have a name`),f===0?o(m,"totalsRowLabel","Total"):(o(m,"totalsRowFunction","none"),m.totalsRowFormula=this.getFormula(m))})}store(){const a=(h,p)=>{p&&Object.keys(p).forEach(m=>{h[m]=p[m]})},{worksheet:o,table:n}=this,{row:c,col:d}=n.tl;let u=0;if(n.headerRow){const h=o.getRow(c+u++);n.columns.forEach((p,m)=>{const{style:f,name:b}=p,y=h.getCell(d+m);y.value=b,a(y,f)})}if(n.rows.forEach(h=>{const p=o.getRow(c+u++);h.forEach((m,f)=>{const b=p.getCell(d+f);b.value=m,a(b,n.columns[f].style)})}),n.totalsRow){const h=o.getRow(c+u++);n.columns.forEach((p,m)=>{const f=h.getCell(d+m);if(m===0)f.value=p.totalsRowLabel;else{const b=this.getFormula(p);f.value=b?{formula:p.totalsRowFormula,result:p.totalsRowResult}:null}a(f,p.style)})}}load(a){const{table:o}=this,{row:n,col:c}=o.tl;let d=0;if(o.headerRow){const u=a.getRow(n+d++);o.columns.forEach((h,p)=>{u.getCell(c+p).value=h.name})}if(o.rows.forEach(u=>{const h=a.getRow(n+d++);u.forEach((p,m)=>{h.getCell(c+m).value=p})}),o.totalsRow){const u=a.getRow(n+d++);o.columns.forEach((h,p)=>{const m=u.getCell(c+p);p===0?m.value=h.totalsRowLabel:this.getFormula(h)&&(m.value={formula:h.totalsRowFormula,result:h.totalsRowResult})})}}get model(){return this.table}set model(a){this.table=a}cacheState(){this._cache||(this._cache={ref:this.ref,width:this.width,tableHeight:this.tableHeight})}commit(){if(!this._cache)return;this.validate();const a=i.decodeAddress(this._cache.ref);if(this.ref!==this._cache.ref)for(let o=0;o<this._cache.tableHeight;o++){const n=this.worksheet.getRow(a.row+o);for(let c=0;c<this._cache.width;c++)n.getCell(a.col+c).value=null}else{for(let o=this.tableHeight;o<this._cache.tableHeight;o++){const n=this.worksheet.getRow(a.row+o);for(let c=0;c<this._cache.width;c++)n.getCell(a.col+c).value=null}for(let o=0;o<this.tableHeight;o++){const n=this.worksheet.getRow(a.row+o);for(let c=this.width;c<this._cache.width;c++)n.getCell(a.col+c).value=null}}this.store()}addRow(a,o){this.cacheState(),o===void 0?this.table.rows.push(a):this.table.rows.splice(o,0,a)}removeRows(a){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cacheState(),this.table.rows.splice(a,o)}getColumn(a){const o=this.table.columns[a];return new s(this,o,a)}addColumn(a,o,n){this.cacheState(),n===void 0?(this.table.columns.push(a),this.table.rows.forEach((c,d)=>{c.push(o[d])})):(this.table.columns.splice(n,0,a),this.table.rows.forEach((c,d)=>{c.splice(n,0,o[d])}))}removeColumns(a){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cacheState(),this.table.columns.splice(a,o),this.table.rows.forEach(n=>{n.splice(a,o)})}_assign(a,o,n){this.cacheState(),a[o]=n}get ref(){return this.table.ref}set ref(a){this._assign(this.table,"ref",a)}get name(){return this.table.name}set name(a){this.table.name=a}get displayName(){return this.table.displyName||this.table.name}set displayNamename(a){this.table.displayName=a}get headerRow(){return this.table.headerRow}set headerRow(a){this._assign(this.table,"headerRow",a)}get totalsRow(){return this.table.totalsRow}set totalsRow(a){this._assign(this.table,"totalsRow",a)}get theme(){return this.table.style.name}set theme(a){this.table.style.name=a}get showFirstColumn(){return this.table.style.showFirstColumn}set showFirstColumn(a){this.table.style.showFirstColumn=a}get showLastColumn(){return this.table.style.showLastColumn}set showLastColumn(a){this.table.style.showLastColumn=a}get showRowStripes(){return this.table.style.showRowStripes}set showRowStripes(a){this.table.style.showRowStripes=a}get showColumnStripes(){return this.table.style.showColumnStripes}set showColumnStripes(a){this.table.style.showColumnStripes=a}}},{"../utils/col-cache":19}],13:[function(t,r,l){const i=t("./worksheet"),s=t("./defined-names"),a=t("../xlsx/xlsx"),o=t("../csv/csv");r.exports=class{constructor(){this.category="",this.company="",this.created=new Date,this.description="",this.keywords="",this.manager="",this.modified=this.created,this.properties={},this.calcProperties={},this._worksheets=[],this.subject="",this.title="",this.views=[],this.media=[],this._definedNames=new s}get xlsx(){return this._xlsx||(this._xlsx=new a(this)),this._xlsx}get csv(){return this._csv||(this._csv=new o(this)),this._csv}get nextId(){for(let n=1;n<this._worksheets.length;n++)if(!this._worksheets[n])return n;return this._worksheets.length||1}addWorksheet(n,c){const d=this.nextId;c&&(typeof c=="string"?(console.trace('tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { argb: "rbg value" } }'),c={properties:{tabColor:{argb:c}}}):(c.argb||c.theme||c.indexed)&&(console.trace("tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { ... } }"),c={properties:{tabColor:c}}));const u=this._worksheets.reduce((m,f)=>(f&&f.orderNo)>m?f.orderNo:m,0),h=Object.assign({},c,{id:d,name:n,orderNo:u+1,workbook:this}),p=new i(h);return this._worksheets[d]=p,p}removeWorksheetEx(n){delete this._worksheets[n.id]}removeWorksheet(n){const c=this.getWorksheet(n);c&&c.destroy()}getWorksheet(n){return n===void 0?this._worksheets.find(Boolean):typeof n=="number"?this._worksheets[n]:typeof n=="string"?this._worksheets.find(c=>c&&c.name===n):void 0}get worksheets(){return this._worksheets.slice(1).sort((n,c)=>n.orderNo-c.orderNo).filter(Boolean)}eachSheet(n){this.worksheets.forEach(c=>{n(c,c.id)})}get definedNames(){return this._definedNames}clearThemes(){this._themes=void 0}addImage(n){const c=this.media.length;return this.media.push(Object.assign({},n,{type:"image"})),c}getImage(n){return this.media[n]}get model(){return{creator:this.creator||"Unknown",lastModifiedBy:this.lastModifiedBy||"Unknown",lastPrinted:this.lastPrinted,created:this.created,modified:this.modified,properties:this.properties,worksheets:this.worksheets.map(n=>n.model),sheets:this.worksheets.map(n=>n.model).filter(Boolean),definedNames:this._definedNames.model,views:this.views,company:this.company,manager:this.manager,title:this.title,subject:this.subject,keywords:this.keywords,category:this.category,description:this.description,language:this.language,revision:this.revision,contentStatus:this.contentStatus,themes:this._themes,media:this.media,calcProperties:this.calcProperties}}set model(n){this.creator=n.creator,this.lastModifiedBy=n.lastModifiedBy,this.lastPrinted=n.lastPrinted,this.created=n.created,this.modified=n.modified,this.company=n.company,this.manager=n.manager,this.title=n.title,this.subject=n.subject,this.keywords=n.keywords,this.category=n.category,this.description=n.description,this.language=n.language,this.revision=n.revision,this.contentStatus=n.contentStatus,this.properties=n.properties,this.calcProperties=n.calcProperties,this._worksheets=[],n.worksheets.forEach(c=>{const{id:d,name:u,state:h}=c,p=n.sheets&&n.sheets.findIndex(m=>m.id===d);(this._worksheets[d]=new i({id:d,name:u,orderNo:p,state:h,workbook:this})).model=c}),this._definedNames.model=n.definedNames,this.views=n.views,this._themes=n.themes,this.media=n.media||[]}}},{"../csv/csv":1,"../xlsx/xlsx":144,"./defined-names":6,"./worksheet":14}],14:[function(t,r,l){const i=t("../utils/under-dash"),s=t("../utils/col-cache"),a=t("./range"),o=t("./row"),n=t("./column"),c=t("./enums"),d=t("./image"),u=t("./table"),h=t("./data-validations"),p=t("../utils/encryptor"),{copyStyle:m}=t("../utils/copy-style");r.exports=class{constructor(f){f=f||{},this._workbook=f.workbook,this.id=f.id,this.orderNo=f.orderNo,this.name=f.name,this.state=f.state||"visible",this._rows=[],this._columns=null,this._keys={},this._merges={},this.rowBreaks=[],this.properties=Object.assign({},{defaultRowHeight:15,dyDescent:55,outlineLevelCol:0,outlineLevelRow:0},f.properties),this.pageSetup=Object.assign({},{margins:{left:.7,right:.7,top:.75,bottom:.75,header:.3,footer:.3},orientation:"portrait",horizontalDpi:4294967295,verticalDpi:4294967295,fitToPage:!(!f.pageSetup||!f.pageSetup.fitToWidth&&!f.pageSetup.fitToHeight||f.pageSetup.scale),pageOrder:"downThenOver",blackAndWhite:!1,draft:!1,cellComments:"None",errors:"displayed",scale:100,fitToWidth:1,fitToHeight:1,paperSize:void 0,showRowColHeaders:!1,showGridLines:!1,firstPageNumber:void 0,horizontalCentered:!1,verticalCentered:!1,rowBreaks:null,colBreaks:null},f.pageSetup),this.headerFooter=Object.assign({},{differentFirst:!1,differentOddEven:!1,oddHeader:null,oddFooter:null,evenHeader:null,evenFooter:null,firstHeader:null,firstFooter:null},f.headerFooter),this.dataValidations=new h,this.views=f.views||[],this.autoFilter=f.autoFilter||null,this._media=[],this.sheetProtection=null,this.tables={},this.conditionalFormattings=[]}get name(){return this._name}set name(f){if(f===void 0&&(f="sheet"+this.id),this._name!==f){if(typeof f!="string")throw new Error("The name has to be a string.");if(f==="")throw new Error("The name can't be empty.");if(f==="History")throw new Error('The name "History" is protected. Please use a different name.');if(/[*?:/\\[\]]/.test(f))throw new Error(`Worksheet name ${f} cannot include any of the following characters: * ? : \\ / [ ]`);if(/(^')|('$)/.test(f))throw new Error("The first or last character of worksheet name cannot be a single quotation mark: "+f);if(f&&f.length>31&&(console.warn(`Worksheet name ${f} exceeds 31 chars. This will be truncated`),f=f.substring(0,31)),this._workbook._worksheets.find(b=>b&&b.name.toLowerCase()===f.toLowerCase()))throw new Error("Worksheet name already exists: "+f);this._name=f}}get workbook(){return this._workbook}destroy(){this._workbook.removeWorksheetEx(this)}get dimensions(){const f=new a;return this._rows.forEach(b=>{if(b){const y=b.dimensions;y&&f.expand(b.number,y.min,b.number,y.max)}}),f}get columns(){return this._columns}set columns(f){this._headerRowCount=f.reduce((_,E)=>{const M=(E.header?1:E.headers&&E.headers.length)||0;return Math.max(_,M)},0);let b=1;const y=this._columns=[];f.forEach(_=>{const E=new n(this,b++,!1);y.push(E),E.defn=_})}getColumnKey(f){return this._keys[f]}setColumnKey(f,b){this._keys[f]=b}deleteColumnKey(f){delete this._keys[f]}eachColumnKey(f){i.each(this._keys,f)}getColumn(f){if(typeof f=="string"){const b=this._keys[f];if(b)return b;f=s.l2n(f)}if(this._columns||(this._columns=[]),f>this._columns.length){let b=this._columns.length+1;for(;b<=f;)this._columns.push(new n(this,b++))}return this._columns[f-1]}spliceColumns(f,b){const y=this._rows.length;for(var _=arguments.length,E=new Array(_>2?_-2:0),M=2;M<_;M++)E[M-2]=arguments[M];if(E.length>0)for(let N=0;N<y;N++){const B=[f,b];E.forEach($=>{B.push($[N]||null)});const H=this.getRow(N+1);H.splice.apply(H,B)}else this._rows.forEach(N=>{N&&N.splice(f,b)});const D=E.length-b,z=f+b,O=this._columns.length;if(D<0)for(let N=f+E.length;N<=O;N++)this.getColumn(N).defn=this.getColumn(N-D).defn;else if(D>0)for(let N=O;N>=z;N--)this.getColumn(N+D).defn=this.getColumn(N).defn;for(let N=f;N<f+E.length;N++)this.getColumn(N).defn=null;this.workbook.definedNames.spliceColumns(this.name,f,b,E.length)}get lastColumn(){return this.getColumn(this.columnCount)}get columnCount(){let f=0;return this.eachRow(b=>{f=Math.max(f,b.cellCount)}),f}get actualColumnCount(){const f=[];let b=0;return this.eachRow(y=>{y.eachCell(_=>{let{col:E}=_;f[E]||(f[E]=!0,b++)})}),b}_commitRow(){}get _lastRowNumber(){const f=this._rows;let b=f.length;for(;b>0&&f[b-1]===void 0;)b--;return b}get _nextRow(){return this._lastRowNumber+1}get lastRow(){if(this._rows.length)return this._rows[this._rows.length-1]}findRow(f){return this._rows[f-1]}findRows(f,b){return this._rows.slice(f-1,f-1+b)}get rowCount(){return this._lastRowNumber}get actualRowCount(){let f=0;return this.eachRow(()=>{f++}),f}getRow(f){let b=this._rows[f-1];return b||(b=this._rows[f-1]=new o(this,f)),b}getRows(f,b){if(b<1)return;const y=[];for(let _=f;_<f+b;_++)y.push(this.getRow(_));return y}addRow(f){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";const y=this._nextRow,_=this.getRow(y);return _.values=f,this._setStyleOption(y,b[0]==="i"?b:"n"),_}addRows(f){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";const y=[];return f.forEach(_=>{y.push(this.addRow(_,b))}),y}insertRow(f,b){let y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"n";return this.spliceRows(f,0,b),this._setStyleOption(f,y),this.getRow(f)}insertRows(f,b){let y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"n";if(this.spliceRows(f,0,...b),y!=="n")for(let _=0;_<b.length;_++)y[0]==="o"&&this.findRow(b.length+f+_)!==void 0?this._copyStyle(b.length+f+_,f+_,y[1]==="+"):y[0]==="i"&&this.findRow(f-1)!==void 0&&this._copyStyle(f-1,f+_,y[1]==="+");return this.getRows(f,b.length)}_setStyleOption(f){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";b[0]==="o"&&this.findRow(f+1)!==void 0?this._copyStyle(f+1,f,b[1]==="+"):b[0]==="i"&&this.findRow(f-1)!==void 0&&this._copyStyle(f-1,f,b[1]==="+")}_copyStyle(f,b){let y=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const _=this.getRow(f),E=this.getRow(b);E.style=m(_.style),_.eachCell({includeEmpty:y},(M,D)=>{E.getCell(D).style=m(M.style)}),E.height=_.height}duplicateRow(f,b){let y=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const _=this._rows[f-1],E=new Array(b).fill(_.values);this.spliceRows(f+1,y?0:b,...E);for(let M=0;M<b;M++){const D=this._rows[f+M];D.style=_.style,D.height=_.height,_.eachCell({includeEmpty:!0},(z,O)=>{D.getCell(O).style=z.style})}}spliceRows(f,b){const y=f+b;for(var _=arguments.length,E=new Array(_>2?_-2:0),M=2;M<_;M++)E[M-2]=arguments[M];const D=E.length,z=D-b,O=this._rows.length;let N,B;if(z<0)for(f===O&&(this._rows[O-1]=void 0),N=y;N<=O;N++)if(B=this._rows[N-1],B){const H=this.getRow(N+z);H.values=B.values,H.style=B.style,H.height=B.height,B.eachCell({includeEmpty:!0},($,C)=>{H.getCell(C).style=$.style}),this._rows[N-1]=void 0}else this._rows[N+z-1]=void 0;else if(z>0)for(N=O;N>=y;N--)if(B=this._rows[N-1],B){const H=this.getRow(N+z);H.values=B.values,H.style=B.style,H.height=B.height,B.eachCell({includeEmpty:!0},($,C)=>{if(H.getCell(C).style=$.style,$._value.constructor.name==="MergeValue"){const R=this.getRow($._row._number+D).getCell(C),k=$._value._master,v=this.getRow(k._row._number+D).getCell(k._column._number);R.merge(v)}})}else this._rows[N+z-1]=void 0;for(N=0;N<D;N++){const H=this.getRow(f+N);H.style={},H.values=E[N]}this.workbook.definedNames.spliceRows(this.name,f,b,D)}eachRow(f,b){if(b||(b=f,f=void 0),f&&f.includeEmpty){const y=this._rows.length;for(let _=1;_<=y;_++)b(this.getRow(_),_)}else this._rows.forEach(y=>{y&&y.hasValues&&b(y,y.number)})}getSheetValues(){const f=[];return this._rows.forEach(b=>{b&&(f[b.number]=b.values)}),f}findCell(f,b){const y=s.getAddress(f,b),_=this._rows[y.row-1];return _?_.findCell(y.col):void 0}getCell(f,b){const y=s.getAddress(f,b);return this.getRow(y.row).getCellEx(y)}mergeCells(){for(var f=arguments.length,b=new Array(f),y=0;y<f;y++)b[y]=arguments[y];const _=new a(b);this._mergeCellsInternal(_)}mergeCellsWithoutStyle(){for(var f=arguments.length,b=new Array(f),y=0;y<f;y++)b[y]=arguments[y];const _=new a(b);this._mergeCellsInternal(_,!0)}_mergeCellsInternal(f,b){i.each(this._merges,_=>{if(_.intersects(f))throw new Error("Cannot merge already merged cells")});const y=this.getCell(f.top,f.left);for(let _=f.top;_<=f.bottom;_++)for(let E=f.left;E<=f.right;E++)(_>f.top||E>f.left)&&this.getCell(_,E).merge(y,b);this._merges[y.address]=f}_unMergeMaster(f){const b=this._merges[f.address];if(b){for(let y=b.top;y<=b.bottom;y++)for(let _=b.left;_<=b.right;_++)this.getCell(y,_).unmerge();delete this._merges[f.address]}}get hasMerges(){return i.some(this._merges,Boolean)}unMergeCells(){for(var f=arguments.length,b=new Array(f),y=0;y<f;y++)b[y]=arguments[y];const _=new a(b);for(let E=_.top;E<=_.bottom;E++)for(let M=_.left;M<=_.right;M++){const D=this.findCell(E,M);D&&(D.type===c.ValueType.Merge?this._unMergeMaster(D.master):this._merges[D.address]&&this._unMergeMaster(D))}}fillFormula(f,b,y){let _=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"shared";const E=s.decode(f),{top:M,left:D,bottom:z,right:O}=E,N=O-D+1,B=s.encodeAddress(M,D),H=_==="shared";let $;$=typeof y=="function"?y:Array.isArray(y)?Array.isArray(y[0])?(R,k)=>y[R-M][k-D]:(R,k)=>y[(R-M)*N+(k-D)]:()=>{};let C=!0;for(let R=M;R<=z;R++)for(let k=D;k<=O;k++)C?(this.getCell(R,k).value={shareType:_,formula:b,ref:f,result:$(R,k)},C=!1):this.getCell(R,k).value=H?{sharedFormula:B,result:$(R,k)}:$(R,k)}addImage(f,b){const y={type:"image",imageId:f,range:b};this._media.push(new d(this,y))}getImages(){return this._media.filter(f=>f.type==="image")}addBackgroundImage(f){const b={type:"background",imageId:f};this._media.push(new d(this,b))}getBackgroundImageId(){const f=this._media.find(b=>b.type==="background");return f&&f.imageId}protect(f,b){return new Promise(y=>{this.sheetProtection={sheet:!0},b&&"spinCount"in b&&(b.spinCount=Number.isFinite(b.spinCount)?Math.round(Math.max(0,b.spinCount)):1e5),f&&(this.sheetProtection.algorithmName="SHA-512",this.sheetProtection.saltValue=p.randomBytes(16).toString("base64"),this.sheetProtection.spinCount=b&&"spinCount"in b?b.spinCount:1e5,this.sheetProtection.hashValue=p.convertPasswordToHash(f,"SHA512",this.sheetProtection.saltValue,this.sheetProtection.spinCount)),b&&(this.sheetProtection=Object.assign(this.sheetProtection,b),!f&&"spinCount"in b&&delete this.sheetProtection.spinCount),y()})}unprotect(){this.sheetProtection=null}addTable(f){const b=new u(this,f);return this.tables[f.name]=b,b}getTable(f){return this.tables[f]}removeTable(f){delete this.tables[f]}getTables(){return Object.values(this.tables)}addConditionalFormatting(f){this.conditionalFormattings.push(f)}removeConditionalFormatting(f){typeof f=="number"?this.conditionalFormattings.splice(f,1):this.conditionalFormattings=f instanceof Function?this.conditionalFormattings.filter(f):[]}get tabColor(){return console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor}set tabColor(f){console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor=f}get model(){const f={id:this.id,name:this.name,dataValidations:this.dataValidations.model,properties:this.properties,state:this.state,pageSetup:this.pageSetup,headerFooter:this.headerFooter,rowBreaks:this.rowBreaks,views:this.views,autoFilter:this.autoFilter,media:this._media.map(_=>_.model),sheetProtection:this.sheetProtection,tables:Object.values(this.tables).map(_=>_.model),conditionalFormattings:this.conditionalFormattings};f.cols=n.toModel(this.columns);const b=f.rows=[],y=f.dimensions=new a;return this._rows.forEach(_=>{const E=_&&_.model;E&&(y.expand(E.number,E.min,E.number,E.max),b.push(E))}),f.merges=[],i.each(this._merges,_=>{f.merges.push(_.range)}),f}_parseRows(f){this._rows=[],f.rows.forEach(b=>{const y=new o(this,b.number);this._rows[y.number-1]=y,y.model=b})}_parseMergeCells(f){i.each(f.mergeCells,b=>{this.mergeCellsWithoutStyle(b)})}set model(f){this.name=f.name,this._columns=n.fromModel(this,f.cols),this._parseRows(f),this._parseMergeCells(f),this.dataValidations=new h(f.dataValidations),this.properties=f.properties,this.pageSetup=f.pageSetup,this.headerFooter=f.headerFooter,this.views=f.views,this.autoFilter=f.autoFilter,this._media=f.media.map(b=>new d(this,b)),this.sheetProtection=f.sheetProtection,this.tables=f.tables.reduce((b,y)=>{const _=new u;return _.model=y,b[y.name]=_,b},{}),this.conditionalFormattings=f.conditionalFormattings}}},{"../utils/col-cache":19,"../utils/copy-style":20,"../utils/encryptor":21,"../utils/under-dash":26,"./column":4,"./data-validations":5,"./enums":7,"./image":8,"./range":10,"./row":11,"./table":12}],15:[function(t,r,l){t("core-js/modules/es.promise"),t("core-js/modules/es.promise.finally"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.values"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.async-iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.find-index"),t("core-js/modules/es.array.find"),t("core-js/modules/es.string.from-code-point"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.number.is-nan"),t("regenerator-runtime/runtime");const i={Workbook:t("./doc/workbook")},s=t("./doc/enums");Object.keys(s).forEach(a=>{i[a]=s[a]}),r.exports=i},{"./doc/enums":7,"./doc/workbook":13,"core-js/modules/es.array.find":359,"core-js/modules/es.array.find-index":358,"core-js/modules/es.array.includes":360,"core-js/modules/es.array.iterator":361,"core-js/modules/es.number.is-nan":363,"core-js/modules/es.object.assign":364,"core-js/modules/es.object.keys":366,"core-js/modules/es.object.values":367,"core-js/modules/es.promise":372,"core-js/modules/es.promise.finally":371,"core-js/modules/es.string.from-code-point":376,"core-js/modules/es.string.includes":377,"core-js/modules/es.symbol":381,"core-js/modules/es.symbol.async-iterator":378,"regenerator-runtime/runtime":492}],16:[function(t,r,l){const i=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");l.bufferToString=function(s){return typeof s=="string"?s:i?i.decode(s):s.toString()}},{}],17:[function(t,r,l){const i=typeof TextEncoder>"u"?null:new TextEncoder("utf-8"),{Buffer:s}=t("buffer");l.stringToBuffer=function(a){return typeof a!="string"?a:i?s.from(i.encode(a).buffer):s.from(a)}},{buffer:220}],18:[function(t,r,l){const i=t("./under-dash"),s=t("./col-cache");r.exports=class{constructor(a){this.template=a,this.sheets={}}addCell(a){this.addCellEx(s.decodeEx(a))}getCell(a){return this.findCellEx(s.decodeEx(a),!0)}findCell(a){return this.findCellEx(s.decodeEx(a),!1)}findCellAt(a,o,n){const c=this.sheets[a],d=c&&c[o];return d&&d[n]}addCellEx(a){if(a.top)for(let o=a.top;o<=a.bottom;o++)for(let n=a.left;n<=a.right;n++)this.getCellAt(a.sheetName,o,n);else this.findCellEx(a,!0)}getCellEx(a){return this.findCellEx(a,!0)}findCellEx(a,o){const n=this.findSheet(a,o),c=this.findSheetRow(n,a,o);return this.findRowCell(c,a,o)}getCellAt(a,o,n){const c=this.sheets[a]||(this.sheets[a]=[]),d=c[o]||(c[o]=[]);return d[n]||(d[n]={sheetName:a,address:s.n2l(n)+o,row:o,col:n})}removeCellEx(a){const o=this.findSheet(a);if(!o)return;const n=this.findSheetRow(o,a);n&&delete n[a.col]}forEachInSheet(a,o){const n=this.sheets[a];n&&n.forEach((c,d)=>{c&&c.forEach((u,h)=>{u&&o(u,d,h)})})}forEach(a){i.each(this.sheets,(o,n)=>{this.forEachInSheet(n,a)})}map(a){const o=[];return this.forEach(n=>{o.push(a(n))}),o}findSheet(a,o){const n=a.sheetName;return this.sheets[n]?this.sheets[n]:o?this.sheets[n]=[]:void 0}findSheetRow(a,o,n){const{row:c}=o;return a&&a[c]?a[c]:n?a[c]=[]:void 0}findRowCell(a,o,n){const{col:c}=o;return a&&a[c]?a[c]:n?a[c]=this.template?Object.assign(o,JSON.parse(JSON.stringify(this.template))):o:void 0}spliceRows(a,o,n,c){const d=this.sheets[a];if(d){const u=[];for(let h=0;h<c;h++)u.push([]);d.splice(o,n,...u)}}spliceColumns(a,o,n,c){const d=this.sheets[a];if(d){const u=[];for(let h=0;h<c;h++)u.push(null);i.each(d,h=>{h.splice(o,n,...u)})}}}},{"./col-cache":19,"./under-dash":26}],19:[function(t,r,l){const i=/^[A-Z]+\d+$/,s={_dictionary:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],_l2nFill:0,_l2n:{},_n2l:[],_level:a=>a<=26?1:a<=676?2:3,_fill(a){let o,n,c,d,u,h=1;if(a>=4)throw new Error("Out of bounds. Excel supports columns from 1 to 16384");if(this._l2nFill<1&&a>=1){for(;h<=26;)o=this._dictionary[h-1],this._n2l[h]=o,this._l2n[o]=h,h++;this._l2nFill=1}if(this._l2nFill<2&&a>=2){for(h=27;h<=702;)n=h-27,c=n%26,d=Math.floor(n/26),o=this._dictionary[d]+this._dictionary[c],this._n2l[h]=o,this._l2n[o]=h,h++;this._l2nFill=2}if(this._l2nFill<3&&a>=3){for(h=703;h<=16384;)n=h-703,c=n%26,d=Math.floor(n/26)%26,u=Math.floor(n/676),o=this._dictionary[u]+this._dictionary[d]+this._dictionary[c],this._n2l[h]=o,this._l2n[o]=h,h++;this._l2nFill=3}},l2n(a){if(this._l2n[a]||this._fill(a.length),!this._l2n[a])throw new Error("Out of bounds. Invalid column letter: "+a);return this._l2n[a]},n2l(a){if(a<1||a>16384)throw new Error(a+" is out of bounds. Excel supports columns from 1 to 16384");return this._n2l[a]||this._fill(this._level(a)),this._n2l[a]},_hash:{},validateAddress(a){if(!i.test(a))throw new Error("Invalid Address: "+a);return!0},decodeAddress(a){const o=a.length<5&&this._hash[a];if(o)return o;let n=!1,c="",d=0,u=!1,h="",p=0;for(let f,b=0;b<a.length;b++)if(f=a.charCodeAt(b),!u&&f>=65&&f<=90)n=!0,c+=a[b],d=26*d+f-64;else if(f>=48&&f<=57)u=!0,h+=a[b],p=10*p+f-48;else if(u&&n&&f!==36)break;if(n){if(d>16384)throw new Error("Out of bounds. Invalid column letter: "+c)}else d=void 0;u||(p=void 0);const m={address:a=c+h,col:d,row:p,$col$row:`$${c}$${h}`};return d<=100&&p<=100&&(this._hash[a]=m,this._hash[m.$col$row]=m),m},getAddress(a,o){if(o){const n=this.n2l(o)+a;return this.decodeAddress(n)}return this.decodeAddress(a)},decode(a){const o=a.split(":");if(o.length===2){const n=this.decodeAddress(o[0]),c=this.decodeAddress(o[1]),d={top:Math.min(n.row,c.row),left:Math.min(n.col,c.col),bottom:Math.max(n.row,c.row),right:Math.max(n.col,c.col)};return d.tl=this.n2l(d.left)+d.top,d.br=this.n2l(d.right)+d.bottom,d.dimensions=`${d.tl}:${d.br}`,d}return this.decodeAddress(a)},decodeEx(a){const o=a.match(/(?:(?:(?:'((?:[^']|'')*)')|([^'^ !]*))!)?(.*)/),n=o[1]||o[2],c=o[3],d=c.split(":");if(d.length>1){let h=this.decodeAddress(d[0]),p=this.decodeAddress(d[1]);const m=Math.min(h.row,p.row),f=Math.min(h.col,p.col),b=Math.max(h.row,p.row),y=Math.max(h.col,p.col);return h=this.n2l(f)+m,p=this.n2l(y)+b,{top:m,left:f,bottom:b,right:y,sheetName:n,tl:{address:h,col:f,row:m,$col$row:`$${this.n2l(f)}$${m}`,sheetName:n},br:{address:p,col:y,row:b,$col$row:`$${this.n2l(y)}$${b}`,sheetName:n},dimensions:`${h}:${p}`}}if(c.startsWith("#"))return n?{sheetName:n,error:c}:{error:c};const u=this.decodeAddress(c);return n?{sheetName:n,...u}:u},encodeAddress:(a,o)=>s.n2l(o)+a,encode(){switch(arguments.length){case 2:return s.encodeAddress(arguments[0],arguments[1]);case 4:return`${s.encodeAddress(arguments[0],arguments[1])}:${s.encodeAddress(arguments[2],arguments[3])}`;default:throw new Error("Can only encode with 2 or 4 arguments")}},inRange(a,o){const[n,c,,d,u]=a,[h,p]=o;return h>=n&&h<=d&&p>=c&&p<=u}};r.exports=s},{}],20:[function(t,r,l){const i=(a,o)=>({...a,...o.reduce((n,c)=>(a[c]&&(n[c]={...a[c]}),n),{})}),s=function(a,o,n){let c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];a[n]&&(o[n]=i(a[n],c))};l.copyStyle=a=>{if(!a)return a;if(o=a,Object.keys(o).length===0)return{};var o;const n={...a};return s(a,n,"font",["color"]),s(a,n,"alignment"),s(a,n,"protection"),a.border&&(s(a,n,"border"),s(a.border,n.border,"top",["color"]),s(a.border,n.border,"left",["color"]),s(a.border,n.border,"bottom",["color"]),s(a.border,n.border,"right",["color"]),s(a.border,n.border,"diagonal",["color"])),a.fill&&(s(a,n,"fill",["fgColor","bgColor","center"]),a.fill.stops&&(n.fill.stops=a.fill.stops.map(c=>i(c,["color"])))),n}},{}],21:[function(t,r,l){(function(i){(function(){const s=t("crypto"),a={hash(o){const n=s.createHash(o);for(var c=arguments.length,d=new Array(c>1?c-1:0),u=1;u<c;u++)d[u-1]=arguments[u];return n.update(i.concat(d)),n.digest()},convertPasswordToHash(o,n,c,d){if(n=n.toLowerCase(),s.getHashes().indexOf(n)<0)throw new Error(`Hash algorithm '${n}' not supported!`);const u=i.from(o,"utf16le");let h=this.hash(n,i.from(c,"base64"),u);for(let p=0;p<d;p++){const m=i.alloc(4);m.writeUInt32LE(p,0),h=this.hash(n,h,m)}return h.toString("base64")},randomBytes:o=>s.randomBytes(o)};r.exports=a}).call(this)}).call(this,t("buffer").Buffer)},{buffer:220,crypto:390}],22:[function(t,r,l){const{SaxesParser:i}=t("saxes"),{PassThrough:s}=t("readable-stream"),{bufferToString:a}=t("./browser-buffer-decode");r.exports=async function*(o){o.pipe&&!o[Symbol.asyncIterator]&&(o=o.pipe(new s));const n=new i;let c;n.on("error",u=>{c=u});let d=[];n.on("opentag",u=>d.push({eventType:"opentag",value:u})),n.on("text",u=>d.push({eventType:"text",value:u})),n.on("closetag",u=>d.push({eventType:"closetag",value:u}));for await(const u of o){if(n.write(a(u)),c)throw c;yield d,d=[]}}},{"./browser-buffer-decode":16,"readable-stream":491,saxes:496}],23:[function(t,r,l){const i=t("./col-cache"),s=/(([a-z_\-0-9]*)!)?([a-z0-9_$]{2,})([(])?/gi,a=/^([$])?([a-z]+)([$])?([1-9][0-9]*)$/i;r.exports={slideFormula:function(o,n,c){const d=i.decode(n),u=i.decode(c);return o.replace(s,(h,p,m,f,b)=>{if(b)return h;const y=a.exec(f);if(y){const _=y[1],E=y[2].toUpperCase(),M=y[3],D=y[4];if(E.length>3||E.length===3&&E>"XFD")return h;let z=i.l2n(E),O=parseInt(D,10);return _||(z+=u.col-d.col),M||(O+=u.row-d.row),(p||"")+(_||"")+i.n2l(z)+(M||"")+O}return h})}}},{"./col-cache":19}],24:[function(t,r,l){(function(i,s){(function(){const a=t("readable-stream"),o=t("./utils"),n=t("./string-buf");class c{constructor(f,b){this._data=f,this._encoding=b}get length(){return this.toBuffer().length}copy(f,b,y,_){return this.toBuffer().copy(f,b,y,_)}toBuffer(){return this._buffer||(this._buffer=s.from(this._data,this._encoding)),this._buffer}}class d{constructor(f){this._data=f}get length(){return this._data.length}copy(f,b,y,_){return this._data._buf.copy(f,b,y,_)}toBuffer(){return this._data.toBuffer()}}class u{constructor(f){this._data=f}get length(){return this._data.length}copy(f,b,y,_){this._data.copy(f,b,y,_)}toBuffer(){return this._data}}class h{constructor(f){this.size=f,this.buffer=s.alloc(f),this.iRead=0,this.iWrite=0}toBuffer(){if(this.iRead===0&&this.iWrite===this.size)return this.buffer;const f=s.alloc(this.iWrite-this.iRead);return this.buffer.copy(f,0,this.iRead,this.iWrite),f}get length(){return this.iWrite-this.iRead}get eod(){return this.iRead===this.iWrite}get full(){return this.iWrite===this.size}read(f){let b;return f===0?null:f===void 0||f>=this.length?(b=this.toBuffer(),this.iRead=this.iWrite,b):(b=s.alloc(f),this.buffer.copy(b,0,this.iRead,f),this.iRead+=f,b)}write(f,b,y){const _=Math.min(y,this.size-this.iWrite);return f.copy(this.buffer,this.iWrite,b,b+_),this.iWrite+=_,_}}const p=function(m){m=m||{},this.bufSize=m.bufSize||1048576,this.buffers=[],this.batch=m.batch||!1,this.corked=!1,this.inPos=0,this.outPos=0,this.pipes=[],this.paused=!1,this.encoding=null};o.inherits(p,a.Duplex,{toBuffer(){switch(this.buffers.length){case 0:return null;case 1:return this.buffers[0].toBuffer();default:return s.concat(this.buffers.map(m=>m.toBuffer()))}},_getWritableBuffer(){if(this.buffers.length){const f=this.buffers[this.buffers.length-1];if(!f.full)return f}const m=new h(this.bufSize);return this.buffers.push(m),m},async _pipe(m){await Promise.all(this.pipes.map(function(f){return new Promise(b=>{f.write(m.toBuffer(),()=>{b()})})}))},_writeToBuffers(m){let f=0;const b=m.length;for(;f<b;)f+=this._getWritableBuffer().write(m,f,b-f)},async write(m,f,b){let y;if(f instanceof Function&&(b=f,f="utf8"),b=b||o.nop,m instanceof n)y=new d(m);else if(m instanceof s)y=new u(m);else{if(!(typeof m=="string"||m instanceof String||m instanceof ArrayBuffer))throw new Error("Chunk must be one of type String, Buffer or StringBuf.");y=new c(m,f)}if(this.pipes.length)if(this.batch)for(this._writeToBuffers(y);!this.corked&&this.buffers.length>1;)this._pipe(this.buffers.shift());else this.corked?(this._writeToBuffers(y),i.nextTick(b)):(await this._pipe(y),b());else this.paused||this.emit("data",y.toBuffer()),this._writeToBuffers(y),this.emit("readable");return!0},cork(){this.corked=!0},_flush(){if(this.pipes.length)for(;this.buffers.length;)this._pipe(this.buffers.shift())},uncork(){this.corked=!1,this._flush()},end(m,f,b){const y=_=>{_?b(_):(this._flush(),this.pipes.forEach(E=>{E.end()}),this.emit("finish"))};m?this.write(m,f,y):y()},read(m){let f;if(m){for(f=[];m&&this.buffers.length&&!this.buffers[0].eod;){const b=this.buffers[0],y=b.read(m);m-=y.length,f.push(y),b.eod&&b.full&&this.buffers.shift()}return s.concat(f)}return f=this.buffers.map(b=>b.toBuffer()).filter(Boolean),this.buffers=[],s.concat(f)},setEncoding(m){this.encoding=m},pause(){this.paused=!0},resume(){this.paused=!1},isPaused(){return!!this.paused},pipe(m){this.pipes.push(m),!this.paused&&this.buffers.length&&this.end()},unpipe(m){this.pipes=this.pipes.filter(f=>f!==m)},unshift(){throw new Error("Not Implemented")},wrap(){throw new Error("Not Implemented")}}),r.exports=p}).call(this)}).call(this,t("_process"),t("buffer").Buffer)},{"./string-buf":25,"./utils":27,_process:467,buffer:220,"readable-stream":491}],25:[function(t,r,l){(function(i){(function(){r.exports=class{constructor(s){this._buf=i.alloc(s&&s.size||16384),this._encoding=s&&s.encoding||"utf8",this._inPos=0,this._buffer=void 0}get length(){return this._inPos}get capacity(){return this._buf.length}get buffer(){return this._buf}toBuffer(){return this._buffer||(this._buffer=i.alloc(this.length),this._buf.copy(this._buffer,0,0,this.length)),this._buffer}reset(s){s=s||0,this._buffer=void 0,this._inPos=s}_grow(s){let a=2*this._buf.length;for(;a<s;)a*=2;const o=i.alloc(a);this._buf.copy(o,0),this._buf=o}addText(s){this._buffer=void 0;let a=this._inPos+this._buf.write(s,this._inPos,this._encoding);for(;a>=this._buf.length-4;)this._grow(this._inPos+s.length),a=this._inPos+this._buf.write(s,this._inPos,this._encoding);this._inPos=a}addStringBuf(s){s.length&&(this._buffer=void 0,this.length+s.length>this.capacity&&this._grow(this.length+s.length),s._buf.copy(this._buf,this._inPos,0,s.length),this._inPos+=s.length)}}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:220}],26:[function(t,r,l){const{toString:i}=Object.prototype,s=/["&<>]/,a={each:function(o,n){o&&(Array.isArray(o)?o.forEach(n):Object.keys(o).forEach(c=>{n(o[c],c)}))},some:function(o,n){return!!o&&(Array.isArray(o)?o.some(n):Object.keys(o).some(c=>n(o[c],c)))},every:function(o,n){return!o||(Array.isArray(o)?o.every(n):Object.keys(o).every(c=>n(o[c],c)))},map:function(o,n){return o?Array.isArray(o)?o.map(n):Object.keys(o).map(c=>n(o[c],c)):[]},keyBy:(o,n)=>o.reduce((c,d)=>(c[d[n]]=d,c),{}),isEqual:function(o,n){const c=typeof o,d=typeof n,u=Array.isArray(o),h=Array.isArray(n);let p;if(c!==d)return!1;switch(typeof o){case"object":if(u||h)return!(!u||!h)&&o.length===n.length&&o.every((m,f)=>{const b=n[f];return a.isEqual(m,b)});if(o===null||n===null)return o===n;if(p=Object.keys(o),Object.keys(n).length!==p.length)return!1;for(const m of p)if(!n.hasOwnProperty(m))return!1;return a.every(o,(m,f)=>{const b=n[f];return a.isEqual(m,b)});default:return o===n}},escapeHtml(o){const n=s.exec(o);if(!n)return o;let c="",d="",u=0,h=n.index;for(;h<o.length;h++){switch(o.charAt(h)){case'"':d="&quot;";break;case"&":d="&amp;";break;case"'":d="&apos;";break;case"<":d="&lt;";break;case">":d="&gt;";break;default:continue}u!==h&&(c+=o.substring(u,h)),u=h+1,c+=d}return u!==h?c+o.substring(u,h):c},strcmp:(o,n)=>o<n?-1:o>n?1:0,isUndefined:o=>i.call(o)==="[object Undefined]",isObject:o=>i.call(o)==="[object Object]",deepMerge(){const o=arguments[0]||{},{length:n}=arguments;let c,d,u;function h(p,m){c=o[m],u=Array.isArray(p),a.isObject(p)||u?(u?(u=!1,d=c&&Array.isArray(c)?c:[]):d=c&&a.isObject(c)?c:{},o[m]=a.deepMerge(d,p)):a.isUndefined(p)||(o[m]=p)}for(let p=0;p<n;p++)a.each(arguments[p],h);return o}};r.exports=a},{}],27:[function(t,r,l){(function(i,s){(function(){const a=t("fs"),o=/[<>&'"\x7F\x00-\x08\x0B-\x0C\x0E-\x1F]/,n={nop(){},promiseImmediate:c=>new Promise(d=>{i.setImmediate?s(()=>{d(c)}):setTimeout(()=>{d(c)},1)}),inherits:function(c,d,u,h){c.super_=d,h||(h=u,u=null),u&&Object.keys(u).forEach(m=>{Object.defineProperty(c,m,Object.getOwnPropertyDescriptor(u,m))});const p={constructor:{value:c,enumerable:!1,writable:!1,configurable:!0}};h&&Object.keys(h).forEach(m=>{p[m]=Object.getOwnPropertyDescriptor(h,m)}),c.prototype=Object.create(d.prototype,p)},dateToExcel:(c,d)=>25569+c.getTime()/864e5-(d?1462:0),excelToDate(c,d){const u=Math.round(24*(c-25569+(d?1462:0))*3600*1e3);return new Date(u)},parsePath(c){const d=c.lastIndexOf("/");return{path:c.substring(0,d),name:c.substring(d+1)}},getRelsPath(c){const d=n.parsePath(c);return`${d.path}/_rels/${d.name}.rels`},xmlEncode(c){const d=o.exec(c);if(!d)return c;let u="",h="",p=0,m=d.index;for(;m<c.length;m++){const f=c.charCodeAt(m);switch(f){case 34:h="&quot;";break;case 38:h="&amp;";break;case 39:h="&apos;";break;case 60:h="&lt;";break;case 62:h="&gt;";break;case 127:h="";break;default:if(f<=31&&(f<=8||f>=11&&f!==13)){h="";break}continue}p!==m&&(u+=c.substring(p,m)),p=m+1,h&&(u+=h)}return p!==m?u+c.substring(p,m):u},xmlDecode:c=>c.replace(/&([a-z]*);/g,d=>{switch(d){case"&lt;":return"<";case"&gt;":return">";case"&amp;":return"&";case"&apos;":return"'";case"&quot;":return'"';default:return d}}),validInt(c){const d=parseInt(c,10);return Number.isNaN(d)?0:d},isDateFmt(c){return c?(c=(c=c.replace(/\[[^\]]*]/g,"")).replace(/"[^"]*"/g,"")).match(/[ymdhMsb]+/)!==null:!1},fs:{exists:c=>new Promise(d=>{a.access(c,a.constants.F_OK,u=>{d(!u)})})},toIsoDateString:c=>c.toIsoString().subsstr(0,10),parseBoolean:c=>c===!0||c==="true"||c===1||c==="1"};r.exports=n}).call(this)}).call(this,typeof ve<"u"?ve:typeof self<"u"?self:typeof window<"u"?window:{},t("timers").setImmediate)},{fs:216,timers:523}],28:[function(t,r,l){const i=t("./under-dash"),s=t("./utils");function a(c,d,u){c.push(` ${d}="${s.xmlEncode(u.toString())}"`)}function o(c,d){if(d){const u=[];i.each(d,(h,p)=>{h!==void 0&&a(u,p,h)}),c.push(u.join(""))}}class n{constructor(){this._xml=[],this._stack=[],this._rollbacks=[]}get tos(){return this._stack.length?this._stack[this._stack.length-1]:void 0}get cursor(){return this._xml.length}openXml(d){const u=this._xml;u.push("<?xml"),o(u,d),u.push(`?>
`)}openNode(d,u){const h=this.tos,p=this._xml;h&&this.open&&p.push(">"),this._stack.push(d),p.push("<"),p.push(d),o(p,u),this.leaf=!0,this.open=!0}addAttribute(d,u){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");u!==void 0&&a(this._xml,d,u)}addAttributes(d){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");o(this._xml,d)}writeText(d){const u=this._xml;this.open&&(u.push(">"),this.open=!1),this.leaf=!1,u.push(s.xmlEncode(d.toString()))}writeXml(d){this.open&&(this._xml.push(">"),this.open=!1),this.leaf=!1,this._xml.push(d)}closeNode(){const d=this._stack.pop(),u=this._xml;this.leaf?u.push("/>"):(u.push("</"),u.push(d),u.push(">")),this.open=!1,this.leaf=!1}leafNode(d,u,h){this.openNode(d,u),h!==void 0&&this.writeText(h),this.closeNode()}closeAll(){for(;this._stack.length;)this.closeNode()}addRollback(){return this._rollbacks.push({xml:this._xml.length,stack:this._stack.length,leaf:this.leaf,open:this.open}),this.cursor}commit(){this._rollbacks.pop()}rollback(){const d=this._rollbacks.pop();this._xml.length>d.xml&&this._xml.splice(d.xml,this._xml.length-d.xml),this._stack.length>d.stack&&this._stack.splice(d.stack,this._stack.length-d.stack),this.leaf=d.leaf,this.open=d.open}get xml(){return this.closeAll(),this._xml.join("")}}n.StdDocAttributes={version:"1.0",encoding:"UTF-8",standalone:"yes"},r.exports=n},{"./under-dash":26,"./utils":27}],29:[function(t,r,l){(function(i){(function(){const s=t("events"),a=t("jszip"),o=t("./stream-buf"),{stringToBuffer:n}=t("./browser-buffer-encode");class c extends s.EventEmitter{constructor(u){super(),this.options=Object.assign({type:"nodebuffer",compression:"DEFLATE"},u),this.zip=new a,this.stream=new o}append(u,h){h.hasOwnProperty("base64")&&h.base64?this.zip.file(h.name,u,{base64:!0}):(i.browser&&typeof u=="string"&&(u=n(u)),this.zip.file(h.name,u))}async finalize(){const u=await this.zip.generateAsync(this.options);this.stream.end(u),this.emit("finish")}read(u){return this.stream.read(u)}setEncoding(u){return this.stream.setEncoding(u)}pause(){return this.stream.pause()}resume(){return this.stream.resume()}isPaused(){return this.stream.isPaused()}pipe(u,h){return this.stream.pipe(u,h)}unpipe(u){return this.stream.unpipe(u)}unshift(u){return this.stream.unshift(u)}wrap(u){return this.stream.wrap(u)}}r.exports={ZipWriter:c}}).call(this)}).call(this,t("_process"))},{"./browser-buffer-encode":17,"./stream-buf":24,_process:467,events:422,jszip:441}],30:[function(t,r,l){r.exports={0:{f:"General"},1:{f:"0"},2:{f:"0.00"},3:{f:"#,##0"},4:{f:"#,##0.00"},9:{f:"0%"},10:{f:"0.00%"},11:{f:"0.00E+00"},12:{f:"# ?/?"},13:{f:"# ??/??"},14:{f:"mm-dd-yy"},15:{f:"d-mmm-yy"},16:{f:"d-mmm"},17:{f:"mmm-yy"},18:{f:"h:mm AM/PM"},19:{f:"h:mm:ss AM/PM"},20:{f:"h:mm"},21:{f:"h:mm:ss"},22:{f:'m/d/yy "h":mm'},27:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"年"m"月"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"年" mm"月" dd"日"'},28:{"zh-tw":'[$-404]e"年"m"月"d"日"',"zh-cn":'m"月"d"日"',"ja-jp":'[$-411]ggge"年"m"月"d"日"',"ko-kr":"mm-dd"},29:{"zh-tw":'[$-404]e"年"m"月"d"日"',"zh-cn":'m"月"d"日"',"ja-jp":'[$-411]ggge"年"m"月"d"日"',"ko-kr":"mm-dd"},30:{"zh-tw":"m/d/yy ","zh-cn":"m-d-yy","ja-jp":"m/d/yy","ko-kr":"mm-dd-yy"},31:{"zh-tw":'yyyy"年"m"月"d"日"',"zh-cn":'yyyy"年"m"月"d"日"',"ja-jp":'yyyy"年"m"月"d"日"',"ko-kr":'yyyy"년" mm"월" dd"일"'},32:{"zh-tw":'hh"時"mm"分"',"zh-cn":'h"时"mm"分"',"ja-jp":'h"時"mm"分"',"ko-kr":'h"시" mm"분"'},33:{"zh-tw":'hh"時"mm"分"ss"秒"',"zh-cn":'h"时"mm"分"ss"秒"',"ja-jp":'h"時"mm"分"ss"秒"',"ko-kr":'h"시" mm"분" ss"초"'},34:{"zh-tw":'上午/下午 hh"時"mm"分"',"zh-cn":'上午/下午 h"时"mm"分"',"ja-jp":'yyyy"年"m"月"',"ko-kr":"yyyy-mm-dd"},35:{"zh-tw":'上午/下午 hh"時"mm"分"ss"秒"',"zh-cn":'上午/下午 h"时"mm"分"ss"秒"',"ja-jp":'m"月"d"日"',"ko-kr":"yyyy-mm-dd"},36:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"年"m"月"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"年" mm"月" dd"日"'},37:{f:"#,##0 ;(#,##0)"},38:{f:"#,##0 ;[Red](#,##0)"},39:{f:"#,##0.00 ;(#,##0.00)"},40:{f:"#,##0.00 ;[Red](#,##0.00)"},45:{f:"mm:ss"},46:{f:"[h]:mm:ss"},47:{f:"mmss.0"},48:{f:"##0.0E+0"},49:{f:"@"},50:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"年"m"月"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"年" mm"月" dd"日"'},51:{"zh-tw":'[$-404]e"年"m"月"d"日"',"zh-cn":'m"月"d"日"',"ja-jp":'[$-411]ggge"年"m"月"d"日"',"ko-kr":"mm-dd"},52:{"zh-tw":'上午/下午 hh"時"mm"分"',"zh-cn":'yyyy"年"m"月"',"ja-jp":'yyyy"年"m"月"',"ko-kr":"yyyy-mm-dd"},53:{"zh-tw":'上午/下午 hh"時"mm"分"ss"秒"',"zh-cn":'m"月"d"日"',"ja-jp":'m"月"d"日"',"ko-kr":"yyyy-mm-dd"},54:{"zh-tw":'[$-404]e"年"m"月"d"日"',"zh-cn":'m"月"d"日"',"ja-jp":'[$-411]ggge"年"m"月"d"日"',"ko-kr":"mm-dd"},55:{"zh-tw":'上午/下午 hh"時"mm"分"',"zh-cn":'上午/下午 h"时"mm"分"',"ja-jp":'yyyy"年"m"月"',"ko-kr":"yyyy-mm-dd"},56:{"zh-tw":'上午/下午 hh"時"mm"分"ss"秒"',"zh-cn":'上午/下午 h"时"mm"分"ss"秒"',"ja-jp":'m"月"d"日"',"ko-kr":"yyyy-mm-dd"},57:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"年"m"月"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"年" mm"月" dd"日"'},58:{"zh-tw":'[$-404]e"年"m"月"d"日"',"zh-cn":'m"月"d"日"',"ja-jp":'[$-411]ggge"年"m"月"d"日"',"ko-kr":"mm-dd"},59:{"th-th":"t0"},60:{"th-th":"t0.00"},61:{"th-th":"t#,##0"},62:{"th-th":"t#,##0.00"},67:{"th-th":"t0%"},68:{"th-th":"t0.00%"},69:{"th-th":"t# ?/?"},70:{"th-th":"t# ??/??"},81:{"th-th":"d/m/bb"}}},{}],31:[function(t,r,l){r.exports={OfficeDocument:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Worksheet:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",CalcChain:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/calcChain",SharedStrings:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Styles:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Theme:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Hyperlink:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",Image:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",CoreProperties:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",ExtenderProperties:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",Comments:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",VmlDrawing:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",Table:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/table"}},{}],32:[function(t,r,l){const i=t("../../utils/parse-sax"),s=t("../../utils/xml-stream");class a{prepare(){}render(){}parseOpen(n){}parseText(n){}parseClose(n){}reconcile(n,c){}reset(){this.model=null,this.map&&Object.values(this.map).forEach(n=>{n instanceof a?n.reset():n.xform&&n.xform.reset()})}mergeModel(n){this.model=Object.assign(this.model||{},n)}async parse(n){for await(const c of n)for(const{eventType:d,value:u}of c)if(d==="opentag")this.parseOpen(u);else if(d==="text")this.parseText(u);else if(d==="closetag"&&!this.parseClose(u.name))return this.model;return this.model}async parseStream(n){return this.parse(i(n))}get xml(){return this.toXml(this.model)}toXml(n){const c=new s;return this.render(c,n),c.xml}static toAttribute(n,c){let d=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(n===void 0){if(d)return c}else if(d||n!==c)return n.toString()}static toStringAttribute(n,c){let d=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return a.toAttribute(n,c,d)}static toStringValue(n,c){return n===void 0?c:n}static toBoolAttribute(n,c){let d=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(n===void 0){if(d)return c}else if(d||n!==c)return n?"1":"0"}static toBoolValue(n,c){return n===void 0?c:n==="1"}static toIntAttribute(n,c){let d=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return a.toAttribute(n,c,d)}static toIntValue(n,c){return n===void 0?c:parseInt(n,10)}static toFloatAttribute(n,c){let d=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return a.toAttribute(n,c,d)}static toFloatValue(n,c){return n===void 0?c:parseFloat(n)}}r.exports=a},{"../../utils/parse-sax":22,"../../utils/xml-stream":28}],33:[function(t,r,l){const i=t("../base-xform"),s=t("../../../utils/col-cache");function a(n){try{return s.decodeEx(n),!0}catch{return!1}}function o(n){const c=[];let d=!1,u="";return n.split(",").forEach(h=>{if(!h)return;const p=(h.match(/'/g)||[]).length;if(!p)return void(d?u+=h+",":a(h)&&c.push(h));const m=p%2==0;!d&&m&&a(h)?c.push(h):d&&!m?(d=!1,a(u+h)&&c.push(u+h),u=""):(d=!0,u+=h+",")}),c}r.exports=class extends i{render(n,c){n.openNode("definedName",{name:c.name,localSheetId:c.localSheetId}),n.writeText(c.ranges.join(",")),n.closeNode()}parseOpen(n){switch(n.name){case"definedName":return this._parsedName=n.attributes.name,this._parsedLocalSheetId=n.attributes.localSheetId,this._parsedText=[],!0;default:return!1}}parseText(n){this._parsedText.push(n)}parseClose(){return this.model={name:this._parsedName,ranges:o(this._parsedText.join(""))},this._parsedLocalSheetId!==void 0&&(this.model.localSheetId=parseInt(this._parsedLocalSheetId,10)),!1}}},{"../../../utils/col-cache":19,"../base-xform":32}],34:[function(t,r,l){const i=t("../../../utils/utils"),s=t("../base-xform");r.exports=class extends s{render(a,o){a.leafNode("sheet",{sheetId:o.id,name:o.name,state:o.state,"r:id":o.rId})}parseOpen(a){return a.name==="sheet"&&(this.model={name:i.xmlDecode(a.attributes.name),id:parseInt(a.attributes.sheetId,10),state:a.attributes.state,rId:a.attributes["r:id"]},!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/utils":27,"../base-xform":32}],35:[function(t,r,l){const i=t("../base-xform");r.exports=class extends i{render(s,a){s.leafNode("calcPr",{calcId:171027,fullCalcOnLoad:a.fullCalcOnLoad?1:void 0})}parseOpen(s){return s.name==="calcPr"&&(this.model={},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],36:[function(t,r,l){const i=t("../base-xform");r.exports=class extends i{render(s,a){s.leafNode("workbookPr",{date1904:a.date1904?1:void 0,defaultThemeVersion:164011,filterPrivacy:1})}parseOpen(s){return s.name==="workbookPr"&&(this.model={date1904:s.attributes.date1904==="1"},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],37:[function(t,r,l){const i=t("../base-xform");r.exports=class extends i{render(s,a){const o={xWindow:a.x||0,yWindow:a.y||0,windowWidth:a.width||12e3,windowHeight:a.height||24e3,firstSheet:a.firstSheet,activeTab:a.activeTab};a.visibility&&a.visibility!=="visible"&&(o.visibility=a.visibility),s.leafNode("workbookView",o)}parseOpen(s){if(s.name==="workbookView"){const a=this.model={},o=function(c,d,u){const h=d!==void 0?a[c]=d:u;h!==void 0&&(a[c]=h)},n=function(c,d,u){const h=d!==void 0?a[c]=parseInt(d,10):u;h!==void 0&&(a[c]=h)};return n("x",s.attributes.xWindow,0),n("y",s.attributes.yWindow,0),n("width",s.attributes.windowWidth,25e3),n("height",s.attributes.windowHeight,1e4),o("visibility",s.attributes.visibility,"visible"),n("activeTab",s.attributes.activeTab,void 0),n("firstSheet",s.attributes.firstSheet,void 0),!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],38:[function(t,r,l){const i=t("../../../utils/under-dash"),s=t("../../../utils/col-cache"),a=t("../../../utils/xml-stream"),o=t("../base-xform"),n=t("../static-xform"),c=t("../list-xform"),d=t("./defined-name-xform"),u=t("./sheet-xform"),h=t("./workbook-view-xform"),p=t("./workbook-properties-xform"),m=t("./workbook-calc-properties-xform");class f extends o{constructor(){super(),this.map={fileVersion:f.STATIC_XFORMS.fileVersion,workbookPr:new p,bookViews:new c({tag:"bookViews",count:!1,childXform:new h}),sheets:new c({tag:"sheets",count:!1,childXform:new u}),definedNames:new c({tag:"definedNames",count:!1,childXform:new d}),calcPr:new m}}prepare(y){y.sheets=y.worksheets;const _=[];let E=0;y.sheets.forEach(M=>{if(M.pageSetup&&M.pageSetup.printArea&&M.pageSetup.printArea.split("&&").forEach(D=>{const z=D.split(":"),O={name:"_xlnm.Print_Area",ranges:[`'${M.name}'!$${z[0]}:$${z[1]}`],localSheetId:E};_.push(O)}),M.pageSetup&&(M.pageSetup.printTitlesRow||M.pageSetup.printTitlesColumn)){const D=[];if(M.pageSetup.printTitlesColumn){const O=M.pageSetup.printTitlesColumn.split(":");D.push(`'${M.name}'!$${O[0]}:$${O[1]}`)}if(M.pageSetup.printTitlesRow){const O=M.pageSetup.printTitlesRow.split(":");D.push(`'${M.name}'!$${O[0]}:$${O[1]}`)}const z={name:"_xlnm.Print_Titles",ranges:D,localSheetId:E};_.push(z)}E++}),_.length&&(y.definedNames=y.definedNames.concat(_)),(y.media||[]).forEach((M,D)=>{M.name=M.type+(D+1)})}render(y,_){y.openXml(a.StdDocAttributes),y.openNode("workbook",f.WORKBOOK_ATTRIBUTES),this.map.fileVersion.render(y),this.map.workbookPr.render(y,_.properties),this.map.bookViews.render(y,_.views),this.map.sheets.render(y,_.sheets),this.map.definedNames.render(y,_.definedNames),this.map.calcPr.render(y,_.calcProperties),y.closeNode()}parseOpen(y){if(this.parser)return this.parser.parseOpen(y),!0;switch(y.name){case"workbook":return!0;default:return this.parser=this.map[y.name],this.parser&&this.parser.parseOpen(y),!0}}parseText(y){this.parser&&this.parser.parseText(y)}parseClose(y){if(this.parser)return this.parser.parseClose(y)||(this.parser=void 0),!0;switch(y){case"workbook":return this.model={sheets:this.map.sheets.model,properties:this.map.workbookPr.model||{},views:this.map.bookViews.model,calcProperties:{}},this.map.definedNames.model&&(this.model.definedNames=this.map.definedNames.model),!1;default:return!0}}reconcile(y){const _=(y.workbookRels||[]).reduce((O,N)=>(O[N.Id]=N,O),{}),E=[];let M,D=0;(y.sheets||[]).forEach(O=>{const N=_[O.rId];N&&(M=y.worksheetHash["xl/"+N.Target.replace(/^(\s|\/xl\/)+/,"")],M&&(M.name=O.name,M.id=O.id,M.state=O.state,E[D++]=M))});const z=[];i.each(y.definedNames,O=>{if(O.name==="_xlnm.Print_Area"){if(M=E[O.localSheetId],M){M.pageSetup||(M.pageSetup={});const N=s.decodeEx(O.ranges[0]);M.pageSetup.printArea=M.pageSetup.printArea?`${M.pageSetup.printArea}&&${N.dimensions}`:N.dimensions}}else if(O.name==="_xlnm.Print_Titles"){if(M=E[O.localSheetId],M){M.pageSetup||(M.pageSetup={});const N=O.ranges.join(","),B=/\$/g,H=/\$\d+:\$\d+/,$=N.match(H);if($&&$.length){const k=$[0];M.pageSetup.printTitlesRow=k.replace(B,"")}const C=/\$[A-Z]+:\$[A-Z]+/,R=N.match(C);if(R&&R.length){const k=R[0];M.pageSetup.printTitlesColumn=k.replace(B,"")}}}else z.push(O)}),y.definedNames=z,y.media.forEach((O,N)=>{O.index=N})}}f.WORKBOOK_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x15","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},f.STATIC_XFORMS={fileVersion:new n({tag:"fileVersion",$:{appName:"xl",lastEdited:5,lowestEdited:5,rupBuild:9303}})},r.exports=f},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./defined-name-xform":33,"./sheet-xform":34,"./workbook-calc-properties-xform":35,"./workbook-properties-xform":36,"./workbook-view-xform":37}],39:[function(t,r,l){const i=t("../strings/rich-text-xform"),s=t("../../../utils/utils"),a=t("../base-xform"),o=r.exports=function(n){this.model=n};s.inherits(o,a,{get tag(){return"r"},get richTextXform(){return this._richTextXform||(this._richTextXform=new i),this._richTextXform},render(n,c){c=c||this.model,n.openNode("comment",{ref:c.ref,authorId:0}),n.openNode("text"),c&&c.note&&c.note.texts&&c.note.texts.forEach(d=>{this.richTextXform.render(n,d)}),n.closeNode(),n.closeNode()},parseOpen(n){if(this.parser)return this.parser.parseOpen(n),!0;switch(n.name){case"comment":return this.model={type:"note",note:{texts:[]},...n.attributes},!0;case"r":return this.parser=this.richTextXform,this.parser.parseOpen(n),!0;default:return!1}},parseText(n){this.parser&&this.parser.parseText(n)},parseClose(n){switch(n){case"comment":return!1;case"r":return this.model.note.texts.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(n),!0}}})},{"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],40:[function(t,r,l){const i=t("../../../utils/xml-stream"),s=t("../../../utils/utils"),a=t("../base-xform"),o=t("./comment-xform"),n=r.exports=function(){this.map={comment:new o}};s.inherits(n,a,{COMMENTS_ATTRIBUTES:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},{render(c,d){d=d||this.model,c.openXml(i.StdDocAttributes),c.openNode("comments",n.COMMENTS_ATTRIBUTES),c.openNode("authors"),c.leafNode("author",null,"Author"),c.closeNode(),c.openNode("commentList"),d.comments.forEach(u=>{this.map.comment.render(c,u)}),c.closeNode(),c.closeNode()},parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case"commentList":return this.model={comments:[]},!0;case"comment":return this.parser=this.map.comment,this.parser.parseOpen(c),!0;default:return!1}},parseText(c){this.parser&&this.parser.parseText(c)},parseClose(c){switch(c){case"commentList":return!1;case"comment":return this.model.comments.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(c),!0}}})},{"../../../utils/utils":27,"../../../utils/xml-stream":28,"../base-xform":32,"./comment-xform":39}],41:[function(t,r,l){const i=t("../../base-xform");r.exports=class extends i{constructor(s){super(),this._model=s}get tag(){return this._model&&this._model.tag}render(s,a,o){(a===o[2]||this.tag==="x:SizeWithCells"&&a===o[1])&&s.leafNode(this.tag)}parseOpen(s){switch(s.name){case this.tag:return this.model={},this.model[this.tag]=!0,!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../base-xform":32}],42:[function(t,r,l){const i=t("../../base-xform");r.exports=class extends i{constructor(s){super(),this._model=s}get tag(){return this._model&&this._model.tag}render(s,a){s.leafNode(this.tag,null,a)}parseOpen(s){switch(s.name){case this.tag:return this.text="",!0;default:return!1}}parseText(s){this.text=s}parseClose(){return!1}}},{"../../base-xform":32}],43:[function(t,r,l){const i=t("../base-xform");r.exports=class extends i{get tag(){return"x:Anchor"}getAnchorRect(s){const a=Math.floor(s.left),o=Math.floor(68*(s.left-a)),n=Math.floor(s.top),c=Math.floor(18*(s.top-n)),d=Math.floor(s.right),u=Math.floor(68*(s.right-d)),h=Math.floor(s.bottom);return[a,o,n,c,d,u,h,Math.floor(18*(s.bottom-h))]}getDefaultRect(s){const a=s.col,o=Math.max(s.row-2,0);return[a,6,o,14,a+2,2,o+4,16]}render(s,a){const o=a.anchor?this.getAnchorRect(a.anchor):this.getDefaultRect(a.refAddress);s.leafNode("x:Anchor",null,o.join(", "))}parseOpen(s){switch(s.name){case this.tag:return this.text="",!0;default:return!1}}parseText(s){this.text=s}parseClose(){return!1}}},{"../base-xform":32}],44:[function(t,r,l){const i=t("../base-xform"),s=t("./vml-anchor-xform"),a=t("./style/vml-protection-xform"),o=t("./style/vml-position-xform"),n=["twoCells","oneCells","absolute"];r.exports=class extends i{constructor(){super(),this.map={"x:Anchor":new s,"x:Locked":new a({tag:"x:Locked"}),"x:LockText":new a({tag:"x:LockText"}),"x:SizeWithCells":new o({tag:"x:SizeWithCells"}),"x:MoveWithCells":new o({tag:"x:MoveWithCells"})}}get tag(){return"x:ClientData"}render(c,d){const{protection:u,editAs:h}=d.note;c.openNode(this.tag,{ObjectType:"Note"}),this.map["x:MoveWithCells"].render(c,h,n),this.map["x:SizeWithCells"].render(c,h,n),this.map["x:Anchor"].render(c,d),this.map["x:Locked"].render(c,u.locked),c.leafNode("x:AutoFill",null,"False"),this.map["x:LockText"].render(c,u.lockText),c.leafNode("x:Row",null,d.refAddress.row-1),c.leafNode("x:Column",null,d.refAddress.col-1),c.closeNode()}parseOpen(c){switch(c.name){case this.tag:this.reset(),this.model={anchor:[],protection:{},editAs:""};break;default:this.parser=this.map[c.name],this.parser&&this.parser.parseOpen(c)}return!0}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.parser=void 0),!0;switch(c){case this.tag:return this.normalizeModel(),!1;default:return!0}}normalizeModel(){const c=Object.assign({},this.map["x:MoveWithCells"].model,this.map["x:SizeWithCells"].model),d=Object.keys(c).length;this.model.editAs=n[d],this.model.anchor=this.map["x:Anchor"].text,this.model.protection.locked=this.map["x:Locked"].text,this.model.protection.lockText=this.map["x:LockText"].text}}},{"../base-xform":32,"./style/vml-position-xform":41,"./style/vml-protection-xform":42,"./vml-anchor-xform":43}],45:[function(t,r,l){const i=t("../../../utils/xml-stream"),s=t("../base-xform"),a=t("./vml-shape-xform");class o extends s{constructor(){super(),this.map={"v:shape":new a}}get tag(){return"xml"}render(c,d){c.openXml(i.StdDocAttributes),c.openNode(this.tag,o.DRAWING_ATTRIBUTES),c.openNode("o:shapelayout",{"v:ext":"edit"}),c.leafNode("o:idmap",{"v:ext":"edit",data:1}),c.closeNode(),c.openNode("v:shapetype",{id:"_x0000_t202",coordsize:"21600,21600","o:spt":202,path:"m,l,21600r21600,l21600,xe"}),c.leafNode("v:stroke",{joinstyle:"miter"}),c.leafNode("v:path",{gradientshapeok:"t","o:connecttype":"rect"}),c.closeNode(),d.comments.forEach((u,h)=>{this.map["v:shape"].render(c,u,h)}),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case this.tag:this.reset(),this.model={comments:[]};break;default:this.parser=this.map[c.name],this.parser&&this.parser.parseOpen(c)}return!0}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.model.comments.push(this.parser.model),this.parser=void 0),!0;switch(c){case this.tag:return!1;default:return!0}}reconcile(c,d){c.anchors.forEach(u=>{u.br?this.map["xdr:twoCellAnchor"].reconcile(u,d):this.map["xdr:oneCellAnchor"].reconcile(u,d)})}}o.DRAWING_ATTRIBUTES={"xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:x":"urn:schemas-microsoft-com:office:excel"},r.exports=o},{"../../../utils/xml-stream":28,"../base-xform":32,"./vml-shape-xform":46}],46:[function(t,r,l){const i=t("../base-xform"),s=t("./vml-textbox-xform"),a=t("./vml-client-data-xform");class o extends i{constructor(){super(),this.map={"v:textbox":new s,"x:ClientData":new a}}get tag(){return"v:shape"}render(c,d,u){c.openNode("v:shape",o.V_SHAPE_ATTRIBUTES(d,u)),c.leafNode("v:fill",{color2:"infoBackground [80]"}),c.leafNode("v:shadow",{color:"none [81]",obscured:"t"}),c.leafNode("v:path",{"o:connecttype":"none"}),this.map["v:textbox"].render(c,d),this.map["x:ClientData"].render(c,d),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case this.tag:this.reset(),this.model={margins:{insetmode:c.attributes["o:insetmode"]},anchor:"",editAs:"",protection:{}};break;default:this.parser=this.map[c.name],this.parser&&this.parser.parseOpen(c)}return!0}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.parser=void 0),!0;switch(c){case this.tag:return this.model.margins.inset=this.map["v:textbox"].model&&this.map["v:textbox"].model.inset,this.model.protection=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.protection,this.model.anchor=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.anchor,this.model.editAs=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.editAs,!1;default:return!0}}}o.V_SHAPE_ATTRIBUTES=(n,c)=>({id:"_x0000_s"+(1025+c),type:"#_x0000_t202",style:"position:absolute; margin-left:105.3pt;margin-top:10.5pt;width:97.8pt;height:59.1pt;z-index:1;visibility:hidden",fillcolor:"infoBackground [80]",strokecolor:"none [81]","o:insetmode":n.note.margins&&n.note.margins.insetmode}),r.exports=o},{"../base-xform":32,"./vml-client-data-xform":44,"./vml-textbox-xform":47}],47:[function(t,r,l){const i=t("../base-xform");r.exports=class extends i{get tag(){return"v:textbox"}conversionUnit(s,a,o){return`${parseFloat(s)*a.toFixed(2)}${o}`}reverseConversionUnit(s){return(s||"").split(",").map(a=>Number(parseFloat(this.conversionUnit(parseFloat(a),.1,"")).toFixed(2)))}render(s,a){const o={style:"mso-direction-alt:auto"};if(a&&a.note){let{inset:n}=a.note&&a.note.margins;Array.isArray(n)&&(n=n.map(c=>this.conversionUnit(c,10,"mm")).join(",")),n&&(o.inset=n)}s.openNode("v:textbox",o),s.leafNode("div",{style:"text-align:left"}),s.closeNode()}parseOpen(s){switch(s.name){case this.tag:return this.model={inset:this.reverseConversionUnit(s.attributes.inset)},!0;default:return!0}}parseText(){}parseClose(s){switch(s){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],48:[function(t,r,l){const i=t("./base-xform");r.exports=class extends i{createNewModel(s){return{}}parseOpen(s){return this.parser=this.parser||this.map[s.name],this.parser?(this.parser.parseOpen(s),!0):s.name===this.tag&&(this.model=this.createNewModel(s),!0)}parseText(s){this.parser&&this.parser.parseText(s)}onParserClose(s,a){this.model[s]=a.model}parseClose(s){return this.parser?(this.parser.parseClose(s)||(this.onParserClose(s,this.parser),this.parser=void 0),!0):s!==this.tag}}},{"./base-xform":32}],49:[function(t,r,l){const i=t("../base-xform");r.exports=class extends i{render(s,a){s.openNode("HeadingPairs"),s.openNode("vt:vector",{size:2,baseType:"variant"}),s.openNode("vt:variant"),s.leafNode("vt:lpstr",void 0,"Worksheets"),s.closeNode(),s.openNode("vt:variant"),s.leafNode("vt:i4",void 0,a.length),s.closeNode(),s.closeNode(),s.closeNode()}parseOpen(s){return s.name==="HeadingPairs"}parseText(){}parseClose(s){return s!=="HeadingPairs"}}},{"../base-xform":32}],50:[function(t,r,l){const i=t("../base-xform");r.exports=class extends i{render(s,a){s.openNode("TitlesOfParts"),s.openNode("vt:vector",{size:a.length,baseType:"lpstr"}),a.forEach(o=>{s.leafNode("vt:lpstr",void 0,o.name)}),s.closeNode(),s.closeNode()}parseOpen(s){return s.name==="TitlesOfParts"}parseText(){}parseClose(s){return s!=="TitlesOfParts"}}},{"../base-xform":32}],51:[function(t,r,l){const i=t("../../../utils/xml-stream"),s=t("../base-xform"),a=t("../simple/string-xform"),o=t("./app-heading-pairs-xform"),n=t("./app-titles-of-parts-xform");class c extends s{constructor(){super(),this.map={Company:new a({tag:"Company"}),Manager:new a({tag:"Manager"}),HeadingPairs:new o,TitleOfParts:new n}}render(u,h){u.openXml(i.StdDocAttributes),u.openNode("Properties",c.PROPERTY_ATTRIBUTES),u.leafNode("Application",void 0,"Microsoft Excel"),u.leafNode("DocSecurity",void 0,"0"),u.leafNode("ScaleCrop",void 0,"false"),this.map.HeadingPairs.render(u,h.worksheets),this.map.TitleOfParts.render(u,h.worksheets),this.map.Company.render(u,h.company||""),this.map.Manager.render(u,h.manager),u.leafNode("LinksUpToDate",void 0,"false"),u.leafNode("SharedDoc",void 0,"false"),u.leafNode("HyperlinksChanged",void 0,"false"),u.leafNode("AppVersion",void 0,"16.0300"),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"Properties":return!0;default:return this.parser=this.map[u.name],!!this.parser&&(this.parser.parseOpen(u),!0)}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.parser=void 0),!0;switch(u){case"Properties":return this.model={worksheets:this.map.TitleOfParts.model,company:this.map.Company.model,manager:this.map.Manager.model},!1;default:return!0}}}c.DateFormat=function(d){return d.toISOString().replace(/[.]\d{3,6}/,"")},c.DateAttrs={"xsi:type":"dcterms:W3CDTF"},c.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties","xmlns:vt":"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"},r.exports=c},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/string-xform":119,"./app-heading-pairs-xform":49,"./app-titles-of-parts-xform":50}],52:[function(t,r,l){const i=t("../../../utils/xml-stream"),s=t("../base-xform");class a extends s{render(n,c){n.openXml(i.StdDocAttributes),n.openNode("Types",a.PROPERTY_ATTRIBUTES);const d={};(c.media||[]).forEach(u=>{if(u.type==="image"){const h=u.extension;d[h]||(d[h]=!0,n.leafNode("Default",{Extension:h,ContentType:"image/"+h}))}}),n.leafNode("Default",{Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"}),n.leafNode("Default",{Extension:"xml",ContentType:"application/xml"}),n.leafNode("Override",{PartName:"/xl/workbook.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"}),c.worksheets.forEach(u=>{const h=`/xl/worksheets/sheet${u.id}.xml`;n.leafNode("Override",{PartName:h,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"})}),n.leafNode("Override",{PartName:"/xl/theme/theme1.xml",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml"}),n.leafNode("Override",{PartName:"/xl/styles.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"}),c.sharedStrings&&c.sharedStrings.count&&n.leafNode("Override",{PartName:"/xl/sharedStrings.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"}),c.tables&&c.tables.forEach(u=>{n.leafNode("Override",{PartName:"/xl/tables/"+u.target,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml"})}),c.drawings&&c.drawings.forEach(u=>{n.leafNode("Override",{PartName:`/xl/drawings/${u.name}.xml`,ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml"})}),c.commentRefs&&(n.leafNode("Default",{Extension:"vml",ContentType:"application/vnd.openxmlformats-officedocument.vmlDrawing"}),c.commentRefs.forEach(u=>{let{commentName:h}=u;n.leafNode("Override",{PartName:`/xl/${h}.xml`,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml"})})),n.leafNode("Override",{PartName:"/docProps/core.xml",ContentType:"application/vnd.openxmlformats-package.core-properties+xml"}),n.leafNode("Override",{PartName:"/docProps/app.xml",ContentType:"application/vnd.openxmlformats-officedocument.extended-properties+xml"}),n.closeNode()}parseOpen(){return!1}parseText(){}parseClose(){return!1}}a.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"},r.exports=a},{"../../../utils/xml-stream":28,"../base-xform":32}],53:[function(t,r,l){const i=t("../../../utils/xml-stream"),s=t("../base-xform"),a=t("../simple/date-xform"),o=t("../simple/string-xform"),n=t("../simple/integer-xform");class c extends s{constructor(){super(),this.map={"dc:creator":new o({tag:"dc:creator"}),"dc:title":new o({tag:"dc:title"}),"dc:subject":new o({tag:"dc:subject"}),"dc:description":new o({tag:"dc:description"}),"dc:identifier":new o({tag:"dc:identifier"}),"dc:language":new o({tag:"dc:language"}),"cp:keywords":new o({tag:"cp:keywords"}),"cp:category":new o({tag:"cp:category"}),"cp:lastModifiedBy":new o({tag:"cp:lastModifiedBy"}),"cp:lastPrinted":new a({tag:"cp:lastPrinted",format:c.DateFormat}),"cp:revision":new n({tag:"cp:revision"}),"cp:version":new o({tag:"cp:version"}),"cp:contentStatus":new o({tag:"cp:contentStatus"}),"cp:contentType":new o({tag:"cp:contentType"}),"dcterms:created":new a({tag:"dcterms:created",attrs:c.DateAttrs,format:c.DateFormat}),"dcterms:modified":new a({tag:"dcterms:modified",attrs:c.DateAttrs,format:c.DateFormat})}}render(u,h){u.openXml(i.StdDocAttributes),u.openNode("cp:coreProperties",c.CORE_PROPERTY_ATTRIBUTES),this.map["dc:creator"].render(u,h.creator),this.map["dc:title"].render(u,h.title),this.map["dc:subject"].render(u,h.subject),this.map["dc:description"].render(u,h.description),this.map["dc:identifier"].render(u,h.identifier),this.map["dc:language"].render(u,h.language),this.map["cp:keywords"].render(u,h.keywords),this.map["cp:category"].render(u,h.category),this.map["cp:lastModifiedBy"].render(u,h.lastModifiedBy),this.map["cp:lastPrinted"].render(u,h.lastPrinted),this.map["cp:revision"].render(u,h.revision),this.map["cp:version"].render(u,h.version),this.map["cp:contentStatus"].render(u,h.contentStatus),this.map["cp:contentType"].render(u,h.contentType),this.map["dcterms:created"].render(u,h.created),this.map["dcterms:modified"].render(u,h.modified),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"cp:coreProperties":case"coreProperties":return!0;default:if(this.parser=this.map[u.name],this.parser)return this.parser.parseOpen(u),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(u))}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.parser=void 0),!0;switch(u){case"cp:coreProperties":case"coreProperties":return this.model={creator:this.map["dc:creator"].model,title:this.map["dc:title"].model,subject:this.map["dc:subject"].model,description:this.map["dc:description"].model,identifier:this.map["dc:identifier"].model,language:this.map["dc:language"].model,keywords:this.map["cp:keywords"].model,category:this.map["cp:category"].model,lastModifiedBy:this.map["cp:lastModifiedBy"].model,lastPrinted:this.map["cp:lastPrinted"].model,revision:this.map["cp:revision"].model,contentStatus:this.map["cp:contentStatus"].model,contentType:this.map["cp:contentType"].model,created:this.map["dcterms:created"].model,modified:this.map["dcterms:modified"].model},!1;default:throw new Error("Unexpected xml node in parseClose: "+u)}}}c.DateFormat=function(d){return d.toISOString().replace(/[.]\d{3}/,"")},c.DateAttrs={"xsi:type":"dcterms:W3CDTF"},c.CORE_PROPERTY_ATTRIBUTES={"xmlns:cp":"http://schemas.openxmlformats.org/package/2006/metadata/core-properties","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:dcterms":"http://purl.org/dc/terms/","xmlns:dcmitype":"http://purl.org/dc/dcmitype/","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance"},r.exports=c},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/date-xform":117,"../simple/integer-xform":118,"../simple/string-xform":119}],54:[function(t,r,l){const i=t("../base-xform");r.exports=class extends i{render(s,a){s.leafNode("Relationship",a)}parseOpen(s){switch(s.name){case"Relationship":return this.model=s.attributes,!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],55:[function(t,r,l){const i=t("../../../utils/xml-stream"),s=t("../base-xform"),a=t("./relationship-xform");class o extends s{constructor(){super(),this.map={Relationship:new a}}render(c,d){d=d||this._values,c.openXml(i.StdDocAttributes),c.openNode("Relationships",o.RELATIONSHIPS_ATTRIBUTES),d.forEach(u=>{this.map.Relationship.render(c,u)}),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case"Relationships":return this.model=[],!0;default:if(this.parser=this.map[c.name],this.parser)return this.parser.parseOpen(c),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(c))}}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.model.push(this.parser.model),this.parser=void 0),!0;switch(c){case"Relationships":return!1;default:throw new Error("Unexpected xml node in parseClose: "+c)}}}o.RELATIONSHIPS_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"},r.exports=o},{"../../../utils/xml-stream":28,"../base-xform":32,"./relationship-xform":54}],56:[function(t,r,l){const i=t("../base-xform");r.exports=class extends i{parseOpen(s){if(this.parser)return this.parser.parseOpen(s),!0;switch(s.name){case this.tag:this.reset(),this.model={range:{editAs:s.attributes.editAs||"oneCell"}};break;default:this.parser=this.map[s.name],this.parser&&this.parser.parseOpen(s)}return!0}parseText(s){this.parser&&this.parser.parseText(s)}reconcilePicture(s,a){if(s&&s.rId){const o=a.rels[s.rId].Target.match(/.*\/media\/(.+[.][a-zA-Z]{3,4})/);if(o){const n=o[1],c=a.mediaIndex[n];return a.media[c]}}}}},{"../base-xform":32}],57:[function(t,r,l){const i=t("../base-xform"),s=t("./blip-xform");r.exports=class extends i{constructor(){super(),this.map={"a:blip":new s}}get tag(){return"xdr:blipFill"}render(a,o){a.openNode(this.tag),this.map["a:blip"].render(a,o),a.openNode("a:stretch"),a.leafNode("a:fillRect"),a.closeNode(),a.closeNode()}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case this.tag:this.reset();break;default:this.parser=this.map[a.name],this.parser&&this.parser.parseOpen(a)}return!0}parseText(){}parseClose(a){if(this.parser)return this.parser.parseClose(a)||(this.parser=void 0),!0;switch(a){case this.tag:return this.model=this.map["a:blip"].model,!1;default:return!0}}}},{"../base-xform":32,"./blip-xform":58}],58:[function(t,r,l){const i=t("../base-xform");r.exports=class extends i{get tag(){return"a:blip"}render(s,a){s.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:embed":a.rId,cstate:"print"})}parseOpen(s){switch(s.name){case this.tag:return this.model={rId:s.attributes["r:embed"]},!0;default:return!0}}parseText(){}parseClose(s){switch(s){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],59:[function(t,r,l){const i=t("../base-xform");r.exports=class extends i{get tag(){return"xdr:cNvPicPr"}render(s){s.openNode(this.tag),s.leafNode("a:picLocks",{noChangeAspect:"1"}),s.closeNode()}parseOpen(s){switch(s.name){case this.tag:default:return!0}}parseText(){}parseClose(s){switch(s){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],60:[function(t,r,l){const i=t("../base-xform"),s=t("./hlink-click-xform"),a=t("./ext-lst-xform");r.exports=class extends i{constructor(){super(),this.map={"a:hlinkClick":new s,"a:extLst":new a}}get tag(){return"xdr:cNvPr"}render(o,n){o.openNode(this.tag,{id:n.index,name:"Picture "+n.index}),this.map["a:hlinkClick"].render(o,n),this.map["a:extLst"].render(o,n),o.closeNode()}parseOpen(o){if(this.parser)return this.parser.parseOpen(o),!0;switch(o.name){case this.tag:this.reset();break;default:this.parser=this.map[o.name],this.parser&&this.parser.parseOpen(o)}return!0}parseText(){}parseClose(o){if(this.parser)return this.parser.parseClose(o)||(this.parser=void 0),!0;switch(o){case this.tag:return this.model=this.map["a:hlinkClick"].model,!1;default:return!0}}}},{"../base-xform":32,"./ext-lst-xform":63,"./hlink-click-xform":65}],61:[function(t,r,l){const i=t("../base-xform"),s=t("../simple/integer-xform");r.exports=class extends i{constructor(a){super(),this.tag=a.tag,this.map={"xdr:col":new s({tag:"xdr:col",zero:!0}),"xdr:colOff":new s({tag:"xdr:colOff",zero:!0}),"xdr:row":new s({tag:"xdr:row",zero:!0}),"xdr:rowOff":new s({tag:"xdr:rowOff",zero:!0})}}render(a,o){a.openNode(this.tag),this.map["xdr:col"].render(a,o.nativeCol),this.map["xdr:colOff"].render(a,o.nativeColOff),this.map["xdr:row"].render(a,o.nativeRow),this.map["xdr:rowOff"].render(a,o.nativeRowOff),a.closeNode()}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case this.tag:this.reset();break;default:this.parser=this.map[a.name],this.parser&&this.parser.parseOpen(a)}return!0}parseText(a){this.parser&&this.parser.parseText(a)}parseClose(a){if(this.parser)return this.parser.parseClose(a)||(this.parser=void 0),!0;switch(a){case this.tag:return this.model={nativeCol:this.map["xdr:col"].model,nativeColOff:this.map["xdr:colOff"].model,nativeRow:this.map["xdr:row"].model,nativeRowOff:this.map["xdr:rowOff"].model},!1;default:return!0}}}},{"../base-xform":32,"../simple/integer-xform":118}],62:[function(t,r,l){const i=t("../../../utils/col-cache"),s=t("../../../utils/xml-stream"),a=t("../base-xform"),o=t("./two-cell-anchor-xform"),n=t("./one-cell-anchor-xform");class c extends a{constructor(){super(),this.map={"xdr:twoCellAnchor":new o,"xdr:oneCellAnchor":new n}}prepare(u){u.anchors.forEach((h,p)=>{h.anchorType=function(m){return(typeof m.range=="string"?i.decode(m.range):m.range).br?"xdr:twoCellAnchor":"xdr:oneCellAnchor"}(h),this.map[h.anchorType].prepare(h,{index:p})})}get tag(){return"xdr:wsDr"}render(u,h){u.openXml(s.StdDocAttributes),u.openNode(this.tag,c.DRAWING_ATTRIBUTES),h.anchors.forEach(p=>{this.map[p.anchorType].render(u,p)}),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case this.tag:this.reset(),this.model={anchors:[]};break;default:this.parser=this.map[u.name],this.parser&&this.parser.parseOpen(u)}return!0}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.model.anchors.push(this.parser.model),this.parser=void 0),!0;switch(u){case this.tag:return!1;default:return!0}}reconcile(u,h){u.anchors.forEach(p=>{p.br?this.map["xdr:twoCellAnchor"].reconcile(p,h):this.map["xdr:oneCellAnchor"].reconcile(p,h)})}}c.DRAWING_ATTRIBUTES={"xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing","xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main"},r.exports=c},{"../../../utils/col-cache":19,"../../../utils/xml-stream":28,"../base-xform":32,"./one-cell-anchor-xform":67,"./two-cell-anchor-xform":70}],63:[function(t,r,l){const i=t("../base-xform");r.exports=class extends i{get tag(){return"a:extLst"}render(s){s.openNode(this.tag),s.openNode("a:ext",{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}),s.leafNode("a16:creationId",{"xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main",id:"{00000000-0008-0000-0000-000002000000}"}),s.closeNode(),s.closeNode()}parseOpen(s){switch(s.name){case this.tag:default:return!0}}parseText(){}parseClose(s){switch(s){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],64:[function(t,r,l){const i=t("../base-xform");r.exports=class extends i{constructor(s){super(),this.tag=s.tag,this.map={}}render(s,a){s.openNode(this.tag);const o=Math.floor(9525*a.width),n=Math.floor(9525*a.height);s.addAttribute("cx",o),s.addAttribute("cy",n),s.closeNode()}parseOpen(s){return s.name===this.tag&&(this.model={width:parseInt(s.attributes.cx||"0",10)/9525,height:parseInt(s.attributes.cy||"0",10)/9525},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],65:[function(t,r,l){const i=t("../base-xform");r.exports=class extends i{get tag(){return"a:hlinkClick"}render(s,a){a.hyperlinks&&a.hyperlinks.rId&&s.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:id":a.hyperlinks.rId,tooltip:a.hyperlinks.tooltip})}parseOpen(s){switch(s.name){case this.tag:return this.model={hyperlinks:{rId:s.attributes["r:id"],tooltip:s.attributes.tooltip}},!0;default:return!0}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],66:[function(t,r,l){const i=t("../base-xform"),s=t("./c-nv-pr-xform"),a=t("./c-nv-pic-pr-xform");r.exports=class extends i{constructor(){super(),this.map={"xdr:cNvPr":new s,"xdr:cNvPicPr":new a}}get tag(){return"xdr:nvPicPr"}render(o,n){o.openNode(this.tag),this.map["xdr:cNvPr"].render(o,n),this.map["xdr:cNvPicPr"].render(o,n),o.closeNode()}parseOpen(o){if(this.parser)return this.parser.parseOpen(o),!0;switch(o.name){case this.tag:this.reset();break;default:this.parser=this.map[o.name],this.parser&&this.parser.parseOpen(o)}return!0}parseText(){}parseClose(o){if(this.parser)return this.parser.parseClose(o)||(this.parser=void 0),!0;switch(o){case this.tag:return this.model=this.map["xdr:cNvPr"].model,!1;default:return!0}}}},{"../base-xform":32,"./c-nv-pic-pr-xform":59,"./c-nv-pr-xform":60}],67:[function(t,r,l){const i=t("./base-cell-anchor-xform"),s=t("../static-xform"),a=t("./cell-position-xform"),o=t("./ext-xform"),n=t("./pic-xform");r.exports=class extends i{constructor(){super(),this.map={"xdr:from":new a({tag:"xdr:from"}),"xdr:ext":new o({tag:"xdr:ext"}),"xdr:pic":new n,"xdr:clientData":new s({tag:"xdr:clientData"})}}get tag(){return"xdr:oneCellAnchor"}prepare(c,d){this.map["xdr:pic"].prepare(c.picture,d)}render(c,d){c.openNode(this.tag,{editAs:d.range.editAs||"oneCell"}),this.map["xdr:from"].render(c,d.range.tl),this.map["xdr:ext"].render(c,d.range.ext),this.map["xdr:pic"].render(c,d.picture),this.map["xdr:clientData"].render(c,{}),c.closeNode()}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.parser=void 0),!0;switch(c){case this.tag:return this.model.range.tl=this.map["xdr:from"].model,this.model.range.ext=this.map["xdr:ext"].model,this.model.picture=this.map["xdr:pic"].model,!1;default:return!0}}reconcile(c,d){c.medium=this.reconcilePicture(c.picture,d)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./ext-xform":64,"./pic-xform":68}],68:[function(t,r,l){const i=t("../base-xform"),s=t("../static-xform"),a=t("./blip-fill-xform"),o=t("./nv-pic-pr-xform"),n=t("./sp-pr");r.exports=class extends i{constructor(){super(),this.map={"xdr:nvPicPr":new o,"xdr:blipFill":new a,"xdr:spPr":new s(n)}}get tag(){return"xdr:pic"}prepare(c,d){c.index=d.index+1}render(c,d){c.openNode(this.tag),this.map["xdr:nvPicPr"].render(c,d),this.map["xdr:blipFill"].render(c,d),this.map["xdr:spPr"].render(c,d),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case this.tag:this.reset();break;default:this.parser=this.map[c.name],this.parser&&this.parser.parseOpen(c)}return!0}parseText(){}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.mergeModel(this.parser.model),this.parser=void 0),!0;switch(c){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"../static-xform":120,"./blip-fill-xform":57,"./nv-pic-pr-xform":66,"./sp-pr":69}],69:[function(t,r,l){r.exports={tag:"xdr:spPr",c:[{tag:"a:xfrm",c:[{tag:"a:off",$:{x:"0",y:"0"}},{tag:"a:ext",$:{cx:"0",cy:"0"}}]},{tag:"a:prstGeom",$:{prst:"rect"},c:[{tag:"a:avLst"}]}]}},{}],70:[function(t,r,l){const i=t("./base-cell-anchor-xform"),s=t("../static-xform"),a=t("./cell-position-xform"),o=t("./pic-xform");r.exports=class extends i{constructor(){super(),this.map={"xdr:from":new a({tag:"xdr:from"}),"xdr:to":new a({tag:"xdr:to"}),"xdr:pic":new o,"xdr:clientData":new s({tag:"xdr:clientData"})}}get tag(){return"xdr:twoCellAnchor"}prepare(n,c){this.map["xdr:pic"].prepare(n.picture,c)}render(n,c){n.openNode(this.tag,{editAs:c.range.editAs||"oneCell"}),this.map["xdr:from"].render(n,c.range.tl),this.map["xdr:to"].render(n,c.range.br),this.map["xdr:pic"].render(n,c.picture),this.map["xdr:clientData"].render(n,{}),n.closeNode()}parseClose(n){if(this.parser)return this.parser.parseClose(n)||(this.parser=void 0),!0;switch(n){case this.tag:return this.model.range.tl=this.map["xdr:from"].model,this.model.range.br=this.map["xdr:to"].model,this.model.picture=this.map["xdr:pic"].model,!1;default:return!0}}reconcile(n,c){n.medium=this.reconcilePicture(n.picture,c)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./pic-xform":68}],71:[function(t,r,l){const i=t("./base-xform");r.exports=class extends i{constructor(s){super(),this.tag=s.tag,this.always=!!s.always,this.count=s.count,this.empty=s.empty,this.$count=s.$count||"count",this.$=s.$,this.childXform=s.childXform,this.maxItems=s.maxItems}prepare(s,a){const{childXform:o}=this;s&&s.forEach((n,c)=>{a.index=c,o.prepare(n,a)})}render(s,a){if(this.always||a&&a.length){s.openNode(this.tag,this.$),this.count&&s.addAttribute(this.$count,a&&a.length||0);const{childXform:o}=this;(a||[]).forEach((n,c)=>{o.render(s,n,c)}),s.closeNode()}else this.empty&&s.leafNode(this.tag)}parseOpen(s){if(this.parser)return this.parser.parseOpen(s),!0;switch(s.name){case this.tag:return this.model=[],!0;default:return!!this.childXform.parseOpen(s)&&(this.parser=this.childXform,!0)}}parseText(s){this.parser&&this.parser.parseText(s)}parseClose(s){if(this.parser){if(!this.parser.parseClose(s)&&(this.model.push(this.parser.model),this.parser=void 0,this.maxItems&&this.model.length>this.maxItems))throw new Error(`Max ${this.childXform.tag} count (${this.maxItems}) exceeded`);return!0}return!1}reconcile(s,a){if(s){const{childXform:o}=this;s.forEach(n=>{o.reconcile(n,a)})}}}},{"./base-xform":32}],72:[function(t,r,l){const i=t("../../../utils/col-cache"),s=t("../base-xform");r.exports=class extends s{get tag(){return"autoFilter"}render(a,o){if(o)if(typeof o=="string")a.leafNode("autoFilter",{ref:o});else{const n=function(u){return typeof u=="string"?u:i.getAddress(u.row,u.column).address},c=n(o.from),d=n(o.to);c&&d&&a.leafNode("autoFilter",{ref:`${c}:${d}`})}}parseOpen(a){a.name==="autoFilter"&&(this.model=a.attributes.ref)}}},{"../../../utils/col-cache":19,"../base-xform":32}],73:[function(t,r,l){const i=t("../../../utils/utils"),s=t("../base-xform"),a=t("../../../doc/range"),o=t("../../../doc/enums"),n=t("../strings/rich-text-xform");function c(d){if(d==null)return o.ValueType.Null;if(d instanceof String||typeof d=="string")return o.ValueType.String;if(typeof d=="number")return o.ValueType.Number;if(typeof d=="boolean")return o.ValueType.Boolean;if(d instanceof Date)return o.ValueType.Date;if(d.text&&d.hyperlink)return o.ValueType.Hyperlink;if(d.formula)return o.ValueType.Formula;if(d.error)return o.ValueType.Error;throw new Error("I could not understand type of value")}r.exports=class extends s{constructor(){super(),this.richTextXForm=new n}get tag(){return"c"}prepare(d,u){const h=u.styles.addStyleModel(d.style||{},function(p){switch(p.type){case o.ValueType.Formula:return c(p.result);default:return p.type}}(d));switch(h&&(d.styleId=h),d.comment&&u.comments.push({...d.comment,ref:d.address}),d.type){case o.ValueType.String:case o.ValueType.RichText:u.sharedStrings&&(d.ssId=u.sharedStrings.add(d.value));break;case o.ValueType.Date:u.date1904&&(d.date1904=!0);break;case o.ValueType.Hyperlink:u.sharedStrings&&d.text!==void 0&&d.text!==null&&(d.ssId=u.sharedStrings.add(d.text)),u.hyperlinks.push({address:d.address,target:d.hyperlink,tooltip:d.tooltip});break;case o.ValueType.Merge:u.merges.add(d);break;case o.ValueType.Formula:if(u.date1904&&(d.date1904=!0),d.shareType==="shared"&&(d.si=u.siFormulae++),d.formula)u.formulae[d.address]=d;else if(d.sharedFormula){const p=u.formulae[d.sharedFormula];if(!p)throw new Error("Shared Formula master must exist above and or left of clone for cell "+d.address);p.si===void 0?(p.shareType="shared",p.si=u.siFormulae++,p.range=new a(p.address,d.address)):p.range&&p.range.expandToAddress(d.address),d.si=p.si}}}renderFormula(d,u){let h=null;switch(u.shareType){case"shared":h={t:"shared",ref:u.ref||u.range.range,si:u.si};break;case"array":h={t:"array",ref:u.ref};break;default:u.si!==void 0&&(h={t:"shared",si:u.si})}switch(c(u.result)){case o.ValueType.Null:d.leafNode("f",h,u.formula);break;case o.ValueType.String:d.addAttribute("t","str"),d.leafNode("f",h,u.formula),d.leafNode("v",null,u.result);break;case o.ValueType.Number:d.leafNode("f",h,u.formula),d.leafNode("v",null,u.result);break;case o.ValueType.Boolean:d.addAttribute("t","b"),d.leafNode("f",h,u.formula),d.leafNode("v",null,u.result?1:0);break;case o.ValueType.Error:d.addAttribute("t","e"),d.leafNode("f",h,u.formula),d.leafNode("v",null,u.result.error);break;case o.ValueType.Date:d.leafNode("f",h,u.formula),d.leafNode("v",null,i.dateToExcel(u.result,u.date1904));break;default:throw new Error("I could not understand type of value")}}render(d,u){if(u.type!==o.ValueType.Null||u.styleId){switch(d.openNode("c"),d.addAttribute("r",u.address),u.styleId&&d.addAttribute("s",u.styleId),u.type){case o.ValueType.Null:break;case o.ValueType.Number:d.leafNode("v",null,u.value);break;case o.ValueType.Boolean:d.addAttribute("t","b"),d.leafNode("v",null,u.value?"1":"0");break;case o.ValueType.Error:d.addAttribute("t","e"),d.leafNode("v",null,u.value.error);break;case o.ValueType.String:case o.ValueType.RichText:u.ssId!==void 0?(d.addAttribute("t","s"),d.leafNode("v",null,u.ssId)):u.value&&u.value.richText?(d.addAttribute("t","inlineStr"),d.openNode("is"),u.value.richText.forEach(h=>{this.richTextXForm.render(d,h)}),d.closeNode("is")):(d.addAttribute("t","str"),d.leafNode("v",null,u.value));break;case o.ValueType.Date:d.leafNode("v",null,i.dateToExcel(u.value,u.date1904));break;case o.ValueType.Hyperlink:u.ssId!==void 0?(d.addAttribute("t","s"),d.leafNode("v",null,u.ssId)):(d.addAttribute("t","str"),d.leafNode("v",null,u.text));break;case o.ValueType.Formula:this.renderFormula(d,u);break;case o.ValueType.Merge:}d.closeNode()}}parseOpen(d){if(this.parser)return this.parser.parseOpen(d),!0;switch(d.name){case"c":return this.model={address:d.attributes.r},this.t=d.attributes.t,d.attributes.s&&(this.model.styleId=parseInt(d.attributes.s,10)),!0;case"f":return this.currentNode="f",this.model.si=d.attributes.si,this.model.shareType=d.attributes.t,this.model.ref=d.attributes.ref,!0;case"v":return this.currentNode="v",!0;case"t":return this.currentNode="t",!0;case"r":return this.parser=this.richTextXForm,this.parser.parseOpen(d),!0;default:return!1}}parseText(d){if(this.parser)this.parser.parseText(d);else switch(this.currentNode){case"f":this.model.formula=this.model.formula?this.model.formula+d:d;break;case"v":case"t":this.model.value&&this.model.value.richText?this.model.value.richText.text=this.model.value.richText.text?this.model.value.richText.text+d:d:this.model.value=this.model.value?this.model.value+d:d}}parseClose(d){switch(d){case"c":{const{model:u}=this;if(u.formula||u.shareType)u.type=o.ValueType.Formula,u.value&&(this.t==="str"?u.result=i.xmlDecode(u.value):this.t==="b"?u.result=parseInt(u.value,10)!==0:this.t==="e"?u.result={error:u.value}:u.result=parseFloat(u.value),u.value=void 0);else if(u.value!==void 0)switch(this.t){case"s":u.type=o.ValueType.String,u.value=parseInt(u.value,10);break;case"str":u.type=o.ValueType.String,u.value=i.xmlDecode(u.value);break;case"inlineStr":u.type=o.ValueType.String;break;case"b":u.type=o.ValueType.Boolean,u.value=parseInt(u.value,10)!==0;break;case"e":u.type=o.ValueType.Error,u.value={error:u.value};break;default:u.type=o.ValueType.Number,u.value=parseFloat(u.value)}else u.styleId?u.type=o.ValueType.Null:u.type=o.ValueType.Merge;return!1}case"f":case"v":case"is":return this.currentNode=void 0,!0;case"t":return this.parser?(this.parser.parseClose(d),!0):(this.currentNode=void 0,!0);case"r":return this.model.value=this.model.value||{},this.model.value.richText=this.model.value.richText||[],this.model.value.richText.push(this.parser.model),this.parser=void 0,this.currentNode=void 0,!0;default:return!!this.parser&&(this.parser.parseClose(d),!0)}}reconcile(d,u){const h=d.styleId&&u.styles&&u.styles.getStyleModel(d.styleId);switch(h&&(d.style=h),d.styleId!==void 0&&(d.styleId=void 0),d.type){case o.ValueType.String:typeof d.value=="number"&&u.sharedStrings&&(d.value=u.sharedStrings.getString(d.value)),d.value.richText&&(d.type=o.ValueType.RichText);break;case o.ValueType.Number:h&&i.isDateFmt(h.numFmt)&&(d.type=o.ValueType.Date,d.value=i.excelToDate(d.value,u.date1904));break;case o.ValueType.Formula:d.result!==void 0&&h&&i.isDateFmt(h.numFmt)&&(d.result=i.excelToDate(d.result,u.date1904)),d.shareType==="shared"&&(d.ref?u.formulae[d.si]=d.address:(d.sharedFormula=u.formulae[d.si],delete d.shareType),delete d.si)}const p=u.hyperlinkMap[d.address];p&&(d.type===o.ValueType.Formula?(d.text=d.result,d.result=void 0):(d.text=d.value,d.value=void 0),d.type=o.ValueType.Hyperlink,d.hyperlink=p);const m=u.commentsMap&&u.commentsMap[d.address];m&&(d.comment=m)}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],74:[function(t,r,l){const i=t("../../base-xform");r.exports=class extends i{get tag(){return"x14:cfIcon"}render(s,a){s.leafNode(this.tag,{iconSet:a.iconSet,iconId:a.iconId})}parseOpen(s){let{attributes:a}=s;this.model={iconSet:a.iconSet,iconId:i.toIntValue(a.iconId)}}parseClose(s){return s!==this.tag}}},{"../../base-xform":32}],75:[function(t,r,l){const{v4:i}=t("uuid"),s=t("../../base-xform"),a=t("../../composite-xform"),o=t("./databar-ext-xform"),n=t("./icon-set-ext-xform"),c={"3Triangles":!0,"3Stars":!0,"5Boxes":!0};class d extends a{constructor(){super(),this.map={"x14:dataBar":this.databarXform=new o,"x14:iconSet":this.iconSetXform=new n}}get tag(){return"x14:cfRule"}static isExt(h){return h.type==="dataBar"?o.isExt(h):!(h.type!=="iconSet"||!h.custom&&!c[h.iconSet])}prepare(h){d.isExt(h)&&(h.x14Id=`{${i()}}`.toUpperCase())}render(h,p){if(d.isExt(p))switch(p.type){case"dataBar":this.renderDataBar(h,p);break;case"iconSet":this.renderIconSet(h,p)}}renderDataBar(h,p){h.openNode(this.tag,{type:"dataBar",id:p.x14Id}),this.databarXform.render(h,p),h.closeNode()}renderIconSet(h,p){h.openNode(this.tag,{type:"iconSet",priority:p.priority,id:p.x14Id||`{${i()}}`}),this.iconSetXform.render(h,p),h.closeNode()}createNewModel(h){let{attributes:p}=h;return{type:p.type,x14Id:p.id,priority:s.toIntValue(p.priority)}}onParserClose(h,p){Object.assign(this.model,p.model)}}r.exports=d},{"../../base-xform":32,"../../composite-xform":48,"./databar-ext-xform":79,"./icon-set-ext-xform":81,uuid:528}],76:[function(t,r,l){const i=t("../../composite-xform"),s=t("./f-ext-xform");r.exports=class extends i{constructor(){super(),this.map={"xm:f":this.fExtXform=new s}}get tag(){return"x14:cfvo"}render(a,o){a.openNode(this.tag,{type:o.type}),o.value!==void 0&&this.fExtXform.render(a,o.value),a.closeNode()}createNewModel(a){return{type:a.attributes.type}}onParserClose(a,o){switch(a){case"xm:f":this.model.value=o.model?parseFloat(o.model):0}}}},{"../../composite-xform":48,"./f-ext-xform":80}],77:[function(t,r,l){const i=t("../../composite-xform"),s=t("./sqref-ext-xform"),a=t("./cf-rule-ext-xform");r.exports=class extends i{constructor(){super(),this.map={"xm:sqref":this.sqRef=new s,"x14:cfRule":this.cfRule=new a}}get tag(){return"x14:conditionalFormatting"}prepare(o,n){o.rules.forEach(c=>{this.cfRule.prepare(c,n)})}render(o,n){n.rules.some(a.isExt)&&(o.openNode(this.tag,{"xmlns:xm":"http://schemas.microsoft.com/office/excel/2006/main"}),n.rules.filter(a.isExt).forEach(c=>this.cfRule.render(o,c)),this.sqRef.render(o,n.ref),o.closeNode())}createNewModel(){return{rules:[]}}onParserClose(o,n){switch(o){case"xm:sqref":this.model.ref=n.model;break;case"x14:cfRule":this.model.rules.push(n.model)}}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./sqref-ext-xform":82}],78:[function(t,r,l){const i=t("../../composite-xform"),s=t("./cf-rule-ext-xform"),a=t("./conditional-formatting-ext-xform");r.exports=class extends i{constructor(){super(),this.map={"x14:conditionalFormatting":this.cfXform=new a}}get tag(){return"x14:conditionalFormattings"}hasContent(o){return o.hasExtContent===void 0&&(o.hasExtContent=o.some(n=>n.rules.some(s.isExt))),o.hasExtContent}prepare(o,n){o.forEach(c=>{this.cfXform.prepare(c,n)})}render(o,n){this.hasContent(n)&&(o.openNode(this.tag),n.forEach(c=>this.cfXform.render(o,c)),o.closeNode())}createNewModel(){return[]}onParserClose(o,n){this.model.push(n.model)}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./conditional-formatting-ext-xform":77}],79:[function(t,r,l){const i=t("../../base-xform"),s=t("../../composite-xform"),a=t("../../style/color-xform"),o=t("./cfvo-ext-xform");r.exports=class extends s{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new o,"x14:borderColor":this.borderColorXform=new a("x14:borderColor"),"x14:negativeBorderColor":this.negativeBorderColorXform=new a("x14:negativeBorderColor"),"x14:negativeFillColor":this.negativeFillColorXform=new a("x14:negativeFillColor"),"x14:axisColor":this.axisColorXform=new a("x14:axisColor")}}static isExt(n){return!n.gradient}get tag(){return"x14:dataBar"}render(n,c){n.openNode(this.tag,{minLength:i.toIntAttribute(c.minLength,0,!0),maxLength:i.toIntAttribute(c.maxLength,100,!0),border:i.toBoolAttribute(c.border,!1),gradient:i.toBoolAttribute(c.gradient,!0),negativeBarColorSameAsPositive:i.toBoolAttribute(c.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:i.toBoolAttribute(c.negativeBarBorderColorSameAsPositive,!0),axisPosition:i.toAttribute(c.axisPosition,"auto"),direction:i.toAttribute(c.direction,"leftToRight")}),c.cfvo.forEach(d=>{this.cfvoXform.render(n,d)}),this.borderColorXform.render(n,c.borderColor),this.negativeBorderColorXform.render(n,c.negativeBorderColor),this.negativeFillColorXform.render(n,c.negativeFillColor),this.axisColorXform.render(n,c.axisColor),n.closeNode()}createNewModel(n){let{attributes:c}=n;return{cfvo:[],minLength:i.toIntValue(c.minLength,0),maxLength:i.toIntValue(c.maxLength,100),border:i.toBoolValue(c.border,!1),gradient:i.toBoolValue(c.gradient,!0),negativeBarColorSameAsPositive:i.toBoolValue(c.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:i.toBoolValue(c.negativeBarBorderColorSameAsPositive,!0),axisPosition:i.toStringValue(c.axisPosition,"auto"),direction:i.toStringValue(c.direction,"leftToRight")}}onParserClose(n,c){const[,d]=n.split(":");switch(d){case"cfvo":this.model.cfvo.push(c.model);break;default:this.model[d]=c.model}}}},{"../../base-xform":32,"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-ext-xform":76}],80:[function(t,r,l){const i=t("../../base-xform");r.exports=class extends i{get tag(){return"xm:f"}render(s,a){s.leafNode(this.tag,null,a)}parseOpen(){this.model=""}parseText(s){this.model+=s}parseClose(s){return s!==this.tag}}},{"../../base-xform":32}],81:[function(t,r,l){const i=t("../../base-xform"),s=t("../../composite-xform"),a=t("./cfvo-ext-xform"),o=t("./cf-icon-ext-xform");r.exports=class extends s{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new a,"x14:cfIcon":this.cfIconXform=new o}}get tag(){return"x14:iconSet"}render(n,c){n.openNode(this.tag,{iconSet:i.toStringAttribute(c.iconSet),reverse:i.toBoolAttribute(c.reverse,!1),showValue:i.toBoolAttribute(c.showValue,!0),custom:i.toBoolAttribute(c.icons,!1)}),c.cfvo.forEach(d=>{this.cfvoXform.render(n,d)}),c.icons&&c.icons.forEach((d,u)=>{d.iconId=u,this.cfIconXform.render(n,d)}),n.closeNode()}createNewModel(n){let{attributes:c}=n;return{cfvo:[],iconSet:i.toStringValue(c.iconSet,"3TrafficLights"),reverse:i.toBoolValue(c.reverse,!1),showValue:i.toBoolValue(c.showValue,!0)}}onParserClose(n,c){const[,d]=n.split(":");switch(d){case"cfvo":this.model.cfvo.push(c.model);break;case"cfIcon":this.model.icons||(this.model.icons=[]),this.model.icons.push(c.model);break;default:this.model[d]=c.model}}}},{"../../base-xform":32,"../../composite-xform":48,"./cf-icon-ext-xform":74,"./cfvo-ext-xform":76}],82:[function(t,r,l){const i=t("../../base-xform");r.exports=class extends i{get tag(){return"xm:sqref"}render(s,a){s.leafNode(this.tag,null,a)}parseOpen(){this.model=""}parseText(s){this.model+=s}parseClose(s){return s!==this.tag}}},{"../../base-xform":32}],83:[function(t,r,l){const i=t("../../base-xform"),s=t("../../composite-xform"),a=t("../../../../doc/range"),o=t("./databar-xform"),n=t("./ext-lst-ref-xform"),c=t("./formula-xform"),d=t("./color-scale-xform"),u=t("./icon-set-xform"),h={"3Triangles":!0,"3Stars":!0,"5Boxes":!0},p=f=>{const{type:b,operator:y}=f;switch(b){case"containsText":case"containsBlanks":case"notContainsBlanks":case"containsErrors":case"notContainsErrors":return{type:"containsText",operator:b};default:return{type:b,operator:y}}};class m extends s{constructor(){super(),this.map={dataBar:this.databarXform=new o,extLst:this.extLstRefXform=new n,formula:this.formulaXform=new c,colorScale:this.colorScaleXform=new d,iconSet:this.iconSetXform=new u}}get tag(){return"cfRule"}static isPrimitive(b){return b.type!=="iconSet"||!b.custom&&!h[b.iconSet]}render(b,y){switch(y.type){case"expression":this.renderExpression(b,y);break;case"cellIs":this.renderCellIs(b,y);break;case"top10":this.renderTop10(b,y);break;case"aboveAverage":this.renderAboveAverage(b,y);break;case"dataBar":this.renderDataBar(b,y);break;case"colorScale":this.renderColorScale(b,y);break;case"iconSet":this.renderIconSet(b,y);break;case"containsText":this.renderText(b,y);break;case"timePeriod":this.renderTimePeriod(b,y)}}renderExpression(b,y){b.openNode(this.tag,{type:"expression",dxfId:y.dxfId,priority:y.priority}),this.formulaXform.render(b,y.formulae[0]),b.closeNode()}renderCellIs(b,y){b.openNode(this.tag,{type:"cellIs",dxfId:y.dxfId,priority:y.priority,operator:y.operator}),y.formulae.forEach(_=>{this.formulaXform.render(b,_)}),b.closeNode()}renderTop10(b,y){b.leafNode(this.tag,{type:"top10",dxfId:y.dxfId,priority:y.priority,percent:i.toBoolAttribute(y.percent,!1),bottom:i.toBoolAttribute(y.bottom,!1),rank:i.toIntValue(y.rank,10,!0)})}renderAboveAverage(b,y){b.leafNode(this.tag,{type:"aboveAverage",dxfId:y.dxfId,priority:y.priority,aboveAverage:i.toBoolAttribute(y.aboveAverage,!0)})}renderDataBar(b,y){b.openNode(this.tag,{type:"dataBar",priority:y.priority}),this.databarXform.render(b,y),this.extLstRefXform.render(b,y),b.closeNode()}renderColorScale(b,y){b.openNode(this.tag,{type:"colorScale",priority:y.priority}),this.colorScaleXform.render(b,y),b.closeNode()}renderIconSet(b,y){m.isPrimitive(y)&&(b.openNode(this.tag,{type:"iconSet",priority:y.priority}),this.iconSetXform.render(b,y),b.closeNode())}renderText(b,y){b.openNode(this.tag,{type:y.operator,dxfId:y.dxfId,priority:y.priority,operator:i.toStringAttribute(y.operator,"containsText")});const _=(E=>{if(E.formulae&&E.formulae[0])return E.formulae[0];const M=new a(E.ref),{tl:D}=M;switch(E.operator){case"containsText":return`NOT(ISERROR(SEARCH("${E.text}",${D})))`;case"containsBlanks":return`LEN(TRIM(${D}))=0`;case"notContainsBlanks":return`LEN(TRIM(${D}))>0`;case"containsErrors":return`ISERROR(${D})`;case"notContainsErrors":return`NOT(ISERROR(${D}))`;default:return}})(y);_&&this.formulaXform.render(b,_),b.closeNode()}renderTimePeriod(b,y){b.openNode(this.tag,{type:"timePeriod",dxfId:y.dxfId,priority:y.priority,timePeriod:y.timePeriod});const _=(E=>{if(E.formulae&&E.formulae[0])return E.formulae[0];const M=new a(E.ref),{tl:D}=M;switch(E.timePeriod){case"thisWeek":return`AND(TODAY()-ROUNDDOWN(${D},0)<=WEEKDAY(TODAY())-1,ROUNDDOWN(${D},0)-TODAY()<=7-WEEKDAY(TODAY()))`;case"lastWeek":return`AND(TODAY()-ROUNDDOWN(${D},0)>=(WEEKDAY(TODAY())),TODAY()-ROUNDDOWN(${D},0)<(WEEKDAY(TODAY())+7))`;case"nextWeek":return`AND(ROUNDDOWN(${D},0)-TODAY()>(7-WEEKDAY(TODAY())),ROUNDDOWN(${D},0)-TODAY()<(15-WEEKDAY(TODAY())))`;case"yesterday":return`FLOOR(${D},1)=TODAY()-1`;case"today":return`FLOOR(${D},1)=TODAY()`;case"tomorrow":return`FLOOR(${D},1)=TODAY()+1`;case"last7Days":return`AND(TODAY()-FLOOR(${D},1)<=6,FLOOR(${D},1)<=TODAY())`;case"lastMonth":return`AND(MONTH(${D})=MONTH(EDATE(TODAY(),0-1)),YEAR(${D})=YEAR(EDATE(TODAY(),0-1)))`;case"thisMonth":return`AND(MONTH(${D})=MONTH(TODAY()),YEAR(${D})=YEAR(TODAY()))`;case"nextMonth":return`AND(MONTH(${D})=MONTH(EDATE(TODAY(),0+1)),YEAR(${D})=YEAR(EDATE(TODAY(),0+1)))`;default:return}})(y);_&&this.formulaXform.render(b,_),b.closeNode()}createNewModel(b){let{attributes:y}=b;return{...p(y),dxfId:i.toIntValue(y.dxfId),priority:i.toIntValue(y.priority),timePeriod:y.timePeriod,percent:i.toBoolValue(y.percent),bottom:i.toBoolValue(y.bottom),rank:i.toIntValue(y.rank),aboveAverage:i.toBoolValue(y.aboveAverage)}}onParserClose(b,y){switch(b){case"dataBar":case"extLst":case"colorScale":case"iconSet":Object.assign(this.model,y.model);break;case"formula":this.model.formulae=this.model.formulae||[],this.model.formulae.push(y.model)}}}r.exports=m},{"../../../../doc/range":10,"../../base-xform":32,"../../composite-xform":48,"./color-scale-xform":85,"./databar-xform":88,"./ext-lst-ref-xform":89,"./formula-xform":90,"./icon-set-xform":91}],84:[function(t,r,l){const i=t("../../base-xform");r.exports=class extends i{get tag(){return"cfvo"}render(s,a){s.leafNode(this.tag,{type:a.type,val:a.value})}parseOpen(s){this.model={type:s.attributes.type,value:i.toFloatValue(s.attributes.val)}}parseClose(s){return s!==this.tag}}},{"../../base-xform":32}],85:[function(t,r,l){const i=t("../../composite-xform"),s=t("../../style/color-xform"),a=t("./cfvo-xform");r.exports=class extends i{constructor(){super(),this.map={cfvo:this.cfvoXform=new a,color:this.colorXform=new s}}get tag(){return"colorScale"}render(o,n){o.openNode(this.tag),n.cfvo.forEach(c=>{this.cfvoXform.render(o,c)}),n.color.forEach(c=>{this.colorXform.render(o,c)}),o.closeNode()}createNewModel(o){return{cfvo:[],color:[]}}onParserClose(o,n){this.model[o].push(n.model)}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],86:[function(t,r,l){const i=t("../../composite-xform"),s=t("./cf-rule-xform");r.exports=class extends i{constructor(){super(),this.map={cfRule:new s}}get tag(){return"conditionalFormatting"}render(a,o){o.rules.some(s.isPrimitive)&&(a.openNode(this.tag,{sqref:o.ref}),o.rules.forEach(n=>{s.isPrimitive(n)&&(n.ref=o.ref,this.map.cfRule.render(a,n))}),a.closeNode())}createNewModel(a){let{attributes:o}=a;return{ref:o.sqref,rules:[]}}onParserClose(a,o){this.model.rules.push(o.model)}}},{"../../composite-xform":48,"./cf-rule-xform":83}],87:[function(t,r,l){const i=t("../../base-xform"),s=t("./conditional-formatting-xform");r.exports=class extends i{constructor(){super(),this.cfXform=new s}get tag(){return"conditionalFormatting"}reset(){this.model=[]}prepare(a,o){let n=a.reduce((c,d)=>Math.max(c,...d.rules.map(u=>u.priority||0)),1);a.forEach(c=>{c.rules.forEach(d=>{d.priority||(d.priority=n++),d.style&&(d.dxfId=o.styles.addDxfStyle(d.style))})})}render(a,o){o.forEach(n=>{this.cfXform.render(a,n)})}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case"conditionalFormatting":return this.parser=this.cfXform,this.parser.parseOpen(a),!0;default:return!1}}parseText(a){this.parser&&this.parser.parseText(a)}parseClose(a){return!!this.parser&&(!!this.parser.parseClose(a)||(this.model.push(this.parser.model),this.parser=void 0,!1))}reconcile(a,o){a.forEach(n=>{n.rules.forEach(c=>{c.dxfId!==void 0&&(c.style=o.styles.getDxfStyle(c.dxfId),delete c.dxfId)})})}}},{"../../base-xform":32,"./conditional-formatting-xform":86}],88:[function(t,r,l){const i=t("../../composite-xform"),s=t("../../style/color-xform"),a=t("./cfvo-xform");r.exports=class extends i{constructor(){super(),this.map={cfvo:this.cfvoXform=new a,color:this.colorXform=new s}}get tag(){return"dataBar"}render(o,n){o.openNode(this.tag),n.cfvo.forEach(c=>{this.cfvoXform.render(o,c)}),this.colorXform.render(o,n.color),o.closeNode()}createNewModel(){return{cfvo:[]}}onParserClose(o,n){switch(o){case"cfvo":this.model.cfvo.push(n.model);break;case"color":this.model.color=n.model}}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],89:[function(t,r,l){const i=t("../../base-xform"),s=t("../../composite-xform");class a extends i{get tag(){return"x14:id"}render(c,d){c.leafNode(this.tag,null,d)}parseOpen(){this.model=""}parseText(c){this.model+=c}parseClose(c){return c!==this.tag}}class o extends s{constructor(){super(),this.map={"x14:id":this.idXform=new a}}get tag(){return"ext"}render(c,d){c.openNode(this.tag,{uri:"{B025F937-C7B1-47D3-B67F-A62EFF666E3E}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.idXform.render(c,d.x14Id),c.closeNode()}createNewModel(){return{}}onParserClose(c,d){this.model.x14Id=d.model}}r.exports=class extends s{constructor(){super(),this.map={ext:new o}}get tag(){return"extLst"}render(n,c){n.openNode(this.tag),this.map.ext.render(n,c),n.closeNode()}createNewModel(){return{}}onParserClose(n,c){Object.assign(this.model,c.model)}}},{"../../base-xform":32,"../../composite-xform":48}],90:[function(t,r,l){const i=t("../../base-xform");r.exports=class extends i{get tag(){return"formula"}render(s,a){s.leafNode(this.tag,null,a)}parseOpen(){this.model=""}parseText(s){this.model+=s}parseClose(s){return s!==this.tag}}},{"../../base-xform":32}],91:[function(t,r,l){const i=t("../../base-xform"),s=t("../../composite-xform"),a=t("./cfvo-xform");r.exports=class extends s{constructor(){super(),this.map={cfvo:this.cfvoXform=new a}}get tag(){return"iconSet"}render(o,n){o.openNode(this.tag,{iconSet:i.toStringAttribute(n.iconSet,"3TrafficLights"),reverse:i.toBoolAttribute(n.reverse,!1),showValue:i.toBoolAttribute(n.showValue,!0)}),n.cfvo.forEach(c=>{this.cfvoXform.render(o,c)}),o.closeNode()}createNewModel(o){let{attributes:n}=o;return{iconSet:i.toStringValue(n.iconSet,"3TrafficLights"),reverse:i.toBoolValue(n.reverse),showValue:i.toBoolValue(n.showValue),cfvo:[]}}onParserClose(o,n){this.model[o].push(n.model)}}},{"../../base-xform":32,"../../composite-xform":48,"./cfvo-xform":84}],92:[function(t,r,l){const i=t("../../../utils/utils"),s=t("../base-xform");r.exports=class extends s{get tag(){return"col"}prepare(a,o){const n=o.styles.addStyleModel(a.style||{});n&&(a.styleId=n)}render(a,o){a.openNode("col"),a.addAttribute("min",o.min),a.addAttribute("max",o.max),o.width&&a.addAttribute("width",o.width),o.styleId&&a.addAttribute("style",o.styleId),o.hidden&&a.addAttribute("hidden","1"),o.bestFit&&a.addAttribute("bestFit","1"),o.outlineLevel&&a.addAttribute("outlineLevel",o.outlineLevel),o.collapsed&&a.addAttribute("collapsed","1"),a.addAttribute("customWidth","1"),a.closeNode()}parseOpen(a){if(a.name==="col"){const o=this.model={min:parseInt(a.attributes.min||"0",10),max:parseInt(a.attributes.max||"0",10),width:a.attributes.width===void 0?void 0:parseFloat(a.attributes.width||"0")};return a.attributes.style&&(o.styleId=parseInt(a.attributes.style,10)),i.parseBoolean(a.attributes.hidden)&&(o.hidden=!0),i.parseBoolean(a.attributes.bestFit)&&(o.bestFit=!0),a.attributes.outlineLevel&&(o.outlineLevel=parseInt(a.attributes.outlineLevel,10)),i.parseBoolean(a.attributes.collapsed)&&(o.collapsed=!0),!0}return!1}parseText(){}parseClose(){return!1}reconcile(a,o){a.styleId&&(a.style=o.styles.getStyleModel(a.styleId))}}},{"../../../utils/utils":27,"../base-xform":32}],93:[function(t,r,l){const i=t("../../../utils/under-dash"),s=t("../../../utils/utils"),a=t("../../../utils/col-cache"),o=t("../base-xform"),n=t("../../../doc/range");function c(u,h,p,m){const f=h[p];f!==void 0?u[p]=f:m!==void 0&&(u[p]=m)}function d(u,h,p,m){const f=h[p];f!==void 0&&(u[p]=s.parseBoolean(f))}r.exports=class extends o{get tag(){return"dataValidations"}render(u,h){const p=function(m){const f=i.map(m,(_,E)=>({address:E,dataValidation:_,marked:!1})).sort((_,E)=>i.strcmp(_.address,E.address)),b=i.keyBy(f,"address"),y=(_,E,M)=>{for(let D=0;D<E;D++){const z=a.encodeAddress(_.row+D,M);if(!m[z]||!i.isEqual(m[_.address],m[z]))return!1}return!0};return f.map(_=>{if(!_.marked){const E=a.decodeEx(_.address);if(E.dimensions)return b[E.dimensions].marked=!0,{..._.dataValidation,sqref:_.address};let M=1,D=a.encodeAddress(E.row+M,E.col);for(;m[D]&&i.isEqual(_.dataValidation,m[D]);)M++,D=a.encodeAddress(E.row+M,E.col);let z=1;for(;y(E,M,E.col+z);)z++;for(let O=0;O<M;O++)for(let N=0;N<z;N++)D=a.encodeAddress(E.row+O,E.col+N),b[D].marked=!0;if(M>1||z>1){const O=E.row+(M-1),N=E.col+(z-1);return{..._.dataValidation,sqref:`${_.address}:${a.encodeAddress(O,N)}`}}return{..._.dataValidation,sqref:_.address}}return null}).filter(Boolean)}(h);p.length&&(u.openNode("dataValidations",{count:p.length}),p.forEach(m=>{u.openNode("dataValidation"),m.type!=="any"&&(u.addAttribute("type",m.type),m.operator&&m.type!=="list"&&m.operator!=="between"&&u.addAttribute("operator",m.operator),m.allowBlank&&u.addAttribute("allowBlank","1")),m.showInputMessage&&u.addAttribute("showInputMessage","1"),m.promptTitle&&u.addAttribute("promptTitle",m.promptTitle),m.prompt&&u.addAttribute("prompt",m.prompt),m.showErrorMessage&&u.addAttribute("showErrorMessage","1"),m.errorStyle&&u.addAttribute("errorStyle",m.errorStyle),m.errorTitle&&u.addAttribute("errorTitle",m.errorTitle),m.error&&u.addAttribute("error",m.error),u.addAttribute("sqref",m.sqref),(m.formulae||[]).forEach((f,b)=>{u.openNode("formula"+(b+1)),m.type==="date"?u.writeText(s.dateToExcel(new Date(f))):u.writeText(f),u.closeNode()}),u.closeNode()}),u.closeNode())}parseOpen(u){switch(u.name){case"dataValidations":return this.model={},!0;case"dataValidation":{this._address=u.attributes.sqref;const h={type:u.attributes.type||"any",formulae:[]};switch(u.attributes.type&&d(h,u.attributes,"allowBlank"),d(h,u.attributes,"showInputMessage"),d(h,u.attributes,"showErrorMessage"),h.type){case"any":case"list":case"custom":break;default:c(h,u.attributes,"operator","between")}return c(h,u.attributes,"promptTitle"),c(h,u.attributes,"prompt"),c(h,u.attributes,"errorStyle"),c(h,u.attributes,"errorTitle"),c(h,u.attributes,"error"),this._dataValidation=h,!0}case"formula1":case"formula2":return this._formula=[],!0;default:return!1}}parseText(u){this._formula&&this._formula.push(u)}parseClose(u){switch(u){case"dataValidations":return!1;case"dataValidation":return this._dataValidation.formulae&&this._dataValidation.formulae.length||(delete this._dataValidation.formulae,delete this._dataValidation.operator),(this._address.split(/\s+/g)||[]).forEach(h=>{h.includes(":")?new n(h).forEachAddress(p=>{this.model[p]=this._dataValidation}):this.model[h]=this._dataValidation}),!0;case"formula1":case"formula2":{let h=this._formula.join("");switch(this._dataValidation.type){case"whole":case"textLength":h=parseInt(h,10);break;case"decimal":h=parseFloat(h);break;case"date":h=s.excelToDate(parseFloat(h))}return this._dataValidation.formulae.push(h),this._formula=void 0,!0}default:return!0}}}},{"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/utils":27,"../base-xform":32}],94:[function(t,r,l){const i=t("../base-xform");r.exports=class extends i{get tag(){return"dimension"}render(s,a){a&&s.leafNode("dimension",{ref:a})}parseOpen(s){return s.name==="dimension"&&(this.model=s.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],95:[function(t,r,l){const i=t("../base-xform");r.exports=class extends i{get tag(){return"drawing"}render(s,a){a&&s.leafNode(this.tag,{"r:id":a.rId})}parseOpen(s){switch(s.name){case this.tag:return this.model={rId:s.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],96:[function(t,r,l){const i=t("../composite-xform"),s=t("./cf-ext/conditional-formattings-ext-xform");class a extends i{constructor(){super(),this.map={"x14:conditionalFormattings":this.conditionalFormattings=new s}}get tag(){return"ext"}hasContent(n){return this.conditionalFormattings.hasContent(n.conditionalFormattings)}prepare(n,c){this.conditionalFormattings.prepare(n.conditionalFormattings,c)}render(n,c){n.openNode("ext",{uri:"{78C0D931-6437-407d-A8EE-F0AAD7539E65}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.conditionalFormattings.render(n,c.conditionalFormattings),n.closeNode()}createNewModel(){return{}}onParserClose(n,c){this.model[n]=c.model}}r.exports=class extends i{constructor(){super(),this.map={ext:this.ext=new a}}get tag(){return"extLst"}prepare(o,n){this.ext.prepare(o,n)}hasContent(o){return this.ext.hasContent(o)}render(o,n){this.hasContent(n)&&(o.openNode("extLst"),this.ext.render(o,n),o.closeNode())}createNewModel(){return{}}onParserClose(o,n){Object.assign(this.model,n.model)}}},{"../composite-xform":48,"./cf-ext/conditional-formattings-ext-xform":78}],97:[function(t,r,l){const i=t("../base-xform");r.exports=class extends i{get tag(){return"headerFooter"}render(s,a){if(a){s.addRollback();let o=!1;s.openNode("headerFooter"),a.differentFirst&&(s.addAttribute("differentFirst","1"),o=!0),a.differentOddEven&&(s.addAttribute("differentOddEven","1"),o=!0),a.oddHeader&&typeof a.oddHeader=="string"&&(s.leafNode("oddHeader",null,a.oddHeader),o=!0),a.oddFooter&&typeof a.oddFooter=="string"&&(s.leafNode("oddFooter",null,a.oddFooter),o=!0),a.evenHeader&&typeof a.evenHeader=="string"&&(s.leafNode("evenHeader",null,a.evenHeader),o=!0),a.evenFooter&&typeof a.evenFooter=="string"&&(s.leafNode("evenFooter",null,a.evenFooter),o=!0),a.firstHeader&&typeof a.firstHeader=="string"&&(s.leafNode("firstHeader",null,a.firstHeader),o=!0),a.firstFooter&&typeof a.firstFooter=="string"&&(s.leafNode("firstFooter",null,a.firstFooter),o=!0),o?(s.closeNode(),s.commit()):s.rollback()}}parseOpen(s){switch(s.name){case"headerFooter":return this.model={},s.attributes.differentFirst&&(this.model.differentFirst=parseInt(s.attributes.differentFirst,0)===1),s.attributes.differentOddEven&&(this.model.differentOddEven=parseInt(s.attributes.differentOddEven,0)===1),!0;case"oddHeader":return this.currentNode="oddHeader",!0;case"oddFooter":return this.currentNode="oddFooter",!0;case"evenHeader":return this.currentNode="evenHeader",!0;case"evenFooter":return this.currentNode="evenFooter",!0;case"firstHeader":return this.currentNode="firstHeader",!0;case"firstFooter":return this.currentNode="firstFooter",!0;default:return!1}}parseText(s){switch(this.currentNode){case"oddHeader":this.model.oddHeader=s;break;case"oddFooter":this.model.oddFooter=s;break;case"evenHeader":this.model.evenHeader=s;break;case"evenFooter":this.model.evenFooter=s;break;case"firstHeader":this.model.firstHeader=s;break;case"firstFooter":this.model.firstFooter=s}}parseClose(){switch(this.currentNode){case"oddHeader":case"oddFooter":case"evenHeader":case"evenFooter":case"firstHeader":case"firstFooter":return this.currentNode=void 0,!0;default:return!1}}}},{"../base-xform":32}],98:[function(t,r,l){const i=t("../base-xform");r.exports=class extends i{get tag(){return"hyperlink"}render(s,a){this.isInternalLink(a)?s.leafNode("hyperlink",{ref:a.address,"r:id":a.rId,tooltip:a.tooltip,location:a.target}):s.leafNode("hyperlink",{ref:a.address,"r:id":a.rId,tooltip:a.tooltip})}parseOpen(s){return s.name==="hyperlink"&&(this.model={address:s.attributes.ref,rId:s.attributes["r:id"],tooltip:s.attributes.tooltip},s.attributes.location&&(this.model.target=s.attributes.location),!0)}parseText(){}parseClose(){return!1}isInternalLink(s){return s.target&&/^[^!]+![a-zA-Z]+[\d]+$/.test(s.target)}}},{"../base-xform":32}],99:[function(t,r,l){const i=t("../base-xform");r.exports=class extends i{get tag(){return"mergeCell"}render(s,a){s.leafNode("mergeCell",{ref:a})}parseOpen(s){return s.name==="mergeCell"&&(this.model=s.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],100:[function(t,r,l){const i=t("../../../utils/under-dash"),s=t("../../../doc/range"),a=t("../../../utils/col-cache"),o=t("../../../doc/enums");r.exports=class{constructor(){this.merges={}}add(n){if(this.merges[n.master])this.merges[n.master].expandToAddress(n.address);else{const c=`${n.master}:${n.address}`;this.merges[n.master]=new s(c)}}get mergeCells(){return i.map(this.merges,n=>n.range)}reconcile(n,c){i.each(n,d=>{const u=a.decode(d);for(let h=u.top;h<=u.bottom;h++){const p=c[h-1];for(let m=u.left;m<=u.right;m++){const f=p.cells[m-1];f?f.type===o.ValueType.Merge&&(f.master=u.tl):p.cells[m]={type:o.ValueType.Null,address:a.encodeAddress(h,m)}}}})}getMasterAddress(n){const c=this.hash[n];return c&&c.tl}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26}],101:[function(t,r,l){const i=t("../base-xform"),s=a=>a!==void 0;r.exports=class extends i{get tag(){return"outlinePr"}render(a,o){return!(!o||!s(o.summaryBelow)&&!s(o.summaryRight))&&(a.leafNode(this.tag,{summaryBelow:s(o.summaryBelow)?Number(o.summaryBelow):void 0,summaryRight:s(o.summaryRight)?Number(o.summaryRight):void 0}),!0)}parseOpen(a){return a.name===this.tag&&(this.model={summaryBelow:s(a.attributes.summaryBelow)?!!Number(a.attributes.summaryBelow):void 0,summaryRight:s(a.attributes.summaryRight)?!!Number(a.attributes.summaryRight):void 0},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],102:[function(t,r,l){const i=t("../base-xform");r.exports=class extends i{get tag(){return"brk"}render(s,a){s.leafNode("brk",a)}parseOpen(s){return s.name==="brk"&&(this.model=s.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],103:[function(t,r,l){const i=t("../../../utils/under-dash"),s=t("../base-xform");r.exports=class extends s{get tag(){return"pageMargins"}render(a,o){if(o){const n={left:o.left,right:o.right,top:o.top,bottom:o.bottom,header:o.header,footer:o.footer};i.some(n,c=>c!==void 0)&&a.leafNode(this.tag,n)}}parseOpen(a){switch(a.name){case this.tag:return this.model={left:parseFloat(a.attributes.left||.7),right:parseFloat(a.attributes.right||.7),top:parseFloat(a.attributes.top||.75),bottom:parseFloat(a.attributes.bottom||.75),header:parseFloat(a.attributes.header||.3),footer:parseFloat(a.attributes.footer||.3)},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],104:[function(t,r,l){const i=t("../base-xform");r.exports=class extends i{get tag(){return"pageSetUpPr"}render(s,a){return!(!a||!a.fitToPage)&&(s.leafNode(this.tag,{fitToPage:a.fitToPage?"1":void 0}),!0)}parseOpen(s){return s.name===this.tag&&(this.model={fitToPage:s.attributes.fitToPage==="1"},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],105:[function(t,r,l){const i=t("../../../utils/under-dash"),s=t("../base-xform");function a(d){return d?"1":void 0}function o(d){switch(d){case"overThenDown":return d;default:return}}function n(d){switch(d){case"atEnd":case"asDisplyed":return d;default:return}}function c(d){switch(d){case"dash":case"blank":case"NA":return d;default:return}}r.exports=class extends s{get tag(){return"pageSetup"}render(d,u){if(u){const h={paperSize:u.paperSize,orientation:u.orientation,horizontalDpi:u.horizontalDpi,verticalDpi:u.verticalDpi,pageOrder:o(u.pageOrder),blackAndWhite:a(u.blackAndWhite),draft:a(u.draft),cellComments:n(u.cellComments),errors:c(u.errors),scale:u.scale,fitToWidth:u.fitToWidth,fitToHeight:u.fitToHeight,firstPageNumber:u.firstPageNumber,useFirstPageNumber:a(u.firstPageNumber),usePrinterDefaults:a(u.usePrinterDefaults),copies:u.copies};i.some(h,p=>p!==void 0)&&d.leafNode(this.tag,h)}}parseOpen(d){switch(d.name){case this.tag:return this.model={paperSize:(u=d.attributes.paperSize,u!==void 0?parseInt(u,10):void 0),orientation:d.attributes.orientation||"portrait",horizontalDpi:parseInt(d.attributes.horizontalDpi||"4294967295",10),verticalDpi:parseInt(d.attributes.verticalDpi||"4294967295",10),pageOrder:d.attributes.pageOrder||"downThenOver",blackAndWhite:d.attributes.blackAndWhite==="1",draft:d.attributes.draft==="1",cellComments:d.attributes.cellComments||"None",errors:d.attributes.errors||"displayed",scale:parseInt(d.attributes.scale||"100",10),fitToWidth:parseInt(d.attributes.fitToWidth||"1",10),fitToHeight:parseInt(d.attributes.fitToHeight||"1",10),firstPageNumber:parseInt(d.attributes.firstPageNumber||"1",10),useFirstPageNumber:d.attributes.useFirstPageNumber==="1",usePrinterDefaults:d.attributes.usePrinterDefaults==="1",copies:parseInt(d.attributes.copies||"1",10)},!0;default:return!1}var u}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],106:[function(t,r,l){const i=t("../base-xform");r.exports=class extends i{get tag(){return"picture"}render(s,a){a&&s.leafNode(this.tag,{"r:id":a.rId})}parseOpen(s){switch(s.name){case this.tag:return this.model={rId:s.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],107:[function(t,r,l){const i=t("../../../utils/under-dash"),s=t("../base-xform");function a(o){return o?"1":void 0}r.exports=class extends s{get tag(){return"printOptions"}render(o,n){if(n){const c={headings:a(n.showRowColHeaders),gridLines:a(n.showGridLines),horizontalCentered:a(n.horizontalCentered),verticalCentered:a(n.verticalCentered)};i.some(c,d=>d!==void 0)&&o.leafNode(this.tag,c)}}parseOpen(o){switch(o.name){case this.tag:return this.model={showRowColHeaders:o.attributes.headings==="1",showGridLines:o.attributes.gridLines==="1",horizontalCentered:o.attributes.horizontalCentered==="1",verticalCentered:o.attributes.verticalCentered==="1"},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],108:[function(t,r,l){const i=t("./page-breaks-xform"),s=t("../list-xform");r.exports=class extends s{constructor(){super({tag:"rowBreaks",count:!0,childXform:new i})}render(a,o){if(o&&o.length){a.openNode(this.tag,this.$),this.count&&(a.addAttribute(this.$count,o.length),a.addAttribute("manualBreakCount",o.length));const{childXform:n}=this;o.forEach(c=>{n.render(a,c)}),a.closeNode()}else this.empty&&a.leafNode(this.tag)}}},{"../list-xform":71,"./page-breaks-xform":102}],109:[function(t,r,l){const i=t("../base-xform"),s=t("../../../utils/utils"),a=t("./cell-xform");r.exports=class extends i{constructor(o){super(),this.maxItems=o&&o.maxItems,this.map={c:new a}}get tag(){return"row"}prepare(o,n){const c=n.styles.addStyleModel(o.style);c&&(o.styleId=c);const d=this.map.c;o.cells.forEach(u=>{d.prepare(u,n)})}render(o,n,c){o.openNode("row"),o.addAttribute("r",n.number),n.height&&(o.addAttribute("ht",n.height),o.addAttribute("customHeight","1")),n.hidden&&o.addAttribute("hidden","1"),n.min>0&&n.max>0&&n.min<=n.max&&o.addAttribute("spans",`${n.min}:${n.max}`),n.styleId&&(o.addAttribute("s",n.styleId),o.addAttribute("customFormat","1")),o.addAttribute("x14ac:dyDescent","0.25"),n.outlineLevel&&o.addAttribute("outlineLevel",n.outlineLevel),n.collapsed&&o.addAttribute("collapsed","1");const d=this.map.c;n.cells.forEach(u=>{d.render(o,u,c)}),o.closeNode()}parseOpen(o){if(this.parser)return this.parser.parseOpen(o),!0;if(o.name==="row"){this.numRowsSeen+=1;const n=o.attributes.spans?o.attributes.spans.split(":").map(d=>parseInt(d,10)):[void 0,void 0],c=this.model={number:parseInt(o.attributes.r,10),min:n[0],max:n[1],cells:[]};return o.attributes.s&&(c.styleId=parseInt(o.attributes.s,10)),s.parseBoolean(o.attributes.hidden)&&(c.hidden=!0),s.parseBoolean(o.attributes.bestFit)&&(c.bestFit=!0),o.attributes.ht&&(c.height=parseFloat(o.attributes.ht)),o.attributes.outlineLevel&&(c.outlineLevel=parseInt(o.attributes.outlineLevel,10)),s.parseBoolean(o.attributes.collapsed)&&(c.collapsed=!0),!0}return this.parser=this.map[o.name],!!this.parser&&(this.parser.parseOpen(o),!0)}parseText(o){this.parser&&this.parser.parseText(o)}parseClose(o){if(this.parser){if(!this.parser.parseClose(o)){if(this.model.cells.push(this.parser.model),this.maxItems&&this.model.cells.length>this.maxItems)throw new Error(`Max column count (${this.maxItems}) exceeded`);this.parser=void 0}return!0}return!1}reconcile(o,n){o.style=o.styleId?n.styles.getStyleModel(o.styleId):{},o.styleId!==void 0&&(o.styleId=void 0);const c=this.map.c;o.cells.forEach(d=>{c.reconcile(d,n)})}}},{"../../../utils/utils":27,"../base-xform":32,"./cell-xform":73}],110:[function(t,r,l){const i=t("../../../utils/under-dash"),s=t("../base-xform");r.exports=class extends s{get tag(){return"sheetFormatPr"}render(a,o){if(o){const n={defaultRowHeight:o.defaultRowHeight,outlineLevelRow:o.outlineLevelRow,outlineLevelCol:o.outlineLevelCol,"x14ac:dyDescent":o.dyDescent};o.defaultColWidth&&(n.defaultColWidth=o.defaultColWidth),o.defaultRowHeight&&o.defaultRowHeight===15||(n.customHeight="1"),i.some(n,c=>c!==void 0)&&a.leafNode("sheetFormatPr",n)}}parseOpen(a){return a.name==="sheetFormatPr"&&(this.model={defaultRowHeight:parseFloat(a.attributes.defaultRowHeight||"0"),dyDescent:parseFloat(a.attributes["x14ac:dyDescent"]||"0"),outlineLevelRow:parseInt(a.attributes.outlineLevelRow||"0",10),outlineLevelCol:parseInt(a.attributes.outlineLevelCol||"0",10)},a.attributes.defaultColWidth&&(this.model.defaultColWidth=parseFloat(a.attributes.defaultColWidth)),!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],111:[function(t,r,l){const i=t("../base-xform"),s=t("../style/color-xform"),a=t("./page-setup-properties-xform"),o=t("./outline-properties-xform");r.exports=class extends i{constructor(){super(),this.map={tabColor:new s("tabColor"),pageSetUpPr:new a,outlinePr:new o}}get tag(){return"sheetPr"}render(n,c){if(c){n.addRollback(),n.openNode("sheetPr");let d=!1;d=this.map.tabColor.render(n,c.tabColor)||d,d=this.map.pageSetUpPr.render(n,c.pageSetup)||d,d=this.map.outlinePr.render(n,c.outlineProperties)||d,d?(n.closeNode(),n.commit()):n.rollback()}}parseOpen(n){return this.parser?(this.parser.parseOpen(n),!0):n.name===this.tag?(this.reset(),!0):!!this.map[n.name]&&(this.parser=this.map[n.name],this.parser.parseOpen(n),!0)}parseText(n){return!!this.parser&&(this.parser.parseText(n),!0)}parseClose(n){return this.parser?(this.parser.parseClose(n)||(this.parser=void 0),!0):(this.map.tabColor.model||this.map.pageSetUpPr.model||this.map.outlinePr.model?(this.model={},this.map.tabColor.model&&(this.model.tabColor=this.map.tabColor.model),this.map.pageSetUpPr.model&&(this.model.pageSetup=this.map.pageSetUpPr.model),this.map.outlinePr.model&&(this.model.outlineProperties=this.map.outlinePr.model)):this.model=null,!1)}}},{"../base-xform":32,"../style/color-xform":128,"./outline-properties-xform":101,"./page-setup-properties-xform":104}],112:[function(t,r,l){const i=t("../../../utils/under-dash"),s=t("../base-xform");function a(n,c){return n?c:void 0}function o(n,c){return n===c||void 0}r.exports=class extends s{get tag(){return"sheetProtection"}render(n,c){if(c){const d={sheet:a(c.sheet,"1"),selectLockedCells:c.selectLockedCells===!1?"1":void 0,selectUnlockedCells:c.selectUnlockedCells===!1?"1":void 0,formatCells:a(c.formatCells,"0"),formatColumns:a(c.formatColumns,"0"),formatRows:a(c.formatRows,"0"),insertColumns:a(c.insertColumns,"0"),insertRows:a(c.insertRows,"0"),insertHyperlinks:a(c.insertHyperlinks,"0"),deleteColumns:a(c.deleteColumns,"0"),deleteRows:a(c.deleteRows,"0"),sort:a(c.sort,"0"),autoFilter:a(c.autoFilter,"0"),pivotTables:a(c.pivotTables,"0")};c.sheet&&(d.algorithmName=c.algorithmName,d.hashValue=c.hashValue,d.saltValue=c.saltValue,d.spinCount=c.spinCount,d.objects=a(c.objects===!1,"1"),d.scenarios=a(c.scenarios===!1,"1")),i.some(d,u=>u!==void 0)&&n.leafNode(this.tag,d)}}parseOpen(n){switch(n.name){case this.tag:return this.model={sheet:o(n.attributes.sheet,"1"),objects:n.attributes.objects!=="1"&&void 0,scenarios:n.attributes.scenarios!=="1"&&void 0,selectLockedCells:n.attributes.selectLockedCells!=="1"&&void 0,selectUnlockedCells:n.attributes.selectUnlockedCells!=="1"&&void 0,formatCells:o(n.attributes.formatCells,"0"),formatColumns:o(n.attributes.formatColumns,"0"),formatRows:o(n.attributes.formatRows,"0"),insertColumns:o(n.attributes.insertColumns,"0"),insertRows:o(n.attributes.insertRows,"0"),insertHyperlinks:o(n.attributes.insertHyperlinks,"0"),deleteColumns:o(n.attributes.deleteColumns,"0"),deleteRows:o(n.attributes.deleteRows,"0"),sort:o(n.attributes.sort,"0"),autoFilter:o(n.attributes.autoFilter,"0"),pivotTables:o(n.attributes.pivotTables,"0")},n.attributes.algorithmName&&(this.model.algorithmName=n.attributes.algorithmName,this.model.hashValue=n.attributes.hashValue,this.model.saltValue=n.attributes.saltValue,this.model.spinCount=parseInt(n.attributes.spinCount,10)),!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],113:[function(t,r,l){const i=t("../../../utils/col-cache"),s=t("../base-xform"),a={frozen:"frozen",frozenSplit:"frozen",split:"split"};r.exports=class extends s{get tag(){return"sheetView"}prepare(o){switch(o.state){case"frozen":case"split":break;default:o.state="normal"}}render(o,n){o.openNode("sheetView",{workbookViewId:n.workbookViewId||0});const c=function(m,f,b){b&&o.addAttribute(m,f)};let d,u,h,p;switch(c("rightToLeft","1",n.rightToLeft===!0),c("tabSelected","1",n.tabSelected),c("showRuler","0",n.showRuler===!1),c("showRowColHeaders","0",n.showRowColHeaders===!1),c("showGridLines","0",n.showGridLines===!1),c("zoomScale",n.zoomScale,n.zoomScale),c("zoomScaleNormal",n.zoomScaleNormal,n.zoomScaleNormal),c("view",n.style,n.style),n.state){case"frozen":u=n.xSplit||0,h=n.ySplit||0,d=n.topLeftCell||i.getAddress(h+1,u+1).address,p=(n.xSplit&&n.ySplit?"bottomRight":n.xSplit&&"topRight")||"bottomLeft",o.leafNode("pane",{xSplit:n.xSplit||void 0,ySplit:n.ySplit||void 0,topLeftCell:d,activePane:p,state:"frozen"}),o.leafNode("selection",{pane:p,activeCell:n.activeCell,sqref:n.activeCell});break;case"split":n.activePane==="topLeft"&&(n.activePane=void 0),o.leafNode("pane",{xSplit:n.xSplit||void 0,ySplit:n.ySplit||void 0,topLeftCell:n.topLeftCell,activePane:n.activePane}),o.leafNode("selection",{pane:n.activePane,activeCell:n.activeCell,sqref:n.activeCell});break;case"normal":n.activeCell&&o.leafNode("selection",{activeCell:n.activeCell,sqref:n.activeCell})}o.closeNode()}parseOpen(o){switch(o.name){case"sheetView":return this.sheetView={workbookViewId:parseInt(o.attributes.workbookViewId,10),rightToLeft:o.attributes.rightToLeft==="1",tabSelected:o.attributes.tabSelected==="1",showRuler:o.attributes.showRuler!=="0",showRowColHeaders:o.attributes.showRowColHeaders!=="0",showGridLines:o.attributes.showGridLines!=="0",zoomScale:parseInt(o.attributes.zoomScale||"100",10),zoomScaleNormal:parseInt(o.attributes.zoomScaleNormal||"100",10),style:o.attributes.view},this.pane=void 0,this.selections={},!0;case"pane":return this.pane={xSplit:parseInt(o.attributes.xSplit||"0",10),ySplit:parseInt(o.attributes.ySplit||"0",10),topLeftCell:o.attributes.topLeftCell,activePane:o.attributes.activePane||"topLeft",state:o.attributes.state},!0;case"selection":{const n=o.attributes.pane||"topLeft";return this.selections[n]={pane:n,activeCell:o.attributes.activeCell},!0}default:return!1}}parseText(){}parseClose(o){let n,c;switch(o){case"sheetView":return this.sheetView&&this.pane?(n=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:a[this.pane.state]||"split",xSplit:this.pane.xSplit,ySplit:this.pane.ySplit,topLeftCell:this.pane.topLeftCell,showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},this.model.state==="split"&&(n.activePane=this.pane.activePane),c=this.selections[this.pane.activePane],c&&c.activeCell&&(n.activeCell=c.activeCell),this.sheetView.style&&(n.style=this.sheetView.style)):(n=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:"normal",showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},c=this.selections.topLeft,c&&c.activeCell&&(n.activeCell=c.activeCell),this.sheetView.style&&(n.style=this.sheetView.style)),!1;default:return!0}}reconcile(){}}},{"../../../utils/col-cache":19,"../base-xform":32}],114:[function(t,r,l){const i=t("../base-xform");r.exports=class extends i{get tag(){return"tablePart"}render(s,a){a&&s.leafNode(this.tag,{"r:id":a.rId})}parseOpen(s){switch(s.name){case this.tag:return this.model={rId:s.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],115:[function(t,r,l){const i=t("../../../utils/under-dash"),s=t("../../../utils/col-cache"),a=t("../../../utils/xml-stream"),o=t("../../rel-type"),n=t("./merges"),c=t("../base-xform"),d=t("../list-xform"),u=t("./row-xform"),h=t("./col-xform"),p=t("./dimension-xform"),m=t("./hyperlink-xform"),f=t("./merge-cell-xform"),b=t("./data-validations-xform"),y=t("./sheet-properties-xform"),_=t("./sheet-format-properties-xform"),E=t("./sheet-view-xform"),M=t("./sheet-protection-xform"),D=t("./page-margins-xform"),z=t("./page-setup-xform"),O=t("./print-options-xform"),N=t("./auto-filter-xform"),B=t("./picture-xform"),H=t("./drawing-xform"),$=t("./table-part-xform"),C=t("./row-breaks-xform"),R=t("./header-footer-xform"),k=t("./cf/conditional-formattings-xform"),v=t("./ext-lst-xform"),w=(S,T)=>{if(!T||!T.length)return S;if(!S||!S.length)return T;const L={},j={};return S.forEach(U=>{L[U.ref]=U,U.rules.forEach(W=>{const{x14Id:Y}=W;Y&&(j[Y]=W)})}),T.forEach(U=>{U.rules.forEach(W=>{const Y=j[W.x14Id];Y?((F,X)=>{Object.keys(X).forEach(P=>{const I=F[P],V=X[P];I===void 0&&V!==void 0&&(F[P]=V)})})(Y,W):L[U.ref]?L[U.ref].rules.push(W):S.push({ref:U.ref,rules:[W]})})}),S};class x extends c{constructor(T){super();const{maxRows:L,maxCols:j,ignoreNodes:U}=T||{};this.ignoreNodes=U||[],this.map={sheetPr:new y,dimension:new p,sheetViews:new d({tag:"sheetViews",count:!1,childXform:new E}),sheetFormatPr:new _,cols:new d({tag:"cols",count:!1,childXform:new h}),sheetData:new d({tag:"sheetData",count:!1,empty:!0,childXform:new u({maxItems:j}),maxItems:L}),autoFilter:new N,mergeCells:new d({tag:"mergeCells",count:!0,childXform:new f}),rowBreaks:new C,hyperlinks:new d({tag:"hyperlinks",count:!1,childXform:new m}),pageMargins:new D,dataValidations:new b,pageSetup:new z,headerFooter:new R,printOptions:new O,picture:new B,drawing:new H,sheetProtection:new M,tableParts:new d({tag:"tableParts",count:!0,childXform:new $}),conditionalFormatting:new k,extLst:new v}}prepare(T,L){L.merges=new n,T.hyperlinks=L.hyperlinks=[],T.comments=L.comments=[],L.formulae={},L.siFormulae=0,this.map.cols.prepare(T.cols,L),this.map.sheetData.prepare(T.rows,L),this.map.conditionalFormatting.prepare(T.conditionalFormattings,L),T.mergeCells=L.merges.mergeCells;const j=T.rels=[];function U(F){return"rId"+(F.length+1)}if(T.hyperlinks.forEach(F=>{const X=U(j);F.rId=X,j.push({Id:X,Type:o.Hyperlink,Target:F.target,TargetMode:"External"})}),T.comments.length>0){const F={Id:U(j),Type:o.Comments,Target:`../comments${T.id}.xml`};j.push(F);const X={Id:U(j),Type:o.VmlDrawing,Target:`../drawings/vmlDrawing${T.id}.vml`};j.push(X),T.comments.forEach(P=>{P.refAddress=s.decodeAddress(P.ref)}),L.commentRefs.push({commentName:"comments"+T.id,vmlDrawing:"vmlDrawing"+T.id})}const W=[];let Y;T.media.forEach(F=>{if(F.type==="background"){const X=U(j);Y=L.media[F.imageId],j.push({Id:X,Type:o.Image,Target:`../media/${Y.name}.${Y.extension}`}),T.background={rId:X},T.image=L.media[F.imageId]}else if(F.type==="image"){let{drawing:X}=T;Y=L.media[F.imageId],X||(X=T.drawing={rId:U(j),name:"drawing"+ ++L.drawingsCount,anchors:[],rels:[]},L.drawings.push(X),j.push({Id:X.rId,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:`../drawings/${X.name}.xml`}));let P=this.preImageId===F.imageId?W[F.imageId]:W[X.rels.length];P||(P=U(X.rels),W[X.rels.length]=P,X.rels.push({Id:P,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:`../media/${Y.name}.${Y.extension}`}));const I={picture:{rId:P},range:F.range};if(F.hyperlinks&&F.hyperlinks.hyperlink){const V=U(X.rels);W[X.rels.length]=V,I.picture.hyperlinks={tooltip:F.hyperlinks.tooltip,rId:V},X.rels.push({Id:V,Type:o.Hyperlink,Target:F.hyperlinks.hyperlink,TargetMode:"External"})}this.preImageId=F.imageId,X.anchors.push(I)}}),T.tables.forEach(F=>{const X=U(j);F.rId=X,j.push({Id:X,Type:o.Table,Target:"../tables/"+F.target}),F.columns.forEach(P=>{const{style:I}=P;I&&(P.dxfId=L.styles.addDxfStyle(I))})}),this.map.extLst.prepare(T,L)}render(T,L){T.openXml(a.StdDocAttributes),T.openNode("worksheet",x.WORKSHEET_ATTRIBUTES);const j=L.properties?{defaultRowHeight:L.properties.defaultRowHeight,dyDescent:L.properties.dyDescent,outlineLevelCol:L.properties.outlineLevelCol,outlineLevelRow:L.properties.outlineLevelRow}:void 0;L.properties&&L.properties.defaultColWidth&&(j.defaultColWidth=L.properties.defaultColWidth);const U={outlineProperties:L.properties&&L.properties.outlineProperties,tabColor:L.properties&&L.properties.tabColor,pageSetup:L.pageSetup&&L.pageSetup.fitToPage?{fitToPage:L.pageSetup.fitToPage}:void 0},W=L.pageSetup&&L.pageSetup.margins,Y={showRowColHeaders:L.pageSetup&&L.pageSetup.showRowColHeaders,showGridLines:L.pageSetup&&L.pageSetup.showGridLines,horizontalCentered:L.pageSetup&&L.pageSetup.horizontalCentered,verticalCentered:L.pageSetup&&L.pageSetup.verticalCentered},F=L.sheetProtection;this.map.sheetPr.render(T,U),this.map.dimension.render(T,L.dimensions),this.map.sheetViews.render(T,L.views),this.map.sheetFormatPr.render(T,j),this.map.cols.render(T,L.cols),this.map.sheetData.render(T,L.rows),this.map.sheetProtection.render(T,F),this.map.autoFilter.render(T,L.autoFilter),this.map.mergeCells.render(T,L.mergeCells),this.map.conditionalFormatting.render(T,L.conditionalFormattings),this.map.dataValidations.render(T,L.dataValidations),this.map.hyperlinks.render(T,L.hyperlinks),this.map.printOptions.render(T,Y),this.map.pageMargins.render(T,W),this.map.pageSetup.render(T,L.pageSetup),this.map.headerFooter.render(T,L.headerFooter),this.map.rowBreaks.render(T,L.rowBreaks),this.map.drawing.render(T,L.drawing),this.map.picture.render(T,L.background),this.map.tableParts.render(T,L.tables),this.map.extLst.render(T,L),L.rels&&L.rels.forEach(X=>{X.Type===o.VmlDrawing&&T.leafNode("legacyDrawing",{"r:id":X.Id})}),T.closeNode()}parseOpen(T){return this.parser?(this.parser.parseOpen(T),!0):T.name==="worksheet"?(i.each(this.map,L=>{L.reset()}),!0):(this.map[T.name]&&!this.ignoreNodes.includes(T.name)&&(this.parser=this.map[T.name],this.parser.parseOpen(T)),!0)}parseText(T){this.parser&&this.parser.parseText(T)}parseClose(T){if(this.parser)return this.parser.parseClose(T)||(this.parser=void 0),!0;switch(T){case"worksheet":{const L=this.map.sheetFormatPr.model||{};this.map.sheetPr.model&&this.map.sheetPr.model.tabColor&&(L.tabColor=this.map.sheetPr.model.tabColor),this.map.sheetPr.model&&this.map.sheetPr.model.outlineProperties&&(L.outlineProperties=this.map.sheetPr.model.outlineProperties);const j={fitToPage:this.map.sheetPr.model&&this.map.sheetPr.model.pageSetup&&this.map.sheetPr.model.pageSetup.fitToPage||!1,margins:this.map.pageMargins.model},U=Object.assign(j,this.map.pageSetup.model,this.map.printOptions.model),W=w(this.map.conditionalFormatting.model,this.map.extLst.model&&this.map.extLst.model["x14:conditionalFormattings"]);return this.model={dimensions:this.map.dimension.model,cols:this.map.cols.model,rows:this.map.sheetData.model,mergeCells:this.map.mergeCells.model,hyperlinks:this.map.hyperlinks.model,dataValidations:this.map.dataValidations.model,properties:L,views:this.map.sheetViews.model,pageSetup:U,headerFooter:this.map.headerFooter.model,background:this.map.picture.model,drawing:this.map.drawing.model,tables:this.map.tableParts.model,conditionalFormattings:W},this.map.autoFilter.model&&(this.model.autoFilter=this.map.autoFilter.model),this.map.sheetProtection.model&&(this.model.sheetProtection=this.map.sheetProtection.model),!1}default:return!0}}reconcile(T,L){const j=(T.relationships||[]).reduce((W,Y)=>{if(W[Y.Id]=Y,Y.Type===o.Comments&&(T.comments=L.comments[Y.Target].comments),Y.Type===o.VmlDrawing&&T.comments&&T.comments.length){const F=L.vmlDrawings[Y.Target].comments;T.comments.forEach((X,P)=>{X.note=Object.assign({},X.note,F[P])})}return W},{});if(L.commentsMap=(T.comments||[]).reduce((W,Y)=>(Y.ref&&(W[Y.ref]=Y),W),{}),L.hyperlinkMap=(T.hyperlinks||[]).reduce((W,Y)=>(Y.rId&&(W[Y.address]=j[Y.rId].Target),W),{}),L.formulae={},T.rows=T.rows&&T.rows.filter(Boolean)||[],T.rows.forEach(W=>{W.cells=W.cells&&W.cells.filter(Boolean)||[]}),this.map.cols.reconcile(T.cols,L),this.map.sheetData.reconcile(T.rows,L),this.map.conditionalFormatting.reconcile(T.conditionalFormattings,L),T.media=[],T.drawing){const W=j[T.drawing.rId].Target.match(/\/drawings\/([a-zA-Z0-9]+)[.][a-zA-Z]{3,4}$/);if(W){const Y=W[1];L.drawings[Y].anchors.forEach(F=>{if(F.medium){const X={type:"image",imageId:F.medium.index,range:F.range,hyperlinks:F.picture.hyperlinks};T.media.push(X)}})}}const U=T.background&&j[T.background.rId];if(U){const W=U.Target.split("/media/")[1],Y=L.mediaIndex&&L.mediaIndex[W];Y!==void 0&&T.media.push({type:"background",imageId:Y})}T.tables=(T.tables||[]).map(W=>{const Y=j[W.rId];return L.tables[Y.Target]}),delete T.relationships,delete T.hyperlinks,delete T.comments}}x.WORKSHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"},r.exports=x},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../../rel-type":31,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":72,"./cf/conditional-formattings-xform":87,"./col-xform":92,"./data-validations-xform":93,"./dimension-xform":94,"./drawing-xform":95,"./ext-lst-xform":96,"./header-footer-xform":97,"./hyperlink-xform":98,"./merge-cell-xform":99,"./merges":100,"./page-margins-xform":103,"./page-setup-xform":105,"./picture-xform":106,"./print-options-xform":107,"./row-breaks-xform":108,"./row-xform":109,"./sheet-format-properties-xform":110,"./sheet-properties-xform":111,"./sheet-protection-xform":112,"./sheet-view-xform":113,"./table-part-xform":114}],116:[function(t,r,l){const i=t("../base-xform");r.exports=class extends i{constructor(s){super(),this.tag=s.tag,this.attr=s.attr}render(s,a){a&&(s.openNode(this.tag),s.closeNode())}parseOpen(s){s.name===this.tag&&(this.model=!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],117:[function(t,r,l){const i=t("../base-xform");r.exports=class extends i{constructor(s){super(),this.tag=s.tag,this.attr=s.attr,this.attrs=s.attrs,this._format=s.format||function(a){try{return Number.isNaN(a.getTime())?"":a.toISOString()}catch{return""}},this._parse=s.parse||function(a){return new Date(a)}}render(s,a){a&&(s.openNode(this.tag),this.attrs&&s.addAttributes(this.attrs),this.attr?s.addAttribute(this.attr,this._format(a)):s.writeText(this._format(a)),s.closeNode())}parseOpen(s){s.name===this.tag&&(this.attr?this.model=this._parse(s.attributes[this.attr]):this.text=[])}parseText(s){this.attr||this.text.push(s)}parseClose(){return this.attr||(this.model=this._parse(this.text.join(""))),!1}}},{"../base-xform":32}],118:[function(t,r,l){const i=t("../base-xform");r.exports=class extends i{constructor(s){super(),this.tag=s.tag,this.attr=s.attr,this.attrs=s.attrs,this.zero=s.zero}render(s,a){(a||this.zero)&&(s.openNode(this.tag),this.attrs&&s.addAttributes(this.attrs),this.attr?s.addAttribute(this.attr,a):s.writeText(a),s.closeNode())}parseOpen(s){return s.name===this.tag&&(this.attr?this.model=parseInt(s.attributes[this.attr],10):this.text=[],!0)}parseText(s){this.attr||this.text.push(s)}parseClose(){return this.attr||(this.model=parseInt(this.text.join("")||0,10)),!1}}},{"../base-xform":32}],119:[function(t,r,l){const i=t("../base-xform");r.exports=class extends i{constructor(s){super(),this.tag=s.tag,this.attr=s.attr,this.attrs=s.attrs}render(s,a){a!==void 0&&(s.openNode(this.tag),this.attrs&&s.addAttributes(this.attrs),this.attr?s.addAttribute(this.attr,a):s.writeText(a),s.closeNode())}parseOpen(s){s.name===this.tag&&(this.attr?this.model=s.attributes[this.attr]:this.text=[])}parseText(s){this.attr||this.text.push(s)}parseClose(){return this.attr||(this.model=this.text.join("")),!1}}},{"../base-xform":32}],120:[function(t,r,l){const i=t("./base-xform"),s=t("../../utils/xml-stream");r.exports=class extends i{constructor(a){super(),this._model=a}render(a){if(!this._xml){const o=new s;(function n(c,d){c.openNode(d.tag,d.$),d.c&&d.c.forEach(u=>{n(c,u)}),d.t&&c.writeText(d.t),c.closeNode()})(o,this._model),this._xml=o.xml}a.writeXml(this._xml)}parseOpen(){return!0}parseText(){}parseClose(a){switch(a){case this._model.tag:return!1;default:return!0}}}},{"../../utils/xml-stream":28,"./base-xform":32}],121:[function(t,r,l){const i=t("./text-xform"),s=t("./rich-text-xform"),a=t("../base-xform");r.exports=class extends a{constructor(){super(),this.map={r:new s,t:new i}}get tag(){return"rPh"}render(o,n){if(o.openNode(this.tag,{sb:n.sb||0,eb:n.eb||0}),n&&n.hasOwnProperty("richText")&&n.richText){const{r:c}=this.map;n.richText.forEach(d=>{c.render(o,d)})}else n&&this.map.t.render(o,n.text);o.closeNode()}parseOpen(o){const{name:n}=o;return this.parser?(this.parser.parseOpen(o),!0):n===this.tag?(this.model={sb:parseInt(o.attributes.sb,10),eb:parseInt(o.attributes.eb,10)},!0):(this.parser=this.map[n],!!this.parser&&(this.parser.parseOpen(o),!0))}parseText(o){this.parser&&this.parser.parseText(o)}parseClose(o){if(this.parser){if(!this.parser.parseClose(o)){switch(o){case"r":{let n=this.model.richText;n||(n=this.model.richText=[]),n.push(this.parser.model);break}case"t":this.model.text=this.parser.model}this.parser=void 0}return!0}switch(o){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"./rich-text-xform":122,"./text-xform":125}],122:[function(t,r,l){const i=t("./text-xform"),s=t("../style/font-xform"),a=t("../base-xform");class o extends a{constructor(c){super(),this.model=c}get tag(){return"r"}get textXform(){return this._textXform||(this._textXform=new i)}get fontXform(){return this._fontXform||(this._fontXform=new s(o.FONT_OPTIONS))}render(c,d){d=d||this.model,c.openNode("r"),d.font&&this.fontXform.render(c,d.font),this.textXform.render(c,d.text),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case"r":return this.model={},!0;case"t":return this.parser=this.textXform,this.parser.parseOpen(c),!0;case"rPr":return this.parser=this.fontXform,this.parser.parseOpen(c),!0;default:return!1}}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){switch(c){case"r":return!1;case"t":return this.model.text=this.parser.model,this.parser=void 0,!0;case"rPr":return this.model.font=this.parser.model,this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(c),!0}}}o.FONT_OPTIONS={tagName:"rPr",fontNameTag:"rFont"},r.exports=o},{"../base-xform":32,"../style/font-xform":131,"./text-xform":125}],123:[function(t,r,l){const i=t("./text-xform"),s=t("./rich-text-xform"),a=t("./phonetic-text-xform"),o=t("../base-xform");r.exports=class extends o{constructor(n){super(),this.model=n,this.map={r:new s,t:new i,rPh:new a}}get tag(){return"si"}render(n,c){n.openNode(this.tag),c&&c.hasOwnProperty("richText")&&c.richText?c.richText.length?c.richText.forEach(d=>{this.map.r.render(n,d)}):this.map.t.render(n,""):c!=null&&this.map.t.render(n,c),n.closeNode()}parseOpen(n){const{name:c}=n;return this.parser?(this.parser.parseOpen(n),!0):c===this.tag?(this.model={},!0):(this.parser=this.map[c],!!this.parser&&(this.parser.parseOpen(n),!0))}parseText(n){this.parser&&this.parser.parseText(n)}parseClose(n){if(this.parser){if(!this.parser.parseClose(n)){switch(n){case"r":{let c=this.model.richText;c||(c=this.model.richText=[]),c.push(this.parser.model);break}case"t":this.model=this.parser.model}this.parser=void 0}return!0}switch(n){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"./phonetic-text-xform":121,"./rich-text-xform":122,"./text-xform":125}],124:[function(t,r,l){const i=t("../../../utils/xml-stream"),s=t("../base-xform"),a=t("./shared-string-xform");r.exports=class extends s{constructor(o){super(),this.model=o||{values:[],count:0},this.hash=Object.create(null),this.rich=Object.create(null)}get sharedStringXform(){return this._sharedStringXform||(this._sharedStringXform=new a)}get values(){return this.model.values}get uniqueCount(){return this.model.values.length}get count(){return this.model.count}getString(o){return this.model.values[o]}add(o){return o.richText?this.addRichText(o):this.addText(o)}addText(o){let n=this.hash[o];return n===void 0&&(n=this.hash[o]=this.model.values.length,this.model.values.push(o)),this.model.count++,n}addRichText(o){const n=this.sharedStringXform.toXml(o);let c=this.rich[n];return c===void 0&&(c=this.rich[n]=this.model.values.length,this.model.values.push(o)),this.model.count++,c}render(o,n){n=n||this._values,o.openXml(i.StdDocAttributes),o.openNode("sst",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:n.count,uniqueCount:n.values.length});const c=this.sharedStringXform;n.values.forEach(d=>{c.render(o,d)}),o.closeNode()}parseOpen(o){if(this.parser)return this.parser.parseOpen(o),!0;switch(o.name){case"sst":return!0;case"si":return this.parser=this.sharedStringXform,this.parser.parseOpen(o),!0;default:throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(o))}}parseText(o){this.parser&&this.parser.parseText(o)}parseClose(o){if(this.parser)return this.parser.parseClose(o)||(this.model.values.push(this.parser.model),this.model.count++,this.parser=void 0),!0;switch(o){case"sst":return!1;default:throw new Error("Unexpected xml node in parseClose: "+o)}}}},{"../../../utils/xml-stream":28,"../base-xform":32,"./shared-string-xform":123}],125:[function(t,r,l){const i=t("../base-xform");r.exports=class extends i{get tag(){return"t"}render(s,a){s.openNode("t"),/^\s|\n|\s$/.test(a)&&s.addAttribute("xml:space","preserve"),s.writeText(a),s.closeNode()}get model(){return this._text.join("").replace(/_x([0-9A-F]{4})_/g,(s,a)=>String.fromCharCode(parseInt(a,16)))}parseOpen(s){switch(s.name){case"t":return this._text=[],!0;default:return!1}}parseText(s){this._text.push(s)}parseClose(){return!1}}},{"../base-xform":32}],126:[function(t,r,l){const i=t("../../../doc/enums"),s=t("../../../utils/utils"),a=t("../base-xform"),o={horizontalValues:["left","center","right","fill","centerContinuous","distributed","justify"].reduce((c,d)=>(c[d]=!0,c),{}),horizontal(c){return this.horizontalValues[c]?c:void 0},verticalValues:["top","middle","bottom","distributed","justify"].reduce((c,d)=>(c[d]=!0,c),{}),vertical(c){return c==="middle"?"center":this.verticalValues[c]?c:void 0},wrapText:c=>!!c||void 0,shrinkToFit:c=>!!c||void 0,textRotation(c){switch(c){case"vertical":return c;default:return(c=s.validInt(c))>=-90&&c<=90?c:void 0}},indent:c=>(c=s.validInt(c),Math.max(0,c)),readingOrder(c){switch(c){case"ltr":return i.ReadingOrder.LeftToRight;case"rtl":return i.ReadingOrder.RightToLeft;default:return}}},n={toXml(c){if(c=o.textRotation(c)){if(c==="vertical")return 255;const d=Math.round(c);if(d>=0&&d<=90)return d;if(d<0&&d>=-90)return 90-d}},toModel(c){const d=s.validInt(c);if(d!==void 0){if(d===255)return"vertical";if(d>=0&&d<=90)return d;if(d>90&&d<=180)return 90-d}}};r.exports=class extends a{get tag(){return"alignment"}render(c,d){c.addRollback(),c.openNode("alignment");let u=!1;function h(p,m){m&&(c.addAttribute(p,m),u=!0)}h("horizontal",o.horizontal(d.horizontal)),h("vertical",o.vertical(d.vertical)),h("wrapText",!!o.wrapText(d.wrapText)&&"1"),h("shrinkToFit",!!o.shrinkToFit(d.shrinkToFit)&&"1"),h("indent",o.indent(d.indent)),h("textRotation",n.toXml(d.textRotation)),h("readingOrder",o.readingOrder(d.readingOrder)),c.closeNode(),u?c.commit():c.rollback()}parseOpen(c){const d={};let u=!1;function h(p,m,f){p&&(d[m]=f,u=!0)}h(c.attributes.horizontal,"horizontal",c.attributes.horizontal),h(c.attributes.vertical,"vertical",c.attributes.vertical==="center"?"middle":c.attributes.vertical),h(c.attributes.wrapText,"wrapText",s.parseBoolean(c.attributes.wrapText)),h(c.attributes.shrinkToFit,"shrinkToFit",s.parseBoolean(c.attributes.shrinkToFit)),h(c.attributes.indent,"indent",parseInt(c.attributes.indent,10)),h(c.attributes.textRotation,"textRotation",n.toModel(c.attributes.textRotation)),h(c.attributes.readingOrder,"readingOrder",c.attributes.readingOrder==="2"?"rtl":"ltr"),this.model=u?d:null}parseText(){}parseClose(){return!1}}},{"../../../doc/enums":7,"../../../utils/utils":27,"../base-xform":32}],127:[function(t,r,l){const i=t("../base-xform"),s=t("../../../utils/utils"),a=t("./color-xform");class o extends i{constructor(c){super(),this.name=c,this.map={color:new a}}get tag(){return this.name}render(c,d,u){const h=d&&d.color||u||this.defaultColor;c.openNode(this.name),d&&d.style&&(c.addAttribute("style",d.style),h&&this.map.color.render(c,h)),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case this.name:{const{style:d}=c.attributes;return this.model=d?{style:d}:void 0,!0}case"color":return this.parser=this.map.color,this.parser.parseOpen(c),!0;default:return!1}}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){return this.parser?(this.parser.parseClose(c)||(this.parser=void 0),!0):(c===this.name&&this.map.color.model&&(this.model||(this.model={}),this.model.color=this.map.color.model),!1)}validStyle(c){return o.validStyleValues[c]}}o.validStyleValues=["thin","dashed","dotted","dashDot","hair","dashDotDot","slantDashDot","mediumDashed","mediumDashDotDot","mediumDashDot","medium","double","thick"].reduce((n,c)=>(n[c]=!0,n),{}),r.exports=class extends i{constructor(){super(),this.map={top:new o("top"),left:new o("left"),bottom:new o("bottom"),right:new o("right"),diagonal:new o("diagonal")}}render(n,c){const{color:d}=c;function u(h,p){h&&!h.color&&c.color&&(h={...h,color:c.color}),p.render(n,h,d)}n.openNode("border"),c.diagonal&&c.diagonal.style&&(c.diagonal.up&&n.addAttribute("diagonalUp","1"),c.diagonal.down&&n.addAttribute("diagonalDown","1")),u(c.left,this.map.left),u(c.right,this.map.right),u(c.top,this.map.top),u(c.bottom,this.map.bottom),u(c.diagonal,this.map.diagonal),n.closeNode()}parseOpen(n){if(this.parser)return this.parser.parseOpen(n),!0;switch(n.name){case"border":return this.reset(),this.diagonalUp=s.parseBoolean(n.attributes.diagonalUp),this.diagonalDown=s.parseBoolean(n.attributes.diagonalDown),!0;default:return this.parser=this.map[n.name],!!this.parser&&(this.parser.parseOpen(n),!0)}}parseText(n){this.parser&&this.parser.parseText(n)}parseClose(n){if(this.parser)return this.parser.parseClose(n)||(this.parser=void 0),!0;if(n==="border"){const c=this.model={},d=function(u,h,p){h&&(p&&Object.assign(h,p),c[u]=h)};d("left",this.map.left.model),d("right",this.map.right.model),d("top",this.map.top.model),d("bottom",this.map.bottom.model),d("diagonal",this.map.diagonal.model,{up:this.diagonalUp,down:this.diagonalDown})}return!1}}},{"../../../utils/utils":27,"../base-xform":32,"./color-xform":128}],128:[function(t,r,l){const i=t("../base-xform");r.exports=class extends i{constructor(s){super(),this.name=s||"color"}get tag(){return this.name}render(s,a){return!!a&&(s.openNode(this.name),a.argb?s.addAttribute("rgb",a.argb):a.theme!==void 0?(s.addAttribute("theme",a.theme),a.tint!==void 0&&s.addAttribute("tint",a.tint)):a.indexed!==void 0?s.addAttribute("indexed",a.indexed):s.addAttribute("auto","1"),s.closeNode(),!0)}parseOpen(s){return s.name===this.name&&(s.attributes.rgb?this.model={argb:s.attributes.rgb}:s.attributes.theme?(this.model={theme:parseInt(s.attributes.theme,10)},s.attributes.tint&&(this.model.tint=parseFloat(s.attributes.tint))):s.attributes.indexed?this.model={indexed:parseInt(s.attributes.indexed,10)}:this.model=void 0,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],129:[function(t,r,l){const i=t("../base-xform"),s=t("./alignment-xform"),a=t("./border-xform"),o=t("./fill-xform"),n=t("./font-xform"),c=t("./numfmt-xform"),d=t("./protection-xform");r.exports=class extends i{constructor(){super(),this.map={alignment:new s,border:new a,fill:new o,font:new n,numFmt:new c,protection:new d}}get tag(){return"dxf"}render(u,h){if(u.openNode(this.tag),h.font&&this.map.font.render(u,h.font),h.numFmt&&h.numFmtId){const p={id:h.numFmtId,formatCode:h.numFmt};this.map.numFmt.render(u,p)}h.fill&&this.map.fill.render(u,h.fill),h.alignment&&this.map.alignment.render(u,h.alignment),h.border&&this.map.border.render(u,h.border),h.protection&&this.map.protection.render(u,h.protection),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case this.tag:return this.reset(),!0;default:return this.parser=this.map[u.name],this.parser&&this.parser.parseOpen(u),!0}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){return this.parser?(this.parser.parseClose(u)||(this.parser=void 0),!0):u!==this.tag||(this.model={alignment:this.map.alignment.model,border:this.map.border.model,fill:this.map.fill.model,font:this.map.font.model,numFmt:this.map.numFmt.model,protection:this.map.protection.model},!1)}}},{"../base-xform":32,"./alignment-xform":126,"./border-xform":127,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./protection-xform":133}],130:[function(t,r,l){const i=t("../base-xform"),s=t("./color-xform");class a extends i{constructor(){super(),this.map={color:new s}}get tag(){return"stop"}render(u,h){u.openNode("stop"),u.addAttribute("position",h.position),this.map.color.render(u,h.color),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"stop":return this.model={position:parseFloat(u.attributes.position)},!0;case"color":return this.parser=this.map.color,this.parser.parseOpen(u),!0;default:return!1}}parseText(){}parseClose(u){return!!this.parser&&(this.parser.parseClose(u)||(this.model.color=this.parser.model,this.parser=void 0),!0)}}class o extends i{constructor(){super(),this.map={fgColor:new s("fgColor"),bgColor:new s("bgColor")}}get name(){return"pattern"}get tag(){return"patternFill"}render(u,h){u.openNode("patternFill"),u.addAttribute("patternType",h.pattern),h.fgColor&&this.map.fgColor.render(u,h.fgColor),h.bgColor&&this.map.bgColor.render(u,h.bgColor),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"patternFill":return this.model={type:"pattern",pattern:u.attributes.patternType},!0;default:return this.parser=this.map[u.name],!!this.parser&&(this.parser.parseOpen(u),!0)}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){return!!this.parser&&(this.parser.parseClose(u)||(this.parser.model&&(this.model[u]=this.parser.model),this.parser=void 0),!0)}}class n extends i{constructor(){super(),this.map={stop:new a}}get name(){return"gradient"}get tag(){return"gradientFill"}render(u,h){switch(u.openNode("gradientFill"),h.gradient){case"angle":u.addAttribute("degree",h.degree);break;case"path":u.addAttribute("type","path"),h.center.left&&(u.addAttribute("left",h.center.left),h.center.right===void 0&&u.addAttribute("right",h.center.left)),h.center.right&&u.addAttribute("right",h.center.right),h.center.top&&(u.addAttribute("top",h.center.top),h.center.bottom===void 0&&u.addAttribute("bottom",h.center.top)),h.center.bottom&&u.addAttribute("bottom",h.center.bottom)}const p=this.map.stop;h.stops.forEach(m=>{p.render(u,m)}),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"gradientFill":{const h=this.model={stops:[]};return u.attributes.degree?(h.gradient="angle",h.degree=parseInt(u.attributes.degree,10)):u.attributes.type==="path"&&(h.gradient="path",h.center={left:u.attributes.left?parseFloat(u.attributes.left):0,top:u.attributes.top?parseFloat(u.attributes.top):0},u.attributes.right!==u.attributes.left&&(h.center.right=u.attributes.right?parseFloat(u.attributes.right):0),u.attributes.bottom!==u.attributes.top&&(h.center.bottom=u.attributes.bottom?parseFloat(u.attributes.bottom):0)),!0}case"stop":return this.parser=this.map.stop,this.parser.parseOpen(u),!0;default:return!1}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){return!!this.parser&&(this.parser.parseClose(u)||(this.model.stops.push(this.parser.model),this.parser=void 0),!0)}}class c extends i{constructor(){super(),this.map={patternFill:new o,gradientFill:new n}}get tag(){return"fill"}render(u,h){switch(u.addRollback(),u.openNode("fill"),h.type){case"pattern":this.map.patternFill.render(u,h);break;case"gradient":this.map.gradientFill.render(u,h);break;default:return void u.rollback()}u.closeNode(),u.commit()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"fill":return this.model={},!0;default:return this.parser=this.map[u.name],!!this.parser&&(this.parser.parseOpen(u),!0)}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){return!!this.parser&&(this.parser.parseClose(u)||(this.model=this.parser.model,this.model.type=this.parser.name,this.parser=void 0),!0)}validStyle(u){return c.validPatternValues[u]}}c.validPatternValues=["none","solid","darkVertical","darkGray","mediumGray","lightGray","gray125","gray0625","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","lightGrid"].reduce((d,u)=>(d[u]=!0,d),{}),c.StopXform=a,c.PatternFillXform=o,c.GradientFillXform=n,r.exports=c},{"../base-xform":32,"./color-xform":128}],131:[function(t,r,l){const i=t("./color-xform"),s=t("../simple/boolean-xform"),a=t("../simple/integer-xform"),o=t("../simple/string-xform"),n=t("./underline-xform"),c=t("../../../utils/under-dash"),d=t("../base-xform");class u extends d{constructor(p){super(),this.options=p||u.OPTIONS,this.map={b:{prop:"bold",xform:new s({tag:"b",attr:"val"})},i:{prop:"italic",xform:new s({tag:"i",attr:"val"})},u:{prop:"underline",xform:new n},charset:{prop:"charset",xform:new a({tag:"charset",attr:"val"})},color:{prop:"color",xform:new i},condense:{prop:"condense",xform:new s({tag:"condense",attr:"val"})},extend:{prop:"extend",xform:new s({tag:"extend",attr:"val"})},family:{prop:"family",xform:new a({tag:"family",attr:"val"})},outline:{prop:"outline",xform:new s({tag:"outline",attr:"val"})},vertAlign:{prop:"vertAlign",xform:new o({tag:"vertAlign",attr:"val"})},scheme:{prop:"scheme",xform:new o({tag:"scheme",attr:"val"})},shadow:{prop:"shadow",xform:new s({tag:"shadow",attr:"val"})},strike:{prop:"strike",xform:new s({tag:"strike",attr:"val"})},sz:{prop:"size",xform:new a({tag:"sz",attr:"val"})}},this.map[this.options.fontNameTag]={prop:"name",xform:new o({tag:this.options.fontNameTag,attr:"val"})}}get tag(){return this.options.tagName}render(p,m){const{map:f}=this;p.openNode(this.options.tagName),c.each(this.map,(b,y)=>{f[y].xform.render(p,m[b.prop])}),p.closeNode()}parseOpen(p){if(this.parser)return this.parser.parseOpen(p),!0;if(this.map[p.name])return this.parser=this.map[p.name].xform,this.parser.parseOpen(p);switch(p.name){case this.options.tagName:return this.model={},!0;default:return!1}}parseText(p){this.parser&&this.parser.parseText(p)}parseClose(p){if(this.parser&&!this.parser.parseClose(p)){const m=this.map[p];return this.parser.model&&(this.model[m.prop]=this.parser.model),this.parser=void 0,!0}switch(p){case this.options.tagName:return!1;default:return!0}}}u.OPTIONS={tagName:"font",fontNameTag:"name"},r.exports=u},{"../../../utils/under-dash":26,"../base-xform":32,"../simple/boolean-xform":116,"../simple/integer-xform":118,"../simple/string-xform":119,"./color-xform":128,"./underline-xform":136}],132:[function(t,r,l){const i=t("../../../utils/under-dash"),s=t("../../defaultnumformats"),a=t("../base-xform"),o=function(){const c={};return i.each(s,(d,u)=>{d.f&&(c[d.f]=parseInt(u,10))}),c}();class n extends a{constructor(d,u){super(),this.id=d,this.formatCode=u}get tag(){return"numFmt"}render(d,u){d.leafNode("numFmt",{numFmtId:u.id,formatCode:u.formatCode})}parseOpen(d){switch(d.name){case"numFmt":return this.model={id:parseInt(d.attributes.numFmtId,10),formatCode:d.attributes.formatCode.replace(/[\\](.)/g,"$1")},!0;default:return!1}}parseText(){}parseClose(){return!1}}n.getDefaultFmtId=function(c){return o[c]},n.getDefaultFmtCode=function(c){return s[c]&&s[c].f},r.exports=n},{"../../../utils/under-dash":26,"../../defaultnumformats":30,"../base-xform":32}],133:[function(t,r,l){const i=t("../base-xform"),s={boolean:(a,o)=>a===void 0?o:a};r.exports=class extends i{get tag(){return"protection"}render(a,o){a.addRollback(),a.openNode("protection");let n=!1;function c(d,u){u!==void 0&&(a.addAttribute(d,u),n=!0)}c("locked",s.boolean(o.locked,!0)?void 0:"0"),c("hidden",s.boolean(o.hidden,!1)?"1":void 0),a.closeNode(),n?a.commit():a.rollback()}parseOpen(a){const o={locked:a.attributes.locked!=="0",hidden:a.attributes.hidden==="1"},n=!o.locked||o.hidden;this.model=n?o:null}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],134:[function(t,r,l){const i=t("../base-xform"),s=t("./alignment-xform"),a=t("./protection-xform");r.exports=class extends i{constructor(o){super(),this.xfId=!(!o||!o.xfId),this.map={alignment:new s,protection:new a}}get tag(){return"xf"}render(o,n){o.openNode("xf",{numFmtId:n.numFmtId||0,fontId:n.fontId||0,fillId:n.fillId||0,borderId:n.borderId||0}),this.xfId&&o.addAttribute("xfId",n.xfId||0),n.numFmtId&&o.addAttribute("applyNumberFormat","1"),n.fontId&&o.addAttribute("applyFont","1"),n.fillId&&o.addAttribute("applyFill","1"),n.borderId&&o.addAttribute("applyBorder","1"),n.alignment&&o.addAttribute("applyAlignment","1"),n.protection&&o.addAttribute("applyProtection","1"),n.alignment&&this.map.alignment.render(o,n.alignment),n.protection&&this.map.protection.render(o,n.protection),o.closeNode()}parseOpen(o){if(this.parser)return this.parser.parseOpen(o),!0;switch(o.name){case"xf":return this.model={numFmtId:parseInt(o.attributes.numFmtId,10),fontId:parseInt(o.attributes.fontId,10),fillId:parseInt(o.attributes.fillId,10),borderId:parseInt(o.attributes.borderId,10)},this.xfId&&(this.model.xfId=parseInt(o.attributes.xfId,10)),!0;case"alignment":return this.parser=this.map.alignment,this.parser.parseOpen(o),!0;case"protection":return this.parser=this.map.protection,this.parser.parseOpen(o),!0;default:return!1}}parseText(o){this.parser&&this.parser.parseText(o)}parseClose(o){return this.parser?(this.parser.parseClose(o)||(this.map.protection===this.parser?this.model.protection=this.parser.model:this.model.alignment=this.parser.model,this.parser=void 0),!0):o!=="xf"}}},{"../base-xform":32,"./alignment-xform":126,"./protection-xform":133}],135:[function(t,r,l){const i=t("../../../doc/enums"),s=t("../../../utils/xml-stream"),a=t("../base-xform"),o=t("../static-xform"),n=t("../list-xform"),c=t("./font-xform"),d=t("./fill-xform"),u=t("./border-xform"),h=t("./numfmt-xform"),p=t("./style-xform"),m=t("./dxf-xform");class f extends a{constructor(y){super(),this.map={numFmts:new n({tag:"numFmts",count:!0,childXform:new h}),fonts:new n({tag:"fonts",count:!0,childXform:new c,$:{"x14ac:knownFonts":1}}),fills:new n({tag:"fills",count:!0,childXform:new d}),borders:new n({tag:"borders",count:!0,childXform:new u}),cellStyleXfs:new n({tag:"cellStyleXfs",count:!0,childXform:new p}),cellXfs:new n({tag:"cellXfs",count:!0,childXform:new p({xfId:!0})}),dxfs:new n({tag:"dxfs",always:!0,count:!0,childXform:new m}),numFmt:new h,font:new c,fill:new d,border:new u,style:new p({xfId:!0}),cellStyles:f.STATIC_XFORMS.cellStyles,tableStyles:f.STATIC_XFORMS.tableStyles,extLst:f.STATIC_XFORMS.extLst},y&&this.init()}initIndex(){this.index={style:{},numFmt:{},numFmtNextId:164,font:{},border:{},fill:{}}}init(){this.model={styles:[],numFmts:[],fonts:[],borders:[],fills:[],dxfs:[]},this.initIndex(),this._addBorder({}),this._addStyle({numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}),this._addFill({type:"pattern",pattern:"none"}),this._addFill({type:"pattern",pattern:"gray125"}),this.weakMap=new WeakMap}render(y,_){_=_||this.model,y.openXml(s.StdDocAttributes),y.openNode("styleSheet",f.STYLESHEET_ATTRIBUTES),this.index?(_.numFmts&&_.numFmts.length&&(y.openNode("numFmts",{count:_.numFmts.length}),_.numFmts.forEach(E=>{y.writeXml(E)}),y.closeNode()),_.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),y.openNode("fonts",{count:_.fonts.length,"x14ac:knownFonts":1}),_.fonts.forEach(E=>{y.writeXml(E)}),y.closeNode(),y.openNode("fills",{count:_.fills.length}),_.fills.forEach(E=>{y.writeXml(E)}),y.closeNode(),y.openNode("borders",{count:_.borders.length}),_.borders.forEach(E=>{y.writeXml(E)}),y.closeNode(),this.map.cellStyleXfs.render(y,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),y.openNode("cellXfs",{count:_.styles.length}),_.styles.forEach(E=>{y.writeXml(E)}),y.closeNode()):(this.map.numFmts.render(y,_.numFmts),this.map.fonts.render(y,_.fonts),this.map.fills.render(y,_.fills),this.map.borders.render(y,_.borders),this.map.cellStyleXfs.render(y,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),this.map.cellXfs.render(y,_.styles)),f.STATIC_XFORMS.cellStyles.render(y),this.map.dxfs.render(y,_.dxfs),f.STATIC_XFORMS.tableStyles.render(y),f.STATIC_XFORMS.extLst.render(y),y.closeNode()}parseOpen(y){if(this.parser)return this.parser.parseOpen(y),!0;switch(y.name){case"styleSheet":return this.initIndex(),!0;default:return this.parser=this.map[y.name],this.parser&&this.parser.parseOpen(y),!0}}parseText(y){this.parser&&this.parser.parseText(y)}parseClose(y){if(this.parser)return this.parser.parseClose(y)||(this.parser=void 0),!0;switch(y){case"styleSheet":{this.model={};const _=(E,M)=>{M.model&&M.model.length&&(this.model[E]=M.model)};if(_("numFmts",this.map.numFmts),_("fonts",this.map.fonts),_("fills",this.map.fills),_("borders",this.map.borders),_("styles",this.map.cellXfs),_("dxfs",this.map.dxfs),this.index={model:[],numFmt:[]},this.model.numFmts){const E=this.index.numFmt;this.model.numFmts.forEach(M=>{E[M.id]=M.formatCode})}return!1}default:return!0}}addStyleModel(y,_){if(!y)return 0;if(this.model.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),this.weakMap&&this.weakMap.has(y))return this.weakMap.get(y);const E={};if(_=_||i.ValueType.Number,y.numFmt)E.numFmtId=this._addNumFmtStr(y.numFmt);else switch(_){case i.ValueType.Number:E.numFmtId=this._addNumFmtStr("General");break;case i.ValueType.Date:E.numFmtId=this._addNumFmtStr("mm-dd-yy")}y.font&&(E.fontId=this._addFont(y.font)),y.border&&(E.borderId=this._addBorder(y.border)),y.fill&&(E.fillId=this._addFill(y.fill)),y.alignment&&(E.alignment=y.alignment),y.protection&&(E.protection=y.protection);const M=this._addStyle(E);return this.weakMap&&this.weakMap.set(y,M),M}getStyleModel(y){const _=this.model.styles[y];if(!_)return null;let E=this.index.model[y];if(E)return E;if(E=this.index.model[y]={},_.numFmtId){const D=this.index.numFmt[_.numFmtId]||h.getDefaultFmtCode(_.numFmtId);D&&(E.numFmt=D)}function M(D,z,O){if(O||O===0){const N=z[O];N&&(E[D]=N)}}return M("font",this.model.fonts,_.fontId),M("border",this.model.borders,_.borderId),M("fill",this.model.fills,_.fillId),_.alignment&&(E.alignment=_.alignment),_.protection&&(E.protection=_.protection),E}addDxfStyle(y){return y.numFmt&&(y.numFmtId=this._addNumFmtStr(y.numFmt)),this.model.dxfs.push(y),this.model.dxfs.length-1}getDxfStyle(y){return this.model.dxfs[y]}_addStyle(y){const _=this.map.style.toXml(y);let E=this.index.style[_];return E===void 0&&(E=this.index.style[_]=this.model.styles.length,this.model.styles.push(_)),E}_addNumFmtStr(y){let _=h.getDefaultFmtId(y);if(_!==void 0||(_=this.index.numFmt[y],_!==void 0))return _;_=this.index.numFmt[y]=164+this.model.numFmts.length;const E=this.map.numFmt.toXml({id:_,formatCode:y});return this.model.numFmts.push(E),_}_addFont(y){const _=this.map.font.toXml(y);let E=this.index.font[_];return E===void 0&&(E=this.index.font[_]=this.model.fonts.length,this.model.fonts.push(_)),E}_addBorder(y){const _=this.map.border.toXml(y);let E=this.index.border[_];return E===void 0&&(E=this.index.border[_]=this.model.borders.length,this.model.borders.push(_)),E}_addFill(y){const _=this.map.fill.toXml(y);let E=this.index.fill[_];return E===void 0&&(E=this.index.fill[_]=this.model.fills.length,this.model.fills.push(_)),E}}f.STYLESHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac x16r2","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main"},f.STATIC_XFORMS={cellStyles:new o({tag:"cellStyles",$:{count:1},c:[{tag:"cellStyle",$:{name:"Normal",xfId:0,builtinId:0}}]}),dxfs:new o({tag:"dxfs",$:{count:0}}),tableStyles:new o({tag:"tableStyles",$:{count:0,defaultTableStyle:"TableStyleMedium2",defaultPivotStyle:"PivotStyleLight16"}}),extLst:new o({tag:"extLst",c:[{tag:"ext",$:{uri:"{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"},c:[{tag:"x14:slicerStyles",$:{defaultSlicerStyle:"SlicerStyleLight1"}}]},{tag:"ext",$:{uri:"{9260A510-F301-46a8-8635-F512D64BE5F5}","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},c:[{tag:"x15:timelineStyles",$:{defaultTimelineStyle:"TimeSlicerStyleLight1"}}]}]})},f.Mock=class extends f{constructor(){super(),this.model={styles:[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}],numFmts:[],fonts:[{size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}],borders:[{}],fills:[{type:"pattern",pattern:"none"},{type:"pattern",pattern:"gray125"}]}}parseStream(b){return b.autodrain(),Promise.resolve()}addStyleModel(b,y){switch(y){case i.ValueType.Date:return this.dateStyleId;default:return 0}}get dateStyleId(){if(!this._dateStyleId){const b={numFmtId:h.getDefaultFmtId("mm-dd-yy")};this._dateStyleId=this.model.styles.length,this.model.styles.push(b)}return this._dateStyleId}getStyleModel(){return{}}},r.exports=f},{"../../../doc/enums":7,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./border-xform":127,"./dxf-xform":129,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./style-xform":134}],136:[function(t,r,l){const i=t("../base-xform");class s extends i{constructor(o){super(),this.model=o}get tag(){return"u"}render(o,n){if((n=n||this.model)===!0)o.leafNode("u");else{const c=s.Attributes[n];c&&o.leafNode("u",c)}}parseOpen(o){o.name==="u"&&(this.model=o.attributes.val||!0)}parseText(){}parseClose(){return!1}}s.Attributes={single:{},double:{val:"double"},singleAccounting:{val:"singleAccounting"},doubleAccounting:{val:"doubleAccounting"}},r.exports=s},{"../base-xform":32}],137:[function(t,r,l){const i=t("../base-xform"),s=t("./filter-column-xform");r.exports=class extends i{constructor(){super(),this.map={filterColumn:new s}}get tag(){return"autoFilter"}prepare(a){a.columns.forEach((o,n)=>{this.map.filterColumn.prepare(o,{index:n})})}render(a,o){return a.openNode(this.tag,{ref:o.autoFilterRef}),o.columns.forEach(n=>{this.map.filterColumn.render(a,n)}),a.closeNode(),!0}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case this.tag:return this.model={autoFilterRef:a.attributes.ref,columns:[]},!0;default:if(this.parser=this.map[a.name],this.parser)return this.parseOpen(a),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(a))}}parseText(a){this.parser&&this.parser.parseText(a)}parseClose(a){if(this.parser)return this.parser.parseClose(a)||(this.model.columns.push(this.parser.model),this.parser=void 0),!0;switch(a){case this.tag:return!1;default:throw new Error("Unexpected xml node in parseClose: "+a)}}}},{"../base-xform":32,"./filter-column-xform":139}],138:[function(t,r,l){const i=t("../base-xform");r.exports=class extends i{get tag(){return"customFilter"}render(s,a){s.leafNode(this.tag,{val:a.val,operator:a.operator})}parseOpen(s){return s.name===this.tag&&(this.model={val:s.attributes.val,operator:s.attributes.operator},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],139:[function(t,r,l){const i=t("../base-xform"),s=t("../list-xform"),a=t("./custom-filter-xform"),o=t("./filter-xform");r.exports=class extends i{constructor(){super(),this.map={customFilters:new s({tag:"customFilters",count:!1,empty:!0,childXform:new a}),filters:new s({tag:"filters",count:!1,empty:!0,childXform:new o})}}get tag(){return"filterColumn"}prepare(n,c){n.colId=c.index.toString()}render(n,c){return c.customFilters?(n.openNode(this.tag,{colId:c.colId,hiddenButton:c.filterButton?"0":"1"}),this.map.customFilters.render(n,c.customFilters),n.closeNode(),!0):(n.leafNode(this.tag,{colId:c.colId,hiddenButton:c.filterButton?"0":"1"}),!0)}parseOpen(n){if(this.parser)return this.parser.parseOpen(n),!0;const{attributes:c}=n;switch(n.name){case this.tag:return this.model={filterButton:c.hiddenButton==="0"},!0;default:if(this.parser=this.map[n.name],this.parser)return this.parseOpen(n),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(n))}}parseText(){}parseClose(n){if(this.parser)return this.parser.parseClose(n)||(this.parser=void 0),!0;switch(n){case this.tag:return this.model.customFilters=this.map.customFilters.model,!1;default:return!0}}}},{"../base-xform":32,"../list-xform":71,"./custom-filter-xform":138,"./filter-xform":140}],140:[function(t,r,l){const i=t("../base-xform");r.exports=class extends i{get tag(){return"filter"}render(s,a){s.leafNode(this.tag,{val:a.val})}parseOpen(s){return s.name===this.tag&&(this.model={val:s.attributes.val},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],141:[function(t,r,l){const i=t("../base-xform");r.exports=class extends i{get tag(){return"tableColumn"}prepare(s,a){s.id=a.index+1}render(s,a){return s.leafNode(this.tag,{id:a.id.toString(),name:a.name,totalsRowLabel:a.totalsRowLabel,totalsRowFunction:a.totalsRowFunction,dxfId:a.dxfId}),!0}parseOpen(s){if(s.name===this.tag){const{attributes:a}=s;return this.model={name:a.name,totalsRowLabel:a.totalsRowLabel,totalsRowFunction:a.totalsRowFunction,dxfId:a.dxfId},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],142:[function(t,r,l){const i=t("../base-xform");r.exports=class extends i{get tag(){return"tableStyleInfo"}render(s,a){return s.leafNode(this.tag,{name:a.theme?a.theme:void 0,showFirstColumn:a.showFirstColumn?"1":"0",showLastColumn:a.showLastColumn?"1":"0",showRowStripes:a.showRowStripes?"1":"0",showColumnStripes:a.showColumnStripes?"1":"0"}),!0}parseOpen(s){if(s.name===this.tag){const{attributes:a}=s;return this.model={theme:a.name?a.name:null,showFirstColumn:a.showFirstColumn==="1",showLastColumn:a.showLastColumn==="1",showRowStripes:a.showRowStripes==="1",showColumnStripes:a.showColumnStripes==="1"},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],143:[function(t,r,l){const i=t("../../../utils/xml-stream"),s=t("../base-xform"),a=t("../list-xform"),o=t("./auto-filter-xform"),n=t("./table-column-xform"),c=t("./table-style-info-xform");class d extends s{constructor(){super(),this.map={autoFilter:new o,tableColumns:new a({tag:"tableColumns",count:!0,empty:!0,childXform:new n}),tableStyleInfo:new c}}prepare(h,p){this.map.autoFilter.prepare(h),this.map.tableColumns.prepare(h.columns,p)}get tag(){return"table"}render(h,p){h.openXml(i.StdDocAttributes),h.openNode(this.tag,{...d.TABLE_ATTRIBUTES,id:p.id,name:p.name,displayName:p.displayName||p.name,ref:p.tableRef,totalsRowCount:p.totalsRow?"1":void 0,totalsRowShown:p.totalsRow?void 0:"1",headerRowCount:p.headerRow?"1":"0"}),this.map.autoFilter.render(h,p),this.map.tableColumns.render(h,p.columns),this.map.tableStyleInfo.render(h,p.style),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;const{name:p,attributes:m}=h;switch(p){case this.tag:this.reset(),this.model={name:m.name,displayName:m.displayName||m.name,tableRef:m.ref,totalsRow:m.totalsRowCount==="1",headerRow:m.headerRowCount==="1"};break;default:this.parser=this.map[h.name],this.parser&&this.parser.parseOpen(h)}return!0}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){if(this.parser)return this.parser.parseClose(h)||(this.parser=void 0),!0;switch(h){case this.tag:return this.model.columns=this.map.tableColumns.model,this.map.autoFilter.model&&(this.model.autoFilterRef=this.map.autoFilter.model.autoFilterRef,this.map.autoFilter.model.columns.forEach((p,m)=>{this.model.columns[m].filterButton=p.filterButton})),this.model.style=this.map.tableStyleInfo.model,!1;default:return!0}}reconcile(h,p){h.columns.forEach(m=>{m.dxfId!==void 0&&(m.style=p.styles.getDxfStyle(m.dxfId))})}}d.TABLE_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"xr xr3","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision","xmlns:xr3":"http://schemas.microsoft.com/office/spreadsheetml/2016/revision3"},r.exports=d},{"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":137,"./table-column-xform":141,"./table-style-info-xform":142}],144:[function(t,r,l){(function(i,s){(function(){const a=t("fs"),o=t("jszip"),{PassThrough:n}=t("readable-stream"),c=t("../utils/zip-stream"),d=t("../utils/stream-buf"),u=t("../utils/utils"),h=t("../utils/xml-stream"),{bufferToString:p}=t("../utils/browser-buffer-decode"),m=t("./xform/style/styles-xform"),f=t("./xform/core/core-xform"),b=t("./xform/strings/shared-strings-xform"),y=t("./xform/core/relationships-xform"),_=t("./xform/core/content-types-xform"),E=t("./xform/core/app-xform"),M=t("./xform/book/workbook-xform"),D=t("./xform/sheet/worksheet-xform"),z=t("./xform/drawing/drawing-xform"),O=t("./xform/table/table-xform"),N=t("./xform/comment/comments-xform"),B=t("./xform/comment/vml-notes-xform"),H=t("./xml/theme1");class ${constructor(R){this.workbook=R}async readFile(R,k){if(!await u.fs.exists(R))throw new Error("File not found: "+R);const v=a.createReadStream(R);try{const w=await this.read(v,k);return v.close(),w}catch(w){throw v.close(),w}}parseRels(R){return new y().parseStream(R)}parseWorkbook(R){return new M().parseStream(R)}parseSharedStrings(R){return new b().parseStream(R)}reconcile(R,k){const v=new M,w=new D(k),x=new z,S=new O;v.reconcile(R);const T={media:R.media,mediaIndex:R.mediaIndex};Object.keys(R.drawings).forEach(U=>{const W=R.drawings[U],Y=R.drawingRels[U];Y&&(T.rels=Y.reduce((F,X)=>(F[X.Id]=X,F),{}),(W.anchors||[]).forEach(F=>{const X=F.picture&&F.picture.hyperlinks;X&&T.rels[X.rId]&&(X.hyperlink=T.rels[X.rId].Target,delete X.rId)}),x.reconcile(W,T))});const L={styles:R.styles};Object.values(R.tables).forEach(U=>{S.reconcile(U,L)});const j={styles:R.styles,sharedStrings:R.sharedStrings,media:R.media,mediaIndex:R.mediaIndex,date1904:R.properties&&R.properties.date1904,drawings:R.drawings,comments:R.comments,tables:R.tables,vmlDrawings:R.vmlDrawings};R.worksheets.forEach(U=>{U.relationships=R.worksheetRels[U.sheetNo],w.reconcile(U,j)}),delete R.worksheetHash,delete R.worksheetRels,delete R.globalRels,delete R.sharedStrings,delete R.workbookRels,delete R.sheetDefs,delete R.styles,delete R.mediaIndex,delete R.drawings,delete R.drawingRels,delete R.vmlDrawings}async _processWorksheetEntry(R,k,v,w,x){const S=new D(w),T=await S.parseStream(R);T.sheetNo=v,k.worksheetHash[x]=T,k.worksheets.push(T)}async _processCommentEntry(R,k,v){const w=new N,x=await w.parseStream(R);k.comments[`../${v}.xml`]=x}async _processTableEntry(R,k,v){const w=new O,x=await w.parseStream(R);k.tables[`../tables/${v}.xml`]=x}async _processWorksheetRelsEntry(R,k,v){const w=new y,x=await w.parseStream(R);k.worksheetRels[v]=x}async _processMediaEntry(R,k,v){const w=v.lastIndexOf(".");if(w>=1){const x=v.substr(w+1),S=v.substr(0,w);await new Promise((T,L)=>{const j=new d;j.on("finish",()=>{k.mediaIndex[v]=k.media.length,k.mediaIndex[S]=k.media.length;const U={type:"image",name:S,extension:x,buffer:j.toBuffer()};k.media.push(U),T()}),R.on("error",U=>{L(U)}),R.pipe(j)})}}async _processDrawingEntry(R,k,v){const w=new z,x=await w.parseStream(R);k.drawings[v]=x}async _processDrawingRelsEntry(R,k,v){const w=new y,x=await w.parseStream(R);k.drawingRels[v]=x}async _processVmlDrawingEntry(R,k,v){const w=new B,x=await w.parseStream(R);k.vmlDrawings[`../drawings/${v}.vml`]=x}async _processThemeEntry(R,k,v){await new Promise((w,x)=>{const S=new d;R.on("error",x),S.on("error",x),S.on("finish",()=>{k.themes[v]=S.read().toString(),w()}),R.pipe(S)})}createInputStream(){throw new Error("`XLSX#createInputStream` is deprecated. You should use `XLSX#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}async read(R,k){!R[Symbol.asyncIterator]&&R.pipe&&(R=R.pipe(new n));const v=[];for await(const w of R)v.push(w);return this.load(s.concat(v),k)}async load(R,k){let v;v=k&&k.base64?s.from(R.toString(),"base64"):R;const w={worksheets:[],worksheetHash:{},worksheetRels:[],themes:{},media:[],mediaIndex:{},drawings:{},drawingRels:{},comments:{},tables:{},vmlDrawings:{}},x=await o.loadAsync(v);for(const S of Object.values(x.files))if(!S.dir){let T,L=S.name;if(L[0]==="/"&&(L=L.substr(1)),L.match(/xl\/media\//)||L.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/))T=new n,T.write(await S.async("nodebuffer"));else{let j;T=new n({writableObjectMode:!0,readableObjectMode:!0}),j=i.browser?p(await S.async("nodebuffer")):await S.async("string");const U=16384;for(let W=0;W<j.length;W+=U)T.write(j.substring(W,W+U))}switch(T.end(),L){case"_rels/.rels":w.globalRels=await this.parseRels(T);break;case"xl/workbook.xml":{const j=await this.parseWorkbook(T);w.sheets=j.sheets,w.definedNames=j.definedNames,w.views=j.views,w.properties=j.properties,w.calcProperties=j.calcProperties;break}case"xl/_rels/workbook.xml.rels":w.workbookRels=await this.parseRels(T);break;case"xl/sharedStrings.xml":w.sharedStrings=new b,await w.sharedStrings.parseStream(T);break;case"xl/styles.xml":w.styles=new m,await w.styles.parseStream(T);break;case"docProps/app.xml":{const j=new E,U=await j.parseStream(T);w.company=U.company,w.manager=U.manager;break}case"docProps/core.xml":{const j=new f,U=await j.parseStream(T);Object.assign(w,U);break}default:{let j=L.match(/xl\/worksheets\/sheet(\d+)[.]xml/);if(j){await this._processWorksheetEntry(T,w,j[1],k,L);break}if(j=L.match(/xl\/worksheets\/_rels\/sheet(\d+)[.]xml.rels/),j){await this._processWorksheetRelsEntry(T,w,j[1]);break}if(j=L.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/),j){await this._processThemeEntry(T,w,j[1]);break}if(j=L.match(/xl\/media\/([a-zA-Z0-9]+[.][a-zA-Z0-9]{3,4})$/),j){await this._processMediaEntry(T,w,j[1]);break}if(j=L.match(/xl\/drawings\/([a-zA-Z0-9]+)[.]xml/),j){await this._processDrawingEntry(T,w,j[1]);break}if(j=L.match(/xl\/(comments\d+)[.]xml/),j){await this._processCommentEntry(T,w,j[1]);break}if(j=L.match(/xl\/tables\/(table\d+)[.]xml/),j){await this._processTableEntry(T,w,j[1]);break}if(j=L.match(/xl\/drawings\/_rels\/([a-zA-Z0-9]+)[.]xml[.]rels/),j){await this._processDrawingRelsEntry(T,w,j[1]);break}if(j=L.match(/xl\/drawings\/(vmlDrawing\d+)[.]vml/),j){await this._processVmlDrawingEntry(T,w,j[1]);break}}}}return this.reconcile(w,k),this.workbook.model=w,this.workbook}async addMedia(R,k){await Promise.all(k.media.map(async v=>{if(v.type==="image"){const w=`xl/media/${v.name}.${v.extension}`;if(v.filename){const x=await function(S,T){return new Promise((L,j)=>{a.readFile(S,T,(U,W)=>{U?j(U):L(W)})})}(v.filename);return R.append(x,{name:w})}if(v.buffer)return R.append(v.buffer,{name:w});if(v.base64){const x=v.base64,S=x.substring(x.indexOf(",")+1);return R.append(S,{name:w,base64:!0})}}throw new Error("Unsupported media")}))}addDrawings(R,k){const v=new z,w=new y;k.worksheets.forEach(x=>{const{drawing:S}=x;if(S){v.prepare(S,{});let T=v.toXml(S);R.append(T,{name:`xl/drawings/${S.name}.xml`}),T=w.toXml(S.rels),R.append(T,{name:`xl/drawings/_rels/${S.name}.xml.rels`})}})}addTables(R,k){const v=new O;k.worksheets.forEach(w=>{const{tables:x}=w;x.forEach(S=>{v.prepare(S,{});const T=v.toXml(S);R.append(T,{name:"xl/tables/"+S.target})})})}async addContentTypes(R,k){const v=new _().toXml(k);R.append(v,{name:"[Content_Types].xml"})}async addApp(R,k){const v=new E().toXml(k);R.append(v,{name:"docProps/app.xml"})}async addCore(R,k){const v=new f;R.append(v.toXml(k),{name:"docProps/core.xml"})}async addThemes(R,k){const v=k.themes||{theme1:H};Object.keys(v).forEach(w=>{const x=v[w],S=`xl/theme/${w}.xml`;R.append(x,{name:S})})}async addOfficeRels(R){const k=new y().toXml([{Id:"rId1",Type:$.RelType.OfficeDocument,Target:"xl/workbook.xml"},{Id:"rId2",Type:$.RelType.CoreProperties,Target:"docProps/core.xml"},{Id:"rId3",Type:$.RelType.ExtenderProperties,Target:"docProps/app.xml"}]);R.append(k,{name:"_rels/.rels"})}async addWorkbookRels(R,k){let v=1;const w=[{Id:"rId"+v++,Type:$.RelType.Styles,Target:"styles.xml"},{Id:"rId"+v++,Type:$.RelType.Theme,Target:"theme/theme1.xml"}];k.sharedStrings.count&&w.push({Id:"rId"+v++,Type:$.RelType.SharedStrings,Target:"sharedStrings.xml"}),k.worksheets.forEach(S=>{S.rId="rId"+v++,w.push({Id:S.rId,Type:$.RelType.Worksheet,Target:`worksheets/sheet${S.id}.xml`})});const x=new y().toXml(w);R.append(x,{name:"xl/_rels/workbook.xml.rels"})}async addSharedStrings(R,k){k.sharedStrings&&k.sharedStrings.count&&R.append(k.sharedStrings.xml,{name:"xl/sharedStrings.xml"})}async addStyles(R,k){const{xml:v}=k.styles;v&&R.append(v,{name:"xl/styles.xml"})}async addWorkbook(R,k){const v=new M;R.append(v.toXml(k),{name:"xl/workbook.xml"})}async addWorksheets(R,k){const v=new D,w=new y,x=new N,S=new B;k.worksheets.forEach(T=>{let L=new h;v.render(L,T),R.append(L.xml,{name:`xl/worksheets/sheet${T.id}.xml`}),T.rels&&T.rels.length&&(L=new h,w.render(L,T.rels),R.append(L.xml,{name:`xl/worksheets/_rels/sheet${T.id}.xml.rels`})),T.comments.length>0&&(L=new h,x.render(L,T),R.append(L.xml,{name:`xl/comments${T.id}.xml`}),L=new h,S.render(L,T),R.append(L.xml,{name:`xl/drawings/vmlDrawing${T.id}.vml`}))})}_finalize(R){return new Promise((k,v)=>{R.on("finish",()=>{k(this)}),R.on("error",v),R.finalize()})}prepareModel(R,k){R.creator=R.creator||"ExcelJS",R.lastModifiedBy=R.lastModifiedBy||"ExcelJS",R.created=R.created||new Date,R.modified=R.modified||new Date,R.useSharedStrings=k.useSharedStrings===void 0||k.useSharedStrings,R.useStyles=k.useStyles===void 0||k.useStyles,R.sharedStrings=new b,R.styles=R.useStyles?new m(!0):new m.Mock;const v=new M,w=new D;v.prepare(R);const x={sharedStrings:R.sharedStrings,styles:R.styles,date1904:R.properties.date1904,drawingsCount:0,media:R.media};x.drawings=R.drawings=[],x.commentRefs=R.commentRefs=[];let S=0;R.tables=[],R.worksheets.forEach(T=>{T.tables.forEach(L=>{S++,L.target=`table${S}.xml`,L.id=S,R.tables.push(L)}),w.prepare(T,x)})}async write(R,k){k=k||{};const{model:v}=this.workbook,w=new c.ZipWriter(k.zip);return w.pipe(R),this.prepareModel(v,k),await this.addContentTypes(w,v),await this.addOfficeRels(w,v),await this.addWorkbookRels(w,v),await this.addWorksheets(w,v),await this.addSharedStrings(w,v),await this.addDrawings(w,v),await this.addTables(w,v),await Promise.all([this.addThemes(w,v),this.addStyles(w,v)]),await this.addMedia(w,v),await Promise.all([this.addApp(w,v),this.addCore(w,v)]),await this.addWorkbook(w,v),this._finalize(w)}writeFile(R,k){const v=a.createWriteStream(R);return new Promise((w,x)=>{v.on("finish",()=>{w()}),v.on("error",S=>{x(S)}),this.write(v,k).then(()=>{v.end()}).catch(S=>{x(S)})})}async writeBuffer(R){const k=new d;return await this.write(k,R),k.read()}}$.RelType=t("./rel-type"),r.exports=$}).call(this)}).call(this,t("_process"),t("buffer").Buffer)},{"../utils/browser-buffer-decode":16,"../utils/stream-buf":24,"../utils/utils":27,"../utils/xml-stream":28,"../utils/zip-stream":29,"./rel-type":31,"./xform/book/workbook-xform":38,"./xform/comment/comments-xform":40,"./xform/comment/vml-notes-xform":45,"./xform/core/app-xform":51,"./xform/core/content-types-xform":52,"./xform/core/core-xform":53,"./xform/core/relationships-xform":55,"./xform/drawing/drawing-xform":62,"./xform/sheet/worksheet-xform":115,"./xform/strings/shared-strings-xform":124,"./xform/style/styles-xform":135,"./xform/table/table-xform":143,"./xml/theme1":145,_process:467,buffer:220,fs:216,jszip:441,"readable-stream":491}],145:[function(t,r,l){r.exports=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme"> <a:themeElements> <a:clrScheme name="Office"> <a:dk1> <a:sysClr val="windowText" lastClr="000000"/> </a:dk1> <a:lt1> <a:sysClr val="window" lastClr="FFFFFF"/> </a:lt1> <a:dk2> <a:srgbClr val="1F497D"/> </a:dk2> <a:lt2> <a:srgbClr val="EEECE1"/> </a:lt2> <a:accent1> <a:srgbClr val="4F81BD"/> </a:accent1> <a:accent2> <a:srgbClr val="C0504D"/> </a:accent2> <a:accent3> <a:srgbClr val="9BBB59"/> </a:accent3> <a:accent4> <a:srgbClr val="8064A2"/> </a:accent4> <a:accent5> <a:srgbClr val="4BACC6"/> </a:accent5> <a:accent6> <a:srgbClr val="F79646"/> </a:accent6> <a:hlink> <a:srgbClr val="0000FF"/> </a:hlink> <a:folHlink> <a:srgbClr val="800080"/> </a:folHlink> </a:clrScheme> <a:fontScheme name="Office"> <a:majorFont> <a:latin typeface="Cambria"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/> <a:font script="Hang" typeface="맑은 고딕"/> <a:font script="Hans" typeface="宋体"/> <a:font script="Hant" typeface="新細明體"/> <a:font script="Arab" typeface="Times New Roman"/> <a:font script="Hebr" typeface="Times New Roman"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="MoolBoran"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Times New Roman"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:majorFont> <a:minorFont> <a:latin typeface="Calibri"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/> <a:font script="Hang" typeface="맑은 고딕"/> <a:font script="Hans" typeface="宋体"/> <a:font script="Hant" typeface="新細明體"/> <a:font script="Arab" typeface="Arial"/> <a:font script="Hebr" typeface="Arial"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="DaunPenh"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Arial"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:minorFont> </a:fontScheme> <a:fmtScheme name="Office"> <a:fillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="35000"> <a:schemeClr val="phClr"> <a:tint val="37000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="15000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="1"/> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="100000"/> <a:shade val="100000"/> <a:satMod val="130000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:shade val="100000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="0"/> </a:gradFill> </a:fillStyleLst> <a:lnStyleLst> <a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"> <a:shade val="95000"/> <a:satMod val="105000"/> </a:schemeClr> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> </a:lnStyleLst> <a:effectStyleLst> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="38000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> <a:scene3d> <a:camera prst="orthographicFront"> <a:rot lat="0" lon="0" rev="0"/> </a:camera> <a:lightRig rig="threePt" dir="t"> <a:rot lat="0" lon="0" rev="1200000"/> </a:lightRig> </a:scene3d> <a:sp3d> <a:bevelT w="63500" h="25400"/> </a:sp3d> </a:effectStyle> </a:effectStyleLst> <a:bgFillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="40000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="40000"> <a:schemeClr val="phClr"> <a:tint val="45000"/> <a:shade val="99000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="20000"/> <a:satMod val="255000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="-80000" r="50000" b="180000"/> </a:path> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="80000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="30000"/> <a:satMod val="200000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="50000" r="50000" b="50000"/> </a:path> </a:gradFill> </a:bgFillStyleLst> </a:fmtScheme> </a:themeElements> <a:objectDefaults> <a:spDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="1"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="3"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="2"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="lt1"/> </a:fontRef> </a:style> </a:spDef> <a:lnDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="2"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="0"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="1"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="tx1"/> </a:fontRef> </a:style> </a:lnDef> </a:objectDefaults> <a:extraClrSchemeLst/> </a:theme>`},{}],146:[function(t,r,l){(function(i){(function(){Object.defineProperty(l,"__esModule",{value:!0}),l.CsvFormatterStream=void 0;const s=t("stream"),a=t("./formatter");class o extends s.Transform{constructor(c){super({writableObjectMode:c.objectMode}),this.hasWrittenBOM=!1,this.formatterOptions=c,this.rowFormatter=new a.RowFormatter(c),this.hasWrittenBOM=!c.writeBOM}transform(c){return this.rowFormatter.rowTransform=c,this}_transform(c,d,u){let h=!1;try{this.hasWrittenBOM||(this.push(this.formatterOptions.BOM),this.hasWrittenBOM=!0),this.rowFormatter.format(c,(p,m)=>p?(h=!0,u(p)):(m&&m.forEach(f=>{this.push(i.from(f,"utf8"))}),h=!0,u()))}catch(p){if(h)throw p;u(p)}}_flush(c){this.rowFormatter.finish((d,u)=>d?c(d):(u&&u.forEach(h=>{this.push(i.from(h,"utf8"))}),c()))}}l.CsvFormatterStream=o}).call(this)}).call(this,t("buffer").Buffer)},{"./formatter":150,buffer:220,stream:505}],147:[function(t,r,l){Object.defineProperty(l,"__esModule",{value:!0}),l.FormatterOptions=void 0,l.FormatterOptions=class{constructor(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var s;this.objectMode=!0,this.delimiter=",",this.rowDelimiter=`
`,this.quote='"',this.escape=this.quote,this.quoteColumns=!1,this.quoteHeaders=this.quoteColumns,this.headers=null,this.includeEndRowDelimiter=!1,this.writeBOM=!1,this.BOM="\uFEFF",this.alwaysWriteHeaders=!1,Object.assign(this,i||{}),(i==null?void 0:i.quoteHeaders)===void 0&&(this.quoteHeaders=this.quoteColumns),(i==null?void 0:i.quote)===!0?this.quote='"':(i==null?void 0:i.quote)===!1&&(this.quote=""),typeof(i==null?void 0:i.escape)!="string"&&(this.escape=this.quote),this.shouldWriteHeaders=!!this.headers&&((s=i.writeHeaders)===null||s===void 0||s),this.headers=Array.isArray(this.headers)?this.headers:null,this.escapedQuote=`${this.escape}${this.quote}`}}},{}],148:[function(t,r,l){var i=function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0}),l.FieldFormatter=void 0;const s=i(t("lodash.isboolean")),a=i(t("lodash.isnil")),o=i(t("lodash.escaperegexp"));l.FieldFormatter=class{constructor(n){this._headers=null,this.formatterOptions=n,n.headers!==null&&(this.headers=n.headers),this.REPLACE_REGEXP=new RegExp(n.quote,"g");const c=`[${n.delimiter}${o.default(n.rowDelimiter)}|\r|
]`;this.ESCAPE_REGEXP=new RegExp(c)}set headers(n){this._headers=n}shouldQuote(n,c){const d=c?this.formatterOptions.quoteHeaders:this.formatterOptions.quoteColumns;return s.default(d)?d:Array.isArray(d)?d[n]:this._headers!==null&&d[this._headers[n]]}format(n,c,d){const u=(""+(a.default(n)?"":n)).replace(/\0/g,""),{formatterOptions:h}=this;return h.quote!==""&&u.indexOf(h.quote)!==-1?this.quoteField(u.replace(this.REPLACE_REGEXP,h.escapedQuote)):u.search(this.ESCAPE_REGEXP)!==-1||this.shouldQuote(c,d)?this.quoteField(u):u}quoteField(n){const{quote:c}=this.formatterOptions;return`${c}${n}${c}`}}},{"lodash.escaperegexp":442,"lodash.isboolean":444,"lodash.isnil":447}],149:[function(t,r,l){var i=function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(l,"__esModule",{value:!0}),l.RowFormatter=void 0;const s=i(t("lodash.isfunction")),a=i(t("lodash.isequal")),o=t("./FieldFormatter"),n=t("../types");class c{constructor(u){this.rowCount=0,this.formatterOptions=u,this.fieldFormatter=new o.FieldFormatter(u),this.headers=u.headers,this.shouldWriteHeaders=u.shouldWriteHeaders,this.hasWrittenHeaders=!1,this.headers!==null&&(this.fieldFormatter.headers=this.headers),u.transform&&(this.rowTransform=u.transform)}static isRowHashArray(u){return!!Array.isArray(u)&&Array.isArray(u[0])&&u[0].length===2}static isRowArray(u){return Array.isArray(u)&&!this.isRowHashArray(u)}static gatherHeaders(u){return c.isRowHashArray(u)?u.map(h=>h[0]):Array.isArray(u)?u:Object.keys(u)}static createTransform(u){return n.isSyncTransform(u)?(h,p)=>{let m=null;try{m=u(h)}catch(f){return p(f)}return p(null,m)}:(h,p)=>{u(h,p)}}set rowTransform(u){if(!s.default(u))throw new TypeError("The transform should be a function");this._rowTransform=c.createTransform(u)}format(u,h){this.callTransformer(u,(p,m)=>{if(p)return h(p);if(!u)return h(null);const f=[];if(m){const{shouldFormatColumns:b,headers:y}=this.checkHeaders(m);if(this.shouldWriteHeaders&&y&&!this.hasWrittenHeaders&&(f.push(this.formatColumns(y,!0)),this.hasWrittenHeaders=!0),b){const _=this.gatherColumns(m);f.push(this.formatColumns(_,!1))}}return h(null,f)})}finish(u){const h=[];if(this.formatterOptions.alwaysWriteHeaders&&this.rowCount===0){if(!this.headers)return u(new Error("`alwaysWriteHeaders` option is set to true but `headers` option not provided."));h.push(this.formatColumns(this.headers,!0))}return this.formatterOptions.includeEndRowDelimiter&&h.push(this.formatterOptions.rowDelimiter),u(null,h)}checkHeaders(u){if(this.headers)return{shouldFormatColumns:!0,headers:this.headers};const h=c.gatherHeaders(u);return this.headers=h,this.fieldFormatter.headers=h,this.shouldWriteHeaders?{shouldFormatColumns:!a.default(h,u),headers:h}:{shouldFormatColumns:!0,headers:null}}gatherColumns(u){if(this.headers===null)throw new Error("Headers is currently null");return Array.isArray(u)?c.isRowHashArray(u)?this.headers.map((h,p)=>{const m=u[p];return m?m[1]:""}):c.isRowArray(u)&&!this.shouldWriteHeaders?u:this.headers.map((h,p)=>u[p]):this.headers.map(h=>u[h])}callTransformer(u,h){return this._rowTransform?this._rowTransform(u,h):h(null,u)}formatColumns(u,h){const p=u.map((f,b)=>this.fieldFormatter.format(f,b,h)).join(this.formatterOptions.delimiter),{rowCount:m}=this;return this.rowCount+=1,m?[this.formatterOptions.rowDelimiter,p].join(""):p}}l.RowFormatter=c},{"../types":152,"./FieldFormatter":148,"lodash.isequal":445,"lodash.isfunction":446}],150:[function(t,r,l){Object.defineProperty(l,"__esModule",{value:!0}),l.FieldFormatter=l.RowFormatter=void 0;var i=t("./RowFormatter");Object.defineProperty(l,"RowFormatter",{enumerable:!0,get:function(){return i.RowFormatter}});var s=t("./FieldFormatter");Object.defineProperty(l,"FieldFormatter",{enumerable:!0,get:function(){return s.FieldFormatter}})},{"./FieldFormatter":148,"./RowFormatter":149}],151:[function(t,r,l){(function(i){(function(){var s=Object.create?function(b,y,_,E){E===void 0&&(E=_),Object.defineProperty(b,E,{enumerable:!0,get:function(){return y[_]}})}:function(b,y,_,E){E===void 0&&(E=_),b[E]=y[_]},a=Object.create?function(b,y){Object.defineProperty(b,"default",{enumerable:!0,value:y})}:function(b,y){b.default=y},o=function(b){if(b&&b.__esModule)return b;var y={};if(b!=null)for(var _ in b)_!=="default"&&Object.prototype.hasOwnProperty.call(b,_)&&s(y,b,_);return a(y,b),y},n=function(b,y){for(var _ in b)_==="default"||Object.prototype.hasOwnProperty.call(y,_)||s(y,b,_)};Object.defineProperty(l,"__esModule",{value:!0}),l.writeToPath=l.writeToString=l.writeToBuffer=l.writeToStream=l.write=l.format=l.FormatterOptions=l.CsvFormatterStream=void 0;const c=t("util"),d=t("stream"),u=o(t("fs")),h=t("./FormatterOptions"),p=t("./CsvFormatterStream");n(t("./types"),l);var m=t("./CsvFormatterStream");Object.defineProperty(l,"CsvFormatterStream",{enumerable:!0,get:function(){return m.CsvFormatterStream}});var f=t("./FormatterOptions");Object.defineProperty(l,"FormatterOptions",{enumerable:!0,get:function(){return f.FormatterOptions}}),l.format=b=>new p.CsvFormatterStream(new h.FormatterOptions(b)),l.write=(b,y)=>{const _=l.format(y),E=c.promisify((M,D)=>{_.write(M,void 0,D)});return b.reduce((M,D)=>M.then(()=>E(D)),Promise.resolve()).then(()=>_.end()).catch(M=>{_.emit("error",M)}),_},l.writeToStream=(b,y,_)=>l.write(y,_).pipe(b),l.writeToBuffer=function(b){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const _=[],E=new d.Writable({write(M,D,z){_.push(M),z()}});return new Promise((M,D)=>{E.on("error",D).on("finish",()=>M(i.concat(_))),l.write(b,y).pipe(E)})},l.writeToString=(b,y)=>l.writeToBuffer(b,y).then(_=>_.toString()),l.writeToPath=(b,y,_)=>{const E=u.createWriteStream(b,{encoding:"utf8"});return l.write(y,_).pipe(E)}}).call(this)}).call(this,t("buffer").Buffer)},{"./CsvFormatterStream":146,"./FormatterOptions":147,"./types":152,buffer:220,fs:216,stream:505,util:527}],152:[function(t,r,l){Object.defineProperty(l,"__esModule",{value:!0}),l.isSyncTransform=void 0,l.isSyncTransform=i=>i.length===1},{}],153:[function(t,r,l){(function(i){(function(){Object.defineProperty(l,"__esModule",{value:!0}),l.CsvParserStream=void 0;const s=t("string_decoder"),a=t("stream"),o=t("./transforms"),n=t("./parser");class c extends a.Transform{constructor(u){super({objectMode:u.objectMode}),this.lines="",this.rowCount=0,this.parsedRowCount=0,this.parsedLineCount=0,this.endEmitted=!1,this.headersEmitted=!1,this.parserOptions=u,this.parser=new n.Parser(u),this.headerTransformer=new o.HeaderTransformer(u),this.decoder=new s.StringDecoder(u.encoding),this.rowTransformerValidator=new o.RowTransformerValidator}get hasHitRowLimit(){return this.parserOptions.limitRows&&this.rowCount>=this.parserOptions.maxRows}get shouldEmitRows(){return this.parsedRowCount>this.parserOptions.skipRows}get shouldSkipLine(){return this.parsedLineCount<=this.parserOptions.skipLines}transform(u){return this.rowTransformerValidator.rowTransform=u,this}validate(u){return this.rowTransformerValidator.rowValidator=u,this}emit(u){if(u==="end")return this.endEmitted||(this.endEmitted=!0,super.emit("end",this.rowCount)),!1;for(var h=arguments.length,p=new Array(h>1?h-1:0),m=1;m<h;m++)p[m-1]=arguments[m];return super.emit(u,...p)}_transform(u,h,p){if(this.hasHitRowLimit)return p();const m=c.wrapDoneCallback(p);try{const{lines:f}=this,b=f+this.decoder.write(u),y=this.parse(b,!0);return this.processRows(y,m)}catch(f){return m(f)}}_flush(u){const h=c.wrapDoneCallback(u);if(this.hasHitRowLimit)return h();try{const p=this.lines+this.decoder.end(),m=this.parse(p,!1);return this.processRows(m,h)}catch(p){return h(p)}}parse(u,h){if(!u)return[];const{line:p,rows:m}=this.parser.parse(u,h);return this.lines=p,m}processRows(u,h){const p=u.length,m=f=>{const b=E=>E?h(E):f%100!=0?m(f+1):void i(()=>m(f+1));if(this.checkAndEmitHeaders(),f>=p||this.hasHitRowLimit)return h();if(this.parsedLineCount+=1,this.shouldSkipLine)return b();const y=u[f];this.rowCount+=1,this.parsedRowCount+=1;const _=this.rowCount;return this.transformRow(y,(E,M)=>{if(E)return this.rowCount-=1,b(E);if(!M)return b(new Error("expected transform result"));if(M.isValid){if(M.row)return this.pushRow(M.row,b)}else this.emit("data-invalid",M.row,_,M.reason);return b()})};m(0)}transformRow(u,h){try{this.headerTransformer.transform(u,(p,m)=>p?h(p):m?m.isValid?m.row?this.shouldEmitRows?this.rowTransformerValidator.transformAndValidate(m.row,h):this.skipRow(h):(this.rowCount-=1,this.parsedRowCount-=1,h(null,{row:null,isValid:!0})):this.shouldEmitRows?h(null,{isValid:!1,row:u}):this.skipRow(h):h(new Error("Expected result from header transform")))}catch(p){h(p)}}checkAndEmitHeaders(){!this.headersEmitted&&this.headerTransformer.headers&&(this.headersEmitted=!0,this.emit("headers",this.headerTransformer.headers))}skipRow(u){return this.rowCount-=1,u(null,{row:null,isValid:!0})}pushRow(u,h){try{this.parserOptions.objectMode?this.push(u):this.push(JSON.stringify(u)),h()}catch(p){h(p)}}static wrapDoneCallback(u){let h=!1;return function(p){if(p){if(h)throw p;return h=!0,void u(p)}for(var m=arguments.length,f=new Array(m>1?m-1:0),b=1;b<m;b++)f[b-1]=arguments[b];u(...f)}}}l.CsvParserStream=c}).call(this)}).call(this,t("timers").setImmediate)},{"./parser":165,"./transforms":168,stream:505,string_decoder:218,timers:523}],154:[function(t,r,l){var i=function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(l,"__esModule",{value:!0}),l.ParserOptions=void 0;const s=i(t("lodash.escaperegexp")),a=i(t("lodash.isnil"));l.ParserOptions=class{constructor(o){var n;if(this.objectMode=!0,this.delimiter=",",this.ignoreEmpty=!1,this.quote='"',this.escape=null,this.escapeChar=this.quote,this.comment=null,this.supportsComments=!1,this.ltrim=!1,this.rtrim=!1,this.trim=!1,this.headers=null,this.renameHeaders=!1,this.strictColumnHandling=!1,this.discardUnmappedColumns=!1,this.carriageReturn="\r",this.encoding="utf8",this.limitRows=!1,this.maxRows=0,this.skipLines=0,this.skipRows=0,Object.assign(this,o||{}),this.delimiter.length>1)throw new Error("delimiter option must be one character long");this.escapedDelimiter=s.default(this.delimiter),this.escapeChar=(n=this.escape)!==null&&n!==void 0?n:this.quote,this.supportsComments=!a.default(this.comment),this.NEXT_TOKEN_REGEXP=new RegExp(`([^\\s]|\\r\\n|\\n|\\r|${this.escapedDelimiter})`),this.maxRows>0&&(this.limitRows=!0)}}},{"lodash.escaperegexp":442,"lodash.isnil":447}],155:[function(t,r,l){var i=Object.create?function(m,f,b,y){y===void 0&&(y=b),Object.defineProperty(m,y,{enumerable:!0,get:function(){return f[b]}})}:function(m,f,b,y){y===void 0&&(y=b),m[y]=f[b]},s=Object.create?function(m,f){Object.defineProperty(m,"default",{enumerable:!0,value:f})}:function(m,f){m.default=f},a=function(m){if(m&&m.__esModule)return m;var f={};if(m!=null)for(var b in m)b!=="default"&&Object.prototype.hasOwnProperty.call(m,b)&&i(f,m,b);return s(f,m),f},o=function(m,f){for(var b in m)b==="default"||Object.prototype.hasOwnProperty.call(f,b)||i(f,m,b)};Object.defineProperty(l,"__esModule",{value:!0}),l.parseString=l.parseFile=l.parseStream=l.parse=l.ParserOptions=l.CsvParserStream=void 0;const n=a(t("fs")),c=t("stream"),d=t("./ParserOptions"),u=t("./CsvParserStream");o(t("./types"),l);var h=t("./CsvParserStream");Object.defineProperty(l,"CsvParserStream",{enumerable:!0,get:function(){return h.CsvParserStream}});var p=t("./ParserOptions");Object.defineProperty(l,"ParserOptions",{enumerable:!0,get:function(){return p.ParserOptions}}),l.parse=m=>new u.CsvParserStream(new d.ParserOptions(m)),l.parseStream=(m,f)=>m.pipe(new u.CsvParserStream(new d.ParserOptions(f))),l.parseFile=function(m){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return n.createReadStream(m).pipe(new u.CsvParserStream(new d.ParserOptions(f)))},l.parseString=(m,f)=>{const b=new c.Readable;return b.push(m),b.push(null),b.pipe(new u.CsvParserStream(new d.ParserOptions(f)))}},{"./CsvParserStream":153,"./ParserOptions":154,"./types":169,fs:216,stream:505}],156:[function(t,r,l){Object.defineProperty(l,"__esModule",{value:!0}),l.Parser=void 0;const i=t("./Scanner"),s=t("./RowParser"),a=t("./Token");class o{constructor(c){this.parserOptions=c,this.rowParser=new s.RowParser(this.parserOptions)}static removeBOM(c){return c&&c.charCodeAt(0)===65279?c.slice(1):c}parse(c,d){const u=new i.Scanner({line:o.removeBOM(c),parserOptions:this.parserOptions,hasMoreData:d});return this.parserOptions.supportsComments?this.parseWithComments(u):this.parseWithoutComments(u)}parseWithoutComments(c){const d=[];let u=!0;for(;u;)u=this.parseRow(c,d);return{line:c.line,rows:d}}parseWithComments(c){const{parserOptions:d}=this,u=[];for(let h=c.nextCharacterToken;h!==null;h=c.nextCharacterToken)if(a.Token.isTokenComment(h,d)){if(c.advancePastLine()===null)return{line:c.lineFromCursor,rows:u};if(!c.hasMoreCharacters)return{line:c.lineFromCursor,rows:u};c.truncateToCursor()}else if(!this.parseRow(c,u))break;return{line:c.line,rows:u}}parseRow(c,d){if(!c.nextNonSpaceToken)return!1;const u=this.rowParser.parse(c);return u!==null&&(this.parserOptions.ignoreEmpty&&s.RowParser.isEmptyRow(u)||d.push(u),!0)}}l.Parser=o},{"./RowParser":157,"./Scanner":158,"./Token":159}],157:[function(t,r,l){Object.defineProperty(l,"__esModule",{value:!0}),l.RowParser=void 0;const i=t("./column"),s=t("./Token");l.RowParser=class{constructor(a){this.parserOptions=a,this.columnParser=new i.ColumnParser(a)}static isEmptyRow(a){return a.join("").replace(/\s+/g,"")===""}parse(a){const{parserOptions:o}=this,{hasMoreData:n}=a,c=a,d=[];let u=this.getStartToken(c,d);for(;u;){if(s.Token.isTokenRowDelimiter(u))return c.advancePastToken(u),!c.hasMoreCharacters&&s.Token.isTokenCarriageReturn(u,o)&&n?null:(c.truncateToCursor(),d);if(!this.shouldSkipColumnParse(c,u,d)){const h=this.columnParser.parse(c);if(h===null)return null;d.push(h)}u=c.nextNonSpaceToken}return n?null:(c.truncateToCursor(),d)}getStartToken(a,o){const n=a.nextNonSpaceToken;return n!==null&&s.Token.isTokenDelimiter(n,this.parserOptions)?(o.push(""),a.nextNonSpaceToken):n}shouldSkipColumnParse(a,o,n){const{parserOptions:c}=this;if(s.Token.isTokenDelimiter(o,c)){a.advancePastToken(o);const d=a.nextCharacterToken;if(!a.hasMoreCharacters||d!==null&&s.Token.isTokenRowDelimiter(d)||d!==null&&s.Token.isTokenDelimiter(d,c))return n.push(""),!0}return!1}}},{"./Token":159,"./column":164}],158:[function(t,r,l){Object.defineProperty(l,"__esModule",{value:!0}),l.Scanner=void 0;const i=t("./Token"),s=/((?:\r\n)|\n|\r)/;l.Scanner=class{constructor(a){this.cursor=0,this.line=a.line,this.lineLength=this.line.length,this.parserOptions=a.parserOptions,this.hasMoreData=a.hasMoreData,this.cursor=a.cursor||0}get hasMoreCharacters(){return this.lineLength>this.cursor}get nextNonSpaceToken(){const{lineFromCursor:a}=this,o=this.parserOptions.NEXT_TOKEN_REGEXP;if(a.search(o)===-1)return null;const n=o.exec(a);if(n==null)return null;const c=n[1],d=this.cursor+(n.index||0);return new i.Token({token:c,startCursor:d,endCursor:d+c.length-1})}get nextCharacterToken(){const{cursor:a,lineLength:o}=this;return o<=a?null:new i.Token({token:this.line[a],startCursor:a,endCursor:a})}get lineFromCursor(){return this.line.substr(this.cursor)}advancePastLine(){const a=s.exec(this.lineFromCursor);return a?(this.cursor+=(a.index||0)+a[0].length,this):this.hasMoreData?null:(this.cursor=this.lineLength,this)}advanceTo(a){return this.cursor=a,this}advanceToToken(a){return this.cursor=a.startCursor,this}advancePastToken(a){return this.cursor=a.endCursor+1,this}truncateToCursor(){return this.line=this.lineFromCursor,this.lineLength=this.line.length,this.cursor=0,this}}},{"./Token":159}],159:[function(t,r,l){Object.defineProperty(l,"__esModule",{value:!0}),l.Token=void 0,l.Token=class{constructor(i){this.token=i.token,this.startCursor=i.startCursor,this.endCursor=i.endCursor}static isTokenRowDelimiter(i){const s=i.token;return s==="\r"||s===`
`||s===`\r
`}static isTokenCarriageReturn(i,s){return i.token===s.carriageReturn}static isTokenComment(i,s){return s.supportsComments&&!!i&&i.token===s.comment}static isTokenEscapeCharacter(i,s){return i.token===s.escapeChar}static isTokenQuote(i,s){return i.token===s.quote}static isTokenDelimiter(i,s){return i.token===s.delimiter}}},{}],160:[function(t,r,l){Object.defineProperty(l,"__esModule",{value:!0}),l.ColumnFormatter=void 0,l.ColumnFormatter=class{constructor(i){i.trim?this.format=s=>s.trim():i.ltrim?this.format=s=>s.trimLeft():i.rtrim?this.format=s=>s.trimRight():this.format=s=>s}}},{}],161:[function(t,r,l){Object.defineProperty(l,"__esModule",{value:!0}),l.ColumnParser=void 0;const i=t("./NonQuotedColumnParser"),s=t("./QuotedColumnParser"),a=t("../Token");l.ColumnParser=class{constructor(o){this.parserOptions=o,this.quotedColumnParser=new s.QuotedColumnParser(o),this.nonQuotedColumnParser=new i.NonQuotedColumnParser(o)}parse(o){const{nextNonSpaceToken:n}=o;return n!==null&&a.Token.isTokenQuote(n,this.parserOptions)?(o.advanceToToken(n),this.quotedColumnParser.parse(o)):this.nonQuotedColumnParser.parse(o)}}},{"../Token":159,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],162:[function(t,r,l){Object.defineProperty(l,"__esModule",{value:!0}),l.NonQuotedColumnParser=void 0;const i=t("./ColumnFormatter"),s=t("../Token");l.NonQuotedColumnParser=class{constructor(a){this.parserOptions=a,this.columnFormatter=new i.ColumnFormatter(a)}parse(a){if(!a.hasMoreCharacters)return null;const{parserOptions:o}=this,n=[];let c=a.nextCharacterToken;for(;c&&!s.Token.isTokenDelimiter(c,o)&&!s.Token.isTokenRowDelimiter(c);c=a.nextCharacterToken)n.push(c.token),a.advancePastToken(c);return this.columnFormatter.format(n.join(""))}}},{"../Token":159,"./ColumnFormatter":160}],163:[function(t,r,l){Object.defineProperty(l,"__esModule",{value:!0}),l.QuotedColumnParser=void 0;const i=t("./ColumnFormatter"),s=t("../Token");l.QuotedColumnParser=class{constructor(a){this.parserOptions=a,this.columnFormatter=new i.ColumnFormatter(a)}parse(a){if(!a.hasMoreCharacters)return null;const o=a.cursor,{foundClosingQuote:n,col:c}=this.gatherDataBetweenQuotes(a);if(!n){if(a.advanceTo(o),!a.hasMoreData)throw new Error(`Parse Error: missing closing: '${this.parserOptions.quote||""}' in line: at '${a.lineFromCursor.replace(/[\r\n]/g,"\\n'")}'`);return null}return this.checkForMalformedColumn(a),c}gatherDataBetweenQuotes(a){const{parserOptions:o}=this;let n=!1,c=!1;const d=[];let u=a.nextCharacterToken;for(;!c&&u!==null;u=a.nextCharacterToken){const h=s.Token.isTokenQuote(u,o);if(!n&&h)n=!0;else if(n)if(s.Token.isTokenEscapeCharacter(u,o)){a.advancePastToken(u);const p=a.nextCharacterToken;p!==null&&(s.Token.isTokenQuote(p,o)||s.Token.isTokenEscapeCharacter(p,o))?(d.push(p.token),u=p):h?c=!0:d.push(u.token)}else h?c=!0:d.push(u.token);a.advancePastToken(u)}return{col:this.columnFormatter.format(d.join("")),foundClosingQuote:c}}checkForMalformedColumn(a){const{parserOptions:o}=this,{nextNonSpaceToken:n}=a;if(n){const c=s.Token.isTokenDelimiter(n,o),d=s.Token.isTokenRowDelimiter(n);if(!c&&!d){const u=a.lineFromCursor.substr(0,10).replace(/[\r\n]/g,"\\n'");throw new Error(`Parse Error: expected: '${o.escapedDelimiter}' OR new line got: '${n.token}'. at '${u}`)}a.advanceToToken(n)}else a.hasMoreData||a.advancePastLine()}}},{"../Token":159,"./ColumnFormatter":160}],164:[function(t,r,l){Object.defineProperty(l,"__esModule",{value:!0}),l.ColumnFormatter=l.QuotedColumnParser=l.NonQuotedColumnParser=l.ColumnParser=void 0;var i=t("./ColumnParser");Object.defineProperty(l,"ColumnParser",{enumerable:!0,get:function(){return i.ColumnParser}});var s=t("./NonQuotedColumnParser");Object.defineProperty(l,"NonQuotedColumnParser",{enumerable:!0,get:function(){return s.NonQuotedColumnParser}});var a=t("./QuotedColumnParser");Object.defineProperty(l,"QuotedColumnParser",{enumerable:!0,get:function(){return a.QuotedColumnParser}});var o=t("./ColumnFormatter");Object.defineProperty(l,"ColumnFormatter",{enumerable:!0,get:function(){return o.ColumnFormatter}})},{"./ColumnFormatter":160,"./ColumnParser":161,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],165:[function(t,r,l){Object.defineProperty(l,"__esModule",{value:!0}),l.QuotedColumnParser=l.NonQuotedColumnParser=l.ColumnParser=l.Token=l.Scanner=l.RowParser=l.Parser=void 0;var i=t("./Parser");Object.defineProperty(l,"Parser",{enumerable:!0,get:function(){return i.Parser}});var s=t("./RowParser");Object.defineProperty(l,"RowParser",{enumerable:!0,get:function(){return s.RowParser}});var a=t("./Scanner");Object.defineProperty(l,"Scanner",{enumerable:!0,get:function(){return a.Scanner}});var o=t("./Token");Object.defineProperty(l,"Token",{enumerable:!0,get:function(){return o.Token}});var n=t("./column");Object.defineProperty(l,"ColumnParser",{enumerable:!0,get:function(){return n.ColumnParser}}),Object.defineProperty(l,"NonQuotedColumnParser",{enumerable:!0,get:function(){return n.NonQuotedColumnParser}}),Object.defineProperty(l,"QuotedColumnParser",{enumerable:!0,get:function(){return n.QuotedColumnParser}})},{"./Parser":156,"./RowParser":157,"./Scanner":158,"./Token":159,"./column":164}],166:[function(t,r,l){var i=function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(l,"__esModule",{value:!0}),l.HeaderTransformer=void 0;const s=i(t("lodash.isundefined")),a=i(t("lodash.isfunction")),o=i(t("lodash.uniq")),n=i(t("lodash.groupby"));l.HeaderTransformer=class{constructor(c){this.headers=null,this.receivedHeaders=!1,this.shouldUseFirstRow=!1,this.processedFirstRow=!1,this.headersLength=0,this.parserOptions=c,c.headers===!0?this.shouldUseFirstRow=!0:Array.isArray(c.headers)?this.setHeaders(c.headers):a.default(c.headers)&&(this.headersTransform=c.headers)}transform(c,d){return this.shouldMapRow(c)?d(null,this.processRow(c)):d(null,{row:null,isValid:!0})}shouldMapRow(c){const{parserOptions:d}=this;if(!this.headersTransform&&d.renameHeaders&&!this.processedFirstRow){if(!this.receivedHeaders)throw new Error("Error renaming headers: new headers must be provided in an array");return this.processedFirstRow=!0,!1}if(!this.receivedHeaders&&Array.isArray(c)){if(this.headersTransform)this.setHeaders(this.headersTransform(c));else{if(!this.shouldUseFirstRow)return!0;this.setHeaders(c)}return!1}return!0}processRow(c){if(!this.headers)return{row:c,isValid:!0};const{parserOptions:d}=this;if(!d.discardUnmappedColumns&&c.length>this.headersLength){if(!d.strictColumnHandling)throw new Error(`Unexpected Error: column header mismatch expected: ${this.headersLength} columns got: ${c.length}`);return{row:c,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${c.length}`}}return d.strictColumnHandling&&c.length<this.headersLength?{row:c,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${c.length}`}:{row:this.mapHeaders(c),isValid:!0}}mapHeaders(c){const d={},{headers:u,headersLength:h}=this;for(let p=0;p<h;p+=1){const m=u[p];if(!s.default(m)){const f=c[p];s.default(f)?d[m]="":d[m]=f}}return d}setHeaders(c){var d;const u=c.filter(h=>!!h);if(o.default(u).length!==u.length){const h=n.default(u),p=Object.keys(h).filter(m=>h[m].length>1);throw new Error("Duplicate headers found "+JSON.stringify(p))}this.headers=c,this.receivedHeaders=!0,this.headersLength=((d=this.headers)===null||d===void 0?void 0:d.length)||0}}},{"lodash.groupby":443,"lodash.isfunction":446,"lodash.isundefined":448,"lodash.uniq":449}],167:[function(t,r,l){var i=function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0}),l.RowTransformerValidator=void 0;const s=i(t("lodash.isfunction")),a=t("../types");class o{constructor(){this._rowTransform=null,this._rowValidator=null}static createTransform(c){return a.isSyncTransform(c)?(d,u)=>{let h=null;try{h=c(d)}catch(p){return u(p)}return u(null,h)}:c}static createValidator(c){return a.isSyncValidate(c)?(d,u)=>{u(null,{row:d,isValid:c(d)})}:(d,u)=>{c(d,(h,p,m)=>h?u(h):u(null,p?{row:d,isValid:p,reason:m}:{row:d,isValid:!1,reason:m}))}}set rowTransform(c){if(!s.default(c))throw new TypeError("The transform should be a function");this._rowTransform=o.createTransform(c)}set rowValidator(c){if(!s.default(c))throw new TypeError("The validate should be a function");this._rowValidator=o.createValidator(c)}transformAndValidate(c,d){return this.callTransformer(c,(u,h)=>u?d(u):h?this.callValidator(h,(p,m)=>p?d(p):m&&!m.isValid?d(null,{row:h,isValid:!1,reason:m.reason}):d(null,{row:h,isValid:!0})):d(null,{row:null,isValid:!0}))}callTransformer(c,d){return this._rowTransform?this._rowTransform(c,d):d(null,c)}callValidator(c,d){return this._rowValidator?this._rowValidator(c,d):d(null,{row:c,isValid:!0})}}l.RowTransformerValidator=o},{"../types":169,"lodash.isfunction":446}],168:[function(t,r,l){Object.defineProperty(l,"__esModule",{value:!0}),l.HeaderTransformer=l.RowTransformerValidator=void 0;var i=t("./RowTransformerValidator");Object.defineProperty(l,"RowTransformerValidator",{enumerable:!0,get:function(){return i.RowTransformerValidator}});var s=t("./HeaderTransformer");Object.defineProperty(l,"HeaderTransformer",{enumerable:!0,get:function(){return s.HeaderTransformer}})},{"./HeaderTransformer":166,"./RowTransformerValidator":167}],169:[function(t,r,l){Object.defineProperty(l,"__esModule",{value:!0}),l.isSyncValidate=l.isSyncTransform=void 0,l.isSyncTransform=i=>i.length===1,l.isSyncValidate=i=>i.length===1},{}],170:[function(t,r,l){const i=l;i.bignum=t("bn.js"),i.define=t("./asn1/api").define,i.base=t("./asn1/base"),i.constants=t("./asn1/constants"),i.decoders=t("./asn1/decoders"),i.encoders=t("./asn1/encoders")},{"./asn1/api":171,"./asn1/base":173,"./asn1/constants":177,"./asn1/decoders":179,"./asn1/encoders":182,"bn.js":184}],171:[function(t,r,l){const i=t("./encoders"),s=t("./decoders"),a=t("inherits");function o(n,c){this.name=n,this.body=c,this.decoders={},this.encoders={}}l.define=function(n,c){return new o(n,c)},o.prototype._createNamed=function(n){const c=this.name;function d(u){this._initNamed(u,c)}return a(d,n),d.prototype._initNamed=function(u,h){n.call(this,u,h)},new d(this)},o.prototype._getDecoder=function(n){return n=n||"der",this.decoders.hasOwnProperty(n)||(this.decoders[n]=this._createNamed(s[n])),this.decoders[n]},o.prototype.decode=function(n,c,d){return this._getDecoder(c).decode(n,d)},o.prototype._getEncoder=function(n){return n=n||"der",this.encoders.hasOwnProperty(n)||(this.encoders[n]=this._createNamed(i[n])),this.encoders[n]},o.prototype.encode=function(n,c,d){return this._getEncoder(c).encode(n,d)}},{"./decoders":179,"./encoders":182,inherits:440}],172:[function(t,r,l){const i=t("inherits"),s=t("../base/reporter").Reporter,a=t("safer-buffer").Buffer;function o(c,d){s.call(this,d),a.isBuffer(c)?(this.base=c,this.offset=0,this.length=c.length):this.error("Input not Buffer")}function n(c,d){if(Array.isArray(c))this.length=0,this.value=c.map(function(u){return n.isEncoderBuffer(u)||(u=new n(u,d)),this.length+=u.length,u},this);else if(typeof c=="number"){if(!(0<=c&&c<=255))return d.error("non-byte EncoderBuffer value");this.value=c,this.length=1}else if(typeof c=="string")this.value=c,this.length=a.byteLength(c);else{if(!a.isBuffer(c))return d.error("Unsupported type: "+typeof c);this.value=c,this.length=c.length}}i(o,s),l.DecoderBuffer=o,o.isDecoderBuffer=function(c){return c instanceof o?!0:typeof c=="object"&&a.isBuffer(c.base)&&c.constructor.name==="DecoderBuffer"&&typeof c.offset=="number"&&typeof c.length=="number"&&typeof c.save=="function"&&typeof c.restore=="function"&&typeof c.isEmpty=="function"&&typeof c.readUInt8=="function"&&typeof c.skip=="function"&&typeof c.raw=="function"},o.prototype.save=function(){return{offset:this.offset,reporter:s.prototype.save.call(this)}},o.prototype.restore=function(c){const d=new o(this.base);return d.offset=c.offset,d.length=this.offset,this.offset=c.offset,s.prototype.restore.call(this,c.reporter),d},o.prototype.isEmpty=function(){return this.offset===this.length},o.prototype.readUInt8=function(c){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(c||"DecoderBuffer overrun")},o.prototype.skip=function(c,d){if(!(this.offset+c<=this.length))return this.error(d||"DecoderBuffer overrun");const u=new o(this.base);return u._reporterState=this._reporterState,u.offset=this.offset,u.length=this.offset+c,this.offset+=c,u},o.prototype.raw=function(c){return this.base.slice(c?c.offset:this.offset,this.length)},l.EncoderBuffer=n,n.isEncoderBuffer=function(c){return c instanceof n?!0:typeof c=="object"&&c.constructor.name==="EncoderBuffer"&&typeof c.length=="number"&&typeof c.join=="function"},n.prototype.join=function(c,d){return c||(c=a.alloc(this.length)),d||(d=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(u){u.join(c,d),d+=u.length}):(typeof this.value=="number"?c[d]=this.value:typeof this.value=="string"?c.write(this.value,d):a.isBuffer(this.value)&&this.value.copy(c,d),d+=this.length)),c}},{"../base/reporter":175,inherits:440,"safer-buffer":495}],173:[function(t,r,l){const i=l;i.Reporter=t("./reporter").Reporter,i.DecoderBuffer=t("./buffer").DecoderBuffer,i.EncoderBuffer=t("./buffer").EncoderBuffer,i.Node=t("./node")},{"./buffer":172,"./node":174,"./reporter":175}],174:[function(t,r,l){const i=t("../base/reporter").Reporter,s=t("../base/buffer").EncoderBuffer,a=t("../base/buffer").DecoderBuffer,o=t("minimalistic-assert"),n=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],c=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(n);function d(h,p,m){const f={};this._baseState=f,f.name=m,f.enc=h,f.parent=p||null,f.children=null,f.tag=null,f.args=null,f.reverseArgs=null,f.choice=null,f.optional=!1,f.any=!1,f.obj=!1,f.use=null,f.useDecoder=null,f.key=null,f.default=null,f.explicit=null,f.implicit=null,f.contains=null,f.parent||(f.children=[],this._wrap())}r.exports=d;const u=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];d.prototype.clone=function(){const h=this._baseState,p={};u.forEach(function(f){p[f]=h[f]});const m=new this.constructor(p.parent);return m._baseState=p,m},d.prototype._wrap=function(){const h=this._baseState;c.forEach(function(p){this[p]=function(){const m=new this.constructor(this);return h.children.push(m),m[p].apply(m,arguments)}},this)},d.prototype._init=function(h){const p=this._baseState;o(p.parent===null),h.call(this),p.children=p.children.filter(function(m){return m._baseState.parent===this},this),o.equal(p.children.length,1,"Root node can have only one child")},d.prototype._useArgs=function(h){const p=this._baseState,m=h.filter(function(f){return f instanceof this.constructor},this);h=h.filter(function(f){return!(f instanceof this.constructor)},this),m.length!==0&&(o(p.children===null),p.children=m,m.forEach(function(f){f._baseState.parent=this},this)),h.length!==0&&(o(p.args===null),p.args=h,p.reverseArgs=h.map(function(f){if(typeof f!="object"||f.constructor!==Object)return f;const b={};return Object.keys(f).forEach(function(y){y==(0|y)&&(y|=0);const _=f[y];b[_]=y}),b}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function(h){d.prototype[h]=function(){const p=this._baseState;throw new Error(h+" not implemented for encoding: "+p.enc)}}),n.forEach(function(h){d.prototype[h]=function(){const p=this._baseState,m=Array.prototype.slice.call(arguments);return o(p.tag===null),p.tag=h,this._useArgs(m),this}}),d.prototype.use=function(h){o(h);const p=this._baseState;return o(p.use===null),p.use=h,this},d.prototype.optional=function(){return this._baseState.optional=!0,this},d.prototype.def=function(h){const p=this._baseState;return o(p.default===null),p.default=h,p.optional=!0,this},d.prototype.explicit=function(h){const p=this._baseState;return o(p.explicit===null&&p.implicit===null),p.explicit=h,this},d.prototype.implicit=function(h){const p=this._baseState;return o(p.explicit===null&&p.implicit===null),p.implicit=h,this},d.prototype.obj=function(){const h=this._baseState,p=Array.prototype.slice.call(arguments);return h.obj=!0,p.length!==0&&this._useArgs(p),this},d.prototype.key=function(h){const p=this._baseState;return o(p.key===null),p.key=h,this},d.prototype.any=function(){return this._baseState.any=!0,this},d.prototype.choice=function(h){const p=this._baseState;return o(p.choice===null),p.choice=h,this._useArgs(Object.keys(h).map(function(m){return h[m]})),this},d.prototype.contains=function(h){const p=this._baseState;return o(p.use===null),p.contains=h,this},d.prototype._decode=function(h,p){const m=this._baseState;if(m.parent===null)return h.wrapResult(m.children[0]._decode(h,p));let f,b=m.default,y=!0,_=null;if(m.key!==null&&(_=h.enterKey(m.key)),m.optional){let E=null;if(m.explicit!==null?E=m.explicit:m.implicit!==null?E=m.implicit:m.tag!==null&&(E=m.tag),E!==null||m.any){if(y=this._peekTag(h,E,m.any),h.isError(y))return y}else{const M=h.save();try{m.choice===null?this._decodeGeneric(m.tag,h,p):this._decodeChoice(h,p),y=!0}catch{y=!1}h.restore(M)}}if(m.obj&&y&&(f=h.enterObject()),y){if(m.explicit!==null){const M=this._decodeTag(h,m.explicit);if(h.isError(M))return M;h=M}const E=h.offset;if(m.use===null&&m.choice===null){let M;m.any&&(M=h.save());const D=this._decodeTag(h,m.implicit!==null?m.implicit:m.tag,m.any);if(h.isError(D))return D;m.any?b=h.raw(M):h=D}if(p&&p.track&&m.tag!==null&&p.track(h.path(),E,h.length,"tagged"),p&&p.track&&m.tag!==null&&p.track(h.path(),h.offset,h.length,"content"),m.any||(b=m.choice===null?this._decodeGeneric(m.tag,h,p):this._decodeChoice(h,p)),h.isError(b))return b;if(m.any||m.choice!==null||m.children===null||m.children.forEach(function(M){M._decode(h,p)}),m.contains&&(m.tag==="octstr"||m.tag==="bitstr")){const M=new a(b);b=this._getUse(m.contains,h._reporterState.obj)._decode(M,p)}}return m.obj&&y&&(b=h.leaveObject(f)),m.key===null||b===null&&y!==!0?_!==null&&h.exitKey(_):h.leaveKey(_,m.key,b),b},d.prototype._decodeGeneric=function(h,p,m){const f=this._baseState;return h==="seq"||h==="set"?null:h==="seqof"||h==="setof"?this._decodeList(p,h,f.args[0],m):/str$/.test(h)?this._decodeStr(p,h,m):h==="objid"&&f.args?this._decodeObjid(p,f.args[0],f.args[1],m):h==="objid"?this._decodeObjid(p,null,null,m):h==="gentime"||h==="utctime"?this._decodeTime(p,h,m):h==="null_"?this._decodeNull(p,m):h==="bool"?this._decodeBool(p,m):h==="objDesc"?this._decodeStr(p,h,m):h==="int"||h==="enum"?this._decodeInt(p,f.args&&f.args[0],m):f.use!==null?this._getUse(f.use,p._reporterState.obj)._decode(p,m):p.error("unknown tag: "+h)},d.prototype._getUse=function(h,p){const m=this._baseState;return m.useDecoder=this._use(h,p),o(m.useDecoder._baseState.parent===null),m.useDecoder=m.useDecoder._baseState.children[0],m.implicit!==m.useDecoder._baseState.implicit&&(m.useDecoder=m.useDecoder.clone(),m.useDecoder._baseState.implicit=m.implicit),m.useDecoder},d.prototype._decodeChoice=function(h,p){const m=this._baseState;let f=null,b=!1;return Object.keys(m.choice).some(function(y){const _=h.save(),E=m.choice[y];try{const M=E._decode(h,p);if(h.isError(M))return!1;f={type:y,value:M},b=!0}catch{return h.restore(_),!1}return!0},this),b?f:h.error("Choice not matched")},d.prototype._createEncoderBuffer=function(h){return new s(h,this.reporter)},d.prototype._encode=function(h,p,m){const f=this._baseState;if(f.default!==null&&f.default===h)return;const b=this._encodeValue(h,p,m);return b===void 0||this._skipDefault(b,p,m)?void 0:b},d.prototype._encodeValue=function(h,p,m){const f=this._baseState;if(f.parent===null)return f.children[0]._encode(h,p||new i);let b=null;if(this.reporter=p,f.optional&&h===void 0){if(f.default===null)return;h=f.default}let y=null,_=!1;if(f.any)b=this._createEncoderBuffer(h);else if(f.choice)b=this._encodeChoice(h,p);else if(f.contains)y=this._getUse(f.contains,m)._encode(h,p),_=!0;else if(f.children)y=f.children.map(function(E){if(E._baseState.tag==="null_")return E._encode(null,p,h);if(E._baseState.key===null)return p.error("Child should have a key");const M=p.enterKey(E._baseState.key);if(typeof h!="object")return p.error("Child expected, but input is not object");const D=E._encode(h[E._baseState.key],p,h);return p.leaveKey(M),D},this).filter(function(E){return E}),y=this._createEncoderBuffer(y);else if(f.tag==="seqof"||f.tag==="setof"){if(!f.args||f.args.length!==1)return p.error("Too many args for : "+f.tag);if(!Array.isArray(h))return p.error("seqof/setof, but data is not Array");const E=this.clone();E._baseState.implicit=null,y=this._createEncoderBuffer(h.map(function(M){const D=this._baseState;return this._getUse(D.args[0],h)._encode(M,p)},E))}else f.use!==null?b=this._getUse(f.use,m)._encode(h,p):(y=this._encodePrimitive(f.tag,h),_=!0);if(!f.any&&f.choice===null){const E=f.implicit!==null?f.implicit:f.tag,M=f.implicit===null?"universal":"context";E===null?f.use===null&&p.error("Tag could be omitted only for .use()"):f.use===null&&(b=this._encodeComposite(E,_,M,y))}return f.explicit!==null&&(b=this._encodeComposite(f.explicit,!1,"context",b)),b},d.prototype._encodeChoice=function(h,p){const m=this._baseState,f=m.choice[h.type];return f||o(!1,h.type+" not found in "+JSON.stringify(Object.keys(m.choice))),f._encode(h.value,p)},d.prototype._encodePrimitive=function(h,p){const m=this._baseState;if(/str$/.test(h))return this._encodeStr(p,h);if(h==="objid"&&m.args)return this._encodeObjid(p,m.reverseArgs[0],m.args[1]);if(h==="objid")return this._encodeObjid(p,null,null);if(h==="gentime"||h==="utctime")return this._encodeTime(p,h);if(h==="null_")return this._encodeNull();if(h==="int"||h==="enum")return this._encodeInt(p,m.args&&m.reverseArgs[0]);if(h==="bool")return this._encodeBool(p);if(h==="objDesc")return this._encodeStr(p,h);throw new Error("Unsupported tag: "+h)},d.prototype._isNumstr=function(h){return/^[0-9 ]*$/.test(h)},d.prototype._isPrintstr=function(h){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(h)}},{"../base/buffer":172,"../base/reporter":175,"minimalistic-assert":453}],175:[function(t,r,l){const i=t("inherits");function s(o){this._reporterState={obj:null,path:[],options:o||{},errors:[]}}function a(o,n){this.path=o,this.rethrow(n)}l.Reporter=s,s.prototype.isError=function(o){return o instanceof a},s.prototype.save=function(){const o=this._reporterState;return{obj:o.obj,pathLen:o.path.length}},s.prototype.restore=function(o){const n=this._reporterState;n.obj=o.obj,n.path=n.path.slice(0,o.pathLen)},s.prototype.enterKey=function(o){return this._reporterState.path.push(o)},s.prototype.exitKey=function(o){const n=this._reporterState;n.path=n.path.slice(0,o-1)},s.prototype.leaveKey=function(o,n,c){const d=this._reporterState;this.exitKey(o),d.obj!==null&&(d.obj[n]=c)},s.prototype.path=function(){return this._reporterState.path.join("/")},s.prototype.enterObject=function(){const o=this._reporterState,n=o.obj;return o.obj={},n},s.prototype.leaveObject=function(o){const n=this._reporterState,c=n.obj;return n.obj=o,c},s.prototype.error=function(o){let n;const c=this._reporterState,d=o instanceof a;if(n=d?o:new a(c.path.map(function(u){return"["+JSON.stringify(u)+"]"}).join(""),o.message||o,o.stack),!c.options.partial)throw n;return d||c.errors.push(n),n},s.prototype.wrapResult=function(o){const n=this._reporterState;return n.options.partial?{result:this.isError(o)?null:o,errors:n.errors}:o},i(a,Error),a.prototype.rethrow=function(o){if(this.message=o+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,a),!this.stack)try{throw new Error(this.message)}catch(n){this.stack=n.stack}return this}},{inherits:440}],176:[function(t,r,l){function i(s){const a={};return Object.keys(s).forEach(function(o){(0|o)==o&&(o|=0);const n=s[o];a[n]=o}),a}l.tagClass={0:"universal",1:"application",2:"context",3:"private"},l.tagClassByName=i(l.tagClass),l.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},l.tagByName=i(l.tag)},{}],177:[function(t,r,l){const i=l;i._reverse=function(s){const a={};return Object.keys(s).forEach(function(o){(0|o)==o&&(o|=0);const n=s[o];a[n]=o}),a},i.der=t("./der")},{"./der":176}],178:[function(t,r,l){const i=t("inherits"),s=t("bn.js"),a=t("../base/buffer").DecoderBuffer,o=t("../base/node"),n=t("../constants/der");function c(p){this.enc="der",this.name=p.name,this.entity=p,this.tree=new d,this.tree._init(p.body)}function d(p){o.call(this,"der",p)}function u(p,m){let f=p.readUInt8(m);if(p.isError(f))return f;const b=n.tagClass[f>>6],y=(32&f)==0;if((31&f)==31){let _=f;for(f=0;(128&_)==128;){if(_=p.readUInt8(m),p.isError(_))return _;f<<=7,f|=127&_}}else f&=31;return{cls:b,primitive:y,tag:f,tagStr:n.tag[f]}}function h(p,m,f){let b=p.readUInt8(f);if(p.isError(b))return b;if(!m&&b===128)return null;if((128&b)==0)return b;const y=127&b;if(y>4)return p.error("length octect is too long");b=0;for(let _=0;_<y;_++){b<<=8;const E=p.readUInt8(f);if(p.isError(E))return E;b|=E}return b}r.exports=c,c.prototype.decode=function(p,m){return a.isDecoderBuffer(p)||(p=new a(p,m)),this.tree._decode(p,m)},i(d,o),d.prototype._peekTag=function(p,m,f){if(p.isEmpty())return!1;const b=p.save(),y=u(p,'Failed to peek tag: "'+m+'"');return p.isError(y)?y:(p.restore(b),y.tag===m||y.tagStr===m||y.tagStr+"of"===m||f)},d.prototype._decodeTag=function(p,m,f){const b=u(p,'Failed to decode tag of "'+m+'"');if(p.isError(b))return b;let y=h(p,b.primitive,'Failed to get length of "'+m+'"');if(p.isError(y))return y;if(!f&&b.tag!==m&&b.tagStr!==m&&b.tagStr+"of"!==m)return p.error('Failed to match tag: "'+m+'"');if(b.primitive||y!==null)return p.skip(y,'Failed to match body of: "'+m+'"');const _=p.save(),E=this._skipUntilEnd(p,'Failed to skip indefinite length body: "'+this.tag+'"');return p.isError(E)?E:(y=p.offset-_.offset,p.restore(_),p.skip(y,'Failed to match body of: "'+m+'"'))},d.prototype._skipUntilEnd=function(p,m){for(;;){const f=u(p,m);if(p.isError(f))return f;const b=h(p,f.primitive,m);if(p.isError(b))return b;let y;if(y=f.primitive||b!==null?p.skip(b):this._skipUntilEnd(p,m),p.isError(y))return y;if(f.tagStr==="end")break}},d.prototype._decodeList=function(p,m,f,b){const y=[];for(;!p.isEmpty();){const _=this._peekTag(p,"end");if(p.isError(_))return _;const E=f.decode(p,"der",b);if(p.isError(E)&&_)break;y.push(E)}return y},d.prototype._decodeStr=function(p,m){if(m==="bitstr"){const f=p.readUInt8();return p.isError(f)?f:{unused:f,data:p.raw()}}if(m==="bmpstr"){const f=p.raw();if(f.length%2==1)return p.error("Decoding of string type: bmpstr length mismatch");let b="";for(let y=0;y<f.length/2;y++)b+=String.fromCharCode(f.readUInt16BE(2*y));return b}if(m==="numstr"){const f=p.raw().toString("ascii");return this._isNumstr(f)?f:p.error("Decoding of string type: numstr unsupported characters")}if(m==="octstr"||m==="objDesc")return p.raw();if(m==="printstr"){const f=p.raw().toString("ascii");return this._isPrintstr(f)?f:p.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(m)?p.raw().toString():p.error("Decoding of string type: "+m+" unsupported")},d.prototype._decodeObjid=function(p,m,f){let b;const y=[];let _=0,E=0;for(;!p.isEmpty();)E=p.readUInt8(),_<<=7,_|=127&E,(128&E)==0&&(y.push(_),_=0);128&E&&y.push(_);const M=y[0]/40|0,D=y[0]%40;if(b=f?y:[M,D].concat(y.slice(1)),m){let z=m[b.join(" ")];z===void 0&&(z=m[b.join(".")]),z!==void 0&&(b=z)}return b},d.prototype._decodeTime=function(p,m){const f=p.raw().toString();let b,y,_,E,M,D;if(m==="gentime")b=0|f.slice(0,4),y=0|f.slice(4,6),_=0|f.slice(6,8),E=0|f.slice(8,10),M=0|f.slice(10,12),D=0|f.slice(12,14);else{if(m!=="utctime")return p.error("Decoding "+m+" time is not supported yet");b=0|f.slice(0,2),y=0|f.slice(2,4),_=0|f.slice(4,6),E=0|f.slice(6,8),M=0|f.slice(8,10),D=0|f.slice(10,12),b=b<70?2e3+b:1900+b}return Date.UTC(b,y-1,_,E,M,D,0)},d.prototype._decodeNull=function(){return null},d.prototype._decodeBool=function(p){const m=p.readUInt8();return p.isError(m)?m:m!==0},d.prototype._decodeInt=function(p,m){const f=p.raw();let b=new s(f);return m&&(b=m[b.toString(10)]||b),b},d.prototype._use=function(p,m){return typeof p=="function"&&(p=p(m)),p._getDecoder("der").tree}},{"../base/buffer":172,"../base/node":174,"../constants/der":176,"bn.js":184,inherits:440}],179:[function(t,r,l){const i=l;i.der=t("./der"),i.pem=t("./pem")},{"./der":178,"./pem":180}],180:[function(t,r,l){const i=t("inherits"),s=t("safer-buffer").Buffer,a=t("./der");function o(n){a.call(this,n),this.enc="pem"}i(o,a),r.exports=o,o.prototype.decode=function(n,c){const d=n.toString().split(/[\r\n]+/g),u=c.label.toUpperCase(),h=/^-----(BEGIN|END) ([^-]+)-----$/;let p=-1,m=-1;for(let y=0;y<d.length;y++){const _=d[y].match(h);if(_!==null&&_[2]===u){if(p!==-1){if(_[1]!=="END")break;m=y;break}if(_[1]!=="BEGIN")break;p=y}}if(p===-1||m===-1)throw new Error("PEM section not found for: "+u);const f=d.slice(p+1,m).join("");f.replace(/[^a-z0-9+/=]+/gi,"");const b=s.from(f,"base64");return a.prototype.decode.call(this,b,c)}},{"./der":178,inherits:440,"safer-buffer":495}],181:[function(t,r,l){const i=t("inherits"),s=t("safer-buffer").Buffer,a=t("../base/node"),o=t("../constants/der");function n(u){this.enc="der",this.name=u.name,this.entity=u,this.tree=new c,this.tree._init(u.body)}function c(u){a.call(this,"der",u)}function d(u){return u<10?"0"+u:u}r.exports=n,n.prototype.encode=function(u,h){return this.tree._encode(u,h).join()},i(c,a),c.prototype._encodeComposite=function(u,h,p,m){const f=function(_,E,M,D){let z;if(_==="seqof"?_="seq":_==="setof"&&(_="set"),o.tagByName.hasOwnProperty(_))z=o.tagByName[_];else{if(typeof _!="number"||(0|_)!==_)return D.error("Unknown tag: "+_);z=_}return z>=31?D.error("Multi-octet tag encoding unsupported"):(E||(z|=32),z|=o.tagClassByName[M||"universal"]<<6,z)}(u,h,p,this.reporter);if(m.length<128){const _=s.alloc(2);return _[0]=f,_[1]=m.length,this._createEncoderBuffer([_,m])}let b=1;for(let _=m.length;_>=256;_>>=8)b++;const y=s.alloc(2+b);y[0]=f,y[1]=128|b;for(let _=1+b,E=m.length;E>0;_--,E>>=8)y[_]=255&E;return this._createEncoderBuffer([y,m])},c.prototype._encodeStr=function(u,h){if(h==="bitstr")return this._createEncoderBuffer([0|u.unused,u.data]);if(h==="bmpstr"){const p=s.alloc(2*u.length);for(let m=0;m<u.length;m++)p.writeUInt16BE(u.charCodeAt(m),2*m);return this._createEncoderBuffer(p)}return h==="numstr"?this._isNumstr(u)?this._createEncoderBuffer(u):this.reporter.error("Encoding of string type: numstr supports only digits and space"):h==="printstr"?this._isPrintstr(u)?this._createEncoderBuffer(u):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(h)||h==="objDesc"?this._createEncoderBuffer(u):this.reporter.error("Encoding of string type: "+h+" unsupported")},c.prototype._encodeObjid=function(u,h,p){if(typeof u=="string"){if(!h)return this.reporter.error("string objid given, but no values map found");if(!h.hasOwnProperty(u))return this.reporter.error("objid not found in values map");u=h[u].split(/[\s.]+/g);for(let y=0;y<u.length;y++)u[y]|=0}else if(Array.isArray(u)){u=u.slice();for(let y=0;y<u.length;y++)u[y]|=0}if(!Array.isArray(u))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(u));if(!p){if(u[1]>=40)return this.reporter.error("Second objid identifier OOB");u.splice(0,2,40*u[0]+u[1])}let m=0;for(let y=0;y<u.length;y++){let _=u[y];for(m++;_>=128;_>>=7)m++}const f=s.alloc(m);let b=f.length-1;for(let y=u.length-1;y>=0;y--){let _=u[y];for(f[b--]=127&_;(_>>=7)>0;)f[b--]=128|127&_}return this._createEncoderBuffer(f)},c.prototype._encodeTime=function(u,h){let p;const m=new Date(u);return h==="gentime"?p=[d(m.getUTCFullYear()),d(m.getUTCMonth()+1),d(m.getUTCDate()),d(m.getUTCHours()),d(m.getUTCMinutes()),d(m.getUTCSeconds()),"Z"].join(""):h==="utctime"?p=[d(m.getUTCFullYear()%100),d(m.getUTCMonth()+1),d(m.getUTCDate()),d(m.getUTCHours()),d(m.getUTCMinutes()),d(m.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+h+" time is not supported yet"),this._encodeStr(p,"octstr")},c.prototype._encodeNull=function(){return this._createEncoderBuffer("")},c.prototype._encodeInt=function(u,h){if(typeof u=="string"){if(!h)return this.reporter.error("String int or enum given, but no values map");if(!h.hasOwnProperty(u))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(u));u=h[u]}if(typeof u!="number"&&!s.isBuffer(u)){const f=u.toArray();!u.sign&&128&f[0]&&f.unshift(0),u=s.from(f)}if(s.isBuffer(u)){let f=u.length;u.length===0&&f++;const b=s.alloc(f);return u.copy(b),u.length===0&&(b[0]=0),this._createEncoderBuffer(b)}if(u<128)return this._createEncoderBuffer(u);if(u<256)return this._createEncoderBuffer([0,u]);let p=1;for(let f=u;f>=256;f>>=8)p++;const m=new Array(p);for(let f=m.length-1;f>=0;f--)m[f]=255&u,u>>=8;return 128&m[0]&&m.unshift(0),this._createEncoderBuffer(s.from(m))},c.prototype._encodeBool=function(u){return this._createEncoderBuffer(u?255:0)},c.prototype._use=function(u,h){return typeof u=="function"&&(u=u(h)),u._getEncoder("der").tree},c.prototype._skipDefault=function(u,h,p){const m=this._baseState;let f;if(m.default===null)return!1;const b=u.join();if(m.defaultBuffer===void 0&&(m.defaultBuffer=this._encodeValue(m.default,h,p).join()),b.length!==m.defaultBuffer.length)return!1;for(f=0;f<b.length;f++)if(b[f]!==m.defaultBuffer[f])return!1;return!0}},{"../base/node":174,"../constants/der":176,inherits:440,"safer-buffer":495}],182:[function(t,r,l){const i=l;i.der=t("./der"),i.pem=t("./pem")},{"./der":181,"./pem":183}],183:[function(t,r,l){const i=t("inherits"),s=t("./der");function a(o){s.call(this,o),this.enc="pem"}i(a,s),r.exports=a,a.prototype.encode=function(o,n){const c=s.prototype.encode.call(this,o).toString("base64"),d=["-----BEGIN "+n.label+"-----"];for(let u=0;u<c.length;u+=64)d.push(c.slice(u,u+64));return d.push("-----END "+n.label+"-----"),d.join(`
`)}},{"./der":181,inherits:440}],184:[function(t,r,l){(function(i,s){function a(C,R){if(!C)throw new Error(R||"Assertion failed")}function o(C,R){C.super_=R;var k=function(){};k.prototype=R.prototype,C.prototype=new k,C.prototype.constructor=C}function n(C,R,k){if(n.isBN(C))return C;this.negative=0,this.words=null,this.length=0,this.red=null,C!==null&&(R!=="le"&&R!=="be"||(k=R,R=10),this._init(C||0,R||10,k||"be"))}var c;typeof i=="object"?i.exports=n:(void 0).BN=n,n.BN=n,n.wordSize=26;try{c=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:t("buffer").Buffer}catch{}function d(C,R){var k=C.charCodeAt(R);return k>=65&&k<=70?k-55:k>=97&&k<=102?k-87:k-48&15}function u(C,R,k){var v=d(C,k);return k-1>=R&&(v|=d(C,k-1)<<4),v}function h(C,R,k,v){for(var w=0,x=Math.min(C.length,k),S=R;S<x;S++){var T=C.charCodeAt(S)-48;w*=v,w+=T>=49?T-49+10:T>=17?T-17+10:T}return w}n.isBN=function(C){return C instanceof n||C!==null&&typeof C=="object"&&C.constructor.wordSize===n.wordSize&&Array.isArray(C.words)},n.max=function(C,R){return C.cmp(R)>0?C:R},n.min=function(C,R){return C.cmp(R)<0?C:R},n.prototype._init=function(C,R,k){if(typeof C=="number")return this._initNumber(C,R,k);if(typeof C=="object")return this._initArray(C,R,k);R==="hex"&&(R=16),a(R===(0|R)&&R>=2&&R<=36);var v=0;(C=C.toString().replace(/\s+/g,""))[0]==="-"&&(v++,this.negative=1),v<C.length&&(R===16?this._parseHex(C,v,k):(this._parseBase(C,R,v),k==="le"&&this._initArray(this.toArray(),R,k)))},n.prototype._initNumber=function(C,R,k){C<0&&(this.negative=1,C=-C),C<67108864?(this.words=[67108863&C],this.length=1):C<4503599627370496?(this.words=[67108863&C,C/67108864&67108863],this.length=2):(a(C<9007199254740992),this.words=[67108863&C,C/67108864&67108863,1],this.length=3),k==="le"&&this._initArray(this.toArray(),R,k)},n.prototype._initArray=function(C,R,k){if(a(typeof C.length=="number"),C.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(C.length/3),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var w,x,S=0;if(k==="be")for(v=C.length-1,w=0;v>=0;v-=3)x=C[v]|C[v-1]<<8|C[v-2]<<16,this.words[w]|=x<<S&67108863,this.words[w+1]=x>>>26-S&67108863,(S+=24)>=26&&(S-=26,w++);else if(k==="le")for(v=0,w=0;v<C.length;v+=3)x=C[v]|C[v+1]<<8|C[v+2]<<16,this.words[w]|=x<<S&67108863,this.words[w+1]=x>>>26-S&67108863,(S+=24)>=26&&(S-=26,w++);return this.strip()},n.prototype._parseHex=function(C,R,k){this.length=Math.ceil((C.length-R)/6),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var w,x=0,S=0;if(k==="be")for(v=C.length-1;v>=R;v-=2)w=u(C,R,v)<<x,this.words[S]|=67108863&w,x>=18?(x-=18,S+=1,this.words[S]|=w>>>26):x+=8;else for(v=(C.length-R)%2==0?R+1:R;v<C.length;v+=2)w=u(C,R,v)<<x,this.words[S]|=67108863&w,x>=18?(x-=18,S+=1,this.words[S]|=w>>>26):x+=8;this.strip()},n.prototype._parseBase=function(C,R,k){this.words=[0],this.length=1;for(var v=0,w=1;w<=67108863;w*=R)v++;v--,w=w/R|0;for(var x=C.length-k,S=x%v,T=Math.min(x,x-S)+k,L=0,j=k;j<T;j+=v)L=h(C,j,j+v,R),this.imuln(w),this.words[0]+L<67108864?this.words[0]+=L:this._iaddn(L);if(S!==0){var U=1;for(L=h(C,j,C.length,R),j=0;j<S;j++)U*=R;this.imuln(U),this.words[0]+L<67108864?this.words[0]+=L:this._iaddn(L)}this.strip()},n.prototype.copy=function(C){C.words=new Array(this.length);for(var R=0;R<this.length;R++)C.words[R]=this.words[R];C.length=this.length,C.negative=this.negative,C.red=this.red},n.prototype.clone=function(){var C=new n(null);return this.copy(C),C},n.prototype._expand=function(C){for(;this.length<C;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],m=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function b(C,R,k){k.negative=R.negative^C.negative;var v=C.length+R.length|0;k.length=v,v=v-1|0;var w=0|C.words[0],x=0|R.words[0],S=w*x,T=67108863&S,L=S/67108864|0;k.words[0]=T;for(var j=1;j<v;j++){for(var U=L>>>26,W=67108863&L,Y=Math.min(j,R.length-1),F=Math.max(0,j-C.length+1);F<=Y;F++){var X=j-F|0;U+=(S=(w=0|C.words[X])*(x=0|R.words[F])+W)/67108864|0,W=67108863&S}k.words[j]=0|W,L=0|U}return L!==0?k.words[j]=0|L:k.length--,k.strip()}n.prototype.toString=function(C,R){var k;if(R=0|R||1,(C=C||10)===16||C==="hex"){k="";for(var v=0,w=0,x=0;x<this.length;x++){var S=this.words[x],T=(16777215&(S<<v|w)).toString(16);k=(w=S>>>24-v&16777215)!==0||x!==this.length-1?p[6-T.length]+T+k:T+k,(v+=2)>=26&&(v-=26,x--)}for(w!==0&&(k=w.toString(16)+k);k.length%R!=0;)k="0"+k;return this.negative!==0&&(k="-"+k),k}if(C===(0|C)&&C>=2&&C<=36){var L=m[C],j=f[C];k="";var U=this.clone();for(U.negative=0;!U.isZero();){var W=U.modn(j).toString(C);k=(U=U.idivn(j)).isZero()?W+k:p[L-W.length]+W+k}for(this.isZero()&&(k="0"+k);k.length%R!=0;)k="0"+k;return this.negative!==0&&(k="-"+k),k}a(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var C=this.words[0];return this.length===2?C+=67108864*this.words[1]:this.length===3&&this.words[2]===1?C+=4503599627370496+67108864*this.words[1]:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-C:C},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(C,R){return a(c!==void 0),this.toArrayLike(c,C,R)},n.prototype.toArray=function(C,R){return this.toArrayLike(Array,C,R)},n.prototype.toArrayLike=function(C,R,k){var v=this.byteLength(),w=k||Math.max(1,v);a(v<=w,"byte array longer than desired length"),a(w>0,"Requested array length <= 0"),this.strip();var x,S,T=R==="le",L=new C(w),j=this.clone();if(T){for(S=0;!j.isZero();S++)x=j.andln(255),j.iushrn(8),L[S]=x;for(;S<w;S++)L[S]=0}else{for(S=0;S<w-v;S++)L[S]=0;for(S=0;!j.isZero();S++)x=j.andln(255),j.iushrn(8),L[w-S-1]=x}return L},Math.clz32?n.prototype._countBits=function(C){return 32-Math.clz32(C)}:n.prototype._countBits=function(C){var R=C,k=0;return R>=4096&&(k+=13,R>>>=13),R>=64&&(k+=7,R>>>=7),R>=8&&(k+=4,R>>>=4),R>=2&&(k+=2,R>>>=2),k+R},n.prototype._zeroBits=function(C){if(C===0)return 26;var R=C,k=0;return(8191&R)==0&&(k+=13,R>>>=13),(127&R)==0&&(k+=7,R>>>=7),(15&R)==0&&(k+=4,R>>>=4),(3&R)==0&&(k+=2,R>>>=2),(1&R)==0&&k++,k},n.prototype.bitLength=function(){var C=this.words[this.length-1],R=this._countBits(C);return 26*(this.length-1)+R},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var C=0,R=0;R<this.length;R++){var k=this._zeroBits(this.words[R]);if(C+=k,k!==26)break}return C},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(C){return this.negative!==0?this.abs().inotn(C).iaddn(1):this.clone()},n.prototype.fromTwos=function(C){return this.testn(C-1)?this.notn(C).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(C){for(;this.length<C.length;)this.words[this.length++]=0;for(var R=0;R<C.length;R++)this.words[R]=this.words[R]|C.words[R];return this.strip()},n.prototype.ior=function(C){return a((this.negative|C.negative)==0),this.iuor(C)},n.prototype.or=function(C){return this.length>C.length?this.clone().ior(C):C.clone().ior(this)},n.prototype.uor=function(C){return this.length>C.length?this.clone().iuor(C):C.clone().iuor(this)},n.prototype.iuand=function(C){var R;R=this.length>C.length?C:this;for(var k=0;k<R.length;k++)this.words[k]=this.words[k]&C.words[k];return this.length=R.length,this.strip()},n.prototype.iand=function(C){return a((this.negative|C.negative)==0),this.iuand(C)},n.prototype.and=function(C){return this.length>C.length?this.clone().iand(C):C.clone().iand(this)},n.prototype.uand=function(C){return this.length>C.length?this.clone().iuand(C):C.clone().iuand(this)},n.prototype.iuxor=function(C){var R,k;this.length>C.length?(R=this,k=C):(R=C,k=this);for(var v=0;v<k.length;v++)this.words[v]=R.words[v]^k.words[v];if(this!==R)for(;v<R.length;v++)this.words[v]=R.words[v];return this.length=R.length,this.strip()},n.prototype.ixor=function(C){return a((this.negative|C.negative)==0),this.iuxor(C)},n.prototype.xor=function(C){return this.length>C.length?this.clone().ixor(C):C.clone().ixor(this)},n.prototype.uxor=function(C){return this.length>C.length?this.clone().iuxor(C):C.clone().iuxor(this)},n.prototype.inotn=function(C){a(typeof C=="number"&&C>=0);var R=0|Math.ceil(C/26),k=C%26;this._expand(R),k>0&&R--;for(var v=0;v<R;v++)this.words[v]=67108863&~this.words[v];return k>0&&(this.words[v]=~this.words[v]&67108863>>26-k),this.strip()},n.prototype.notn=function(C){return this.clone().inotn(C)},n.prototype.setn=function(C,R){a(typeof C=="number"&&C>=0);var k=C/26|0,v=C%26;return this._expand(k+1),this.words[k]=R?this.words[k]|1<<v:this.words[k]&~(1<<v),this.strip()},n.prototype.iadd=function(C){var R,k,v;if(this.negative!==0&&C.negative===0)return this.negative=0,R=this.isub(C),this.negative^=1,this._normSign();if(this.negative===0&&C.negative!==0)return C.negative=0,R=this.isub(C),C.negative=1,R._normSign();this.length>C.length?(k=this,v=C):(k=C,v=this);for(var w=0,x=0;x<v.length;x++)R=(0|k.words[x])+(0|v.words[x])+w,this.words[x]=67108863&R,w=R>>>26;for(;w!==0&&x<k.length;x++)R=(0|k.words[x])+w,this.words[x]=67108863&R,w=R>>>26;if(this.length=k.length,w!==0)this.words[this.length]=w,this.length++;else if(k!==this)for(;x<k.length;x++)this.words[x]=k.words[x];return this},n.prototype.add=function(C){var R;return C.negative!==0&&this.negative===0?(C.negative=0,R=this.sub(C),C.negative^=1,R):C.negative===0&&this.negative!==0?(this.negative=0,R=C.sub(this),this.negative=1,R):this.length>C.length?this.clone().iadd(C):C.clone().iadd(this)},n.prototype.isub=function(C){if(C.negative!==0){C.negative=0;var R=this.iadd(C);return C.negative=1,R._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(C),this.negative=1,this._normSign();var k,v,w=this.cmp(C);if(w===0)return this.negative=0,this.length=1,this.words[0]=0,this;w>0?(k=this,v=C):(k=C,v=this);for(var x=0,S=0;S<v.length;S++)x=(R=(0|k.words[S])-(0|v.words[S])+x)>>26,this.words[S]=67108863&R;for(;x!==0&&S<k.length;S++)x=(R=(0|k.words[S])+x)>>26,this.words[S]=67108863&R;if(x===0&&S<k.length&&k!==this)for(;S<k.length;S++)this.words[S]=k.words[S];return this.length=Math.max(this.length,S),k!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(C){return this.clone().isub(C)};var y=function(C,R,k){var v,w,x,S=C.words,T=R.words,L=k.words,j=0,U=0|S[0],W=8191&U,Y=U>>>13,F=0|S[1],X=8191&F,P=F>>>13,I=0|S[2],V=8191&I,Q=I>>>13,G=0|S[3],q=8191&G,J=G>>>13,it=0|S[4],nt=8191&it,Z=it>>>13,st=0|S[5],rt=8191&st,lt=st>>>13,at=0|S[6],ct=8191&at,ut=at>>>13,dt=0|S[7],gt=8191&dt,vt=dt>>>13,_t=0|S[8],wt=8191&_t,Ot=_t>>>13,Pt=0|S[9],Dt=8191&Pt,jt=Pt>>>13,Mt=0|T[0],St=8191&Mt,kt=Mt>>>13,Nt=0|T[1],Lt=8191&Nt,be=Nt>>>13,Re=0|T[2],qt=8191&Re,Ae=Re>>>13,me=0|T[3],se=8191&me,He=me>>>13,ke=0|T[4],Yt=8191&ke,_e=ke>>>13,je=0|T[5],Qt=8191&je,Te=je>>>13,Be=0|T[6],ae=8191&Be,ht=Be>>>13,pt=0|T[7],bt=8191&pt,Ct=pt>>>13,Xt=0|T[8],Rt=8191&Xt,te=Xt>>>13,Gt=0|T[9],Vt=8191&Gt,ne=Gt>>>13;k.negative=C.negative^R.negative,k.length=19;var ee=(j+(v=Math.imul(W,St))|0)+((8191&(w=(w=Math.imul(W,kt))+Math.imul(Y,St)|0))<<13)|0;j=((x=Math.imul(Y,kt))+(w>>>13)|0)+(ee>>>26)|0,ee&=67108863,v=Math.imul(X,St),w=(w=Math.imul(X,kt))+Math.imul(P,St)|0,x=Math.imul(P,kt);var de=(j+(v=v+Math.imul(W,Lt)|0)|0)+((8191&(w=(w=w+Math.imul(W,be)|0)+Math.imul(Y,Lt)|0))<<13)|0;j=((x=x+Math.imul(Y,be)|0)+(w>>>13)|0)+(de>>>26)|0,de&=67108863,v=Math.imul(V,St),w=(w=Math.imul(V,kt))+Math.imul(Q,St)|0,x=Math.imul(Q,kt),v=v+Math.imul(X,Lt)|0,w=(w=w+Math.imul(X,be)|0)+Math.imul(P,Lt)|0,x=x+Math.imul(P,be)|0;var or=(j+(v=v+Math.imul(W,qt)|0)|0)+((8191&(w=(w=w+Math.imul(W,Ae)|0)+Math.imul(Y,qt)|0))<<13)|0;j=((x=x+Math.imul(Y,Ae)|0)+(w>>>13)|0)+(or>>>26)|0,or&=67108863,v=Math.imul(q,St),w=(w=Math.imul(q,kt))+Math.imul(J,St)|0,x=Math.imul(J,kt),v=v+Math.imul(V,Lt)|0,w=(w=w+Math.imul(V,be)|0)+Math.imul(Q,Lt)|0,x=x+Math.imul(Q,be)|0,v=v+Math.imul(X,qt)|0,w=(w=w+Math.imul(X,Ae)|0)+Math.imul(P,qt)|0,x=x+Math.imul(P,Ae)|0;var Xe=(j+(v=v+Math.imul(W,se)|0)|0)+((8191&(w=(w=w+Math.imul(W,He)|0)+Math.imul(Y,se)|0))<<13)|0;j=((x=x+Math.imul(Y,He)|0)+(w>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,v=Math.imul(nt,St),w=(w=Math.imul(nt,kt))+Math.imul(Z,St)|0,x=Math.imul(Z,kt),v=v+Math.imul(q,Lt)|0,w=(w=w+Math.imul(q,be)|0)+Math.imul(J,Lt)|0,x=x+Math.imul(J,be)|0,v=v+Math.imul(V,qt)|0,w=(w=w+Math.imul(V,Ae)|0)+Math.imul(Q,qt)|0,x=x+Math.imul(Q,Ae)|0,v=v+Math.imul(X,se)|0,w=(w=w+Math.imul(X,He)|0)+Math.imul(P,se)|0,x=x+Math.imul(P,He)|0;var wr=(j+(v=v+Math.imul(W,Yt)|0)|0)+((8191&(w=(w=w+Math.imul(W,_e)|0)+Math.imul(Y,Yt)|0))<<13)|0;j=((x=x+Math.imul(Y,_e)|0)+(w>>>13)|0)+(wr>>>26)|0,wr&=67108863,v=Math.imul(rt,St),w=(w=Math.imul(rt,kt))+Math.imul(lt,St)|0,x=Math.imul(lt,kt),v=v+Math.imul(nt,Lt)|0,w=(w=w+Math.imul(nt,be)|0)+Math.imul(Z,Lt)|0,x=x+Math.imul(Z,be)|0,v=v+Math.imul(q,qt)|0,w=(w=w+Math.imul(q,Ae)|0)+Math.imul(J,qt)|0,x=x+Math.imul(J,Ae)|0,v=v+Math.imul(V,se)|0,w=(w=w+Math.imul(V,He)|0)+Math.imul(Q,se)|0,x=x+Math.imul(Q,He)|0,v=v+Math.imul(X,Yt)|0,w=(w=w+Math.imul(X,_e)|0)+Math.imul(P,Yt)|0,x=x+Math.imul(P,_e)|0;var _r=(j+(v=v+Math.imul(W,Qt)|0)|0)+((8191&(w=(w=w+Math.imul(W,Te)|0)+Math.imul(Y,Qt)|0))<<13)|0;j=((x=x+Math.imul(Y,Te)|0)+(w>>>13)|0)+(_r>>>26)|0,_r&=67108863,v=Math.imul(ct,St),w=(w=Math.imul(ct,kt))+Math.imul(ut,St)|0,x=Math.imul(ut,kt),v=v+Math.imul(rt,Lt)|0,w=(w=w+Math.imul(rt,be)|0)+Math.imul(lt,Lt)|0,x=x+Math.imul(lt,be)|0,v=v+Math.imul(nt,qt)|0,w=(w=w+Math.imul(nt,Ae)|0)+Math.imul(Z,qt)|0,x=x+Math.imul(Z,Ae)|0,v=v+Math.imul(q,se)|0,w=(w=w+Math.imul(q,He)|0)+Math.imul(J,se)|0,x=x+Math.imul(J,He)|0,v=v+Math.imul(V,Yt)|0,w=(w=w+Math.imul(V,_e)|0)+Math.imul(Q,Yt)|0,x=x+Math.imul(Q,_e)|0,v=v+Math.imul(X,Qt)|0,w=(w=w+Math.imul(X,Te)|0)+Math.imul(P,Qt)|0,x=x+Math.imul(P,Te)|0;var gs=(j+(v=v+Math.imul(W,ae)|0)|0)+((8191&(w=(w=w+Math.imul(W,ht)|0)+Math.imul(Y,ae)|0))<<13)|0;j=((x=x+Math.imul(Y,ht)|0)+(w>>>13)|0)+(gs>>>26)|0,gs&=67108863,v=Math.imul(gt,St),w=(w=Math.imul(gt,kt))+Math.imul(vt,St)|0,x=Math.imul(vt,kt),v=v+Math.imul(ct,Lt)|0,w=(w=w+Math.imul(ct,be)|0)+Math.imul(ut,Lt)|0,x=x+Math.imul(ut,be)|0,v=v+Math.imul(rt,qt)|0,w=(w=w+Math.imul(rt,Ae)|0)+Math.imul(lt,qt)|0,x=x+Math.imul(lt,Ae)|0,v=v+Math.imul(nt,se)|0,w=(w=w+Math.imul(nt,He)|0)+Math.imul(Z,se)|0,x=x+Math.imul(Z,He)|0,v=v+Math.imul(q,Yt)|0,w=(w=w+Math.imul(q,_e)|0)+Math.imul(J,Yt)|0,x=x+Math.imul(J,_e)|0,v=v+Math.imul(V,Qt)|0,w=(w=w+Math.imul(V,Te)|0)+Math.imul(Q,Qt)|0,x=x+Math.imul(Q,Te)|0,v=v+Math.imul(X,ae)|0,w=(w=w+Math.imul(X,ht)|0)+Math.imul(P,ae)|0,x=x+Math.imul(P,ht)|0;var ot=(j+(v=v+Math.imul(W,bt)|0)|0)+((8191&(w=(w=w+Math.imul(W,Ct)|0)+Math.imul(Y,bt)|0))<<13)|0;j=((x=x+Math.imul(Y,Ct)|0)+(w>>>13)|0)+(ot>>>26)|0,ot&=67108863,v=Math.imul(wt,St),w=(w=Math.imul(wt,kt))+Math.imul(Ot,St)|0,x=Math.imul(Ot,kt),v=v+Math.imul(gt,Lt)|0,w=(w=w+Math.imul(gt,be)|0)+Math.imul(vt,Lt)|0,x=x+Math.imul(vt,be)|0,v=v+Math.imul(ct,qt)|0,w=(w=w+Math.imul(ct,Ae)|0)+Math.imul(ut,qt)|0,x=x+Math.imul(ut,Ae)|0,v=v+Math.imul(rt,se)|0,w=(w=w+Math.imul(rt,He)|0)+Math.imul(lt,se)|0,x=x+Math.imul(lt,He)|0,v=v+Math.imul(nt,Yt)|0,w=(w=w+Math.imul(nt,_e)|0)+Math.imul(Z,Yt)|0,x=x+Math.imul(Z,_e)|0,v=v+Math.imul(q,Qt)|0,w=(w=w+Math.imul(q,Te)|0)+Math.imul(J,Qt)|0,x=x+Math.imul(J,Te)|0,v=v+Math.imul(V,ae)|0,w=(w=w+Math.imul(V,ht)|0)+Math.imul(Q,ae)|0,x=x+Math.imul(Q,ht)|0,v=v+Math.imul(X,bt)|0,w=(w=w+Math.imul(X,Ct)|0)+Math.imul(P,bt)|0,x=x+Math.imul(P,Ct)|0;var mt=(j+(v=v+Math.imul(W,Rt)|0)|0)+((8191&(w=(w=w+Math.imul(W,te)|0)+Math.imul(Y,Rt)|0))<<13)|0;j=((x=x+Math.imul(Y,te)|0)+(w>>>13)|0)+(mt>>>26)|0,mt&=67108863,v=Math.imul(Dt,St),w=(w=Math.imul(Dt,kt))+Math.imul(jt,St)|0,x=Math.imul(jt,kt),v=v+Math.imul(wt,Lt)|0,w=(w=w+Math.imul(wt,be)|0)+Math.imul(Ot,Lt)|0,x=x+Math.imul(Ot,be)|0,v=v+Math.imul(gt,qt)|0,w=(w=w+Math.imul(gt,Ae)|0)+Math.imul(vt,qt)|0,x=x+Math.imul(vt,Ae)|0,v=v+Math.imul(ct,se)|0,w=(w=w+Math.imul(ct,He)|0)+Math.imul(ut,se)|0,x=x+Math.imul(ut,He)|0,v=v+Math.imul(rt,Yt)|0,w=(w=w+Math.imul(rt,_e)|0)+Math.imul(lt,Yt)|0,x=x+Math.imul(lt,_e)|0,v=v+Math.imul(nt,Qt)|0,w=(w=w+Math.imul(nt,Te)|0)+Math.imul(Z,Qt)|0,x=x+Math.imul(Z,Te)|0,v=v+Math.imul(q,ae)|0,w=(w=w+Math.imul(q,ht)|0)+Math.imul(J,ae)|0,x=x+Math.imul(J,ht)|0,v=v+Math.imul(V,bt)|0,w=(w=w+Math.imul(V,Ct)|0)+Math.imul(Q,bt)|0,x=x+Math.imul(Q,Ct)|0,v=v+Math.imul(X,Rt)|0,w=(w=w+Math.imul(X,te)|0)+Math.imul(P,Rt)|0,x=x+Math.imul(P,te)|0;var yt=(j+(v=v+Math.imul(W,Vt)|0)|0)+((8191&(w=(w=w+Math.imul(W,ne)|0)+Math.imul(Y,Vt)|0))<<13)|0;j=((x=x+Math.imul(Y,ne)|0)+(w>>>13)|0)+(yt>>>26)|0,yt&=67108863,v=Math.imul(Dt,Lt),w=(w=Math.imul(Dt,be))+Math.imul(jt,Lt)|0,x=Math.imul(jt,be),v=v+Math.imul(wt,qt)|0,w=(w=w+Math.imul(wt,Ae)|0)+Math.imul(Ot,qt)|0,x=x+Math.imul(Ot,Ae)|0,v=v+Math.imul(gt,se)|0,w=(w=w+Math.imul(gt,He)|0)+Math.imul(vt,se)|0,x=x+Math.imul(vt,He)|0,v=v+Math.imul(ct,Yt)|0,w=(w=w+Math.imul(ct,_e)|0)+Math.imul(ut,Yt)|0,x=x+Math.imul(ut,_e)|0,v=v+Math.imul(rt,Qt)|0,w=(w=w+Math.imul(rt,Te)|0)+Math.imul(lt,Qt)|0,x=x+Math.imul(lt,Te)|0,v=v+Math.imul(nt,ae)|0,w=(w=w+Math.imul(nt,ht)|0)+Math.imul(Z,ae)|0,x=x+Math.imul(Z,ht)|0,v=v+Math.imul(q,bt)|0,w=(w=w+Math.imul(q,Ct)|0)+Math.imul(J,bt)|0,x=x+Math.imul(J,Ct)|0,v=v+Math.imul(V,Rt)|0,w=(w=w+Math.imul(V,te)|0)+Math.imul(Q,Rt)|0,x=x+Math.imul(Q,te)|0;var xt=(j+(v=v+Math.imul(X,Vt)|0)|0)+((8191&(w=(w=w+Math.imul(X,ne)|0)+Math.imul(P,Vt)|0))<<13)|0;j=((x=x+Math.imul(P,ne)|0)+(w>>>13)|0)+(xt>>>26)|0,xt&=67108863,v=Math.imul(Dt,qt),w=(w=Math.imul(Dt,Ae))+Math.imul(jt,qt)|0,x=Math.imul(jt,Ae),v=v+Math.imul(wt,se)|0,w=(w=w+Math.imul(wt,He)|0)+Math.imul(Ot,se)|0,x=x+Math.imul(Ot,He)|0,v=v+Math.imul(gt,Yt)|0,w=(w=w+Math.imul(gt,_e)|0)+Math.imul(vt,Yt)|0,x=x+Math.imul(vt,_e)|0,v=v+Math.imul(ct,Qt)|0,w=(w=w+Math.imul(ct,Te)|0)+Math.imul(ut,Qt)|0,x=x+Math.imul(ut,Te)|0,v=v+Math.imul(rt,ae)|0,w=(w=w+Math.imul(rt,ht)|0)+Math.imul(lt,ae)|0,x=x+Math.imul(lt,ht)|0,v=v+Math.imul(nt,bt)|0,w=(w=w+Math.imul(nt,Ct)|0)+Math.imul(Z,bt)|0,x=x+Math.imul(Z,Ct)|0,v=v+Math.imul(q,Rt)|0,w=(w=w+Math.imul(q,te)|0)+Math.imul(J,Rt)|0,x=x+Math.imul(J,te)|0;var $t=(j+(v=v+Math.imul(V,Vt)|0)|0)+((8191&(w=(w=w+Math.imul(V,ne)|0)+Math.imul(Q,Vt)|0))<<13)|0;j=((x=x+Math.imul(Q,ne)|0)+(w>>>13)|0)+($t>>>26)|0,$t&=67108863,v=Math.imul(Dt,se),w=(w=Math.imul(Dt,He))+Math.imul(jt,se)|0,x=Math.imul(jt,He),v=v+Math.imul(wt,Yt)|0,w=(w=w+Math.imul(wt,_e)|0)+Math.imul(Ot,Yt)|0,x=x+Math.imul(Ot,_e)|0,v=v+Math.imul(gt,Qt)|0,w=(w=w+Math.imul(gt,Te)|0)+Math.imul(vt,Qt)|0,x=x+Math.imul(vt,Te)|0,v=v+Math.imul(ct,ae)|0,w=(w=w+Math.imul(ct,ht)|0)+Math.imul(ut,ae)|0,x=x+Math.imul(ut,ht)|0,v=v+Math.imul(rt,bt)|0,w=(w=w+Math.imul(rt,Ct)|0)+Math.imul(lt,bt)|0,x=x+Math.imul(lt,Ct)|0,v=v+Math.imul(nt,Rt)|0,w=(w=w+Math.imul(nt,te)|0)+Math.imul(Z,Rt)|0,x=x+Math.imul(Z,te)|0;var Et=(j+(v=v+Math.imul(q,Vt)|0)|0)+((8191&(w=(w=w+Math.imul(q,ne)|0)+Math.imul(J,Vt)|0))<<13)|0;j=((x=x+Math.imul(J,ne)|0)+(w>>>13)|0)+(Et>>>26)|0,Et&=67108863,v=Math.imul(Dt,Yt),w=(w=Math.imul(Dt,_e))+Math.imul(jt,Yt)|0,x=Math.imul(jt,_e),v=v+Math.imul(wt,Qt)|0,w=(w=w+Math.imul(wt,Te)|0)+Math.imul(Ot,Qt)|0,x=x+Math.imul(Ot,Te)|0,v=v+Math.imul(gt,ae)|0,w=(w=w+Math.imul(gt,ht)|0)+Math.imul(vt,ae)|0,x=x+Math.imul(vt,ht)|0,v=v+Math.imul(ct,bt)|0,w=(w=w+Math.imul(ct,Ct)|0)+Math.imul(ut,bt)|0,x=x+Math.imul(ut,Ct)|0,v=v+Math.imul(rt,Rt)|0,w=(w=w+Math.imul(rt,te)|0)+Math.imul(lt,Rt)|0,x=x+Math.imul(lt,te)|0;var Tt=(j+(v=v+Math.imul(nt,Vt)|0)|0)+((8191&(w=(w=w+Math.imul(nt,ne)|0)+Math.imul(Z,Vt)|0))<<13)|0;j=((x=x+Math.imul(Z,ne)|0)+(w>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,v=Math.imul(Dt,Qt),w=(w=Math.imul(Dt,Te))+Math.imul(jt,Qt)|0,x=Math.imul(jt,Te),v=v+Math.imul(wt,ae)|0,w=(w=w+Math.imul(wt,ht)|0)+Math.imul(Ot,ae)|0,x=x+Math.imul(Ot,ht)|0,v=v+Math.imul(gt,bt)|0,w=(w=w+Math.imul(gt,Ct)|0)+Math.imul(vt,bt)|0,x=x+Math.imul(vt,Ct)|0,v=v+Math.imul(ct,Rt)|0,w=(w=w+Math.imul(ct,te)|0)+Math.imul(ut,Rt)|0,x=x+Math.imul(ut,te)|0;var ye=(j+(v=v+Math.imul(rt,Vt)|0)|0)+((8191&(w=(w=w+Math.imul(rt,ne)|0)+Math.imul(lt,Vt)|0))<<13)|0;j=((x=x+Math.imul(lt,ne)|0)+(w>>>13)|0)+(ye>>>26)|0,ye&=67108863,v=Math.imul(Dt,ae),w=(w=Math.imul(Dt,ht))+Math.imul(jt,ae)|0,x=Math.imul(jt,ht),v=v+Math.imul(wt,bt)|0,w=(w=w+Math.imul(wt,Ct)|0)+Math.imul(Ot,bt)|0,x=x+Math.imul(Ot,Ct)|0,v=v+Math.imul(gt,Rt)|0,w=(w=w+Math.imul(gt,te)|0)+Math.imul(vt,Rt)|0,x=x+Math.imul(vt,te)|0;var ce=(j+(v=v+Math.imul(ct,Vt)|0)|0)+((8191&(w=(w=w+Math.imul(ct,ne)|0)+Math.imul(ut,Vt)|0))<<13)|0;j=((x=x+Math.imul(ut,ne)|0)+(w>>>13)|0)+(ce>>>26)|0,ce&=67108863,v=Math.imul(Dt,bt),w=(w=Math.imul(Dt,Ct))+Math.imul(jt,bt)|0,x=Math.imul(jt,Ct),v=v+Math.imul(wt,Rt)|0,w=(w=w+Math.imul(wt,te)|0)+Math.imul(Ot,Rt)|0,x=x+Math.imul(Ot,te)|0;var fe=(j+(v=v+Math.imul(gt,Vt)|0)|0)+((8191&(w=(w=w+Math.imul(gt,ne)|0)+Math.imul(vt,Vt)|0))<<13)|0;j=((x=x+Math.imul(vt,ne)|0)+(w>>>13)|0)+(fe>>>26)|0,fe&=67108863,v=Math.imul(Dt,Rt),w=(w=Math.imul(Dt,te))+Math.imul(jt,Rt)|0,x=Math.imul(jt,te);var Kt=(j+(v=v+Math.imul(wt,Vt)|0)|0)+((8191&(w=(w=w+Math.imul(wt,ne)|0)+Math.imul(Ot,Vt)|0))<<13)|0;j=((x=x+Math.imul(Ot,ne)|0)+(w>>>13)|0)+(Kt>>>26)|0,Kt&=67108863;var Pe=(j+(v=Math.imul(Dt,Vt))|0)+((8191&(w=(w=Math.imul(Dt,ne))+Math.imul(jt,Vt)|0))<<13)|0;return j=((x=Math.imul(jt,ne))+(w>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,L[0]=ee,L[1]=de,L[2]=or,L[3]=Xe,L[4]=wr,L[5]=_r,L[6]=gs,L[7]=ot,L[8]=mt,L[9]=yt,L[10]=xt,L[11]=$t,L[12]=Et,L[13]=Tt,L[14]=ye,L[15]=ce,L[16]=fe,L[17]=Kt,L[18]=Pe,j!==0&&(L[19]=j,k.length++),k};function _(C,R,k){return new E().mulp(C,R,k)}function E(C,R){this.x=C,this.y=R}Math.imul||(y=b),n.prototype.mulTo=function(C,R){var k=this.length+C.length;return this.length===10&&C.length===10?y(this,C,R):k<63?b(this,C,R):k<1024?function(v,w,x){x.negative=w.negative^v.negative,x.length=v.length+w.length;for(var S=0,T=0,L=0;L<x.length-1;L++){var j=T;T=0;for(var U=67108863&S,W=Math.min(L,w.length-1),Y=Math.max(0,L-v.length+1);Y<=W;Y++){var F=L-Y,X=(0|v.words[F])*(0|w.words[Y]),P=67108863&X;U=67108863&(P=P+U|0),T+=(j=(j=j+(X/67108864|0)|0)+(P>>>26)|0)>>>26,j&=67108863}x.words[L]=U,S=j,j=T}return S!==0?x.words[L]=S:x.length--,x.strip()}(this,C,R):_(this,C,R)},E.prototype.makeRBT=function(C){for(var R=new Array(C),k=n.prototype._countBits(C)-1,v=0;v<C;v++)R[v]=this.revBin(v,k,C);return R},E.prototype.revBin=function(C,R,k){if(C===0||C===k-1)return C;for(var v=0,w=0;w<R;w++)v|=(1&C)<<R-w-1,C>>=1;return v},E.prototype.permute=function(C,R,k,v,w,x){for(var S=0;S<x;S++)v[S]=R[C[S]],w[S]=k[C[S]]},E.prototype.transform=function(C,R,k,v,w,x){this.permute(x,C,R,k,v,w);for(var S=1;S<w;S<<=1)for(var T=S<<1,L=Math.cos(2*Math.PI/T),j=Math.sin(2*Math.PI/T),U=0;U<w;U+=T)for(var W=L,Y=j,F=0;F<S;F++){var X=k[U+F],P=v[U+F],I=k[U+F+S],V=v[U+F+S],Q=W*I-Y*V;V=W*V+Y*I,I=Q,k[U+F]=X+I,v[U+F]=P+V,k[U+F+S]=X-I,v[U+F+S]=P-V,F!==T&&(Q=L*W-j*Y,Y=L*Y+j*W,W=Q)}},E.prototype.guessLen13b=function(C,R){var k=1|Math.max(R,C),v=1&k,w=0;for(k=k/2|0;k;k>>>=1)w++;return 1<<w+1+v},E.prototype.conjugate=function(C,R,k){if(!(k<=1))for(var v=0;v<k/2;v++){var w=C[v];C[v]=C[k-v-1],C[k-v-1]=w,w=R[v],R[v]=-R[k-v-1],R[k-v-1]=-w}},E.prototype.normalize13b=function(C,R){for(var k=0,v=0;v<R/2;v++){var w=8192*Math.round(C[2*v+1]/R)+Math.round(C[2*v]/R)+k;C[v]=67108863&w,k=w<67108864?0:w/67108864|0}return C},E.prototype.convert13b=function(C,R,k,v){for(var w=0,x=0;x<R;x++)w+=0|C[x],k[2*x]=8191&w,w>>>=13,k[2*x+1]=8191&w,w>>>=13;for(x=2*R;x<v;++x)k[x]=0;a(w===0),a((-8192&w)==0)},E.prototype.stub=function(C){for(var R=new Array(C),k=0;k<C;k++)R[k]=0;return R},E.prototype.mulp=function(C,R,k){var v=2*this.guessLen13b(C.length,R.length),w=this.makeRBT(v),x=this.stub(v),S=new Array(v),T=new Array(v),L=new Array(v),j=new Array(v),U=new Array(v),W=new Array(v),Y=k.words;Y.length=v,this.convert13b(C.words,C.length,S,v),this.convert13b(R.words,R.length,j,v),this.transform(S,x,T,L,v,w),this.transform(j,x,U,W,v,w);for(var F=0;F<v;F++){var X=T[F]*U[F]-L[F]*W[F];L[F]=T[F]*W[F]+L[F]*U[F],T[F]=X}return this.conjugate(T,L,v),this.transform(T,L,Y,x,v,w),this.conjugate(Y,x,v),this.normalize13b(Y,v),k.negative=C.negative^R.negative,k.length=C.length+R.length,k.strip()},n.prototype.mul=function(C){var R=new n(null);return R.words=new Array(this.length+C.length),this.mulTo(C,R)},n.prototype.mulf=function(C){var R=new n(null);return R.words=new Array(this.length+C.length),_(this,C,R)},n.prototype.imul=function(C){return this.clone().mulTo(C,this)},n.prototype.imuln=function(C){a(typeof C=="number"),a(C<67108864);for(var R=0,k=0;k<this.length;k++){var v=(0|this.words[k])*C,w=(67108863&v)+(67108863&R);R>>=26,R+=v/67108864|0,R+=w>>>26,this.words[k]=67108863&w}return R!==0&&(this.words[k]=R,this.length++),this},n.prototype.muln=function(C){return this.clone().imuln(C)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(C){var R=function(x){for(var S=new Array(x.bitLength()),T=0;T<S.length;T++){var L=T/26|0,j=T%26;S[T]=(x.words[L]&1<<j)>>>j}return S}(C);if(R.length===0)return new n(1);for(var k=this,v=0;v<R.length&&R[v]===0;v++,k=k.sqr());if(++v<R.length)for(var w=k.sqr();v<R.length;v++,w=w.sqr())R[v]!==0&&(k=k.mul(w));return k},n.prototype.iushln=function(C){a(typeof C=="number"&&C>=0);var R,k=C%26,v=(C-k)/26,w=67108863>>>26-k<<26-k;if(k!==0){var x=0;for(R=0;R<this.length;R++){var S=this.words[R]&w,T=(0|this.words[R])-S<<k;this.words[R]=T|x,x=S>>>26-k}x&&(this.words[R]=x,this.length++)}if(v!==0){for(R=this.length-1;R>=0;R--)this.words[R+v]=this.words[R];for(R=0;R<v;R++)this.words[R]=0;this.length+=v}return this.strip()},n.prototype.ishln=function(C){return a(this.negative===0),this.iushln(C)},n.prototype.iushrn=function(C,R,k){var v;a(typeof C=="number"&&C>=0),v=R?(R-R%26)/26:0;var w=C%26,x=Math.min((C-w)/26,this.length),S=67108863^67108863>>>w<<w,T=k;if(v-=x,v=Math.max(0,v),T){for(var L=0;L<x;L++)T.words[L]=this.words[L];T.length=x}if(x!==0)if(this.length>x)for(this.length-=x,L=0;L<this.length;L++)this.words[L]=this.words[L+x];else this.words[0]=0,this.length=1;var j=0;for(L=this.length-1;L>=0&&(j!==0||L>=v);L--){var U=0|this.words[L];this.words[L]=j<<26-w|U>>>w,j=U&S}return T&&j!==0&&(T.words[T.length++]=j),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(C,R,k){return a(this.negative===0),this.iushrn(C,R,k)},n.prototype.shln=function(C){return this.clone().ishln(C)},n.prototype.ushln=function(C){return this.clone().iushln(C)},n.prototype.shrn=function(C){return this.clone().ishrn(C)},n.prototype.ushrn=function(C){return this.clone().iushrn(C)},n.prototype.testn=function(C){a(typeof C=="number"&&C>=0);var R=C%26,k=(C-R)/26,v=1<<R;return!(this.length<=k)&&!!(this.words[k]&v)},n.prototype.imaskn=function(C){a(typeof C=="number"&&C>=0);var R=C%26,k=(C-R)/26;if(a(this.negative===0,"imaskn works only with positive numbers"),this.length<=k)return this;if(R!==0&&k++,this.length=Math.min(k,this.length),R!==0){var v=67108863^67108863>>>R<<R;this.words[this.length-1]&=v}return this.strip()},n.prototype.maskn=function(C){return this.clone().imaskn(C)},n.prototype.iaddn=function(C){return a(typeof C=="number"),a(C<67108864),C<0?this.isubn(-C):this.negative!==0?this.length===1&&(0|this.words[0])<C?(this.words[0]=C-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(C),this.negative=1,this):this._iaddn(C)},n.prototype._iaddn=function(C){this.words[0]+=C;for(var R=0;R<this.length&&this.words[R]>=67108864;R++)this.words[R]-=67108864,R===this.length-1?this.words[R+1]=1:this.words[R+1]++;return this.length=Math.max(this.length,R+1),this},n.prototype.isubn=function(C){if(a(typeof C=="number"),a(C<67108864),C<0)return this.iaddn(-C);if(this.negative!==0)return this.negative=0,this.iaddn(C),this.negative=1,this;if(this.words[0]-=C,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var R=0;R<this.length&&this.words[R]<0;R++)this.words[R]+=67108864,this.words[R+1]-=1;return this.strip()},n.prototype.addn=function(C){return this.clone().iaddn(C)},n.prototype.subn=function(C){return this.clone().isubn(C)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(C,R,k){var v,w,x=C.length+k;this._expand(x);var S=0;for(v=0;v<C.length;v++){w=(0|this.words[v+k])+S;var T=(0|C.words[v])*R;S=((w-=67108863&T)>>26)-(T/67108864|0),this.words[v+k]=67108863&w}for(;v<this.length-k;v++)S=(w=(0|this.words[v+k])+S)>>26,this.words[v+k]=67108863&w;if(S===0)return this.strip();for(a(S===-1),S=0,v=0;v<this.length;v++)S=(w=-(0|this.words[v])+S)>>26,this.words[v]=67108863&w;return this.negative=1,this.strip()},n.prototype._wordDiv=function(C,R){var k=(this.length,C.length),v=this.clone(),w=C,x=0|w.words[w.length-1];(k=26-this._countBits(x))!==0&&(w=w.ushln(k),v.iushln(k),x=0|w.words[w.length-1]);var S,T=v.length-w.length;if(R!=="mod"){(S=new n(null)).length=T+1,S.words=new Array(S.length);for(var L=0;L<S.length;L++)S.words[L]=0}var j=v.clone()._ishlnsubmul(w,1,T);j.negative===0&&(v=j,S&&(S.words[T]=1));for(var U=T-1;U>=0;U--){var W=67108864*(0|v.words[w.length+U])+(0|v.words[w.length+U-1]);for(W=Math.min(W/x|0,67108863),v._ishlnsubmul(w,W,U);v.negative!==0;)W--,v.negative=0,v._ishlnsubmul(w,1,U),v.isZero()||(v.negative^=1);S&&(S.words[U]=W)}return S&&S.strip(),v.strip(),R!=="div"&&k!==0&&v.iushrn(k),{div:S||null,mod:v}},n.prototype.divmod=function(C,R,k){return a(!C.isZero()),this.isZero()?{div:new n(0),mod:new n(0)}:this.negative!==0&&C.negative===0?(x=this.neg().divmod(C,R),R!=="mod"&&(v=x.div.neg()),R!=="div"&&(w=x.mod.neg(),k&&w.negative!==0&&w.iadd(C)),{div:v,mod:w}):this.negative===0&&C.negative!==0?(x=this.divmod(C.neg(),R),R!=="mod"&&(v=x.div.neg()),{div:v,mod:x.mod}):(this.negative&C.negative)!=0?(x=this.neg().divmod(C.neg(),R),R!=="div"&&(w=x.mod.neg(),k&&w.negative!==0&&w.isub(C)),{div:x.div,mod:w}):C.length>this.length||this.cmp(C)<0?{div:new n(0),mod:this}:C.length===1?R==="div"?{div:this.divn(C.words[0]),mod:null}:R==="mod"?{div:null,mod:new n(this.modn(C.words[0]))}:{div:this.divn(C.words[0]),mod:new n(this.modn(C.words[0]))}:this._wordDiv(C,R);var v,w,x},n.prototype.div=function(C){return this.divmod(C,"div",!1).div},n.prototype.mod=function(C){return this.divmod(C,"mod",!1).mod},n.prototype.umod=function(C){return this.divmod(C,"mod",!0).mod},n.prototype.divRound=function(C){var R=this.divmod(C);if(R.mod.isZero())return R.div;var k=R.div.negative!==0?R.mod.isub(C):R.mod,v=C.ushrn(1),w=C.andln(1),x=k.cmp(v);return x<0||w===1&&x===0?R.div:R.div.negative!==0?R.div.isubn(1):R.div.iaddn(1)},n.prototype.modn=function(C){a(C<=67108863);for(var R=(1<<26)%C,k=0,v=this.length-1;v>=0;v--)k=(R*k+(0|this.words[v]))%C;return k},n.prototype.idivn=function(C){a(C<=67108863);for(var R=0,k=this.length-1;k>=0;k--){var v=(0|this.words[k])+67108864*R;this.words[k]=v/C|0,R=v%C}return this.strip()},n.prototype.divn=function(C){return this.clone().idivn(C)},n.prototype.egcd=function(C){a(C.negative===0),a(!C.isZero());var R=this,k=C.clone();R=R.negative!==0?R.umod(C):R.clone();for(var v=new n(1),w=new n(0),x=new n(0),S=new n(1),T=0;R.isEven()&&k.isEven();)R.iushrn(1),k.iushrn(1),++T;for(var L=k.clone(),j=R.clone();!R.isZero();){for(var U=0,W=1;(R.words[0]&W)==0&&U<26;++U,W<<=1);if(U>0)for(R.iushrn(U);U-- >0;)(v.isOdd()||w.isOdd())&&(v.iadd(L),w.isub(j)),v.iushrn(1),w.iushrn(1);for(var Y=0,F=1;(k.words[0]&F)==0&&Y<26;++Y,F<<=1);if(Y>0)for(k.iushrn(Y);Y-- >0;)(x.isOdd()||S.isOdd())&&(x.iadd(L),S.isub(j)),x.iushrn(1),S.iushrn(1);R.cmp(k)>=0?(R.isub(k),v.isub(x),w.isub(S)):(k.isub(R),x.isub(v),S.isub(w))}return{a:x,b:S,gcd:k.iushln(T)}},n.prototype._invmp=function(C){a(C.negative===0),a(!C.isZero());var R=this,k=C.clone();R=R.negative!==0?R.umod(C):R.clone();for(var v,w=new n(1),x=new n(0),S=k.clone();R.cmpn(1)>0&&k.cmpn(1)>0;){for(var T=0,L=1;(R.words[0]&L)==0&&T<26;++T,L<<=1);if(T>0)for(R.iushrn(T);T-- >0;)w.isOdd()&&w.iadd(S),w.iushrn(1);for(var j=0,U=1;(k.words[0]&U)==0&&j<26;++j,U<<=1);if(j>0)for(k.iushrn(j);j-- >0;)x.isOdd()&&x.iadd(S),x.iushrn(1);R.cmp(k)>=0?(R.isub(k),w.isub(x)):(k.isub(R),x.isub(w))}return(v=R.cmpn(1)===0?w:x).cmpn(0)<0&&v.iadd(C),v},n.prototype.gcd=function(C){if(this.isZero())return C.abs();if(C.isZero())return this.abs();var R=this.clone(),k=C.clone();R.negative=0,k.negative=0;for(var v=0;R.isEven()&&k.isEven();v++)R.iushrn(1),k.iushrn(1);for(;;){for(;R.isEven();)R.iushrn(1);for(;k.isEven();)k.iushrn(1);var w=R.cmp(k);if(w<0){var x=R;R=k,k=x}else if(w===0||k.cmpn(1)===0)break;R.isub(k)}return k.iushln(v)},n.prototype.invm=function(C){return this.egcd(C).a.umod(C)},n.prototype.isEven=function(){return(1&this.words[0])==0},n.prototype.isOdd=function(){return(1&this.words[0])==1},n.prototype.andln=function(C){return this.words[0]&C},n.prototype.bincn=function(C){a(typeof C=="number");var R=C%26,k=(C-R)/26,v=1<<R;if(this.length<=k)return this._expand(k+1),this.words[k]|=v,this;for(var w=v,x=k;w!==0&&x<this.length;x++){var S=0|this.words[x];w=(S+=w)>>>26,S&=67108863,this.words[x]=S}return w!==0&&(this.words[x]=w,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(C){var R,k=C<0;if(this.negative!==0&&!k)return-1;if(this.negative===0&&k)return 1;if(this.strip(),this.length>1)R=1;else{k&&(C=-C),a(C<=67108863,"Number is too big");var v=0|this.words[0];R=v===C?0:v<C?-1:1}return this.negative!==0?0|-R:R},n.prototype.cmp=function(C){if(this.negative!==0&&C.negative===0)return-1;if(this.negative===0&&C.negative!==0)return 1;var R=this.ucmp(C);return this.negative!==0?0|-R:R},n.prototype.ucmp=function(C){if(this.length>C.length)return 1;if(this.length<C.length)return-1;for(var R=0,k=this.length-1;k>=0;k--){var v=0|this.words[k],w=0|C.words[k];if(v!==w){v<w?R=-1:v>w&&(R=1);break}}return R},n.prototype.gtn=function(C){return this.cmpn(C)===1},n.prototype.gt=function(C){return this.cmp(C)===1},n.prototype.gten=function(C){return this.cmpn(C)>=0},n.prototype.gte=function(C){return this.cmp(C)>=0},n.prototype.ltn=function(C){return this.cmpn(C)===-1},n.prototype.lt=function(C){return this.cmp(C)===-1},n.prototype.lten=function(C){return this.cmpn(C)<=0},n.prototype.lte=function(C){return this.cmp(C)<=0},n.prototype.eqn=function(C){return this.cmpn(C)===0},n.prototype.eq=function(C){return this.cmp(C)===0},n.red=function(C){return new H(C)},n.prototype.toRed=function(C){return a(!this.red,"Already a number in reduction context"),a(this.negative===0,"red works only with positives"),C.convertTo(this)._forceRed(C)},n.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(C){return this.red=C,this},n.prototype.forceRed=function(C){return a(!this.red,"Already a number in reduction context"),this._forceRed(C)},n.prototype.redAdd=function(C){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,C)},n.prototype.redIAdd=function(C){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,C)},n.prototype.redSub=function(C){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,C)},n.prototype.redISub=function(C){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,C)},n.prototype.redShl=function(C){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,C)},n.prototype.redMul=function(C){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,C),this.red.mul(this,C)},n.prototype.redIMul=function(C){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,C),this.red.imul(this,C)},n.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(C){return a(this.red&&!C.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,C)};var M={k256:null,p224:null,p192:null,p25519:null};function D(C,R){this.name=C,this.p=new n(R,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function z(){D.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function O(){D.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function N(){D.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function B(){D.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function H(C){if(typeof C=="string"){var R=n._prime(C);this.m=R.p,this.prime=R}else a(C.gtn(1),"modulus must be greater than 1"),this.m=C,this.prime=null}function $(C){H.call(this,C),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}D.prototype._tmp=function(){var C=new n(null);return C.words=new Array(Math.ceil(this.n/13)),C},D.prototype.ireduce=function(C){var R,k=C;do this.split(k,this.tmp),R=(k=(k=this.imulK(k)).iadd(this.tmp)).bitLength();while(R>this.n);var v=R<this.n?-1:k.ucmp(this.p);return v===0?(k.words[0]=0,k.length=1):v>0?k.isub(this.p):k.strip!==void 0?k.strip():k._strip(),k},D.prototype.split=function(C,R){C.iushrn(this.n,0,R)},D.prototype.imulK=function(C){return C.imul(this.k)},o(z,D),z.prototype.split=function(C,R){for(var k=Math.min(C.length,9),v=0;v<k;v++)R.words[v]=C.words[v];if(R.length=k,C.length<=9)return C.words[0]=0,void(C.length=1);var w=C.words[9];for(R.words[R.length++]=4194303&w,v=10;v<C.length;v++){var x=0|C.words[v];C.words[v-10]=(4194303&x)<<4|w>>>22,w=x}w>>>=22,C.words[v-10]=w,w===0&&C.length>10?C.length-=10:C.length-=9},z.prototype.imulK=function(C){C.words[C.length]=0,C.words[C.length+1]=0,C.length+=2;for(var R=0,k=0;k<C.length;k++){var v=0|C.words[k];R+=977*v,C.words[k]=67108863&R,R=64*v+(R/67108864|0)}return C.words[C.length-1]===0&&(C.length--,C.words[C.length-1]===0&&C.length--),C},o(O,D),o(N,D),o(B,D),B.prototype.imulK=function(C){for(var R=0,k=0;k<C.length;k++){var v=19*(0|C.words[k])+R,w=67108863&v;v>>>=26,C.words[k]=w,R=v}return R!==0&&(C.words[C.length++]=R),C},n._prime=function(C){if(M[C])return M[C];var R;if(C==="k256")R=new z;else if(C==="p224")R=new O;else if(C==="p192")R=new N;else{if(C!=="p25519")throw new Error("Unknown prime "+C);R=new B}return M[C]=R,R},H.prototype._verify1=function(C){a(C.negative===0,"red works only with positives"),a(C.red,"red works only with red numbers")},H.prototype._verify2=function(C,R){a((C.negative|R.negative)==0,"red works only with positives"),a(C.red&&C.red===R.red,"red works only with red numbers")},H.prototype.imod=function(C){return this.prime?this.prime.ireduce(C)._forceRed(this):C.umod(this.m)._forceRed(this)},H.prototype.neg=function(C){return C.isZero()?C.clone():this.m.sub(C)._forceRed(this)},H.prototype.add=function(C,R){this._verify2(C,R);var k=C.add(R);return k.cmp(this.m)>=0&&k.isub(this.m),k._forceRed(this)},H.prototype.iadd=function(C,R){this._verify2(C,R);var k=C.iadd(R);return k.cmp(this.m)>=0&&k.isub(this.m),k},H.prototype.sub=function(C,R){this._verify2(C,R);var k=C.sub(R);return k.cmpn(0)<0&&k.iadd(this.m),k._forceRed(this)},H.prototype.isub=function(C,R){this._verify2(C,R);var k=C.isub(R);return k.cmpn(0)<0&&k.iadd(this.m),k},H.prototype.shl=function(C,R){return this._verify1(C),this.imod(C.ushln(R))},H.prototype.imul=function(C,R){return this._verify2(C,R),this.imod(C.imul(R))},H.prototype.mul=function(C,R){return this._verify2(C,R),this.imod(C.mul(R))},H.prototype.isqr=function(C){return this.imul(C,C.clone())},H.prototype.sqr=function(C){return this.mul(C,C)},H.prototype.sqrt=function(C){if(C.isZero())return C.clone();var R=this.m.andln(3);if(a(R%2==1),R===3){var k=this.m.add(new n(1)).iushrn(2);return this.pow(C,k)}for(var v=this.m.subn(1),w=0;!v.isZero()&&v.andln(1)===0;)w++,v.iushrn(1);a(!v.isZero());var x=new n(1).toRed(this),S=x.redNeg(),T=this.m.subn(1).iushrn(1),L=this.m.bitLength();for(L=new n(2*L*L).toRed(this);this.pow(L,T).cmp(S)!==0;)L.redIAdd(S);for(var j=this.pow(L,v),U=this.pow(C,v.addn(1).iushrn(1)),W=this.pow(C,v),Y=w;W.cmp(x)!==0;){for(var F=W,X=0;F.cmp(x)!==0;X++)F=F.redSqr();a(X<Y);var P=this.pow(j,new n(1).iushln(Y-X-1));U=U.redMul(P),j=P.redSqr(),W=W.redMul(j),Y=X}return U},H.prototype.invm=function(C){var R=C._invmp(this.m);return R.negative!==0?(R.negative=0,this.imod(R).redNeg()):this.imod(R)},H.prototype.pow=function(C,R){if(R.isZero())return new n(1).toRed(this);if(R.cmpn(1)===0)return C.clone();var k=new Array(16);k[0]=new n(1).toRed(this),k[1]=C;for(var v=2;v<k.length;v++)k[v]=this.mul(k[v-1],C);var w=k[0],x=0,S=0,T=R.bitLength()%26;for(T===0&&(T=26),v=R.length-1;v>=0;v--){for(var L=R.words[v],j=T-1;j>=0;j--){var U=L>>j&1;w!==k[0]&&(w=this.sqr(w)),U!==0||x!==0?(x<<=1,x|=U,(++S===4||v===0&&j===0)&&(w=this.mul(w,k[x]),S=0,x=0)):S=0}T=26}return w},H.prototype.convertTo=function(C){var R=C.umod(this.m);return R===C?R.clone():R},H.prototype.convertFrom=function(C){var R=C.clone();return R.red=null,R},n.mont=function(C){return new $(C)},o($,H),$.prototype.convertTo=function(C){return this.imod(C.ushln(this.shift))},$.prototype.convertFrom=function(C){var R=this.imod(C.mul(this.rinv));return R.red=null,R},$.prototype.imul=function(C,R){if(C.isZero()||R.isZero())return C.words[0]=0,C.length=1,C;var k=C.imul(R),v=k.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=k.isub(v).iushrn(this.shift),x=w;return w.cmp(this.m)>=0?x=w.isub(this.m):w.cmpn(0)<0&&(x=w.iadd(this.m)),x._forceRed(this)},$.prototype.mul=function(C,R){if(C.isZero()||R.isZero())return new n(0)._forceRed(this);var k=C.mul(R),v=k.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=k.isub(v).iushrn(this.shift),x=w;return w.cmp(this.m)>=0?x=w.isub(this.m):w.cmpn(0)<0&&(x=w.iadd(this.m)),x._forceRed(this)},$.prototype.invm=function(C){return this.imod(C._invmp(this.m).mul(this.r2))._forceRed(this)}})(r===void 0||r)},{buffer:188}],185:[function(t,r,l){l.byteLength=function(h){var p=d(h),m=p[0],f=p[1];return 3*(m+f)/4-f},l.toByteArray=function(h){var p,m,f=d(h),b=f[0],y=f[1],_=new a(function(D,z,O){return 3*(z+O)/4-O}(0,b,y)),E=0,M=y>0?b-4:b;for(m=0;m<M;m+=4)p=s[h.charCodeAt(m)]<<18|s[h.charCodeAt(m+1)]<<12|s[h.charCodeAt(m+2)]<<6|s[h.charCodeAt(m+3)],_[E++]=p>>16&255,_[E++]=p>>8&255,_[E++]=255&p;return y===2&&(p=s[h.charCodeAt(m)]<<2|s[h.charCodeAt(m+1)]>>4,_[E++]=255&p),y===1&&(p=s[h.charCodeAt(m)]<<10|s[h.charCodeAt(m+1)]<<4|s[h.charCodeAt(m+2)]>>2,_[E++]=p>>8&255,_[E++]=255&p),_},l.fromByteArray=function(h){for(var p,m=h.length,f=m%3,b=[],y=0,_=m-f;y<_;y+=16383)b.push(u(h,y,y+16383>_?_:y+16383));return f===1?(p=h[m-1],b.push(i[p>>2]+i[p<<4&63]+"==")):f===2&&(p=(h[m-2]<<8)+h[m-1],b.push(i[p>>10]+i[p>>4&63]+i[p<<2&63]+"=")),b.join("")};for(var i=[],s=[],a=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,c=o.length;n<c;++n)i[n]=o[n],s[o.charCodeAt(n)]=n;function d(h){var p=h.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var m=h.indexOf("=");return m===-1&&(m=p),[m,m===p?0:4-m%4]}function u(h,p,m){for(var f,b,y=[],_=p;_<m;_+=3)f=(h[_]<<16&16711680)+(h[_+1]<<8&65280)+(255&h[_+2]),y.push(i[(b=f)>>18&63]+i[b>>12&63]+i[b>>6&63]+i[63&b]);return y.join("")}s[45]=62,s[95]=63},{}],186:[function(t,r,l){(function(i,s){function a(k,v){if(!k)throw new Error(v||"Assertion failed")}function o(k,v){k.super_=v;var w=function(){};w.prototype=v.prototype,k.prototype=new w,k.prototype.constructor=k}function n(k,v,w){if(n.isBN(k))return k;this.negative=0,this.words=null,this.length=0,this.red=null,k!==null&&(v!=="le"&&v!=="be"||(w=v,v=10),this._init(k||0,v||10,w||"be"))}var c;typeof i=="object"?i.exports=n:(void 0).BN=n,n.BN=n,n.wordSize=26;try{c=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:t("buffer").Buffer}catch{}function d(k,v){var w=k.charCodeAt(v);return w>=48&&w<=57?w-48:w>=65&&w<=70?w-55:w>=97&&w<=102?w-87:void a(!1,"Invalid character in "+k)}function u(k,v,w){var x=d(k,w);return w-1>=v&&(x|=d(k,w-1)<<4),x}function h(k,v,w,x){for(var S=0,T=0,L=Math.min(k.length,w),j=v;j<L;j++){var U=k.charCodeAt(j)-48;S*=x,T=U>=49?U-49+10:U>=17?U-17+10:U,a(U>=0&&T<x,"Invalid character"),S+=T}return S}function p(k,v){k.words=v.words,k.length=v.length,k.negative=v.negative,k.red=v.red}if(n.isBN=function(k){return k instanceof n||k!==null&&typeof k=="object"&&k.constructor.wordSize===n.wordSize&&Array.isArray(k.words)},n.max=function(k,v){return k.cmp(v)>0?k:v},n.min=function(k,v){return k.cmp(v)<0?k:v},n.prototype._init=function(k,v,w){if(typeof k=="number")return this._initNumber(k,v,w);if(typeof k=="object")return this._initArray(k,v,w);v==="hex"&&(v=16),a(v===(0|v)&&v>=2&&v<=36);var x=0;(k=k.toString().replace(/\s+/g,""))[0]==="-"&&(x++,this.negative=1),x<k.length&&(v===16?this._parseHex(k,x,w):(this._parseBase(k,v,x),w==="le"&&this._initArray(this.toArray(),v,w)))},n.prototype._initNumber=function(k,v,w){k<0&&(this.negative=1,k=-k),k<67108864?(this.words=[67108863&k],this.length=1):k<4503599627370496?(this.words=[67108863&k,k/67108864&67108863],this.length=2):(a(k<9007199254740992),this.words=[67108863&k,k/67108864&67108863,1],this.length=3),w==="le"&&this._initArray(this.toArray(),v,w)},n.prototype._initArray=function(k,v,w){if(a(typeof k.length=="number"),k.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(k.length/3),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var S,T,L=0;if(w==="be")for(x=k.length-1,S=0;x>=0;x-=3)T=k[x]|k[x-1]<<8|k[x-2]<<16,this.words[S]|=T<<L&67108863,this.words[S+1]=T>>>26-L&67108863,(L+=24)>=26&&(L-=26,S++);else if(w==="le")for(x=0,S=0;x<k.length;x+=3)T=k[x]|k[x+1]<<8|k[x+2]<<16,this.words[S]|=T<<L&67108863,this.words[S+1]=T>>>26-L&67108863,(L+=24)>=26&&(L-=26,S++);return this._strip()},n.prototype._parseHex=function(k,v,w){this.length=Math.ceil((k.length-v)/6),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var S,T=0,L=0;if(w==="be")for(x=k.length-1;x>=v;x-=2)S=u(k,v,x)<<T,this.words[L]|=67108863&S,T>=18?(T-=18,L+=1,this.words[L]|=S>>>26):T+=8;else for(x=(k.length-v)%2==0?v+1:v;x<k.length;x+=2)S=u(k,v,x)<<T,this.words[L]|=67108863&S,T>=18?(T-=18,L+=1,this.words[L]|=S>>>26):T+=8;this._strip()},n.prototype._parseBase=function(k,v,w){this.words=[0],this.length=1;for(var x=0,S=1;S<=67108863;S*=v)x++;x--,S=S/v|0;for(var T=k.length-w,L=T%x,j=Math.min(T,T-L)+w,U=0,W=w;W<j;W+=x)U=h(k,W,W+x,v),this.imuln(S),this.words[0]+U<67108864?this.words[0]+=U:this._iaddn(U);if(L!==0){var Y=1;for(U=h(k,W,k.length,v),W=0;W<L;W++)Y*=v;this.imuln(Y),this.words[0]+U<67108864?this.words[0]+=U:this._iaddn(U)}this._strip()},n.prototype.copy=function(k){k.words=new Array(this.length);for(var v=0;v<this.length;v++)k.words[v]=this.words[v];k.length=this.length,k.negative=this.negative,k.red=this.red},n.prototype._move=function(k){p(k,this)},n.prototype.clone=function(){var k=new n(null);return this.copy(k),k},n.prototype._expand=function(k){for(;this.length<k;)this.words[this.length++]=0;return this},n.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{n.prototype[Symbol.for("nodejs.util.inspect.custom")]=m}catch{n.prototype.inspect=m}else n.prototype.inspect=m;function m(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],b=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(k,v){var w;if(v=0|v||1,(k=k||10)===16||k==="hex"){w="";for(var x=0,S=0,T=0;T<this.length;T++){var L=this.words[T],j=(16777215&(L<<x|S)).toString(16);S=L>>>24-x&16777215,(x+=2)>=26&&(x-=26,T--),w=S!==0||T!==this.length-1?f[6-j.length]+j+w:j+w}for(S!==0&&(w=S.toString(16)+w);w.length%v!=0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}if(k===(0|k)&&k>=2&&k<=36){var U=b[k],W=y[k];w="";var Y=this.clone();for(Y.negative=0;!Y.isZero();){var F=Y.modrn(W).toString(k);w=(Y=Y.idivn(W)).isZero()?F+w:f[U-F.length]+F+w}for(this.isZero()&&(w="0"+w);w.length%v!=0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}a(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var k=this.words[0];return this.length===2?k+=67108864*this.words[1]:this.length===3&&this.words[2]===1?k+=4503599627370496+67108864*this.words[1]:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-k:k},n.prototype.toJSON=function(){return this.toString(16,2)},c&&(n.prototype.toBuffer=function(k,v){return this.toArrayLike(c,k,v)}),n.prototype.toArray=function(k,v){return this.toArrayLike(Array,k,v)};function _(k,v,w){w.negative=v.negative^k.negative;var x=k.length+v.length|0;w.length=x,x=x-1|0;var S=0|k.words[0],T=0|v.words[0],L=S*T,j=67108863&L,U=L/67108864|0;w.words[0]=j;for(var W=1;W<x;W++){for(var Y=U>>>26,F=67108863&U,X=Math.min(W,v.length-1),P=Math.max(0,W-k.length+1);P<=X;P++){var I=W-P|0;Y+=(L=(S=0|k.words[I])*(T=0|v.words[P])+F)/67108864|0,F=67108863&L}w.words[W]=0|F,U=0|Y}return U!==0?w.words[W]=0|U:w.length--,w._strip()}n.prototype.toArrayLike=function(k,v,w){this._strip();var x=this.byteLength(),S=w||Math.max(1,x);a(x<=S,"byte array longer than desired length"),a(S>0,"Requested array length <= 0");var T=function(L,j){return L.allocUnsafe?L.allocUnsafe(j):new L(j)}(k,S);return this["_toArrayLike"+(v==="le"?"LE":"BE")](T,x),T},n.prototype._toArrayLikeLE=function(k,v){for(var w=0,x=0,S=0,T=0;S<this.length;S++){var L=this.words[S]<<T|x;k[w++]=255&L,w<k.length&&(k[w++]=L>>8&255),w<k.length&&(k[w++]=L>>16&255),T===6?(w<k.length&&(k[w++]=L>>24&255),x=0,T=0):(x=L>>>24,T+=2)}if(w<k.length)for(k[w++]=x;w<k.length;)k[w++]=0},n.prototype._toArrayLikeBE=function(k,v){for(var w=k.length-1,x=0,S=0,T=0;S<this.length;S++){var L=this.words[S]<<T|x;k[w--]=255&L,w>=0&&(k[w--]=L>>8&255),w>=0&&(k[w--]=L>>16&255),T===6?(w>=0&&(k[w--]=L>>24&255),x=0,T=0):(x=L>>>24,T+=2)}if(w>=0)for(k[w--]=x;w>=0;)k[w--]=0},Math.clz32?n.prototype._countBits=function(k){return 32-Math.clz32(k)}:n.prototype._countBits=function(k){var v=k,w=0;return v>=4096&&(w+=13,v>>>=13),v>=64&&(w+=7,v>>>=7),v>=8&&(w+=4,v>>>=4),v>=2&&(w+=2,v>>>=2),w+v},n.prototype._zeroBits=function(k){if(k===0)return 26;var v=k,w=0;return(8191&v)==0&&(w+=13,v>>>=13),(127&v)==0&&(w+=7,v>>>=7),(15&v)==0&&(w+=4,v>>>=4),(3&v)==0&&(w+=2,v>>>=2),(1&v)==0&&w++,w},n.prototype.bitLength=function(){var k=this.words[this.length-1],v=this._countBits(k);return 26*(this.length-1)+v},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var k=0,v=0;v<this.length;v++){var w=this._zeroBits(this.words[v]);if(k+=w,w!==26)break}return k},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(k){return this.negative!==0?this.abs().inotn(k).iaddn(1):this.clone()},n.prototype.fromTwos=function(k){return this.testn(k-1)?this.notn(k).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(k){for(;this.length<k.length;)this.words[this.length++]=0;for(var v=0;v<k.length;v++)this.words[v]=this.words[v]|k.words[v];return this._strip()},n.prototype.ior=function(k){return a((this.negative|k.negative)==0),this.iuor(k)},n.prototype.or=function(k){return this.length>k.length?this.clone().ior(k):k.clone().ior(this)},n.prototype.uor=function(k){return this.length>k.length?this.clone().iuor(k):k.clone().iuor(this)},n.prototype.iuand=function(k){var v;v=this.length>k.length?k:this;for(var w=0;w<v.length;w++)this.words[w]=this.words[w]&k.words[w];return this.length=v.length,this._strip()},n.prototype.iand=function(k){return a((this.negative|k.negative)==0),this.iuand(k)},n.prototype.and=function(k){return this.length>k.length?this.clone().iand(k):k.clone().iand(this)},n.prototype.uand=function(k){return this.length>k.length?this.clone().iuand(k):k.clone().iuand(this)},n.prototype.iuxor=function(k){var v,w;this.length>k.length?(v=this,w=k):(v=k,w=this);for(var x=0;x<w.length;x++)this.words[x]=v.words[x]^w.words[x];if(this!==v)for(;x<v.length;x++)this.words[x]=v.words[x];return this.length=v.length,this._strip()},n.prototype.ixor=function(k){return a((this.negative|k.negative)==0),this.iuxor(k)},n.prototype.xor=function(k){return this.length>k.length?this.clone().ixor(k):k.clone().ixor(this)},n.prototype.uxor=function(k){return this.length>k.length?this.clone().iuxor(k):k.clone().iuxor(this)},n.prototype.inotn=function(k){a(typeof k=="number"&&k>=0);var v=0|Math.ceil(k/26),w=k%26;this._expand(v),w>0&&v--;for(var x=0;x<v;x++)this.words[x]=67108863&~this.words[x];return w>0&&(this.words[x]=~this.words[x]&67108863>>26-w),this._strip()},n.prototype.notn=function(k){return this.clone().inotn(k)},n.prototype.setn=function(k,v){a(typeof k=="number"&&k>=0);var w=k/26|0,x=k%26;return this._expand(w+1),this.words[w]=v?this.words[w]|1<<x:this.words[w]&~(1<<x),this._strip()},n.prototype.iadd=function(k){var v,w,x;if(this.negative!==0&&k.negative===0)return this.negative=0,v=this.isub(k),this.negative^=1,this._normSign();if(this.negative===0&&k.negative!==0)return k.negative=0,v=this.isub(k),k.negative=1,v._normSign();this.length>k.length?(w=this,x=k):(w=k,x=this);for(var S=0,T=0;T<x.length;T++)v=(0|w.words[T])+(0|x.words[T])+S,this.words[T]=67108863&v,S=v>>>26;for(;S!==0&&T<w.length;T++)v=(0|w.words[T])+S,this.words[T]=67108863&v,S=v>>>26;if(this.length=w.length,S!==0)this.words[this.length]=S,this.length++;else if(w!==this)for(;T<w.length;T++)this.words[T]=w.words[T];return this},n.prototype.add=function(k){var v;return k.negative!==0&&this.negative===0?(k.negative=0,v=this.sub(k),k.negative^=1,v):k.negative===0&&this.negative!==0?(this.negative=0,v=k.sub(this),this.negative=1,v):this.length>k.length?this.clone().iadd(k):k.clone().iadd(this)},n.prototype.isub=function(k){if(k.negative!==0){k.negative=0;var v=this.iadd(k);return k.negative=1,v._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(k),this.negative=1,this._normSign();var w,x,S=this.cmp(k);if(S===0)return this.negative=0,this.length=1,this.words[0]=0,this;S>0?(w=this,x=k):(w=k,x=this);for(var T=0,L=0;L<x.length;L++)T=(v=(0|w.words[L])-(0|x.words[L])+T)>>26,this.words[L]=67108863&v;for(;T!==0&&L<w.length;L++)T=(v=(0|w.words[L])+T)>>26,this.words[L]=67108863&v;if(T===0&&L<w.length&&w!==this)for(;L<w.length;L++)this.words[L]=w.words[L];return this.length=Math.max(this.length,L),w!==this&&(this.negative=1),this._strip()},n.prototype.sub=function(k){return this.clone().isub(k)};var E=function(k,v,w){var x,S,T,L=k.words,j=v.words,U=w.words,W=0,Y=0|L[0],F=8191&Y,X=Y>>>13,P=0|L[1],I=8191&P,V=P>>>13,Q=0|L[2],G=8191&Q,q=Q>>>13,J=0|L[3],it=8191&J,nt=J>>>13,Z=0|L[4],st=8191&Z,rt=Z>>>13,lt=0|L[5],at=8191&lt,ct=lt>>>13,ut=0|L[6],dt=8191&ut,gt=ut>>>13,vt=0|L[7],_t=8191&vt,wt=vt>>>13,Ot=0|L[8],Pt=8191&Ot,Dt=Ot>>>13,jt=0|L[9],Mt=8191&jt,St=jt>>>13,kt=0|j[0],Nt=8191&kt,Lt=kt>>>13,be=0|j[1],Re=8191&be,qt=be>>>13,Ae=0|j[2],me=8191&Ae,se=Ae>>>13,He=0|j[3],ke=8191&He,Yt=He>>>13,_e=0|j[4],je=8191&_e,Qt=_e>>>13,Te=0|j[5],Be=8191&Te,ae=Te>>>13,ht=0|j[6],pt=8191&ht,bt=ht>>>13,Ct=0|j[7],Xt=8191&Ct,Rt=Ct>>>13,te=0|j[8],Gt=8191&te,Vt=te>>>13,ne=0|j[9],ee=8191&ne,de=ne>>>13;w.negative=k.negative^v.negative,w.length=19;var or=(W+(x=Math.imul(F,Nt))|0)+((8191&(S=(S=Math.imul(F,Lt))+Math.imul(X,Nt)|0))<<13)|0;W=((T=Math.imul(X,Lt))+(S>>>13)|0)+(or>>>26)|0,or&=67108863,x=Math.imul(I,Nt),S=(S=Math.imul(I,Lt))+Math.imul(V,Nt)|0,T=Math.imul(V,Lt);var Xe=(W+(x=x+Math.imul(F,Re)|0)|0)+((8191&(S=(S=S+Math.imul(F,qt)|0)+Math.imul(X,Re)|0))<<13)|0;W=((T=T+Math.imul(X,qt)|0)+(S>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,x=Math.imul(G,Nt),S=(S=Math.imul(G,Lt))+Math.imul(q,Nt)|0,T=Math.imul(q,Lt),x=x+Math.imul(I,Re)|0,S=(S=S+Math.imul(I,qt)|0)+Math.imul(V,Re)|0,T=T+Math.imul(V,qt)|0;var wr=(W+(x=x+Math.imul(F,me)|0)|0)+((8191&(S=(S=S+Math.imul(F,se)|0)+Math.imul(X,me)|0))<<13)|0;W=((T=T+Math.imul(X,se)|0)+(S>>>13)|0)+(wr>>>26)|0,wr&=67108863,x=Math.imul(it,Nt),S=(S=Math.imul(it,Lt))+Math.imul(nt,Nt)|0,T=Math.imul(nt,Lt),x=x+Math.imul(G,Re)|0,S=(S=S+Math.imul(G,qt)|0)+Math.imul(q,Re)|0,T=T+Math.imul(q,qt)|0,x=x+Math.imul(I,me)|0,S=(S=S+Math.imul(I,se)|0)+Math.imul(V,me)|0,T=T+Math.imul(V,se)|0;var _r=(W+(x=x+Math.imul(F,ke)|0)|0)+((8191&(S=(S=S+Math.imul(F,Yt)|0)+Math.imul(X,ke)|0))<<13)|0;W=((T=T+Math.imul(X,Yt)|0)+(S>>>13)|0)+(_r>>>26)|0,_r&=67108863,x=Math.imul(st,Nt),S=(S=Math.imul(st,Lt))+Math.imul(rt,Nt)|0,T=Math.imul(rt,Lt),x=x+Math.imul(it,Re)|0,S=(S=S+Math.imul(it,qt)|0)+Math.imul(nt,Re)|0,T=T+Math.imul(nt,qt)|0,x=x+Math.imul(G,me)|0,S=(S=S+Math.imul(G,se)|0)+Math.imul(q,me)|0,T=T+Math.imul(q,se)|0,x=x+Math.imul(I,ke)|0,S=(S=S+Math.imul(I,Yt)|0)+Math.imul(V,ke)|0,T=T+Math.imul(V,Yt)|0;var gs=(W+(x=x+Math.imul(F,je)|0)|0)+((8191&(S=(S=S+Math.imul(F,Qt)|0)+Math.imul(X,je)|0))<<13)|0;W=((T=T+Math.imul(X,Qt)|0)+(S>>>13)|0)+(gs>>>26)|0,gs&=67108863,x=Math.imul(at,Nt),S=(S=Math.imul(at,Lt))+Math.imul(ct,Nt)|0,T=Math.imul(ct,Lt),x=x+Math.imul(st,Re)|0,S=(S=S+Math.imul(st,qt)|0)+Math.imul(rt,Re)|0,T=T+Math.imul(rt,qt)|0,x=x+Math.imul(it,me)|0,S=(S=S+Math.imul(it,se)|0)+Math.imul(nt,me)|0,T=T+Math.imul(nt,se)|0,x=x+Math.imul(G,ke)|0,S=(S=S+Math.imul(G,Yt)|0)+Math.imul(q,ke)|0,T=T+Math.imul(q,Yt)|0,x=x+Math.imul(I,je)|0,S=(S=S+Math.imul(I,Qt)|0)+Math.imul(V,je)|0,T=T+Math.imul(V,Qt)|0;var ot=(W+(x=x+Math.imul(F,Be)|0)|0)+((8191&(S=(S=S+Math.imul(F,ae)|0)+Math.imul(X,Be)|0))<<13)|0;W=((T=T+Math.imul(X,ae)|0)+(S>>>13)|0)+(ot>>>26)|0,ot&=67108863,x=Math.imul(dt,Nt),S=(S=Math.imul(dt,Lt))+Math.imul(gt,Nt)|0,T=Math.imul(gt,Lt),x=x+Math.imul(at,Re)|0,S=(S=S+Math.imul(at,qt)|0)+Math.imul(ct,Re)|0,T=T+Math.imul(ct,qt)|0,x=x+Math.imul(st,me)|0,S=(S=S+Math.imul(st,se)|0)+Math.imul(rt,me)|0,T=T+Math.imul(rt,se)|0,x=x+Math.imul(it,ke)|0,S=(S=S+Math.imul(it,Yt)|0)+Math.imul(nt,ke)|0,T=T+Math.imul(nt,Yt)|0,x=x+Math.imul(G,je)|0,S=(S=S+Math.imul(G,Qt)|0)+Math.imul(q,je)|0,T=T+Math.imul(q,Qt)|0,x=x+Math.imul(I,Be)|0,S=(S=S+Math.imul(I,ae)|0)+Math.imul(V,Be)|0,T=T+Math.imul(V,ae)|0;var mt=(W+(x=x+Math.imul(F,pt)|0)|0)+((8191&(S=(S=S+Math.imul(F,bt)|0)+Math.imul(X,pt)|0))<<13)|0;W=((T=T+Math.imul(X,bt)|0)+(S>>>13)|0)+(mt>>>26)|0,mt&=67108863,x=Math.imul(_t,Nt),S=(S=Math.imul(_t,Lt))+Math.imul(wt,Nt)|0,T=Math.imul(wt,Lt),x=x+Math.imul(dt,Re)|0,S=(S=S+Math.imul(dt,qt)|0)+Math.imul(gt,Re)|0,T=T+Math.imul(gt,qt)|0,x=x+Math.imul(at,me)|0,S=(S=S+Math.imul(at,se)|0)+Math.imul(ct,me)|0,T=T+Math.imul(ct,se)|0,x=x+Math.imul(st,ke)|0,S=(S=S+Math.imul(st,Yt)|0)+Math.imul(rt,ke)|0,T=T+Math.imul(rt,Yt)|0,x=x+Math.imul(it,je)|0,S=(S=S+Math.imul(it,Qt)|0)+Math.imul(nt,je)|0,T=T+Math.imul(nt,Qt)|0,x=x+Math.imul(G,Be)|0,S=(S=S+Math.imul(G,ae)|0)+Math.imul(q,Be)|0,T=T+Math.imul(q,ae)|0,x=x+Math.imul(I,pt)|0,S=(S=S+Math.imul(I,bt)|0)+Math.imul(V,pt)|0,T=T+Math.imul(V,bt)|0;var yt=(W+(x=x+Math.imul(F,Xt)|0)|0)+((8191&(S=(S=S+Math.imul(F,Rt)|0)+Math.imul(X,Xt)|0))<<13)|0;W=((T=T+Math.imul(X,Rt)|0)+(S>>>13)|0)+(yt>>>26)|0,yt&=67108863,x=Math.imul(Pt,Nt),S=(S=Math.imul(Pt,Lt))+Math.imul(Dt,Nt)|0,T=Math.imul(Dt,Lt),x=x+Math.imul(_t,Re)|0,S=(S=S+Math.imul(_t,qt)|0)+Math.imul(wt,Re)|0,T=T+Math.imul(wt,qt)|0,x=x+Math.imul(dt,me)|0,S=(S=S+Math.imul(dt,se)|0)+Math.imul(gt,me)|0,T=T+Math.imul(gt,se)|0,x=x+Math.imul(at,ke)|0,S=(S=S+Math.imul(at,Yt)|0)+Math.imul(ct,ke)|0,T=T+Math.imul(ct,Yt)|0,x=x+Math.imul(st,je)|0,S=(S=S+Math.imul(st,Qt)|0)+Math.imul(rt,je)|0,T=T+Math.imul(rt,Qt)|0,x=x+Math.imul(it,Be)|0,S=(S=S+Math.imul(it,ae)|0)+Math.imul(nt,Be)|0,T=T+Math.imul(nt,ae)|0,x=x+Math.imul(G,pt)|0,S=(S=S+Math.imul(G,bt)|0)+Math.imul(q,pt)|0,T=T+Math.imul(q,bt)|0,x=x+Math.imul(I,Xt)|0,S=(S=S+Math.imul(I,Rt)|0)+Math.imul(V,Xt)|0,T=T+Math.imul(V,Rt)|0;var xt=(W+(x=x+Math.imul(F,Gt)|0)|0)+((8191&(S=(S=S+Math.imul(F,Vt)|0)+Math.imul(X,Gt)|0))<<13)|0;W=((T=T+Math.imul(X,Vt)|0)+(S>>>13)|0)+(xt>>>26)|0,xt&=67108863,x=Math.imul(Mt,Nt),S=(S=Math.imul(Mt,Lt))+Math.imul(St,Nt)|0,T=Math.imul(St,Lt),x=x+Math.imul(Pt,Re)|0,S=(S=S+Math.imul(Pt,qt)|0)+Math.imul(Dt,Re)|0,T=T+Math.imul(Dt,qt)|0,x=x+Math.imul(_t,me)|0,S=(S=S+Math.imul(_t,se)|0)+Math.imul(wt,me)|0,T=T+Math.imul(wt,se)|0,x=x+Math.imul(dt,ke)|0,S=(S=S+Math.imul(dt,Yt)|0)+Math.imul(gt,ke)|0,T=T+Math.imul(gt,Yt)|0,x=x+Math.imul(at,je)|0,S=(S=S+Math.imul(at,Qt)|0)+Math.imul(ct,je)|0,T=T+Math.imul(ct,Qt)|0,x=x+Math.imul(st,Be)|0,S=(S=S+Math.imul(st,ae)|0)+Math.imul(rt,Be)|0,T=T+Math.imul(rt,ae)|0,x=x+Math.imul(it,pt)|0,S=(S=S+Math.imul(it,bt)|0)+Math.imul(nt,pt)|0,T=T+Math.imul(nt,bt)|0,x=x+Math.imul(G,Xt)|0,S=(S=S+Math.imul(G,Rt)|0)+Math.imul(q,Xt)|0,T=T+Math.imul(q,Rt)|0,x=x+Math.imul(I,Gt)|0,S=(S=S+Math.imul(I,Vt)|0)+Math.imul(V,Gt)|0,T=T+Math.imul(V,Vt)|0;var $t=(W+(x=x+Math.imul(F,ee)|0)|0)+((8191&(S=(S=S+Math.imul(F,de)|0)+Math.imul(X,ee)|0))<<13)|0;W=((T=T+Math.imul(X,de)|0)+(S>>>13)|0)+($t>>>26)|0,$t&=67108863,x=Math.imul(Mt,Re),S=(S=Math.imul(Mt,qt))+Math.imul(St,Re)|0,T=Math.imul(St,qt),x=x+Math.imul(Pt,me)|0,S=(S=S+Math.imul(Pt,se)|0)+Math.imul(Dt,me)|0,T=T+Math.imul(Dt,se)|0,x=x+Math.imul(_t,ke)|0,S=(S=S+Math.imul(_t,Yt)|0)+Math.imul(wt,ke)|0,T=T+Math.imul(wt,Yt)|0,x=x+Math.imul(dt,je)|0,S=(S=S+Math.imul(dt,Qt)|0)+Math.imul(gt,je)|0,T=T+Math.imul(gt,Qt)|0,x=x+Math.imul(at,Be)|0,S=(S=S+Math.imul(at,ae)|0)+Math.imul(ct,Be)|0,T=T+Math.imul(ct,ae)|0,x=x+Math.imul(st,pt)|0,S=(S=S+Math.imul(st,bt)|0)+Math.imul(rt,pt)|0,T=T+Math.imul(rt,bt)|0,x=x+Math.imul(it,Xt)|0,S=(S=S+Math.imul(it,Rt)|0)+Math.imul(nt,Xt)|0,T=T+Math.imul(nt,Rt)|0,x=x+Math.imul(G,Gt)|0,S=(S=S+Math.imul(G,Vt)|0)+Math.imul(q,Gt)|0,T=T+Math.imul(q,Vt)|0;var Et=(W+(x=x+Math.imul(I,ee)|0)|0)+((8191&(S=(S=S+Math.imul(I,de)|0)+Math.imul(V,ee)|0))<<13)|0;W=((T=T+Math.imul(V,de)|0)+(S>>>13)|0)+(Et>>>26)|0,Et&=67108863,x=Math.imul(Mt,me),S=(S=Math.imul(Mt,se))+Math.imul(St,me)|0,T=Math.imul(St,se),x=x+Math.imul(Pt,ke)|0,S=(S=S+Math.imul(Pt,Yt)|0)+Math.imul(Dt,ke)|0,T=T+Math.imul(Dt,Yt)|0,x=x+Math.imul(_t,je)|0,S=(S=S+Math.imul(_t,Qt)|0)+Math.imul(wt,je)|0,T=T+Math.imul(wt,Qt)|0,x=x+Math.imul(dt,Be)|0,S=(S=S+Math.imul(dt,ae)|0)+Math.imul(gt,Be)|0,T=T+Math.imul(gt,ae)|0,x=x+Math.imul(at,pt)|0,S=(S=S+Math.imul(at,bt)|0)+Math.imul(ct,pt)|0,T=T+Math.imul(ct,bt)|0,x=x+Math.imul(st,Xt)|0,S=(S=S+Math.imul(st,Rt)|0)+Math.imul(rt,Xt)|0,T=T+Math.imul(rt,Rt)|0,x=x+Math.imul(it,Gt)|0,S=(S=S+Math.imul(it,Vt)|0)+Math.imul(nt,Gt)|0,T=T+Math.imul(nt,Vt)|0;var Tt=(W+(x=x+Math.imul(G,ee)|0)|0)+((8191&(S=(S=S+Math.imul(G,de)|0)+Math.imul(q,ee)|0))<<13)|0;W=((T=T+Math.imul(q,de)|0)+(S>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,x=Math.imul(Mt,ke),S=(S=Math.imul(Mt,Yt))+Math.imul(St,ke)|0,T=Math.imul(St,Yt),x=x+Math.imul(Pt,je)|0,S=(S=S+Math.imul(Pt,Qt)|0)+Math.imul(Dt,je)|0,T=T+Math.imul(Dt,Qt)|0,x=x+Math.imul(_t,Be)|0,S=(S=S+Math.imul(_t,ae)|0)+Math.imul(wt,Be)|0,T=T+Math.imul(wt,ae)|0,x=x+Math.imul(dt,pt)|0,S=(S=S+Math.imul(dt,bt)|0)+Math.imul(gt,pt)|0,T=T+Math.imul(gt,bt)|0,x=x+Math.imul(at,Xt)|0,S=(S=S+Math.imul(at,Rt)|0)+Math.imul(ct,Xt)|0,T=T+Math.imul(ct,Rt)|0,x=x+Math.imul(st,Gt)|0,S=(S=S+Math.imul(st,Vt)|0)+Math.imul(rt,Gt)|0,T=T+Math.imul(rt,Vt)|0;var ye=(W+(x=x+Math.imul(it,ee)|0)|0)+((8191&(S=(S=S+Math.imul(it,de)|0)+Math.imul(nt,ee)|0))<<13)|0;W=((T=T+Math.imul(nt,de)|0)+(S>>>13)|0)+(ye>>>26)|0,ye&=67108863,x=Math.imul(Mt,je),S=(S=Math.imul(Mt,Qt))+Math.imul(St,je)|0,T=Math.imul(St,Qt),x=x+Math.imul(Pt,Be)|0,S=(S=S+Math.imul(Pt,ae)|0)+Math.imul(Dt,Be)|0,T=T+Math.imul(Dt,ae)|0,x=x+Math.imul(_t,pt)|0,S=(S=S+Math.imul(_t,bt)|0)+Math.imul(wt,pt)|0,T=T+Math.imul(wt,bt)|0,x=x+Math.imul(dt,Xt)|0,S=(S=S+Math.imul(dt,Rt)|0)+Math.imul(gt,Xt)|0,T=T+Math.imul(gt,Rt)|0,x=x+Math.imul(at,Gt)|0,S=(S=S+Math.imul(at,Vt)|0)+Math.imul(ct,Gt)|0,T=T+Math.imul(ct,Vt)|0;var ce=(W+(x=x+Math.imul(st,ee)|0)|0)+((8191&(S=(S=S+Math.imul(st,de)|0)+Math.imul(rt,ee)|0))<<13)|0;W=((T=T+Math.imul(rt,de)|0)+(S>>>13)|0)+(ce>>>26)|0,ce&=67108863,x=Math.imul(Mt,Be),S=(S=Math.imul(Mt,ae))+Math.imul(St,Be)|0,T=Math.imul(St,ae),x=x+Math.imul(Pt,pt)|0,S=(S=S+Math.imul(Pt,bt)|0)+Math.imul(Dt,pt)|0,T=T+Math.imul(Dt,bt)|0,x=x+Math.imul(_t,Xt)|0,S=(S=S+Math.imul(_t,Rt)|0)+Math.imul(wt,Xt)|0,T=T+Math.imul(wt,Rt)|0,x=x+Math.imul(dt,Gt)|0,S=(S=S+Math.imul(dt,Vt)|0)+Math.imul(gt,Gt)|0,T=T+Math.imul(gt,Vt)|0;var fe=(W+(x=x+Math.imul(at,ee)|0)|0)+((8191&(S=(S=S+Math.imul(at,de)|0)+Math.imul(ct,ee)|0))<<13)|0;W=((T=T+Math.imul(ct,de)|0)+(S>>>13)|0)+(fe>>>26)|0,fe&=67108863,x=Math.imul(Mt,pt),S=(S=Math.imul(Mt,bt))+Math.imul(St,pt)|0,T=Math.imul(St,bt),x=x+Math.imul(Pt,Xt)|0,S=(S=S+Math.imul(Pt,Rt)|0)+Math.imul(Dt,Xt)|0,T=T+Math.imul(Dt,Rt)|0,x=x+Math.imul(_t,Gt)|0,S=(S=S+Math.imul(_t,Vt)|0)+Math.imul(wt,Gt)|0,T=T+Math.imul(wt,Vt)|0;var Kt=(W+(x=x+Math.imul(dt,ee)|0)|0)+((8191&(S=(S=S+Math.imul(dt,de)|0)+Math.imul(gt,ee)|0))<<13)|0;W=((T=T+Math.imul(gt,de)|0)+(S>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,x=Math.imul(Mt,Xt),S=(S=Math.imul(Mt,Rt))+Math.imul(St,Xt)|0,T=Math.imul(St,Rt),x=x+Math.imul(Pt,Gt)|0,S=(S=S+Math.imul(Pt,Vt)|0)+Math.imul(Dt,Gt)|0,T=T+Math.imul(Dt,Vt)|0;var Pe=(W+(x=x+Math.imul(_t,ee)|0)|0)+((8191&(S=(S=S+Math.imul(_t,de)|0)+Math.imul(wt,ee)|0))<<13)|0;W=((T=T+Math.imul(wt,de)|0)+(S>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,x=Math.imul(Mt,Gt),S=(S=Math.imul(Mt,Vt))+Math.imul(St,Gt)|0,T=Math.imul(St,Vt);var Oe=(W+(x=x+Math.imul(Pt,ee)|0)|0)+((8191&(S=(S=S+Math.imul(Pt,de)|0)+Math.imul(Dt,ee)|0))<<13)|0;W=((T=T+Math.imul(Dt,de)|0)+(S>>>13)|0)+(Oe>>>26)|0,Oe&=67108863;var ze=(W+(x=Math.imul(Mt,ee))|0)+((8191&(S=(S=Math.imul(Mt,de))+Math.imul(St,ee)|0))<<13)|0;return W=((T=Math.imul(St,de))+(S>>>13)|0)+(ze>>>26)|0,ze&=67108863,U[0]=or,U[1]=Xe,U[2]=wr,U[3]=_r,U[4]=gs,U[5]=ot,U[6]=mt,U[7]=yt,U[8]=xt,U[9]=$t,U[10]=Et,U[11]=Tt,U[12]=ye,U[13]=ce,U[14]=fe,U[15]=Kt,U[16]=Pe,U[17]=Oe,U[18]=ze,W!==0&&(U[19]=W,w.length++),w};function M(k,v,w){w.negative=v.negative^k.negative,w.length=k.length+v.length;for(var x=0,S=0,T=0;T<w.length-1;T++){var L=S;S=0;for(var j=67108863&x,U=Math.min(T,v.length-1),W=Math.max(0,T-k.length+1);W<=U;W++){var Y=T-W,F=(0|k.words[Y])*(0|v.words[W]),X=67108863&F;j=67108863&(X=X+j|0),S+=(L=(L=L+(F/67108864|0)|0)+(X>>>26)|0)>>>26,L&=67108863}w.words[T]=j,x=L,L=S}return x!==0?w.words[T]=x:w.length--,w._strip()}function D(k,v,w){return M(k,v,w)}Math.imul||(E=_),n.prototype.mulTo=function(k,v){var w=this.length+k.length;return this.length===10&&k.length===10?E(this,k,v):w<63?_(this,k,v):w<1024?M(this,k,v):D(this,k,v)},n.prototype.mul=function(k){var v=new n(null);return v.words=new Array(this.length+k.length),this.mulTo(k,v)},n.prototype.mulf=function(k){var v=new n(null);return v.words=new Array(this.length+k.length),D(this,k,v)},n.prototype.imul=function(k){return this.clone().mulTo(k,this)},n.prototype.imuln=function(k){var v=k<0;v&&(k=-k),a(typeof k=="number"),a(k<67108864);for(var w=0,x=0;x<this.length;x++){var S=(0|this.words[x])*k,T=(67108863&S)+(67108863&w);w>>=26,w+=S/67108864|0,w+=T>>>26,this.words[x]=67108863&T}return w!==0&&(this.words[x]=w,this.length++),v?this.ineg():this},n.prototype.muln=function(k){return this.clone().imuln(k)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(k){var v=function(T){for(var L=new Array(T.bitLength()),j=0;j<L.length;j++){var U=j/26|0,W=j%26;L[j]=T.words[U]>>>W&1}return L}(k);if(v.length===0)return new n(1);for(var w=this,x=0;x<v.length&&v[x]===0;x++,w=w.sqr());if(++x<v.length)for(var S=w.sqr();x<v.length;x++,S=S.sqr())v[x]!==0&&(w=w.mul(S));return w},n.prototype.iushln=function(k){a(typeof k=="number"&&k>=0);var v,w=k%26,x=(k-w)/26,S=67108863>>>26-w<<26-w;if(w!==0){var T=0;for(v=0;v<this.length;v++){var L=this.words[v]&S,j=(0|this.words[v])-L<<w;this.words[v]=j|T,T=L>>>26-w}T&&(this.words[v]=T,this.length++)}if(x!==0){for(v=this.length-1;v>=0;v--)this.words[v+x]=this.words[v];for(v=0;v<x;v++)this.words[v]=0;this.length+=x}return this._strip()},n.prototype.ishln=function(k){return a(this.negative===0),this.iushln(k)},n.prototype.iushrn=function(k,v,w){var x;a(typeof k=="number"&&k>=0),x=v?(v-v%26)/26:0;var S=k%26,T=Math.min((k-S)/26,this.length),L=67108863^67108863>>>S<<S,j=w;if(x-=T,x=Math.max(0,x),j){for(var U=0;U<T;U++)j.words[U]=this.words[U];j.length=T}if(T!==0)if(this.length>T)for(this.length-=T,U=0;U<this.length;U++)this.words[U]=this.words[U+T];else this.words[0]=0,this.length=1;var W=0;for(U=this.length-1;U>=0&&(W!==0||U>=x);U--){var Y=0|this.words[U];this.words[U]=W<<26-S|Y>>>S,W=Y&L}return j&&W!==0&&(j.words[j.length++]=W),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},n.prototype.ishrn=function(k,v,w){return a(this.negative===0),this.iushrn(k,v,w)},n.prototype.shln=function(k){return this.clone().ishln(k)},n.prototype.ushln=function(k){return this.clone().iushln(k)},n.prototype.shrn=function(k){return this.clone().ishrn(k)},n.prototype.ushrn=function(k){return this.clone().iushrn(k)},n.prototype.testn=function(k){a(typeof k=="number"&&k>=0);var v=k%26,w=(k-v)/26,x=1<<v;return!(this.length<=w)&&!!(this.words[w]&x)},n.prototype.imaskn=function(k){a(typeof k=="number"&&k>=0);var v=k%26,w=(k-v)/26;if(a(this.negative===0,"imaskn works only with positive numbers"),this.length<=w)return this;if(v!==0&&w++,this.length=Math.min(w,this.length),v!==0){var x=67108863^67108863>>>v<<v;this.words[this.length-1]&=x}return this._strip()},n.prototype.maskn=function(k){return this.clone().imaskn(k)},n.prototype.iaddn=function(k){return a(typeof k=="number"),a(k<67108864),k<0?this.isubn(-k):this.negative!==0?this.length===1&&(0|this.words[0])<=k?(this.words[0]=k-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(k),this.negative=1,this):this._iaddn(k)},n.prototype._iaddn=function(k){this.words[0]+=k;for(var v=0;v<this.length&&this.words[v]>=67108864;v++)this.words[v]-=67108864,v===this.length-1?this.words[v+1]=1:this.words[v+1]++;return this.length=Math.max(this.length,v+1),this},n.prototype.isubn=function(k){if(a(typeof k=="number"),a(k<67108864),k<0)return this.iaddn(-k);if(this.negative!==0)return this.negative=0,this.iaddn(k),this.negative=1,this;if(this.words[0]-=k,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var v=0;v<this.length&&this.words[v]<0;v++)this.words[v]+=67108864,this.words[v+1]-=1;return this._strip()},n.prototype.addn=function(k){return this.clone().iaddn(k)},n.prototype.subn=function(k){return this.clone().isubn(k)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(k,v,w){var x,S,T=k.length+w;this._expand(T);var L=0;for(x=0;x<k.length;x++){S=(0|this.words[x+w])+L;var j=(0|k.words[x])*v;L=((S-=67108863&j)>>26)-(j/67108864|0),this.words[x+w]=67108863&S}for(;x<this.length-w;x++)L=(S=(0|this.words[x+w])+L)>>26,this.words[x+w]=67108863&S;if(L===0)return this._strip();for(a(L===-1),L=0,x=0;x<this.length;x++)L=(S=-(0|this.words[x])+L)>>26,this.words[x]=67108863&S;return this.negative=1,this._strip()},n.prototype._wordDiv=function(k,v){var w=(this.length,k.length),x=this.clone(),S=k,T=0|S.words[S.length-1];(w=26-this._countBits(T))!==0&&(S=S.ushln(w),x.iushln(w),T=0|S.words[S.length-1]);var L,j=x.length-S.length;if(v!=="mod"){(L=new n(null)).length=j+1,L.words=new Array(L.length);for(var U=0;U<L.length;U++)L.words[U]=0}var W=x.clone()._ishlnsubmul(S,1,j);W.negative===0&&(x=W,L&&(L.words[j]=1));for(var Y=j-1;Y>=0;Y--){var F=67108864*(0|x.words[S.length+Y])+(0|x.words[S.length+Y-1]);for(F=Math.min(F/T|0,67108863),x._ishlnsubmul(S,F,Y);x.negative!==0;)F--,x.negative=0,x._ishlnsubmul(S,1,Y),x.isZero()||(x.negative^=1);L&&(L.words[Y]=F)}return L&&L._strip(),x._strip(),v!=="div"&&w!==0&&x.iushrn(w),{div:L||null,mod:x}},n.prototype.divmod=function(k,v,w){return a(!k.isZero()),this.isZero()?{div:new n(0),mod:new n(0)}:this.negative!==0&&k.negative===0?(T=this.neg().divmod(k,v),v!=="mod"&&(x=T.div.neg()),v!=="div"&&(S=T.mod.neg(),w&&S.negative!==0&&S.iadd(k)),{div:x,mod:S}):this.negative===0&&k.negative!==0?(T=this.divmod(k.neg(),v),v!=="mod"&&(x=T.div.neg()),{div:x,mod:T.mod}):(this.negative&k.negative)!=0?(T=this.neg().divmod(k.neg(),v),v!=="div"&&(S=T.mod.neg(),w&&S.negative!==0&&S.isub(k)),{div:T.div,mod:S}):k.length>this.length||this.cmp(k)<0?{div:new n(0),mod:this}:k.length===1?v==="div"?{div:this.divn(k.words[0]),mod:null}:v==="mod"?{div:null,mod:new n(this.modrn(k.words[0]))}:{div:this.divn(k.words[0]),mod:new n(this.modrn(k.words[0]))}:this._wordDiv(k,v);var x,S,T},n.prototype.div=function(k){return this.divmod(k,"div",!1).div},n.prototype.mod=function(k){return this.divmod(k,"mod",!1).mod},n.prototype.umod=function(k){return this.divmod(k,"mod",!0).mod},n.prototype.divRound=function(k){var v=this.divmod(k);if(v.mod.isZero())return v.div;var w=v.div.negative!==0?v.mod.isub(k):v.mod,x=k.ushrn(1),S=k.andln(1),T=w.cmp(x);return T<0||S===1&&T===0?v.div:v.div.negative!==0?v.div.isubn(1):v.div.iaddn(1)},n.prototype.modrn=function(k){var v=k<0;v&&(k=-k),a(k<=67108863);for(var w=(1<<26)%k,x=0,S=this.length-1;S>=0;S--)x=(w*x+(0|this.words[S]))%k;return v?-x:x},n.prototype.modn=function(k){return this.modrn(k)},n.prototype.idivn=function(k){var v=k<0;v&&(k=-k),a(k<=67108863);for(var w=0,x=this.length-1;x>=0;x--){var S=(0|this.words[x])+67108864*w;this.words[x]=S/k|0,w=S%k}return this._strip(),v?this.ineg():this},n.prototype.divn=function(k){return this.clone().idivn(k)},n.prototype.egcd=function(k){a(k.negative===0),a(!k.isZero());var v=this,w=k.clone();v=v.negative!==0?v.umod(k):v.clone();for(var x=new n(1),S=new n(0),T=new n(0),L=new n(1),j=0;v.isEven()&&w.isEven();)v.iushrn(1),w.iushrn(1),++j;for(var U=w.clone(),W=v.clone();!v.isZero();){for(var Y=0,F=1;(v.words[0]&F)==0&&Y<26;++Y,F<<=1);if(Y>0)for(v.iushrn(Y);Y-- >0;)(x.isOdd()||S.isOdd())&&(x.iadd(U),S.isub(W)),x.iushrn(1),S.iushrn(1);for(var X=0,P=1;(w.words[0]&P)==0&&X<26;++X,P<<=1);if(X>0)for(w.iushrn(X);X-- >0;)(T.isOdd()||L.isOdd())&&(T.iadd(U),L.isub(W)),T.iushrn(1),L.iushrn(1);v.cmp(w)>=0?(v.isub(w),x.isub(T),S.isub(L)):(w.isub(v),T.isub(x),L.isub(S))}return{a:T,b:L,gcd:w.iushln(j)}},n.prototype._invmp=function(k){a(k.negative===0),a(!k.isZero());var v=this,w=k.clone();v=v.negative!==0?v.umod(k):v.clone();for(var x,S=new n(1),T=new n(0),L=w.clone();v.cmpn(1)>0&&w.cmpn(1)>0;){for(var j=0,U=1;(v.words[0]&U)==0&&j<26;++j,U<<=1);if(j>0)for(v.iushrn(j);j-- >0;)S.isOdd()&&S.iadd(L),S.iushrn(1);for(var W=0,Y=1;(w.words[0]&Y)==0&&W<26;++W,Y<<=1);if(W>0)for(w.iushrn(W);W-- >0;)T.isOdd()&&T.iadd(L),T.iushrn(1);v.cmp(w)>=0?(v.isub(w),S.isub(T)):(w.isub(v),T.isub(S))}return(x=v.cmpn(1)===0?S:T).cmpn(0)<0&&x.iadd(k),x},n.prototype.gcd=function(k){if(this.isZero())return k.abs();if(k.isZero())return this.abs();var v=this.clone(),w=k.clone();v.negative=0,w.negative=0;for(var x=0;v.isEven()&&w.isEven();x++)v.iushrn(1),w.iushrn(1);for(;;){for(;v.isEven();)v.iushrn(1);for(;w.isEven();)w.iushrn(1);var S=v.cmp(w);if(S<0){var T=v;v=w,w=T}else if(S===0||w.cmpn(1)===0)break;v.isub(w)}return w.iushln(x)},n.prototype.invm=function(k){return this.egcd(k).a.umod(k)},n.prototype.isEven=function(){return(1&this.words[0])==0},n.prototype.isOdd=function(){return(1&this.words[0])==1},n.prototype.andln=function(k){return this.words[0]&k},n.prototype.bincn=function(k){a(typeof k=="number");var v=k%26,w=(k-v)/26,x=1<<v;if(this.length<=w)return this._expand(w+1),this.words[w]|=x,this;for(var S=x,T=w;S!==0&&T<this.length;T++){var L=0|this.words[T];S=(L+=S)>>>26,L&=67108863,this.words[T]=L}return S!==0&&(this.words[T]=S,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(k){var v,w=k<0;if(this.negative!==0&&!w)return-1;if(this.negative===0&&w)return 1;if(this._strip(),this.length>1)v=1;else{w&&(k=-k),a(k<=67108863,"Number is too big");var x=0|this.words[0];v=x===k?0:x<k?-1:1}return this.negative!==0?0|-v:v},n.prototype.cmp=function(k){if(this.negative!==0&&k.negative===0)return-1;if(this.negative===0&&k.negative!==0)return 1;var v=this.ucmp(k);return this.negative!==0?0|-v:v},n.prototype.ucmp=function(k){if(this.length>k.length)return 1;if(this.length<k.length)return-1;for(var v=0,w=this.length-1;w>=0;w--){var x=0|this.words[w],S=0|k.words[w];if(x!==S){x<S?v=-1:x>S&&(v=1);break}}return v},n.prototype.gtn=function(k){return this.cmpn(k)===1},n.prototype.gt=function(k){return this.cmp(k)===1},n.prototype.gten=function(k){return this.cmpn(k)>=0},n.prototype.gte=function(k){return this.cmp(k)>=0},n.prototype.ltn=function(k){return this.cmpn(k)===-1},n.prototype.lt=function(k){return this.cmp(k)===-1},n.prototype.lten=function(k){return this.cmpn(k)<=0},n.prototype.lte=function(k){return this.cmp(k)<=0},n.prototype.eqn=function(k){return this.cmpn(k)===0},n.prototype.eq=function(k){return this.cmp(k)===0},n.red=function(k){return new C(k)},n.prototype.toRed=function(k){return a(!this.red,"Already a number in reduction context"),a(this.negative===0,"red works only with positives"),k.convertTo(this)._forceRed(k)},n.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(k){return this.red=k,this},n.prototype.forceRed=function(k){return a(!this.red,"Already a number in reduction context"),this._forceRed(k)},n.prototype.redAdd=function(k){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,k)},n.prototype.redIAdd=function(k){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,k)},n.prototype.redSub=function(k){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,k)},n.prototype.redISub=function(k){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,k)},n.prototype.redShl=function(k){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,k)},n.prototype.redMul=function(k){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,k),this.red.mul(this,k)},n.prototype.redIMul=function(k){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,k),this.red.imul(this,k)},n.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(k){return a(this.red&&!k.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,k)};var z={k256:null,p224:null,p192:null,p25519:null};function O(k,v){this.name=k,this.p=new n(v,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function N(){O.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function B(){O.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function H(){O.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function $(){O.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function C(k){if(typeof k=="string"){var v=n._prime(k);this.m=v.p,this.prime=v}else a(k.gtn(1),"modulus must be greater than 1"),this.m=k,this.prime=null}function R(k){C.call(this,k),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}O.prototype._tmp=function(){var k=new n(null);return k.words=new Array(Math.ceil(this.n/13)),k},O.prototype.ireduce=function(k){var v,w=k;do this.split(w,this.tmp),v=(w=(w=this.imulK(w)).iadd(this.tmp)).bitLength();while(v>this.n);var x=v<this.n?-1:w.ucmp(this.p);return x===0?(w.words[0]=0,w.length=1):x>0?w.isub(this.p):w.strip!==void 0?w.strip():w._strip(),w},O.prototype.split=function(k,v){k.iushrn(this.n,0,v)},O.prototype.imulK=function(k){return k.imul(this.k)},o(N,O),N.prototype.split=function(k,v){for(var w=Math.min(k.length,9),x=0;x<w;x++)v.words[x]=k.words[x];if(v.length=w,k.length<=9)return k.words[0]=0,void(k.length=1);var S=k.words[9];for(v.words[v.length++]=4194303&S,x=10;x<k.length;x++){var T=0|k.words[x];k.words[x-10]=(4194303&T)<<4|S>>>22,S=T}S>>>=22,k.words[x-10]=S,S===0&&k.length>10?k.length-=10:k.length-=9},N.prototype.imulK=function(k){k.words[k.length]=0,k.words[k.length+1]=0,k.length+=2;for(var v=0,w=0;w<k.length;w++){var x=0|k.words[w];v+=977*x,k.words[w]=67108863&v,v=64*x+(v/67108864|0)}return k.words[k.length-1]===0&&(k.length--,k.words[k.length-1]===0&&k.length--),k},o(B,O),o(H,O),o($,O),$.prototype.imulK=function(k){for(var v=0,w=0;w<k.length;w++){var x=19*(0|k.words[w])+v,S=67108863&x;x>>>=26,k.words[w]=S,v=x}return v!==0&&(k.words[k.length++]=v),k},n._prime=function(k){if(z[k])return z[k];var v;if(k==="k256")v=new N;else if(k==="p224")v=new B;else if(k==="p192")v=new H;else{if(k!=="p25519")throw new Error("Unknown prime "+k);v=new $}return z[k]=v,v},C.prototype._verify1=function(k){a(k.negative===0,"red works only with positives"),a(k.red,"red works only with red numbers")},C.prototype._verify2=function(k,v){a((k.negative|v.negative)==0,"red works only with positives"),a(k.red&&k.red===v.red,"red works only with red numbers")},C.prototype.imod=function(k){return this.prime?this.prime.ireduce(k)._forceRed(this):(p(k,k.umod(this.m)._forceRed(this)),k)},C.prototype.neg=function(k){return k.isZero()?k.clone():this.m.sub(k)._forceRed(this)},C.prototype.add=function(k,v){this._verify2(k,v);var w=k.add(v);return w.cmp(this.m)>=0&&w.isub(this.m),w._forceRed(this)},C.prototype.iadd=function(k,v){this._verify2(k,v);var w=k.iadd(v);return w.cmp(this.m)>=0&&w.isub(this.m),w},C.prototype.sub=function(k,v){this._verify2(k,v);var w=k.sub(v);return w.cmpn(0)<0&&w.iadd(this.m),w._forceRed(this)},C.prototype.isub=function(k,v){this._verify2(k,v);var w=k.isub(v);return w.cmpn(0)<0&&w.iadd(this.m),w},C.prototype.shl=function(k,v){return this._verify1(k),this.imod(k.ushln(v))},C.prototype.imul=function(k,v){return this._verify2(k,v),this.imod(k.imul(v))},C.prototype.mul=function(k,v){return this._verify2(k,v),this.imod(k.mul(v))},C.prototype.isqr=function(k){return this.imul(k,k.clone())},C.prototype.sqr=function(k){return this.mul(k,k)},C.prototype.sqrt=function(k){if(k.isZero())return k.clone();var v=this.m.andln(3);if(a(v%2==1),v===3){var w=this.m.add(new n(1)).iushrn(2);return this.pow(k,w)}for(var x=this.m.subn(1),S=0;!x.isZero()&&x.andln(1)===0;)S++,x.iushrn(1);a(!x.isZero());var T=new n(1).toRed(this),L=T.redNeg(),j=this.m.subn(1).iushrn(1),U=this.m.bitLength();for(U=new n(2*U*U).toRed(this);this.pow(U,j).cmp(L)!==0;)U.redIAdd(L);for(var W=this.pow(U,x),Y=this.pow(k,x.addn(1).iushrn(1)),F=this.pow(k,x),X=S;F.cmp(T)!==0;){for(var P=F,I=0;P.cmp(T)!==0;I++)P=P.redSqr();a(I<X);var V=this.pow(W,new n(1).iushln(X-I-1));Y=Y.redMul(V),W=V.redSqr(),F=F.redMul(W),X=I}return Y},C.prototype.invm=function(k){var v=k._invmp(this.m);return v.negative!==0?(v.negative=0,this.imod(v).redNeg()):this.imod(v)},C.prototype.pow=function(k,v){if(v.isZero())return new n(1).toRed(this);if(v.cmpn(1)===0)return k.clone();var w=new Array(16);w[0]=new n(1).toRed(this),w[1]=k;for(var x=2;x<w.length;x++)w[x]=this.mul(w[x-1],k);var S=w[0],T=0,L=0,j=v.bitLength()%26;for(j===0&&(j=26),x=v.length-1;x>=0;x--){for(var U=v.words[x],W=j-1;W>=0;W--){var Y=U>>W&1;S!==w[0]&&(S=this.sqr(S)),Y!==0||T!==0?(T<<=1,T|=Y,(++L===4||x===0&&W===0)&&(S=this.mul(S,w[T]),L=0,T=0)):L=0}j=26}return S},C.prototype.convertTo=function(k){var v=k.umod(this.m);return v===k?v.clone():v},C.prototype.convertFrom=function(k){var v=k.clone();return v.red=null,v},n.mont=function(k){return new R(k)},o(R,C),R.prototype.convertTo=function(k){return this.imod(k.ushln(this.shift))},R.prototype.convertFrom=function(k){var v=this.imod(k.mul(this.rinv));return v.red=null,v},R.prototype.imul=function(k,v){if(k.isZero()||v.isZero())return k.words[0]=0,k.length=1,k;var w=k.imul(v),x=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=w.isub(x).iushrn(this.shift),T=S;return S.cmp(this.m)>=0?T=S.isub(this.m):S.cmpn(0)<0&&(T=S.iadd(this.m)),T._forceRed(this)},R.prototype.mul=function(k,v){if(k.isZero()||v.isZero())return new n(0)._forceRed(this);var w=k.mul(v),x=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=w.isub(x).iushrn(this.shift),T=S;return S.cmp(this.m)>=0?T=S.isub(this.m):S.cmpn(0)<0&&(T=S.iadd(this.m)),T._forceRed(this)},R.prototype.invm=function(k){return this.imod(k._invmp(this.m).mul(this.r2))._forceRed(this)}})(r===void 0||r)},{buffer:188}],187:[function(t,r,l){var i;function s(o){this.rand=o}if(r.exports=function(o){return i||(i=new s(null)),i.generate(o)},r.exports.Rand=s,s.prototype.generate=function(o){return this._rand(o)},s.prototype._rand=function(o){if(this.rand.getBytes)return this.rand.getBytes(o);for(var n=new Uint8Array(o),c=0;c<n.length;c++)n[c]=this.rand.getByte();return n},typeof self=="object")self.crypto&&self.crypto.getRandomValues?s.prototype._rand=function(o){var n=new Uint8Array(o);return self.crypto.getRandomValues(n),n}:self.msCrypto&&self.msCrypto.getRandomValues?s.prototype._rand=function(o){var n=new Uint8Array(o);return self.msCrypto.getRandomValues(n),n}:typeof window=="object"&&(s.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var a=t("crypto");if(typeof a.randomBytes!="function")throw new Error("Not supported");s.prototype._rand=function(o){return a.randomBytes(o)}}catch{}},{crypto:188}],188:[function(t,r,l){},{}],189:[function(t,r,l){var i=t("safe-buffer").Buffer;function s(u){i.isBuffer(u)||(u=i.from(u));for(var h=u.length/4|0,p=new Array(h),m=0;m<h;m++)p[m]=u.readUInt32BE(4*m);return p}function a(u){for(;0<u.length;u++)u[0]=0}function o(u,h,p,m,f){for(var b,y,_,E,M=p[0],D=p[1],z=p[2],O=p[3],N=u[0]^h[0],B=u[1]^h[1],H=u[2]^h[2],$=u[3]^h[3],C=4,R=1;R<f;R++)b=M[N>>>24]^D[B>>>16&255]^z[H>>>8&255]^O[255&$]^h[C++],y=M[B>>>24]^D[H>>>16&255]^z[$>>>8&255]^O[255&N]^h[C++],_=M[H>>>24]^D[$>>>16&255]^z[N>>>8&255]^O[255&B]^h[C++],E=M[$>>>24]^D[N>>>16&255]^z[B>>>8&255]^O[255&H]^h[C++],N=b,B=y,H=_,$=E;return b=(m[N>>>24]<<24|m[B>>>16&255]<<16|m[H>>>8&255]<<8|m[255&$])^h[C++],y=(m[B>>>24]<<24|m[H>>>16&255]<<16|m[$>>>8&255]<<8|m[255&N])^h[C++],_=(m[H>>>24]<<24|m[$>>>16&255]<<16|m[N>>>8&255]<<8|m[255&B])^h[C++],E=(m[$>>>24]<<24|m[N>>>16&255]<<16|m[B>>>8&255]<<8|m[255&H])^h[C++],[b>>>=0,y>>>=0,_>>>=0,E>>>=0]}var n=[0,1,2,4,8,16,32,64,128,27,54],c=function(){for(var u=new Array(256),h=0;h<256;h++)u[h]=h<128?h<<1:h<<1^283;for(var p=[],m=[],f=[[],[],[],[]],b=[[],[],[],[]],y=0,_=0,E=0;E<256;++E){var M=_^_<<1^_<<2^_<<3^_<<4;M=M>>>8^255&M^99,p[y]=M,m[M]=y;var D=u[y],z=u[D],O=u[z],N=257*u[M]^16843008*M;f[0][y]=N<<24|N>>>8,f[1][y]=N<<16|N>>>16,f[2][y]=N<<8|N>>>24,f[3][y]=N,N=16843009*O^65537*z^257*D^16843008*y,b[0][M]=N<<24|N>>>8,b[1][M]=N<<16|N>>>16,b[2][M]=N<<8|N>>>24,b[3][M]=N,y===0?y=_=1:(y=D^u[u[u[O^D]]],_^=u[u[_]])}return{SBOX:p,INV_SBOX:m,SUB_MIX:f,INV_SUB_MIX:b}}();function d(u){this._key=s(u),this._reset()}d.blockSize=16,d.keySize=32,d.prototype.blockSize=d.blockSize,d.prototype.keySize=d.keySize,d.prototype._reset=function(){for(var u=this._key,h=u.length,p=h+6,m=4*(p+1),f=[],b=0;b<h;b++)f[b]=u[b];for(b=h;b<m;b++){var y=f[b-1];b%h==0?(y=y<<8|y>>>24,y=c.SBOX[y>>>24]<<24|c.SBOX[y>>>16&255]<<16|c.SBOX[y>>>8&255]<<8|c.SBOX[255&y],y^=n[b/h|0]<<24):h>6&&b%h==4&&(y=c.SBOX[y>>>24]<<24|c.SBOX[y>>>16&255]<<16|c.SBOX[y>>>8&255]<<8|c.SBOX[255&y]),f[b]=f[b-h]^y}for(var _=[],E=0;E<m;E++){var M=m-E,D=f[M-(E%4?0:4)];_[E]=E<4||M<=4?D:c.INV_SUB_MIX[0][c.SBOX[D>>>24]]^c.INV_SUB_MIX[1][c.SBOX[D>>>16&255]]^c.INV_SUB_MIX[2][c.SBOX[D>>>8&255]]^c.INV_SUB_MIX[3][c.SBOX[255&D]]}this._nRounds=p,this._keySchedule=f,this._invKeySchedule=_},d.prototype.encryptBlockRaw=function(u){return o(u=s(u),this._keySchedule,c.SUB_MIX,c.SBOX,this._nRounds)},d.prototype.encryptBlock=function(u){var h=this.encryptBlockRaw(u),p=i.allocUnsafe(16);return p.writeUInt32BE(h[0],0),p.writeUInt32BE(h[1],4),p.writeUInt32BE(h[2],8),p.writeUInt32BE(h[3],12),p},d.prototype.decryptBlock=function(u){var h=(u=s(u))[1];u[1]=u[3],u[3]=h;var p=o(u,this._invKeySchedule,c.INV_SUB_MIX,c.INV_SBOX,this._nRounds),m=i.allocUnsafe(16);return m.writeUInt32BE(p[0],0),m.writeUInt32BE(p[3],4),m.writeUInt32BE(p[2],8),m.writeUInt32BE(p[1],12),m},d.prototype.scrub=function(){a(this._keySchedule),a(this._invKeySchedule),a(this._key)},r.exports.AES=d},{"safe-buffer":494}],190:[function(t,r,l){var i=t("./aes"),s=t("safe-buffer").Buffer,a=t("cipher-base"),o=t("inherits"),n=t("./ghash"),c=t("buffer-xor"),d=t("./incr32");function u(h,p,m,f){a.call(this);var b=s.alloc(4,0);this._cipher=new i.AES(p);var y=this._cipher.encryptBlock(b);this._ghash=new n(y),m=function(_,E,M){if(E.length===12)return _._finID=s.concat([E,s.from([0,0,0,1])]),s.concat([E,s.from([0,0,0,2])]);var D=new n(M),z=E.length,O=z%16;D.update(E),O&&(O=16-O,D.update(s.alloc(O,0))),D.update(s.alloc(8,0));var N=8*z,B=s.alloc(8);B.writeUIntBE(N,0,8),D.update(B),_._finID=D.state;var H=s.from(_._finID);return d(H),H}(this,m,y),this._prev=s.from(m),this._cache=s.allocUnsafe(0),this._secCache=s.allocUnsafe(0),this._decrypt=f,this._alen=0,this._len=0,this._mode=h,this._authTag=null,this._called=!1}o(u,a),u.prototype._update=function(h){if(!this._called&&this._alen){var p=16-this._alen%16;p<16&&(p=s.alloc(p,0),this._ghash.update(p))}this._called=!0;var m=this._mode.encrypt(this,h);return this._decrypt?this._ghash.update(h):this._ghash.update(m),this._len+=h.length,m},u.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var h=c(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(p,m){var f=0;p.length!==m.length&&f++;for(var b=Math.min(p.length,m.length),y=0;y<b;++y)f+=p[y]^m[y];return f}(h,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=h,this._cipher.scrub()},u.prototype.getAuthTag=function(){if(this._decrypt||!s.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},u.prototype.setAuthTag=function(h){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=h},u.prototype.setAAD=function(h){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(h),this._alen+=h.length},r.exports=u},{"./aes":189,"./ghash":194,"./incr32":195,"buffer-xor":219,"cipher-base":221,inherits:440,"safe-buffer":494}],191:[function(t,r,l){var i=t("./encrypter"),s=t("./decrypter"),a=t("./modes/list.json");l.createCipher=l.Cipher=i.createCipher,l.createCipheriv=l.Cipheriv=i.createCipheriv,l.createDecipher=l.Decipher=s.createDecipher,l.createDecipheriv=l.Decipheriv=s.createDecipheriv,l.listCiphers=l.getCiphers=function(){return Object.keys(a)}},{"./decrypter":192,"./encrypter":193,"./modes/list.json":203}],192:[function(t,r,l){var i=t("./authCipher"),s=t("safe-buffer").Buffer,a=t("./modes"),o=t("./streamCipher"),n=t("cipher-base"),c=t("./aes"),d=t("evp_bytestokey");function u(m,f,b){n.call(this),this._cache=new h,this._last=void 0,this._cipher=new c.AES(f),this._prev=s.from(b),this._mode=m,this._autopadding=!0}function h(){this.cache=s.allocUnsafe(0)}function p(m,f,b){var y=a[m.toLowerCase()];if(!y)throw new TypeError("invalid suite type");if(typeof b=="string"&&(b=s.from(b)),y.mode!=="GCM"&&b.length!==y.iv)throw new TypeError("invalid iv length "+b.length);if(typeof f=="string"&&(f=s.from(f)),f.length!==y.key/8)throw new TypeError("invalid key length "+f.length);return y.type==="stream"?new o(y.module,f,b,!0):y.type==="auth"?new i(y.module,f,b,!0):new u(y.module,f,b)}t("inherits")(u,n),u.prototype._update=function(m){var f,b;this._cache.add(m);for(var y=[];f=this._cache.get(this._autopadding);)b=this._mode.decrypt(this,f),y.push(b);return s.concat(y)},u.prototype._final=function(){var m=this._cache.flush();if(this._autopadding)return function(f){var b=f[15];if(b<1||b>16)throw new Error("unable to decrypt data");for(var y=-1;++y<b;)if(f[y+(16-b)]!==b)throw new Error("unable to decrypt data");if(b!==16)return f.slice(0,16-b)}(this._mode.decrypt(this,m));if(m)throw new Error("data not multiple of block length")},u.prototype.setAutoPadding=function(m){return this._autopadding=!!m,this},h.prototype.add=function(m){this.cache=s.concat([this.cache,m])},h.prototype.get=function(m){var f;if(m){if(this.cache.length>16)return f=this.cache.slice(0,16),this.cache=this.cache.slice(16),f}else if(this.cache.length>=16)return f=this.cache.slice(0,16),this.cache=this.cache.slice(16),f;return null},h.prototype.flush=function(){if(this.cache.length)return this.cache},l.createDecipher=function(m,f){var b=a[m.toLowerCase()];if(!b)throw new TypeError("invalid suite type");var y=d(f,!1,b.key,b.iv);return p(m,y.key,y.iv)},l.createDecipheriv=p},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],193:[function(t,r,l){var i=t("./modes"),s=t("./authCipher"),a=t("safe-buffer").Buffer,o=t("./streamCipher"),n=t("cipher-base"),c=t("./aes"),d=t("evp_bytestokey");function u(f,b,y){n.call(this),this._cache=new p,this._cipher=new c.AES(b),this._prev=a.from(y),this._mode=f,this._autopadding=!0}t("inherits")(u,n),u.prototype._update=function(f){var b,y;this._cache.add(f);for(var _=[];b=this._cache.get();)y=this._mode.encrypt(this,b),_.push(y);return a.concat(_)};var h=a.alloc(16,16);function p(){this.cache=a.allocUnsafe(0)}function m(f,b,y){var _=i[f.toLowerCase()];if(!_)throw new TypeError("invalid suite type");if(typeof b=="string"&&(b=a.from(b)),b.length!==_.key/8)throw new TypeError("invalid key length "+b.length);if(typeof y=="string"&&(y=a.from(y)),_.mode!=="GCM"&&y.length!==_.iv)throw new TypeError("invalid iv length "+y.length);return _.type==="stream"?new o(_.module,b,y):_.type==="auth"?new s(_.module,b,y):new u(_.module,b,y)}u.prototype._final=function(){var f=this._cache.flush();if(this._autopadding)return f=this._mode.encrypt(this,f),this._cipher.scrub(),f;if(!f.equals(h))throw this._cipher.scrub(),new Error("data not multiple of block length")},u.prototype.setAutoPadding=function(f){return this._autopadding=!!f,this},p.prototype.add=function(f){this.cache=a.concat([this.cache,f])},p.prototype.get=function(){if(this.cache.length>15){var f=this.cache.slice(0,16);return this.cache=this.cache.slice(16),f}return null},p.prototype.flush=function(){for(var f=16-this.cache.length,b=a.allocUnsafe(f),y=-1;++y<f;)b.writeUInt8(f,y);return a.concat([this.cache,b])},l.createCipheriv=m,l.createCipher=function(f,b){var y=i[f.toLowerCase()];if(!y)throw new TypeError("invalid suite type");var _=d(b,!1,y.key,y.iv);return m(f,_.key,_.iv)}},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],194:[function(t,r,l){var i=t("safe-buffer").Buffer,s=i.alloc(16,0);function a(n){var c=i.allocUnsafe(16);return c.writeUInt32BE(n[0]>>>0,0),c.writeUInt32BE(n[1]>>>0,4),c.writeUInt32BE(n[2]>>>0,8),c.writeUInt32BE(n[3]>>>0,12),c}function o(n){this.h=n,this.state=i.alloc(16,0),this.cache=i.allocUnsafe(0)}o.prototype.ghash=function(n){for(var c=-1;++c<n.length;)this.state[c]^=n[c];this._multiply()},o.prototype._multiply=function(){for(var n,c,d,u=[(n=this.h).readUInt32BE(0),n.readUInt32BE(4),n.readUInt32BE(8),n.readUInt32BE(12)],h=[0,0,0,0],p=-1;++p<128;){for((this.state[~~(p/8)]&1<<7-p%8)!=0&&(h[0]^=u[0],h[1]^=u[1],h[2]^=u[2],h[3]^=u[3]),d=(1&u[3])!=0,c=3;c>0;c--)u[c]=u[c]>>>1|(1&u[c-1])<<31;u[0]=u[0]>>>1,d&&(u[0]=u[0]^225<<24)}this.state=a(h)},o.prototype.update=function(n){var c;for(this.cache=i.concat([this.cache,n]);this.cache.length>=16;)c=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(c)},o.prototype.final=function(n,c){return this.cache.length&&this.ghash(i.concat([this.cache,s],16)),this.ghash(a([0,n,0,c])),this.state},r.exports=o},{"safe-buffer":494}],195:[function(t,r,l){r.exports=function(i){for(var s,a=i.length;a--;){if((s=i.readUInt8(a))!==255){s++,i.writeUInt8(s,a);break}i.writeUInt8(0,a)}}},{}],196:[function(t,r,l){var i=t("buffer-xor");l.encrypt=function(s,a){var o=i(a,s._prev);return s._prev=s._cipher.encryptBlock(o),s._prev},l.decrypt=function(s,a){var o=s._prev;s._prev=a;var n=s._cipher.decryptBlock(a);return i(n,o)}},{"buffer-xor":219}],197:[function(t,r,l){var i=t("safe-buffer").Buffer,s=t("buffer-xor");function a(o,n,c){var d=n.length,u=s(n,o._cache);return o._cache=o._cache.slice(d),o._prev=i.concat([o._prev,c?n:u]),u}l.encrypt=function(o,n,c){for(var d,u=i.allocUnsafe(0);n.length;){if(o._cache.length===0&&(o._cache=o._cipher.encryptBlock(o._prev),o._prev=i.allocUnsafe(0)),!(o._cache.length<=n.length)){u=i.concat([u,a(o,n,c)]);break}d=o._cache.length,u=i.concat([u,a(o,n.slice(0,d),c)]),n=n.slice(d)}return u}},{"buffer-xor":219,"safe-buffer":494}],198:[function(t,r,l){var i=t("safe-buffer").Buffer;function s(o,n,c){for(var d,u,h=-1,p=0;++h<8;)d=n&1<<7-h?128:0,p+=(128&(u=o._cipher.encryptBlock(o._prev)[0]^d))>>h%8,o._prev=a(o._prev,c?d:u);return p}function a(o,n){var c=o.length,d=-1,u=i.allocUnsafe(o.length);for(o=i.concat([o,i.from([n])]);++d<c;)u[d]=o[d]<<1|o[d+1]>>7;return u}l.encrypt=function(o,n,c){for(var d=n.length,u=i.allocUnsafe(d),h=-1;++h<d;)u[h]=s(o,n[h],c);return u}},{"safe-buffer":494}],199:[function(t,r,l){var i=t("safe-buffer").Buffer;function s(a,o,n){var c=a._cipher.encryptBlock(a._prev)[0]^o;return a._prev=i.concat([a._prev.slice(1),i.from([n?o:c])]),c}l.encrypt=function(a,o,n){for(var c=o.length,d=i.allocUnsafe(c),u=-1;++u<c;)d[u]=s(a,o[u],n);return d}},{"safe-buffer":494}],200:[function(t,r,l){var i=t("buffer-xor"),s=t("safe-buffer").Buffer,a=t("../incr32");function o(n){var c=n._cipher.encryptBlockRaw(n._prev);return a(n._prev),c}l.encrypt=function(n,c){var d=Math.ceil(c.length/16),u=n._cache.length;n._cache=s.concat([n._cache,s.allocUnsafe(16*d)]);for(var h=0;h<d;h++){var p=o(n),m=u+16*h;n._cache.writeUInt32BE(p[0],m+0),n._cache.writeUInt32BE(p[1],m+4),n._cache.writeUInt32BE(p[2],m+8),n._cache.writeUInt32BE(p[3],m+12)}var f=n._cache.slice(0,c.length);return n._cache=n._cache.slice(c.length),i(c,f)}},{"../incr32":195,"buffer-xor":219,"safe-buffer":494}],201:[function(t,r,l){l.encrypt=function(i,s){return i._cipher.encryptBlock(s)},l.decrypt=function(i,s){return i._cipher.decryptBlock(s)}},{}],202:[function(t,r,l){var i={ECB:t("./ecb"),CBC:t("./cbc"),CFB:t("./cfb"),CFB8:t("./cfb8"),CFB1:t("./cfb1"),OFB:t("./ofb"),CTR:t("./ctr"),GCM:t("./ctr")},s=t("./list.json");for(var a in s)s[a].module=i[s[a].mode];r.exports=s},{"./cbc":196,"./cfb":197,"./cfb1":198,"./cfb8":199,"./ctr":200,"./ecb":201,"./list.json":203,"./ofb":204}],203:[function(t,r,l){r.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},{}],204:[function(t,r,l){(function(i){(function(){var s=t("buffer-xor");function a(o){return o._prev=o._cipher.encryptBlock(o._prev),o._prev}l.encrypt=function(o,n){for(;o._cache.length<n.length;)o._cache=i.concat([o._cache,a(o)]);var c=o._cache.slice(0,n.length);return o._cache=o._cache.slice(n.length),s(n,c)}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:220,"buffer-xor":219}],205:[function(t,r,l){var i=t("./aes"),s=t("safe-buffer").Buffer,a=t("cipher-base");function o(n,c,d,u){a.call(this),this._cipher=new i.AES(c),this._prev=s.from(d),this._cache=s.allocUnsafe(0),this._secCache=s.allocUnsafe(0),this._decrypt=u,this._mode=n}t("inherits")(o,a),o.prototype._update=function(n){return this._mode.encrypt(this,n,this._decrypt)},o.prototype._final=function(){this._cipher.scrub()},r.exports=o},{"./aes":189,"cipher-base":221,inherits:440,"safe-buffer":494}],206:[function(t,r,l){var i=t("browserify-des"),s=t("browserify-aes/browser"),a=t("browserify-aes/modes"),o=t("browserify-des/modes"),n=t("evp_bytestokey");function c(u,h,p){if(u=u.toLowerCase(),a[u])return s.createCipheriv(u,h,p);if(o[u])return new i({key:h,iv:p,mode:u});throw new TypeError("invalid suite type")}function d(u,h,p){if(u=u.toLowerCase(),a[u])return s.createDecipheriv(u,h,p);if(o[u])return new i({key:h,iv:p,mode:u,decrypt:!0});throw new TypeError("invalid suite type")}l.createCipher=l.Cipher=function(u,h){var p,m;if(u=u.toLowerCase(),a[u])p=a[u].key,m=a[u].iv;else{if(!o[u])throw new TypeError("invalid suite type");p=8*o[u].key,m=o[u].iv}var f=n(h,!1,p,m);return c(u,f.key,f.iv)},l.createCipheriv=l.Cipheriv=c,l.createDecipher=l.Decipher=function(u,h){var p,m;if(u=u.toLowerCase(),a[u])p=a[u].key,m=a[u].iv;else{if(!o[u])throw new TypeError("invalid suite type");p=8*o[u].key,m=o[u].iv}var f=n(h,!1,p,m);return d(u,f.key,f.iv)},l.createDecipheriv=l.Decipheriv=d,l.listCiphers=l.getCiphers=function(){return Object.keys(o).concat(s.getCiphers())}},{"browserify-aes/browser":191,"browserify-aes/modes":202,"browserify-des":207,"browserify-des/modes":208,evp_bytestokey:423}],207:[function(t,r,l){var i=t("cipher-base"),s=t("des.js"),a=t("inherits"),o=t("safe-buffer").Buffer,n={"des-ede3-cbc":s.CBC.instantiate(s.EDE),"des-ede3":s.EDE,"des-ede-cbc":s.CBC.instantiate(s.EDE),"des-ede":s.EDE,"des-cbc":s.CBC.instantiate(s.DES),"des-ecb":s.DES};function c(d){i.call(this);var u,h=d.mode.toLowerCase(),p=n[h];u=d.decrypt?"decrypt":"encrypt";var m=d.key;o.isBuffer(m)||(m=o.from(m)),h!=="des-ede"&&h!=="des-ede-cbc"||(m=o.concat([m,m.slice(0,8)]));var f=d.iv;o.isBuffer(f)||(f=o.from(f)),this._des=p.create({key:m,iv:f,type:u})}n.des=n["des-cbc"],n.des3=n["des-ede3-cbc"],r.exports=c,a(c,i),c.prototype._update=function(d){return o.from(this._des.update(d))},c.prototype._final=function(){return o.from(this._des.final())}},{"cipher-base":221,"des.js":394,inherits:440,"safe-buffer":494}],208:[function(t,r,l){l["des-ecb"]={key:8,iv:0},l["des-cbc"]=l.des={key:8,iv:8},l["des-ede3-cbc"]=l.des3={key:24,iv:8},l["des-ede3"]={key:24,iv:0},l["des-ede-cbc"]={key:16,iv:8},l["des-ede"]={key:16,iv:0}},{}],209:[function(t,r,l){(function(i){(function(){var s=t("bn.js"),a=t("randombytes");function o(c){var d,u=c.modulus.byteLength();do d=new s(a(u));while(d.cmp(c.modulus)>=0||!d.umod(c.prime1)||!d.umod(c.prime2));return d}function n(c,d){var u=function(z){var O=o(z);return{blinder:O.toRed(s.mont(z.modulus)).redPow(new s(z.publicExponent)).fromRed(),unblinder:O.invm(z.modulus)}}(d),h=d.modulus.byteLength(),p=new s(c).mul(u.blinder).umod(d.modulus),m=p.toRed(s.mont(d.prime1)),f=p.toRed(s.mont(d.prime2)),b=d.coefficient,y=d.prime1,_=d.prime2,E=m.redPow(d.exponent1).fromRed(),M=f.redPow(d.exponent2).fromRed(),D=E.isub(M).imul(b).umod(y).imul(_);return M.iadd(D).imul(u.unblinder).umod(d.modulus).toArrayLike(i,"be",h)}n.getr=o,r.exports=n}).call(this)}).call(this,t("buffer").Buffer)},{"bn.js":186,buffer:220,randombytes:475}],210:[function(t,r,l){r.exports=t("./browser/algorithms.json")},{"./browser/algorithms.json":211}],211:[function(t,r,l){r.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},{}],212:[function(t,r,l){r.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},{}],213:[function(t,r,l){var i=t("safe-buffer").Buffer,s=t("create-hash"),a=t("readable-stream"),o=t("inherits"),n=t("./sign"),c=t("./verify"),d=t("./algorithms.json");function u(f){a.Writable.call(this);var b=d[f];if(!b)throw new Error("Unknown message digest");this._hashType=b.hash,this._hash=s(b.hash),this._tag=b.id,this._signType=b.sign}function h(f){a.Writable.call(this);var b=d[f];if(!b)throw new Error("Unknown message digest");this._hash=s(b.hash),this._tag=b.id,this._signType=b.sign}function p(f){return new u(f)}function m(f){return new h(f)}Object.keys(d).forEach(function(f){d[f].id=i.from(d[f].id,"hex"),d[f.toLowerCase()]=d[f]}),o(u,a.Writable),u.prototype._write=function(f,b,y){this._hash.update(f),y()},u.prototype.update=function(f,b){return typeof f=="string"&&(f=i.from(f,b)),this._hash.update(f),this},u.prototype.sign=function(f,b){this.end();var y=this._hash.digest(),_=n(y,f,this._hashType,this._signType,this._tag);return b?_.toString(b):_},o(h,a.Writable),h.prototype._write=function(f,b,y){this._hash.update(f),y()},h.prototype.update=function(f,b){return typeof f=="string"&&(f=i.from(f,b)),this._hash.update(f),this},h.prototype.verify=function(f,b,y){typeof b=="string"&&(b=i.from(b,y)),this.end();var _=this._hash.digest();return c(b,_,f,this._signType,this._tag)},r.exports={Sign:p,Verify:m,createSign:p,createVerify:m}},{"./algorithms.json":211,"./sign":214,"./verify":215,"create-hash":386,inherits:440,"readable-stream":491,"safe-buffer":494}],214:[function(t,r,l){var i=t("safe-buffer").Buffer,s=t("create-hmac"),a=t("browserify-rsa"),o=t("elliptic").ec,n=t("bn.js"),c=t("parse-asn1"),d=t("./curves.json");function u(f,b,y,_){if((f=i.from(f.toArray())).length<b.byteLength()){var E=i.alloc(b.byteLength()-f.length);f=i.concat([E,f])}var M=y.length,D=function(N,B){N=(N=h(N,B)).mod(B);var H=i.from(N.toArray());if(H.length<B.byteLength()){var $=i.alloc(B.byteLength()-H.length);H=i.concat([$,H])}return H}(y,b),z=i.alloc(M);z.fill(1);var O=i.alloc(M);return O=s(_,O).update(z).update(i.from([0])).update(f).update(D).digest(),z=s(_,O).update(z).digest(),{k:O=s(_,O).update(z).update(i.from([1])).update(f).update(D).digest(),v:z=s(_,O).update(z).digest()}}function h(f,b){var y=new n(f),_=(f.length<<3)-b.bitLength();return _>0&&y.ishrn(_),y}function p(f,b,y){var _,E;do{for(_=i.alloc(0);8*_.length<f.bitLength();)b.v=s(y,b.k).update(b.v).digest(),_=i.concat([_,b.v]);E=h(_,f),b.k=s(y,b.k).update(b.v).update(i.from([0])).digest(),b.v=s(y,b.k).update(b.v).digest()}while(E.cmp(f)!==-1);return E}function m(f,b,y,_){return f.toRed(n.mont(y)).redPow(b).fromRed().mod(_)}r.exports=function(f,b,y,_,E){var M=c(b);if(M.curve){if(_!=="ecdsa"&&_!=="ecdsa/rsa")throw new Error("wrong private key type");return function(N,B){var H=d[B.curve.join(".")];if(!H)throw new Error("unknown curve "+B.curve.join("."));var $=new o(H).keyFromPrivate(B.privateKey).sign(N);return i.from($.toDER())}(f,M)}if(M.type==="dsa"){if(_!=="dsa")throw new Error("wrong private key type");return function(N,B,H){for(var $,C=B.params.priv_key,R=B.params.p,k=B.params.q,v=B.params.g,w=new n(0),x=h(N,k).mod(k),S=!1,T=u(C,k,N,H);S===!1;)$=p(k,T,H),w=m(v,$,R,k),(S=$.invm(k).imul(x.add(C.mul(w))).mod(k)).cmpn(0)===0&&(S=!1,w=new n(0));return function(L,j){L=L.toArray(),j=j.toArray(),128&L[0]&&(L=[0].concat(L)),128&j[0]&&(j=[0].concat(j));var U=[48,L.length+j.length+4,2,L.length];return U=U.concat(L,[2,j.length],j),i.from(U)}(w,S)}(f,M,y)}if(_!=="rsa"&&_!=="ecdsa/rsa")throw new Error("wrong private key type");f=i.concat([E,f]);for(var D=M.modulus.byteLength(),z=[0,1];f.length+z.length+1<D;)z.push(255);z.push(0);for(var O=-1;++O<f.length;)z.push(f[O]);return a(z,M)},r.exports.getKey=u,r.exports.makeKey=p},{"./curves.json":212,"bn.js":186,"browserify-rsa":209,"create-hmac":388,elliptic:405,"parse-asn1":459,"safe-buffer":494}],215:[function(t,r,l){var i=t("safe-buffer").Buffer,s=t("bn.js"),a=t("elliptic").ec,o=t("parse-asn1"),n=t("./curves.json");function c(d,u){if(d.cmpn(0)<=0)throw new Error("invalid sig");if(d.cmp(u)>=u)throw new Error("invalid sig")}r.exports=function(d,u,h,p,m){var f=o(h);if(f.type==="ec"){if(p!=="ecdsa"&&p!=="ecdsa/rsa")throw new Error("wrong public key type");return function(z,O,N){var B=n[N.data.algorithm.curve.join(".")];if(!B)throw new Error("unknown curve "+N.data.algorithm.curve.join("."));var H=new a(B),$=N.data.subjectPrivateKey.data;return H.verify(O,z,$)}(d,u,f)}if(f.type==="dsa"){if(p!=="dsa")throw new Error("wrong public key type");return function(z,O,N){var B=N.data.p,H=N.data.q,$=N.data.g,C=N.data.pub_key,R=o.signature.decode(z,"der"),k=R.s,v=R.r;c(k,H),c(v,H);var w=s.mont(B),x=k.invm(H);return $.toRed(w).redPow(new s(O).mul(x).mod(H)).fromRed().mul(C.toRed(w).redPow(v.mul(x).mod(H)).fromRed()).mod(B).mod(H).cmp(v)===0}(d,u,f)}if(p!=="rsa"&&p!=="ecdsa/rsa")throw new Error("wrong public key type");u=i.concat([m,u]);for(var b=f.modulus.byteLength(),y=[1],_=0;u.length+y.length+2<b;)y.push(255),_++;y.push(0);for(var E=-1;++E<u.length;)y.push(u[E]);y=i.from(y);var M=s.mont(f.modulus);d=(d=new s(d).toRed(M)).redPow(new s(f.publicExponent)),d=i.from(d.fromRed().toArray());var D=_<8?1:0;for(b=Math.min(d.length,y.length),d.length!==y.length&&(D=1),E=-1;++E<b;)D|=d[E]^y[E];return D===0}},{"./curves.json":212,"bn.js":186,elliptic:405,"parse-asn1":459,"safe-buffer":494}],216:[function(t,r,l){},{}],217:[function(t,r,l){var i=t("buffer"),s=i.Buffer;function a(n,c){for(var d in n)c[d]=n[d]}function o(n,c,d){return s(n,c,d)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?r.exports=i:(a(i,l),l.Buffer=o),a(s,o),o.from=function(n,c,d){if(typeof n=="number")throw new TypeError("Argument must not be a number");return s(n,c,d)},o.alloc=function(n,c,d){if(typeof n!="number")throw new TypeError("Argument must be a number");var u=s(n);return c!==void 0?typeof d=="string"?u.fill(c,d):u.fill(c):u.fill(0),u},o.allocUnsafe=function(n){if(typeof n!="number")throw new TypeError("Argument must be a number");return s(n)},o.allocUnsafeSlow=function(n){if(typeof n!="number")throw new TypeError("Argument must be a number");return i.SlowBuffer(n)}},{buffer:220}],218:[function(t,r,l){var i=t("safe-buffer").Buffer,s=i.isEncoding||function(f){switch((f=""+f)&&f.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(f){var b;switch(this.encoding=function(y){var _=function(E){if(!E)return"utf8";for(var M;;)switch(E){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return E;default:if(M)return;E=(""+E).toLowerCase(),M=!0}}(y);if(typeof _!="string"&&(i.isEncoding===s||!s(y)))throw new Error("Unknown encoding: "+y);return _||y}(f),this.encoding){case"utf16le":this.text=c,this.end=d,b=4;break;case"utf8":this.fillLast=n,b=4;break;case"base64":this.text=u,this.end=h,b=3;break;default:return this.write=p,void(this.end=m)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(b)}function o(f){return f<=127?0:f>>5==6?2:f>>4==14?3:f>>3==30?4:f>>6==2?-1:-2}function n(f){var b=this.lastTotal-this.lastNeed,y=function(_,E,M){if((192&E[0])!=128)return _.lastNeed=0,"�";if(_.lastNeed>1&&E.length>1){if((192&E[1])!=128)return _.lastNeed=1,"�";if(_.lastNeed>2&&E.length>2&&(192&E[2])!=128)return _.lastNeed=2,"�"}}(this,f);return y!==void 0?y:this.lastNeed<=f.length?(f.copy(this.lastChar,b,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(f.copy(this.lastChar,b,0,f.length),void(this.lastNeed-=f.length))}function c(f,b){if((f.length-b)%2==0){var y=f.toString("utf16le",b);if(y){var _=y.charCodeAt(y.length-1);if(_>=55296&&_<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=f[f.length-2],this.lastChar[1]=f[f.length-1],y.slice(0,-1)}return y}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=f[f.length-1],f.toString("utf16le",b,f.length-1)}function d(f){var b=f&&f.length?this.write(f):"";if(this.lastNeed){var y=this.lastTotal-this.lastNeed;return b+this.lastChar.toString("utf16le",0,y)}return b}function u(f,b){var y=(f.length-b)%3;return y===0?f.toString("base64",b):(this.lastNeed=3-y,this.lastTotal=3,y===1?this.lastChar[0]=f[f.length-1]:(this.lastChar[0]=f[f.length-2],this.lastChar[1]=f[f.length-1]),f.toString("base64",b,f.length-y))}function h(f){var b=f&&f.length?this.write(f):"";return this.lastNeed?b+this.lastChar.toString("base64",0,3-this.lastNeed):b}function p(f){return f.toString(this.encoding)}function m(f){return f&&f.length?this.write(f):""}l.StringDecoder=a,a.prototype.write=function(f){if(f.length===0)return"";var b,y;if(this.lastNeed){if((b=this.fillLast(f))===void 0)return"";y=this.lastNeed,this.lastNeed=0}else y=0;return y<f.length?b?b+this.text(f,y):this.text(f,y):b||""},a.prototype.end=function(f){var b=f&&f.length?this.write(f):"";return this.lastNeed?b+"�":b},a.prototype.text=function(f,b){var y=function(E,M,D){var z=M.length-1;if(z<D)return 0;var O=o(M[z]);return O>=0?(O>0&&(E.lastNeed=O-1),O):--z<D||O===-2?0:(O=o(M[z]))>=0?(O>0&&(E.lastNeed=O-2),O):--z<D||O===-2?0:(O=o(M[z]))>=0?(O>0&&(O===2?O=0:E.lastNeed=O-3),O):0}(this,f,b);if(!this.lastNeed)return f.toString("utf8",b);this.lastTotal=y;var _=f.length-(y-this.lastNeed);return f.copy(this.lastChar,0,_),f.toString("utf8",b,_)},a.prototype.fillLast=function(f){if(this.lastNeed<=f.length)return f.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);f.copy(this.lastChar,this.lastTotal-this.lastNeed,0,f.length),this.lastNeed-=f.length}},{"safe-buffer":217}],219:[function(t,r,l){(function(i){(function(){r.exports=function(s,a){for(var o=Math.min(s.length,a.length),n=new i(o),c=0;c<o;++c)n[c]=s[c]^a[c];return n}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:220}],220:[function(t,r,l){(function(i){(function(){var s=t("base64-js"),a=t("ieee754");l.Buffer=n,l.SlowBuffer=function(P){return+P!=P&&(P=0),n.alloc(+P)},l.INSPECT_MAX_BYTES=50;function o(P){if(P>2147483647)throw new RangeError('The value "'+P+'" is invalid for option "size"');var I=new Uint8Array(P);return I.__proto__=n.prototype,I}function n(P,I,V){if(typeof P=="number"){if(typeof I=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(P)}return c(P,I,V)}function c(P,I,V){if(typeof P=="string")return function(q,J){if(typeof J=="string"&&J!==""||(J="utf8"),!n.isEncoding(J))throw new TypeError("Unknown encoding: "+J);var it=0|m(q,J),nt=o(it),Z=nt.write(q,J);return Z!==it&&(nt=nt.slice(0,Z)),nt}(P,I);if(ArrayBuffer.isView(P))return h(P);if(P==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof P);if(F(P,ArrayBuffer)||P&&F(P.buffer,ArrayBuffer))return function(q,J,it){if(J<0||q.byteLength<J)throw new RangeError('"offset" is outside of buffer bounds');if(q.byteLength<J+(it||0))throw new RangeError('"length" is outside of buffer bounds');var nt;return nt=J===void 0&&it===void 0?new Uint8Array(q):it===void 0?new Uint8Array(q,J):new Uint8Array(q,J,it),nt.__proto__=n.prototype,nt}(P,I,V);if(typeof P=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Q=P.valueOf&&P.valueOf();if(Q!=null&&Q!==P)return n.from(Q,I,V);var G=function(q){if(n.isBuffer(q)){var J=0|p(q.length),it=o(J);return it.length===0||q.copy(it,0,0,J),it}if(q.length!==void 0)return typeof q.length!="number"||X(q.length)?o(0):h(q);if(q.type==="Buffer"&&Array.isArray(q.data))return h(q.data)}(P);if(G)return G;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof P[Symbol.toPrimitive]=="function")return n.from(P[Symbol.toPrimitive]("string"),I,V);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof P)}function d(P){if(typeof P!="number")throw new TypeError('"size" argument must be of type number');if(P<0)throw new RangeError('The value "'+P+'" is invalid for option "size"')}function u(P){return d(P),o(P<0?0:0|p(P))}function h(P){for(var I=P.length<0?0:0|p(P.length),V=o(I),Q=0;Q<I;Q+=1)V[Q]=255&P[Q];return V}function p(P){if(P>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|P}function m(P,I){if(n.isBuffer(P))return P.length;if(ArrayBuffer.isView(P)||F(P,ArrayBuffer))return P.byteLength;if(typeof P!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof P);var V=P.length,Q=arguments.length>2&&arguments[2]===!0;if(!Q&&V===0)return 0;for(var G=!1;;)switch(I){case"ascii":case"latin1":case"binary":return V;case"utf8":case"utf-8":return U(P).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*V;case"hex":return V>>>1;case"base64":return W(P).length;default:if(G)return Q?-1:U(P).length;I=(""+I).toLowerCase(),G=!0}}function f(P,I,V){var Q=!1;if((I===void 0||I<0)&&(I=0),I>this.length||((V===void 0||V>this.length)&&(V=this.length),V<=0)||(V>>>=0)<=(I>>>=0))return"";for(P||(P="utf8");;)switch(P){case"hex":return R(this,I,V);case"utf8":case"utf-8":return H(this,I,V);case"ascii":return $(this,I,V);case"latin1":case"binary":return C(this,I,V);case"base64":return B(this,I,V);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,I,V);default:if(Q)throw new TypeError("Unknown encoding: "+P);P=(P+"").toLowerCase(),Q=!0}}function b(P,I,V){var Q=P[I];P[I]=P[V],P[V]=Q}function y(P,I,V,Q,G){if(P.length===0)return-1;if(typeof V=="string"?(Q=V,V=0):V>2147483647?V=2147483647:V<-2147483648&&(V=-2147483648),X(V=+V)&&(V=G?0:P.length-1),V<0&&(V=P.length+V),V>=P.length){if(G)return-1;V=P.length-1}else if(V<0){if(!G)return-1;V=0}if(typeof I=="string"&&(I=n.from(I,Q)),n.isBuffer(I))return I.length===0?-1:_(P,I,V,Q,G);if(typeof I=="number")return I&=255,typeof Uint8Array.prototype.indexOf=="function"?G?Uint8Array.prototype.indexOf.call(P,I,V):Uint8Array.prototype.lastIndexOf.call(P,I,V):_(P,[I],V,Q,G);throw new TypeError("val must be string, number or Buffer")}function _(P,I,V,Q,G){var q,J=1,it=P.length,nt=I.length;if(Q!==void 0&&((Q=String(Q).toLowerCase())==="ucs2"||Q==="ucs-2"||Q==="utf16le"||Q==="utf-16le")){if(P.length<2||I.length<2)return-1;J=2,it/=2,nt/=2,V/=2}function Z(at,ct){return J===1?at[ct]:at.readUInt16BE(ct*J)}if(G){var st=-1;for(q=V;q<it;q++)if(Z(P,q)===Z(I,st===-1?0:q-st)){if(st===-1&&(st=q),q-st+1===nt)return st*J}else st!==-1&&(q-=q-st),st=-1}else for(V+nt>it&&(V=it-nt),q=V;q>=0;q--){for(var rt=!0,lt=0;lt<nt;lt++)if(Z(P,q+lt)!==Z(I,lt)){rt=!1;break}if(rt)return q}return-1}function E(P,I,V,Q){V=Number(V)||0;var G=P.length-V;Q?(Q=Number(Q))>G&&(Q=G):Q=G;var q=I.length;Q>q/2&&(Q=q/2);for(var J=0;J<Q;++J){var it=parseInt(I.substr(2*J,2),16);if(X(it))return J;P[V+J]=it}return J}function M(P,I,V,Q){return Y(U(I,P.length-V),P,V,Q)}function D(P,I,V,Q){return Y(function(G){for(var q=[],J=0;J<G.length;++J)q.push(255&G.charCodeAt(J));return q}(I),P,V,Q)}function z(P,I,V,Q){return D(P,I,V,Q)}function O(P,I,V,Q){return Y(W(I),P,V,Q)}function N(P,I,V,Q){return Y(function(G,q){for(var J,it,nt,Z=[],st=0;st<G.length&&!((q-=2)<0);++st)J=G.charCodeAt(st),it=J>>8,nt=J%256,Z.push(nt),Z.push(it);return Z}(I,P.length-V),P,V,Q)}function B(P,I,V){return I===0&&V===P.length?s.fromByteArray(P):s.fromByteArray(P.slice(I,V))}function H(P,I,V){V=Math.min(P.length,V);for(var Q=[],G=I;G<V;){var q,J,it,nt,Z=P[G],st=null,rt=Z>239?4:Z>223?3:Z>191?2:1;if(G+rt<=V)switch(rt){case 1:Z<128&&(st=Z);break;case 2:(192&(q=P[G+1]))==128&&(nt=(31&Z)<<6|63&q)>127&&(st=nt);break;case 3:q=P[G+1],J=P[G+2],(192&q)==128&&(192&J)==128&&(nt=(15&Z)<<12|(63&q)<<6|63&J)>2047&&(nt<55296||nt>57343)&&(st=nt);break;case 4:q=P[G+1],J=P[G+2],it=P[G+3],(192&q)==128&&(192&J)==128&&(192&it)==128&&(nt=(15&Z)<<18|(63&q)<<12|(63&J)<<6|63&it)>65535&&nt<1114112&&(st=nt)}st===null?(st=65533,rt=1):st>65535&&(st-=65536,Q.push(st>>>10&1023|55296),st=56320|1023&st),Q.push(st),G+=rt}return function(lt){var at=lt.length;if(at<=4096)return String.fromCharCode.apply(String,lt);for(var ct="",ut=0;ut<at;)ct+=String.fromCharCode.apply(String,lt.slice(ut,ut+=4096));return ct}(Q)}l.kMaxLength=2147483647,n.TYPED_ARRAY_SUPPORT=function(){try{var P=new Uint8Array(1);return P.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},P.foo()===42}catch{return!1}}(),n.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&n[Symbol.species]===n&&Object.defineProperty(n,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),n.poolSize=8192,n.from=function(P,I,V){return c(P,I,V)},n.prototype.__proto__=Uint8Array.prototype,n.__proto__=Uint8Array,n.alloc=function(P,I,V){return function(Q,G,q){return d(Q),Q<=0?o(Q):G!==void 0?typeof q=="string"?o(Q).fill(G,q):o(Q).fill(G):o(Q)}(P,I,V)},n.allocUnsafe=function(P){return u(P)},n.allocUnsafeSlow=function(P){return u(P)},n.isBuffer=function(P){return P!=null&&P._isBuffer===!0&&P!==n.prototype},n.compare=function(P,I){if(F(P,Uint8Array)&&(P=n.from(P,P.offset,P.byteLength)),F(I,Uint8Array)&&(I=n.from(I,I.offset,I.byteLength)),!n.isBuffer(P)||!n.isBuffer(I))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(P===I)return 0;for(var V=P.length,Q=I.length,G=0,q=Math.min(V,Q);G<q;++G)if(P[G]!==I[G]){V=P[G],Q=I[G];break}return V<Q?-1:Q<V?1:0},n.isEncoding=function(P){switch(String(P).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(P,I){if(!Array.isArray(P))throw new TypeError('"list" argument must be an Array of Buffers');if(P.length===0)return n.alloc(0);var V;if(I===void 0)for(I=0,V=0;V<P.length;++V)I+=P[V].length;var Q=n.allocUnsafe(I),G=0;for(V=0;V<P.length;++V){var q=P[V];if(F(q,Uint8Array)&&(q=n.from(q)),!n.isBuffer(q))throw new TypeError('"list" argument must be an Array of Buffers');q.copy(Q,G),G+=q.length}return Q},n.byteLength=m,n.prototype._isBuffer=!0,n.prototype.swap16=function(){var P=this.length;if(P%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var I=0;I<P;I+=2)b(this,I,I+1);return this},n.prototype.swap32=function(){var P=this.length;if(P%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var I=0;I<P;I+=4)b(this,I,I+3),b(this,I+1,I+2);return this},n.prototype.swap64=function(){var P=this.length;if(P%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var I=0;I<P;I+=8)b(this,I,I+7),b(this,I+1,I+6),b(this,I+2,I+5),b(this,I+3,I+4);return this},n.prototype.toString=function(){var P=this.length;return P===0?"":arguments.length===0?H(this,0,P):f.apply(this,arguments)},n.prototype.toLocaleString=n.prototype.toString,n.prototype.equals=function(P){if(!n.isBuffer(P))throw new TypeError("Argument must be a Buffer");return this===P||n.compare(this,P)===0},n.prototype.inspect=function(){var P="",I=l.INSPECT_MAX_BYTES;return P=this.toString("hex",0,I).replace(/(.{2})/g,"$1 ").trim(),this.length>I&&(P+=" ... "),"<Buffer "+P+">"},n.prototype.compare=function(P,I,V,Q,G){if(F(P,Uint8Array)&&(P=n.from(P,P.offset,P.byteLength)),!n.isBuffer(P))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof P);if(I===void 0&&(I=0),V===void 0&&(V=P?P.length:0),Q===void 0&&(Q=0),G===void 0&&(G=this.length),I<0||V>P.length||Q<0||G>this.length)throw new RangeError("out of range index");if(Q>=G&&I>=V)return 0;if(Q>=G)return-1;if(I>=V)return 1;if(this===P)return 0;for(var q=(G>>>=0)-(Q>>>=0),J=(V>>>=0)-(I>>>=0),it=Math.min(q,J),nt=this.slice(Q,G),Z=P.slice(I,V),st=0;st<it;++st)if(nt[st]!==Z[st]){q=nt[st],J=Z[st];break}return q<J?-1:J<q?1:0},n.prototype.includes=function(P,I,V){return this.indexOf(P,I,V)!==-1},n.prototype.indexOf=function(P,I,V){return y(this,P,I,V,!0)},n.prototype.lastIndexOf=function(P,I,V){return y(this,P,I,V,!1)},n.prototype.write=function(P,I,V,Q){if(I===void 0)Q="utf8",V=this.length,I=0;else if(V===void 0&&typeof I=="string")Q=I,V=this.length,I=0;else{if(!isFinite(I))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");I>>>=0,isFinite(V)?(V>>>=0,Q===void 0&&(Q="utf8")):(Q=V,V=void 0)}var G=this.length-I;if((V===void 0||V>G)&&(V=G),P.length>0&&(V<0||I<0)||I>this.length)throw new RangeError("Attempt to write outside buffer bounds");Q||(Q="utf8");for(var q=!1;;)switch(Q){case"hex":return E(this,P,I,V);case"utf8":case"utf-8":return M(this,P,I,V);case"ascii":return D(this,P,I,V);case"latin1":case"binary":return z(this,P,I,V);case"base64":return O(this,P,I,V);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,P,I,V);default:if(q)throw new TypeError("Unknown encoding: "+Q);Q=(""+Q).toLowerCase(),q=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function $(P,I,V){var Q="";V=Math.min(P.length,V);for(var G=I;G<V;++G)Q+=String.fromCharCode(127&P[G]);return Q}function C(P,I,V){var Q="";V=Math.min(P.length,V);for(var G=I;G<V;++G)Q+=String.fromCharCode(P[G]);return Q}function R(P,I,V){var Q=P.length;(!I||I<0)&&(I=0),(!V||V<0||V>Q)&&(V=Q);for(var G="",q=I;q<V;++q)G+=j(P[q]);return G}function k(P,I,V){for(var Q=P.slice(I,V),G="",q=0;q<Q.length;q+=2)G+=String.fromCharCode(Q[q]+256*Q[q+1]);return G}function v(P,I,V){if(P%1!=0||P<0)throw new RangeError("offset is not uint");if(P+I>V)throw new RangeError("Trying to access beyond buffer length")}function w(P,I,V,Q,G,q){if(!n.isBuffer(P))throw new TypeError('"buffer" argument must be a Buffer instance');if(I>G||I<q)throw new RangeError('"value" argument is out of bounds');if(V+Q>P.length)throw new RangeError("Index out of range")}function x(P,I,V,Q,G,q){if(V+Q>P.length)throw new RangeError("Index out of range");if(V<0)throw new RangeError("Index out of range")}function S(P,I,V,Q,G){return I=+I,V>>>=0,G||x(P,0,V,4),a.write(P,I,V,Q,23,4),V+4}function T(P,I,V,Q,G){return I=+I,V>>>=0,G||x(P,0,V,8),a.write(P,I,V,Q,52,8),V+8}n.prototype.slice=function(P,I){var V=this.length;(P=~~P)<0?(P+=V)<0&&(P=0):P>V&&(P=V),(I=I===void 0?V:~~I)<0?(I+=V)<0&&(I=0):I>V&&(I=V),I<P&&(I=P);var Q=this.subarray(P,I);return Q.__proto__=n.prototype,Q},n.prototype.readUIntLE=function(P,I,V){P>>>=0,I>>>=0,V||v(P,I,this.length);for(var Q=this[P],G=1,q=0;++q<I&&(G*=256);)Q+=this[P+q]*G;return Q},n.prototype.readUIntBE=function(P,I,V){P>>>=0,I>>>=0,V||v(P,I,this.length);for(var Q=this[P+--I],G=1;I>0&&(G*=256);)Q+=this[P+--I]*G;return Q},n.prototype.readUInt8=function(P,I){return P>>>=0,I||v(P,1,this.length),this[P]},n.prototype.readUInt16LE=function(P,I){return P>>>=0,I||v(P,2,this.length),this[P]|this[P+1]<<8},n.prototype.readUInt16BE=function(P,I){return P>>>=0,I||v(P,2,this.length),this[P]<<8|this[P+1]},n.prototype.readUInt32LE=function(P,I){return P>>>=0,I||v(P,4,this.length),(this[P]|this[P+1]<<8|this[P+2]<<16)+16777216*this[P+3]},n.prototype.readUInt32BE=function(P,I){return P>>>=0,I||v(P,4,this.length),16777216*this[P]+(this[P+1]<<16|this[P+2]<<8|this[P+3])},n.prototype.readIntLE=function(P,I,V){P>>>=0,I>>>=0,V||v(P,I,this.length);for(var Q=this[P],G=1,q=0;++q<I&&(G*=256);)Q+=this[P+q]*G;return Q>=(G*=128)&&(Q-=Math.pow(2,8*I)),Q},n.prototype.readIntBE=function(P,I,V){P>>>=0,I>>>=0,V||v(P,I,this.length);for(var Q=I,G=1,q=this[P+--Q];Q>0&&(G*=256);)q+=this[P+--Q]*G;return q>=(G*=128)&&(q-=Math.pow(2,8*I)),q},n.prototype.readInt8=function(P,I){return P>>>=0,I||v(P,1,this.length),128&this[P]?-1*(255-this[P]+1):this[P]},n.prototype.readInt16LE=function(P,I){P>>>=0,I||v(P,2,this.length);var V=this[P]|this[P+1]<<8;return 32768&V?4294901760|V:V},n.prototype.readInt16BE=function(P,I){P>>>=0,I||v(P,2,this.length);var V=this[P+1]|this[P]<<8;return 32768&V?4294901760|V:V},n.prototype.readInt32LE=function(P,I){return P>>>=0,I||v(P,4,this.length),this[P]|this[P+1]<<8|this[P+2]<<16|this[P+3]<<24},n.prototype.readInt32BE=function(P,I){return P>>>=0,I||v(P,4,this.length),this[P]<<24|this[P+1]<<16|this[P+2]<<8|this[P+3]},n.prototype.readFloatLE=function(P,I){return P>>>=0,I||v(P,4,this.length),a.read(this,P,!0,23,4)},n.prototype.readFloatBE=function(P,I){return P>>>=0,I||v(P,4,this.length),a.read(this,P,!1,23,4)},n.prototype.readDoubleLE=function(P,I){return P>>>=0,I||v(P,8,this.length),a.read(this,P,!0,52,8)},n.prototype.readDoubleBE=function(P,I){return P>>>=0,I||v(P,8,this.length),a.read(this,P,!1,52,8)},n.prototype.writeUIntLE=function(P,I,V,Q){P=+P,I>>>=0,V>>>=0,Q||w(this,P,I,V,Math.pow(2,8*V)-1,0);var G=1,q=0;for(this[I]=255&P;++q<V&&(G*=256);)this[I+q]=P/G&255;return I+V},n.prototype.writeUIntBE=function(P,I,V,Q){P=+P,I>>>=0,V>>>=0,Q||w(this,P,I,V,Math.pow(2,8*V)-1,0);var G=V-1,q=1;for(this[I+G]=255&P;--G>=0&&(q*=256);)this[I+G]=P/q&255;return I+V},n.prototype.writeUInt8=function(P,I,V){return P=+P,I>>>=0,V||w(this,P,I,1,255,0),this[I]=255&P,I+1},n.prototype.writeUInt16LE=function(P,I,V){return P=+P,I>>>=0,V||w(this,P,I,2,65535,0),this[I]=255&P,this[I+1]=P>>>8,I+2},n.prototype.writeUInt16BE=function(P,I,V){return P=+P,I>>>=0,V||w(this,P,I,2,65535,0),this[I]=P>>>8,this[I+1]=255&P,I+2},n.prototype.writeUInt32LE=function(P,I,V){return P=+P,I>>>=0,V||w(this,P,I,4,4294967295,0),this[I+3]=P>>>24,this[I+2]=P>>>16,this[I+1]=P>>>8,this[I]=255&P,I+4},n.prototype.writeUInt32BE=function(P,I,V){return P=+P,I>>>=0,V||w(this,P,I,4,4294967295,0),this[I]=P>>>24,this[I+1]=P>>>16,this[I+2]=P>>>8,this[I+3]=255&P,I+4},n.prototype.writeIntLE=function(P,I,V,Q){if(P=+P,I>>>=0,!Q){var G=Math.pow(2,8*V-1);w(this,P,I,V,G-1,-G)}var q=0,J=1,it=0;for(this[I]=255&P;++q<V&&(J*=256);)P<0&&it===0&&this[I+q-1]!==0&&(it=1),this[I+q]=(P/J>>0)-it&255;return I+V},n.prototype.writeIntBE=function(P,I,V,Q){if(P=+P,I>>>=0,!Q){var G=Math.pow(2,8*V-1);w(this,P,I,V,G-1,-G)}var q=V-1,J=1,it=0;for(this[I+q]=255&P;--q>=0&&(J*=256);)P<0&&it===0&&this[I+q+1]!==0&&(it=1),this[I+q]=(P/J>>0)-it&255;return I+V},n.prototype.writeInt8=function(P,I,V){return P=+P,I>>>=0,V||w(this,P,I,1,127,-128),P<0&&(P=255+P+1),this[I]=255&P,I+1},n.prototype.writeInt16LE=function(P,I,V){return P=+P,I>>>=0,V||w(this,P,I,2,32767,-32768),this[I]=255&P,this[I+1]=P>>>8,I+2},n.prototype.writeInt16BE=function(P,I,V){return P=+P,I>>>=0,V||w(this,P,I,2,32767,-32768),this[I]=P>>>8,this[I+1]=255&P,I+2},n.prototype.writeInt32LE=function(P,I,V){return P=+P,I>>>=0,V||w(this,P,I,4,2147483647,-2147483648),this[I]=255&P,this[I+1]=P>>>8,this[I+2]=P>>>16,this[I+3]=P>>>24,I+4},n.prototype.writeInt32BE=function(P,I,V){return P=+P,I>>>=0,V||w(this,P,I,4,2147483647,-2147483648),P<0&&(P=4294967295+P+1),this[I]=P>>>24,this[I+1]=P>>>16,this[I+2]=P>>>8,this[I+3]=255&P,I+4},n.prototype.writeFloatLE=function(P,I,V){return S(this,P,I,!0,V)},n.prototype.writeFloatBE=function(P,I,V){return S(this,P,I,!1,V)},n.prototype.writeDoubleLE=function(P,I,V){return T(this,P,I,!0,V)},n.prototype.writeDoubleBE=function(P,I,V){return T(this,P,I,!1,V)},n.prototype.copy=function(P,I,V,Q){if(!n.isBuffer(P))throw new TypeError("argument should be a Buffer");if(V||(V=0),Q||Q===0||(Q=this.length),I>=P.length&&(I=P.length),I||(I=0),Q>0&&Q<V&&(Q=V),Q===V||P.length===0||this.length===0)return 0;if(I<0)throw new RangeError("targetStart out of bounds");if(V<0||V>=this.length)throw new RangeError("Index out of range");if(Q<0)throw new RangeError("sourceEnd out of bounds");Q>this.length&&(Q=this.length),P.length-I<Q-V&&(Q=P.length-I+V);var G=Q-V;if(this===P&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(I,V,Q);else if(this===P&&V<I&&I<Q)for(var q=G-1;q>=0;--q)P[q+I]=this[q+V];else Uint8Array.prototype.set.call(P,this.subarray(V,Q),I);return G},n.prototype.fill=function(P,I,V,Q){if(typeof P=="string"){if(typeof I=="string"?(Q=I,I=0,V=this.length):typeof V=="string"&&(Q=V,V=this.length),Q!==void 0&&typeof Q!="string")throw new TypeError("encoding must be a string");if(typeof Q=="string"&&!n.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);if(P.length===1){var G=P.charCodeAt(0);(Q==="utf8"&&G<128||Q==="latin1")&&(P=G)}}else typeof P=="number"&&(P&=255);if(I<0||this.length<I||this.length<V)throw new RangeError("Out of range index");if(V<=I)return this;var q;if(I>>>=0,V=V===void 0?this.length:V>>>0,P||(P=0),typeof P=="number")for(q=I;q<V;++q)this[q]=P;else{var J=n.isBuffer(P)?P:n.from(P,Q),it=J.length;if(it===0)throw new TypeError('The value "'+P+'" is invalid for argument "value"');for(q=0;q<V-I;++q)this[q+I]=J[q%it]}return this};var L=/[^+/0-9A-Za-z-_]/g;function j(P){return P<16?"0"+P.toString(16):P.toString(16)}function U(P,I){var V;I=I||1/0;for(var Q=P.length,G=null,q=[],J=0;J<Q;++J){if((V=P.charCodeAt(J))>55295&&V<57344){if(!G){if(V>56319){(I-=3)>-1&&q.push(239,191,189);continue}if(J+1===Q){(I-=3)>-1&&q.push(239,191,189);continue}G=V;continue}if(V<56320){(I-=3)>-1&&q.push(239,191,189),G=V;continue}V=65536+(G-55296<<10|V-56320)}else G&&(I-=3)>-1&&q.push(239,191,189);if(G=null,V<128){if((I-=1)<0)break;q.push(V)}else if(V<2048){if((I-=2)<0)break;q.push(V>>6|192,63&V|128)}else if(V<65536){if((I-=3)<0)break;q.push(V>>12|224,V>>6&63|128,63&V|128)}else{if(!(V<1114112))throw new Error("Invalid code point");if((I-=4)<0)break;q.push(V>>18|240,V>>12&63|128,V>>6&63|128,63&V|128)}}return q}function W(P){return s.toByteArray(function(I){if((I=(I=I.split("=")[0]).trim().replace(L,"")).length<2)return"";for(;I.length%4!=0;)I+="=";return I}(P))}function Y(P,I,V,Q){for(var G=0;G<Q&&!(G+V>=I.length||G>=P.length);++G)I[G+V]=P[G];return G}function F(P,I){return P instanceof I||P!=null&&P.constructor!=null&&P.constructor.name!=null&&P.constructor.name===I.name}function X(P){return P!=P}}).call(this)}).call(this,t("buffer").Buffer)},{"base64-js":185,buffer:220,ieee754:439}],221:[function(t,r,l){var i=t("safe-buffer").Buffer,s=t("stream").Transform,a=t("string_decoder").StringDecoder;function o(n){s.call(this),this.hashMode=typeof n=="string",this.hashMode?this[n]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}t("inherits")(o,s),o.prototype.update=function(n,c,d){typeof n=="string"&&(n=i.from(n,c));var u=this._update(n);return this.hashMode?this:(d&&(u=this._toString(u,d)),u)},o.prototype.setAutoPadding=function(){},o.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},o.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},o.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},o.prototype._transform=function(n,c,d){var u;try{this.hashMode?this._update(n):this.push(this._update(n))}catch(h){u=h}finally{d(u)}},o.prototype._flush=function(n){var c;try{this.push(this.__final())}catch(d){c=d}n(c)},o.prototype._finalOrDigest=function(n){var c=this.__final()||i.alloc(0);return n&&(c=this._toString(c,n,!0)),c},o.prototype._toString=function(n,c,d){if(this._decoder||(this._decoder=new a(c),this._encoding=c),this._encoding!==c)throw new Error("can't switch encodings");var u=this._decoder.write(n);return d&&(u+=this._decoder.end()),u},r.exports=o},{inherits:440,"safe-buffer":494,stream:505,string_decoder:218}],222:[function(t,r,l){var i=t("../internals/is-callable"),s=t("../internals/try-to-string"),a=TypeError;r.exports=function(o){if(i(o))return o;throw new a(s(o)+" is not a function")}},{"../internals/is-callable":285,"../internals/try-to-string":349}],223:[function(t,r,l){var i=t("../internals/is-constructor"),s=t("../internals/try-to-string"),a=TypeError;r.exports=function(o){if(i(o))return o;throw new a(s(o)+" is not a constructor")}},{"../internals/is-constructor":286,"../internals/try-to-string":349}],224:[function(t,r,l){var i=t("../internals/is-callable"),s=String,a=TypeError;r.exports=function(o){if(typeof o=="object"||i(o))return o;throw new a("Can't set "+s(o)+" as a prototype")}},{"../internals/is-callable":285}],225:[function(t,r,l){var i=t("../internals/well-known-symbol"),s=t("../internals/object-create"),a=t("../internals/object-define-property").f,o=i("unscopables"),n=Array.prototype;n[o]===void 0&&a(n,o,{configurable:!0,value:s(null)}),r.exports=function(c){n[o][c]=!0}},{"../internals/object-create":306,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],226:[function(t,r,l){var i=t("../internals/object-is-prototype-of"),s=TypeError;r.exports=function(a,o){if(i(o,a))return a;throw new s("Incorrect invocation")}},{"../internals/object-is-prototype-of":314}],227:[function(t,r,l){var i=t("../internals/is-object"),s=String,a=TypeError;r.exports=function(o){if(i(o))return o;throw new a(s(o)+" is not an object")}},{"../internals/is-object":289}],228:[function(t,r,l){var i=t("../internals/to-indexed-object"),s=t("../internals/to-absolute-index"),a=t("../internals/length-of-array-like"),o=function(n){return function(c,d,u){var h,p=i(c),m=a(p),f=s(u,m);if(n&&d!=d){for(;m>f;)if((h=p[f++])!=h)return!0}else for(;m>f;f++)if((n||f in p)&&p[f]===d)return n||f||0;return!n&&-1}};r.exports={includes:o(!0),indexOf:o(!1)}},{"../internals/length-of-array-like":299,"../internals/to-absolute-index":340,"../internals/to-indexed-object":341}],229:[function(t,r,l){var i=t("../internals/function-bind-context"),s=t("../internals/function-uncurry-this"),a=t("../internals/indexed-object"),o=t("../internals/to-object"),n=t("../internals/length-of-array-like"),c=t("../internals/array-species-create"),d=s([].push),u=function(h){var p=h===1,m=h===2,f=h===3,b=h===4,y=h===6,_=h===7,E=h===5||y;return function(M,D,z,O){for(var N,B,H=o(M),$=a(H),C=i(D,z),R=n($),k=0,v=O||c,w=p?v(M,R):m||_?v(M,0):void 0;R>k;k++)if((E||k in $)&&(B=C(N=$[k],k,H),h))if(p)w[k]=B;else if(B)switch(h){case 3:return!0;case 5:return N;case 6:return k;case 2:d(w,N)}else switch(h){case 4:return!1;case 7:d(w,N)}return y?-1:f||b?b:w}};r.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},{"../internals/array-species-create":233,"../internals/function-bind-context":262,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/length-of-array-like":299,"../internals/to-object":344}],230:[function(t,r,l){var i=t("../internals/to-absolute-index"),s=t("../internals/length-of-array-like"),a=t("../internals/create-property"),o=Array,n=Math.max;r.exports=function(c,d,u){for(var h=s(c),p=i(d,h),m=i(u===void 0?h:u,h),f=o(n(m-p,0)),b=0;p<m;p++,b++)a(f,b,c[p]);return f.length=b,f}},{"../internals/create-property":243,"../internals/length-of-array-like":299,"../internals/to-absolute-index":340}],231:[function(t,r,l){var i=t("../internals/function-uncurry-this");r.exports=i([].slice)},{"../internals/function-uncurry-this":268}],232:[function(t,r,l){var i=t("../internals/is-array"),s=t("../internals/is-constructor"),a=t("../internals/is-object"),o=t("../internals/well-known-symbol")("species"),n=Array;r.exports=function(c){var d;return i(c)&&(d=c.constructor,(s(d)&&(d===n||i(d.prototype))||a(d)&&(d=d[o])===null)&&(d=void 0)),d===void 0?n:d}},{"../internals/is-array":284,"../internals/is-constructor":286,"../internals/is-object":289,"../internals/well-known-symbol":357}],233:[function(t,r,l){var i=t("../internals/array-species-constructor");r.exports=function(s,a){return new(i(s))(a===0?0:a)}},{"../internals/array-species-constructor":232}],234:[function(t,r,l){var i=t("../internals/well-known-symbol")("iterator"),s=!1;try{var a=0,o={next:function(){return{done:!!a++}},return:function(){s=!0}};o[i]=function(){return this},Array.from(o,function(){throw 2})}catch{}r.exports=function(n,c){try{if(!c&&!s)return!1}catch{return!1}var d=!1;try{var u={};u[i]=function(){return{next:function(){return{done:d=!0}}}},n(u)}catch{}return d}},{"../internals/well-known-symbol":357}],235:[function(t,r,l){var i=t("../internals/function-uncurry-this"),s=i({}.toString),a=i("".slice);r.exports=function(o){return a(s(o),8,-1)}},{"../internals/function-uncurry-this":268}],236:[function(t,r,l){var i=t("../internals/to-string-tag-support"),s=t("../internals/is-callable"),a=t("../internals/classof-raw"),o=t("../internals/well-known-symbol")("toStringTag"),n=Object,c=a(function(){return arguments}())==="Arguments";r.exports=i?a:function(d){var u,h,p;return d===void 0?"Undefined":d===null?"Null":typeof(h=function(m,f){try{return m[f]}catch{}}(u=n(d),o))=="string"?h:c?a(u):(p=a(u))==="Object"&&s(u.callee)?"Arguments":p}},{"../internals/classof-raw":235,"../internals/is-callable":285,"../internals/to-string-tag-support":347,"../internals/well-known-symbol":357}],237:[function(t,r,l){var i=t("../internals/has-own-property"),s=t("../internals/own-keys"),a=t("../internals/object-get-own-property-descriptor"),o=t("../internals/object-define-property");r.exports=function(n,c,d){for(var u=s(c),h=o.f,p=a.f,m=0;m<u.length;m++){var f=u[m];i(n,f)||d&&i(d,f)||h(n,f,p(c,f))}}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/own-keys":321}],238:[function(t,r,l){var i=t("../internals/well-known-symbol")("match");r.exports=function(s){var a=/./;try{"/./"[s](a)}catch{try{return a[i]=!1,"/./"[s](a)}catch{}}return!1}},{"../internals/well-known-symbol":357}],239:[function(t,r,l){var i=t("../internals/fails");r.exports=!i(function(){function s(){}return s.prototype.constructor=null,Object.getPrototypeOf(new s)!==s.prototype})},{"../internals/fails":260}],240:[function(t,r,l){r.exports=function(i,s){return{value:i,done:s}}},{}],241:[function(t,r,l){var i=t("../internals/descriptors"),s=t("../internals/object-define-property"),a=t("../internals/create-property-descriptor");r.exports=i?function(o,n,c){return s.f(o,n,a(1,c))}:function(o,n,c){return o[n]=c,o}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/object-define-property":308}],242:[function(t,r,l){r.exports=function(i,s){return{enumerable:!(1&i),configurable:!(2&i),writable:!(4&i),value:s}}},{}],243:[function(t,r,l){var i=t("../internals/to-property-key"),s=t("../internals/object-define-property"),a=t("../internals/create-property-descriptor");r.exports=function(o,n,c){var d=i(n);d in o?s.f(o,d,a(0,c)):o[d]=c}},{"../internals/create-property-descriptor":242,"../internals/object-define-property":308,"../internals/to-property-key":346}],244:[function(t,r,l){var i=t("../internals/make-built-in"),s=t("../internals/object-define-property");r.exports=function(a,o,n){return n.get&&i(n.get,o,{getter:!0}),n.set&&i(n.set,o,{setter:!0}),s.f(a,o,n)}},{"../internals/make-built-in":300,"../internals/object-define-property":308}],245:[function(t,r,l){var i=t("../internals/is-callable"),s=t("../internals/object-define-property"),a=t("../internals/make-built-in"),o=t("../internals/define-global-property");r.exports=function(n,c,d,u){u||(u={});var h=u.enumerable,p=u.name!==void 0?u.name:c;if(i(d)&&a(d,p,u),u.global)h?n[c]=d:o(c,d);else{try{u.unsafe?n[c]&&(h=!0):delete n[c]}catch{}h?n[c]=d:s.f(n,c,{value:d,enumerable:!1,configurable:!u.nonConfigurable,writable:!u.nonWritable})}return n}},{"../internals/define-global-property":246,"../internals/is-callable":285,"../internals/make-built-in":300,"../internals/object-define-property":308}],246:[function(t,r,l){var i=t("../internals/global"),s=Object.defineProperty;r.exports=function(a,o){try{s(i,a,{value:o,configurable:!0,writable:!0})}catch{i[a]=o}return o}},{"../internals/global":274}],247:[function(t,r,l){var i=t("../internals/fails");r.exports=!i(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})},{"../internals/fails":260}],248:[function(t,r,l){var i=typeof document=="object"&&document.all,s=i===void 0&&i!==void 0;r.exports={all:i,IS_HTMLDDA:s}},{}],249:[function(t,r,l){var i=t("../internals/global"),s=t("../internals/is-object"),a=i.document,o=s(a)&&s(a.createElement);r.exports=function(n){return o?a.createElement(n):{}}},{"../internals/global":274,"../internals/is-object":289}],250:[function(t,r,l){var i=t("../internals/engine-is-deno"),s=t("../internals/engine-is-node");r.exports=!i&&!s&&typeof window=="object"&&typeof document=="object"},{"../internals/engine-is-deno":251,"../internals/engine-is-node":254}],251:[function(t,r,l){r.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},{}],252:[function(t,r,l){var i=t("../internals/engine-user-agent");r.exports=/ipad|iphone|ipod/i.test(i)&&typeof Pebble<"u"},{"../internals/engine-user-agent":256}],253:[function(t,r,l){var i=t("../internals/engine-user-agent");r.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(i)},{"../internals/engine-user-agent":256}],254:[function(t,r,l){var i=t("../internals/global"),s=t("../internals/classof-raw");r.exports=s(i.process)==="process"},{"../internals/classof-raw":235,"../internals/global":274}],255:[function(t,r,l){var i=t("../internals/engine-user-agent");r.exports=/web0s(?!.*chrome)/i.test(i)},{"../internals/engine-user-agent":256}],256:[function(t,r,l){r.exports=typeof navigator<"u"&&String(navigator.userAgent)||""},{}],257:[function(t,r,l){var i,s,a=t("../internals/global"),o=t("../internals/engine-user-agent"),n=a.process,c=a.Deno,d=n&&n.versions||c&&c.version,u=d&&d.v8;u&&(s=(i=u.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!s&&o&&(!(i=o.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=o.match(/Chrome\/(\d+)/))&&(s=+i[1]),r.exports=s},{"../internals/engine-user-agent":256,"../internals/global":274}],258:[function(t,r,l){r.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],259:[function(t,r,l){var i=t("../internals/global"),s=t("../internals/object-get-own-property-descriptor").f,a=t("../internals/create-non-enumerable-property"),o=t("../internals/define-built-in"),n=t("../internals/define-global-property"),c=t("../internals/copy-constructor-properties"),d=t("../internals/is-forced");r.exports=function(u,h){var p,m,f,b,y,_=u.target,E=u.global,M=u.stat;if(p=E?i:M?i[_]||n(_,{}):(i[_]||{}).prototype)for(m in h){if(b=h[m],f=u.dontCallGetSet?(y=s(p,m))&&y.value:p[m],!d(E?m:_+(M?".":"#")+m,u.forced)&&f!==void 0){if(typeof b==typeof f)continue;c(b,f)}(u.sham||f&&f.sham)&&a(b,"sham",!0),o(p,m,b,u)}}},{"../internals/copy-constructor-properties":237,"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/define-global-property":246,"../internals/global":274,"../internals/is-forced":287,"../internals/object-get-own-property-descriptor":309}],260:[function(t,r,l){r.exports=function(i){try{return!!i()}catch{return!0}}},{}],261:[function(t,r,l){var i=t("../internals/function-bind-native"),s=Function.prototype,a=s.apply,o=s.call;r.exports=typeof Reflect=="object"&&Reflect.apply||(i?o.bind(a):function(){return o.apply(a,arguments)})},{"../internals/function-bind-native":263}],262:[function(t,r,l){var i=t("../internals/function-uncurry-this-clause"),s=t("../internals/a-callable"),a=t("../internals/function-bind-native"),o=i(i.bind);r.exports=function(n,c){return s(n),c===void 0?n:a?o(n,c):function(){return n.apply(c,arguments)}}},{"../internals/a-callable":222,"../internals/function-bind-native":263,"../internals/function-uncurry-this-clause":267}],263:[function(t,r,l){var i=t("../internals/fails");r.exports=!i(function(){var s=(function(){}).bind();return typeof s!="function"||s.hasOwnProperty("prototype")})},{"../internals/fails":260}],264:[function(t,r,l){var i=t("../internals/function-bind-native"),s=Function.prototype.call;r.exports=i?s.bind(s):function(){return s.apply(s,arguments)}},{"../internals/function-bind-native":263}],265:[function(t,r,l){var i=t("../internals/descriptors"),s=t("../internals/has-own-property"),a=Function.prototype,o=i&&Object.getOwnPropertyDescriptor,n=s(a,"name"),c=n&&(function(){}).name==="something",d=n&&(!i||i&&o(a,"name").configurable);r.exports={EXISTS:n,PROPER:c,CONFIGURABLE:d}},{"../internals/descriptors":247,"../internals/has-own-property":275}],266:[function(t,r,l){var i=t("../internals/function-uncurry-this"),s=t("../internals/a-callable");r.exports=function(a,o,n){try{return i(s(Object.getOwnPropertyDescriptor(a,o)[n]))}catch{}}},{"../internals/a-callable":222,"../internals/function-uncurry-this":268}],267:[function(t,r,l){var i=t("../internals/classof-raw"),s=t("../internals/function-uncurry-this");r.exports=function(a){if(i(a)==="Function")return s(a)}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268}],268:[function(t,r,l){var i=t("../internals/function-bind-native"),s=Function.prototype,a=s.call,o=i&&s.bind.bind(a,a);r.exports=i?o:function(n){return function(){return a.apply(n,arguments)}}},{"../internals/function-bind-native":263}],269:[function(t,r,l){var i=t("../internals/global"),s=t("../internals/is-callable"),a=function(o){return s(o)?o:void 0};r.exports=function(o,n){return arguments.length<2?a(i[o]):i[o]&&i[o][n]}},{"../internals/global":274,"../internals/is-callable":285}],270:[function(t,r,l){var i=t("../internals/classof"),s=t("../internals/get-method"),a=t("../internals/is-null-or-undefined"),o=t("../internals/iterators"),n=t("../internals/well-known-symbol")("iterator");r.exports=function(c){if(!a(c))return s(c,n)||s(c,"@@iterator")||o[i(c)]}},{"../internals/classof":236,"../internals/get-method":273,"../internals/is-null-or-undefined":288,"../internals/iterators":298,"../internals/well-known-symbol":357}],271:[function(t,r,l){var i=t("../internals/function-call"),s=t("../internals/a-callable"),a=t("../internals/an-object"),o=t("../internals/try-to-string"),n=t("../internals/get-iterator-method"),c=TypeError;r.exports=function(d,u){var h=arguments.length<2?n(d):u;if(s(h))return a(i(h,d));throw new c(o(d)+" is not iterable")}},{"../internals/a-callable":222,"../internals/an-object":227,"../internals/function-call":264,"../internals/get-iterator-method":270,"../internals/try-to-string":349}],272:[function(t,r,l){var i=t("../internals/function-uncurry-this"),s=t("../internals/is-array"),a=t("../internals/is-callable"),o=t("../internals/classof-raw"),n=t("../internals/to-string"),c=i([].push);r.exports=function(d){if(a(d))return d;if(s(d)){for(var u=d.length,h=[],p=0;p<u;p++){var m=d[p];typeof m=="string"?c(h,m):typeof m!="number"&&o(m)!=="Number"&&o(m)!=="String"||c(h,n(m))}var f=h.length,b=!0;return function(y,_){if(b)return b=!1,_;if(s(this))return _;for(var E=0;E<f;E++)if(h[E]===y)return _}}}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268,"../internals/is-array":284,"../internals/is-callable":285,"../internals/to-string":348}],273:[function(t,r,l){var i=t("../internals/a-callable"),s=t("../internals/is-null-or-undefined");r.exports=function(a,o){var n=a[o];return s(n)?void 0:i(n)}},{"../internals/a-callable":222,"../internals/is-null-or-undefined":288}],274:[function(t,r,l){(function(i){(function(){var s=function(a){return a&&a.Math===Math&&a};r.exports=s(typeof globalThis=="object"&&globalThis)||s(typeof window=="object"&&window)||s(typeof self=="object"&&self)||s(typeof i=="object"&&i)||function(){return this}()||this||Function("return this")()}).call(this)}).call(this,typeof ve<"u"?ve:typeof self<"u"?self:typeof window<"u"?window:{})},{}],275:[function(t,r,l){var i=t("../internals/function-uncurry-this"),s=t("../internals/to-object"),a=i({}.hasOwnProperty);r.exports=Object.hasOwn||function(o,n){return a(s(o),n)}},{"../internals/function-uncurry-this":268,"../internals/to-object":344}],276:[function(t,r,l){r.exports={}},{}],277:[function(t,r,l){r.exports=function(i,s){try{arguments.length===1?console.error(i):console.error(i,s)}catch{}}},{}],278:[function(t,r,l){var i=t("../internals/get-built-in");r.exports=i("document","documentElement")},{"../internals/get-built-in":269}],279:[function(t,r,l){var i=t("../internals/descriptors"),s=t("../internals/fails"),a=t("../internals/document-create-element");r.exports=!i&&!s(function(){return Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a!==7})},{"../internals/descriptors":247,"../internals/document-create-element":249,"../internals/fails":260}],280:[function(t,r,l){var i=t("../internals/function-uncurry-this"),s=t("../internals/fails"),a=t("../internals/classof-raw"),o=Object,n=i("".split);r.exports=s(function(){return!o("z").propertyIsEnumerable(0)})?function(c){return a(c)==="String"?n(c,""):o(c)}:o},{"../internals/classof-raw":235,"../internals/fails":260,"../internals/function-uncurry-this":268}],281:[function(t,r,l){var i=t("../internals/function-uncurry-this"),s=t("../internals/is-callable"),a=t("../internals/shared-store"),o=i(Function.toString);s(a.inspectSource)||(a.inspectSource=function(n){return o(n)}),r.exports=a.inspectSource},{"../internals/function-uncurry-this":268,"../internals/is-callable":285,"../internals/shared-store":333}],282:[function(t,r,l){var i,s,a,o=t("../internals/weak-map-basic-detection"),n=t("../internals/global"),c=t("../internals/is-object"),d=t("../internals/create-non-enumerable-property"),u=t("../internals/has-own-property"),h=t("../internals/shared-store"),p=t("../internals/shared-key"),m=t("../internals/hidden-keys"),f=n.TypeError,b=n.WeakMap;if(o||h.state){var y=h.state||(h.state=new b);y.get=y.get,y.has=y.has,y.set=y.set,i=function(E,M){if(y.has(E))throw new f("Object already initialized");return M.facade=E,y.set(E,M),M},s=function(E){return y.get(E)||{}},a=function(E){return y.has(E)}}else{var _=p("state");m[_]=!0,i=function(E,M){if(u(E,_))throw new f("Object already initialized");return M.facade=E,d(E,_,M),M},s=function(E){return u(E,_)?E[_]:{}},a=function(E){return u(E,_)}}r.exports={set:i,get:s,has:a,enforce:function(E){return a(E)?s(E):i(E,{})},getterFor:function(E){return function(M){var D;if(!c(M)||(D=s(M)).type!==E)throw new f("Incompatible receiver, "+E+" required");return D}}}},{"../internals/create-non-enumerable-property":241,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/is-object":289,"../internals/shared-key":332,"../internals/shared-store":333,"../internals/weak-map-basic-detection":354}],283:[function(t,r,l){var i=t("../internals/well-known-symbol"),s=t("../internals/iterators"),a=i("iterator"),o=Array.prototype;r.exports=function(n){return n!==void 0&&(s.Array===n||o[a]===n)}},{"../internals/iterators":298,"../internals/well-known-symbol":357}],284:[function(t,r,l){var i=t("../internals/classof-raw");r.exports=Array.isArray||function(s){return i(s)==="Array"}},{"../internals/classof-raw":235}],285:[function(t,r,l){var i=t("../internals/document-all"),s=i.all;r.exports=i.IS_HTMLDDA?function(a){return typeof a=="function"||a===s}:function(a){return typeof a=="function"}},{"../internals/document-all":248}],286:[function(t,r,l){var i=t("../internals/function-uncurry-this"),s=t("../internals/fails"),a=t("../internals/is-callable"),o=t("../internals/classof"),n=t("../internals/get-built-in"),c=t("../internals/inspect-source"),d=function(){},u=[],h=n("Reflect","construct"),p=/^\s*(?:class|function)\b/,m=i(p.exec),f=!p.test(d),b=function(_){if(!a(_))return!1;try{return h(d,u,_),!0}catch{return!1}},y=function(_){if(!a(_))return!1;switch(o(_)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!m(p,c(_))}catch{return!0}};y.sham=!0,r.exports=!h||s(function(){var _;return b(b.call)||!b(Object)||!b(function(){_=!0})||_})?y:b},{"../internals/classof":236,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/inspect-source":281,"../internals/is-callable":285}],287:[function(t,r,l){var i=t("../internals/fails"),s=t("../internals/is-callable"),a=/#|\.prototype\./,o=function(h,p){var m=c[n(h)];return m===u||m!==d&&(s(p)?i(p):!!p)},n=o.normalize=function(h){return String(h).replace(a,".").toLowerCase()},c=o.data={},d=o.NATIVE="N",u=o.POLYFILL="P";r.exports=o},{"../internals/fails":260,"../internals/is-callable":285}],288:[function(t,r,l){r.exports=function(i){return i==null}},{}],289:[function(t,r,l){var i=t("../internals/is-callable"),s=t("../internals/document-all"),a=s.all;r.exports=s.IS_HTMLDDA?function(o){return typeof o=="object"?o!==null:i(o)||o===a}:function(o){return typeof o=="object"?o!==null:i(o)}},{"../internals/document-all":248,"../internals/is-callable":285}],290:[function(t,r,l){r.exports=!1},{}],291:[function(t,r,l){var i=t("../internals/is-object"),s=t("../internals/classof-raw"),a=t("../internals/well-known-symbol")("match");r.exports=function(o){var n;return i(o)&&((n=o[a])!==void 0?!!n:s(o)==="RegExp")}},{"../internals/classof-raw":235,"../internals/is-object":289,"../internals/well-known-symbol":357}],292:[function(t,r,l){var i=t("../internals/get-built-in"),s=t("../internals/is-callable"),a=t("../internals/object-is-prototype-of"),o=t("../internals/use-symbol-as-uid"),n=Object;r.exports=o?function(c){return typeof c=="symbol"}:function(c){var d=i("Symbol");return s(d)&&a(d.prototype,n(c))}},{"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/object-is-prototype-of":314,"../internals/use-symbol-as-uid":351}],293:[function(t,r,l){var i=t("../internals/function-bind-context"),s=t("../internals/function-call"),a=t("../internals/an-object"),o=t("../internals/try-to-string"),n=t("../internals/is-array-iterator-method"),c=t("../internals/length-of-array-like"),d=t("../internals/object-is-prototype-of"),u=t("../internals/get-iterator"),h=t("../internals/get-iterator-method"),p=t("../internals/iterator-close"),m=TypeError,f=function(y,_){this.stopped=y,this.result=_},b=f.prototype;r.exports=function(y,_,E){var M,D,z,O,N,B,H,$=E&&E.that,C=!(!E||!E.AS_ENTRIES),R=!(!E||!E.IS_RECORD),k=!(!E||!E.IS_ITERATOR),v=!(!E||!E.INTERRUPTED),w=i(_,$),x=function(T){return M&&p(M,"normal",T),new f(!0,T)},S=function(T){return C?(a(T),v?w(T[0],T[1],x):w(T[0],T[1])):v?w(T,x):w(T)};if(R)M=y.iterator;else if(k)M=y;else{if(!(D=h(y)))throw new m(o(y)+" is not iterable");if(n(D)){for(z=0,O=c(y);O>z;z++)if((N=S(y[z]))&&d(b,N))return N;return new f(!1)}M=u(y,D)}for(B=R?y.next:M.next;!(H=s(B,M)).done;){try{N=S(H.value)}catch(T){p(M,"throw",T)}if(typeof N=="object"&&N&&d(b,N))return N}return new f(!1)}},{"../internals/an-object":227,"../internals/function-bind-context":262,"../internals/function-call":264,"../internals/get-iterator":271,"../internals/get-iterator-method":270,"../internals/is-array-iterator-method":283,"../internals/iterator-close":294,"../internals/length-of-array-like":299,"../internals/object-is-prototype-of":314,"../internals/try-to-string":349}],294:[function(t,r,l){var i=t("../internals/function-call"),s=t("../internals/an-object"),a=t("../internals/get-method");r.exports=function(o,n,c){var d,u;s(o);try{if(!(d=a(o,"return"))){if(n==="throw")throw c;return c}d=i(d,o)}catch(h){u=!0,d=h}if(n==="throw")throw c;if(u)throw d;return s(d),c}},{"../internals/an-object":227,"../internals/function-call":264,"../internals/get-method":273}],295:[function(t,r,l){var i=t("../internals/iterators-core").IteratorPrototype,s=t("../internals/object-create"),a=t("../internals/create-property-descriptor"),o=t("../internals/set-to-string-tag"),n=t("../internals/iterators"),c=function(){return this};r.exports=function(d,u,h,p){var m=u+" Iterator";return d.prototype=s(i,{next:a(+!p,h)}),o(d,m,!1,!0),n[m]=c,d}},{"../internals/create-property-descriptor":242,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-create":306,"../internals/set-to-string-tag":331}],296:[function(t,r,l){var i=t("../internals/export"),s=t("../internals/function-call"),a=t("../internals/is-pure"),o=t("../internals/function-name"),n=t("../internals/is-callable"),c=t("../internals/iterator-create-constructor"),d=t("../internals/object-get-prototype-of"),u=t("../internals/object-set-prototype-of"),h=t("../internals/set-to-string-tag"),p=t("../internals/create-non-enumerable-property"),m=t("../internals/define-built-in"),f=t("../internals/well-known-symbol"),b=t("../internals/iterators"),y=t("../internals/iterators-core"),_=o.PROPER,E=o.CONFIGURABLE,M=y.IteratorPrototype,D=y.BUGGY_SAFARI_ITERATORS,z=f("iterator"),O=function(){return this};r.exports=function(N,B,H,$,C,R,k){c(H,B,$);var v,w,x,S=function(F){if(F===C&&W)return W;if(!D&&F&&F in j)return j[F];switch(F){case"keys":case"values":case"entries":return function(){return new H(this,F)}}return function(){return new H(this)}},T=B+" Iterator",L=!1,j=N.prototype,U=j[z]||j["@@iterator"]||C&&j[C],W=!D&&U||S(C),Y=B==="Array"&&j.entries||U;if(Y&&(v=d(Y.call(new N)))!==Object.prototype&&v.next&&(a||d(v)===M||(u?u(v,M):n(v[z])||m(v,z,O)),h(v,T,!0,!0),a&&(b[T]=O)),_&&C==="values"&&U&&U.name!=="values"&&(!a&&E?p(j,"name","values"):(L=!0,W=function(){return s(U,this)})),C)if(w={values:S("values"),keys:R?W:S("keys"),entries:S("entries")},k)for(x in w)(D||L||!(x in j))&&m(j,x,w[x]);else i({target:B,proto:!0,forced:D||L},w);return a&&!k||j[z]===W||m(j,z,W,{name:C}),b[B]=W,w}},{"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/export":259,"../internals/function-call":264,"../internals/function-name":265,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/iterator-create-constructor":295,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-get-prototype-of":313,"../internals/object-set-prototype-of":318,"../internals/set-to-string-tag":331,"../internals/well-known-symbol":357}],297:[function(t,r,l){var i,s,a,o=t("../internals/fails"),n=t("../internals/is-callable"),c=t("../internals/is-object"),d=t("../internals/object-create"),u=t("../internals/object-get-prototype-of"),h=t("../internals/define-built-in"),p=t("../internals/well-known-symbol"),m=t("../internals/is-pure"),f=p("iterator"),b=!1;[].keys&&("next"in(a=[].keys())?(s=u(u(a)))!==Object.prototype&&(i=s):b=!0),!c(i)||o(function(){var y={};return i[f].call(y)!==y})?i={}:m&&(i=d(i)),n(i[f])||h(i,f,function(){return this}),r.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:b}},{"../internals/define-built-in":245,"../internals/fails":260,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-get-prototype-of":313,"../internals/well-known-symbol":357}],298:[function(t,r,l){arguments[4][276][0].apply(l,arguments)},{dup:276}],299:[function(t,r,l){var i=t("../internals/to-length");r.exports=function(s){return i(s.length)}},{"../internals/to-length":343}],300:[function(t,r,l){var i=t("../internals/function-uncurry-this"),s=t("../internals/fails"),a=t("../internals/is-callable"),o=t("../internals/has-own-property"),n=t("../internals/descriptors"),c=t("../internals/function-name").CONFIGURABLE,d=t("../internals/inspect-source"),u=t("../internals/internal-state"),h=u.enforce,p=u.get,m=String,f=Object.defineProperty,b=i("".slice),y=i("".replace),_=i([].join),E=n&&!s(function(){return f(function(){},"length",{value:8}).length!==8}),M=String(String).split("String"),D=r.exports=function(z,O,N){b(m(O),0,7)==="Symbol("&&(O="["+y(m(O),/^Symbol\(([^)]*)\)/,"$1")+"]"),N&&N.getter&&(O="get "+O),N&&N.setter&&(O="set "+O),(!o(z,"name")||c&&z.name!==O)&&(n?f(z,"name",{value:O,configurable:!0}):z.name=O),E&&N&&o(N,"arity")&&z.length!==N.arity&&f(z,"length",{value:N.arity});try{N&&o(N,"constructor")&&N.constructor?n&&f(z,"prototype",{writable:!1}):z.prototype&&(z.prototype=void 0)}catch{}var B=h(z);return o(B,"source")||(B.source=_(M,typeof O=="string"?O:"")),z};Function.prototype.toString=D(function(){return a(this)&&p(this).source||d(this)},"toString")},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-name":265,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/inspect-source":281,"../internals/internal-state":282,"../internals/is-callable":285}],301:[function(t,r,l){var i=Math.ceil,s=Math.floor;r.exports=Math.trunc||function(a){var o=+a;return(o>0?s:i)(o)}},{}],302:[function(t,r,l){var i,s,a,o,n,c=t("../internals/global"),d=t("../internals/function-bind-context"),u=t("../internals/object-get-own-property-descriptor").f,h=t("../internals/task").set,p=t("../internals/queue"),m=t("../internals/engine-is-ios"),f=t("../internals/engine-is-ios-pebble"),b=t("../internals/engine-is-webos-webkit"),y=t("../internals/engine-is-node"),_=c.MutationObserver||c.WebKitMutationObserver,E=c.document,M=c.process,D=c.Promise,z=u(c,"queueMicrotask"),O=z&&z.value;if(!O){var N=new p,B=function(){var H,$;for(y&&(H=M.domain)&&H.exit();$=N.get();)try{$()}catch(C){throw N.head&&i(),C}H&&H.enter()};m||y||b||!_||!E?!f&&D&&D.resolve?((o=D.resolve(void 0)).constructor=D,n=d(o.then,o),i=function(){n(B)}):y?i=function(){M.nextTick(B)}:(h=d(h,c),i=function(){h(B)}):(s=!0,a=E.createTextNode(""),new _(B).observe(a,{characterData:!0}),i=function(){a.data=s=!s}),O=function(H){N.head||i(),N.add(H)}}r.exports=O},{"../internals/engine-is-ios":253,"../internals/engine-is-ios-pebble":252,"../internals/engine-is-node":254,"../internals/engine-is-webos-webkit":255,"../internals/function-bind-context":262,"../internals/global":274,"../internals/object-get-own-property-descriptor":309,"../internals/queue":328,"../internals/task":339}],303:[function(t,r,l){var i=t("../internals/a-callable"),s=TypeError,a=function(o){var n,c;this.promise=new o(function(d,u){if(n!==void 0||c!==void 0)throw new s("Bad Promise constructor");n=d,c=u}),this.resolve=i(n),this.reject=i(c)};r.exports.f=function(o){return new a(o)}},{"../internals/a-callable":222}],304:[function(t,r,l){var i=t("../internals/is-regexp"),s=TypeError;r.exports=function(a){if(i(a))throw new s("The method doesn't accept regular expressions");return a}},{"../internals/is-regexp":291}],305:[function(t,r,l){var i=t("../internals/descriptors"),s=t("../internals/function-uncurry-this"),a=t("../internals/function-call"),o=t("../internals/fails"),n=t("../internals/object-keys"),c=t("../internals/object-get-own-property-symbols"),d=t("../internals/object-property-is-enumerable"),u=t("../internals/to-object"),h=t("../internals/indexed-object"),p=Object.assign,m=Object.defineProperty,f=s([].concat);r.exports=!p||o(function(){if(i&&p({b:1},p(m({},"a",{enumerable:!0,get:function(){m(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var b={},y={},_=Symbol("assign detection");return b[_]=7,"abcdefghijklmnopqrst".split("").forEach(function(E){y[E]=E}),p({},b)[_]!==7||n(p({},y)).join("")!=="abcdefghijklmnopqrst"})?function(b,y){for(var _=u(b),E=arguments.length,M=1,D=c.f,z=d.f;E>M;)for(var O,N=h(arguments[M++]),B=D?f(n(N),D(N)):n(N),H=B.length,$=0;H>$;)O=B[$++],i&&!a(z,N,O)||(_[O]=N[O]);return _}:p},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/object-get-own-property-symbols":312,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-object":344}],306:[function(t,r,l){var i,s=t("../internals/an-object"),a=t("../internals/object-define-properties"),o=t("../internals/enum-bug-keys"),n=t("../internals/hidden-keys"),c=t("../internals/html"),d=t("../internals/document-create-element"),u=t("../internals/shared-key"),h=u("IE_PROTO"),p=function(){},m=function(y){return"<script>"+y+"<\/script>"},f=function(y){y.write(m("")),y.close();var _=y.parentWindow.Object;return y=null,_},b=function(){try{i=new ActiveXObject("htmlfile")}catch{}var y,_;b=typeof document<"u"?document.domain&&i?f(i):((_=d("iframe")).style.display="none",c.appendChild(_),_.src="javascript:",(y=_.contentWindow.document).open(),y.write(m("document.F=Object")),y.close(),y.F):f(i);for(var E=o.length;E--;)delete b.prototype[o[E]];return b()};n[h]=!0,r.exports=Object.create||function(y,_){var E;return y!==null?(p.prototype=s(y),E=new p,p.prototype=null,E[h]=y):E=b(),_===void 0?E:a.f(E,_)}},{"../internals/an-object":227,"../internals/document-create-element":249,"../internals/enum-bug-keys":258,"../internals/hidden-keys":276,"../internals/html":278,"../internals/object-define-properties":307,"../internals/shared-key":332}],307:[function(t,r,l){var i=t("../internals/descriptors"),s=t("../internals/v8-prototype-define-bug"),a=t("../internals/object-define-property"),o=t("../internals/an-object"),n=t("../internals/to-indexed-object"),c=t("../internals/object-keys");l.f=i&&!s?Object.defineProperties:function(d,u){o(d);for(var h,p=n(u),m=c(u),f=m.length,b=0;f>b;)a.f(d,h=m[b++],p[h]);return d}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/object-define-property":308,"../internals/object-keys":316,"../internals/to-indexed-object":341,"../internals/v8-prototype-define-bug":352}],308:[function(t,r,l){var i=t("../internals/descriptors"),s=t("../internals/ie8-dom-define"),a=t("../internals/v8-prototype-define-bug"),o=t("../internals/an-object"),n=t("../internals/to-property-key"),c=TypeError,d=Object.defineProperty,u=Object.getOwnPropertyDescriptor;l.f=i?a?function(h,p,m){if(o(h),p=n(p),o(m),typeof h=="function"&&p==="prototype"&&"value"in m&&"writable"in m&&!m.writable){var f=u(h,p);f&&f.writable&&(h[p]=m.value,m={configurable:"configurable"in m?m.configurable:f.configurable,enumerable:"enumerable"in m?m.enumerable:f.enumerable,writable:!1})}return d(h,p,m)}:d:function(h,p,m){if(o(h),p=n(p),o(m),s)try{return d(h,p,m)}catch{}if("get"in m||"set"in m)throw new c("Accessors not supported");return"value"in m&&(h[p]=m.value),h}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/ie8-dom-define":279,"../internals/to-property-key":346,"../internals/v8-prototype-define-bug":352}],309:[function(t,r,l){var i=t("../internals/descriptors"),s=t("../internals/function-call"),a=t("../internals/object-property-is-enumerable"),o=t("../internals/create-property-descriptor"),n=t("../internals/to-indexed-object"),c=t("../internals/to-property-key"),d=t("../internals/has-own-property"),u=t("../internals/ie8-dom-define"),h=Object.getOwnPropertyDescriptor;l.f=i?h:function(p,m){if(p=n(p),m=c(m),u)try{return h(p,m)}catch{}if(d(p,m))return o(!s(a.f,p,m),p[m])}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/function-call":264,"../internals/has-own-property":275,"../internals/ie8-dom-define":279,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341,"../internals/to-property-key":346}],310:[function(t,r,l){var i=t("../internals/classof-raw"),s=t("../internals/to-indexed-object"),a=t("../internals/object-get-own-property-names").f,o=t("../internals/array-slice-simple"),n=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];r.exports.f=function(c){return n&&i(c)==="Window"?function(d){try{return a(d)}catch{return o(n)}}(c):a(s(c))}},{"../internals/array-slice-simple":230,"../internals/classof-raw":235,"../internals/object-get-own-property-names":311,"../internals/to-indexed-object":341}],311:[function(t,r,l){var i=t("../internals/object-keys-internal"),s=t("../internals/enum-bug-keys").concat("length","prototype");l.f=Object.getOwnPropertyNames||function(a){return i(a,s)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],312:[function(t,r,l){l.f=Object.getOwnPropertySymbols},{}],313:[function(t,r,l){var i=t("../internals/has-own-property"),s=t("../internals/is-callable"),a=t("../internals/to-object"),o=t("../internals/shared-key"),n=t("../internals/correct-prototype-getter"),c=o("IE_PROTO"),d=Object,u=d.prototype;r.exports=n?d.getPrototypeOf:function(h){var p=a(h);if(i(p,c))return p[c];var m=p.constructor;return s(m)&&p instanceof m?m.prototype:p instanceof d?u:null}},{"../internals/correct-prototype-getter":239,"../internals/has-own-property":275,"../internals/is-callable":285,"../internals/shared-key":332,"../internals/to-object":344}],314:[function(t,r,l){var i=t("../internals/function-uncurry-this");r.exports=i({}.isPrototypeOf)},{"../internals/function-uncurry-this":268}],315:[function(t,r,l){var i=t("../internals/function-uncurry-this"),s=t("../internals/has-own-property"),a=t("../internals/to-indexed-object"),o=t("../internals/array-includes").indexOf,n=t("../internals/hidden-keys"),c=i([].push);r.exports=function(d,u){var h,p=a(d),m=0,f=[];for(h in p)!s(n,h)&&s(p,h)&&c(f,h);for(;u.length>m;)s(p,h=u[m++])&&(~o(f,h)||c(f,h));return f}},{"../internals/array-includes":228,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/to-indexed-object":341}],316:[function(t,r,l){var i=t("../internals/object-keys-internal"),s=t("../internals/enum-bug-keys");r.exports=Object.keys||function(a){return i(a,s)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],317:[function(t,r,l){var i={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,a=s&&!i.call({1:2},1);l.f=a?function(o){var n=s(this,o);return!!n&&n.enumerable}:i},{}],318:[function(t,r,l){var i=t("../internals/function-uncurry-this-accessor"),s=t("../internals/an-object"),a=t("../internals/a-possible-prototype");r.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var o,n=!1,c={};try{(o=i(Object.prototype,"__proto__","set"))(c,[]),n=c instanceof Array}catch{}return function(d,u){return s(d),a(u),n?o(d,u):d.__proto__=u,d}}():void 0)},{"../internals/a-possible-prototype":224,"../internals/an-object":227,"../internals/function-uncurry-this-accessor":266}],319:[function(t,r,l){var i=t("../internals/descriptors"),s=t("../internals/fails"),a=t("../internals/function-uncurry-this"),o=t("../internals/object-get-prototype-of"),n=t("../internals/object-keys"),c=t("../internals/to-indexed-object"),d=a(t("../internals/object-property-is-enumerable").f),u=a([].push),h=i&&s(function(){var m=Object.create(null);return m[2]=2,!d(m,2)}),p=function(m){return function(f){for(var b,y=c(f),_=n(y),E=h&&o(y)===null,M=_.length,D=0,z=[];M>D;)b=_[D++],i&&!(E?b in y:d(y,b))||u(z,m?[b,y[b]]:y[b]);return z}};r.exports={entries:p(!0),values:p(!1)}},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/object-get-prototype-of":313,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341}],320:[function(t,r,l){var i=t("../internals/function-call"),s=t("../internals/is-callable"),a=t("../internals/is-object"),o=TypeError;r.exports=function(n,c){var d,u;if(c==="string"&&s(d=n.toString)&&!a(u=i(d,n))||s(d=n.valueOf)&&!a(u=i(d,n))||c!=="string"&&s(d=n.toString)&&!a(u=i(d,n)))return u;throw new o("Can't convert object to primitive value")}},{"../internals/function-call":264,"../internals/is-callable":285,"../internals/is-object":289}],321:[function(t,r,l){var i=t("../internals/get-built-in"),s=t("../internals/function-uncurry-this"),a=t("../internals/object-get-own-property-names"),o=t("../internals/object-get-own-property-symbols"),n=t("../internals/an-object"),c=s([].concat);r.exports=i("Reflect","ownKeys")||function(d){var u=a.f(n(d)),h=o.f;return h?c(u,h(d)):u}},{"../internals/an-object":227,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-symbols":312}],322:[function(t,r,l){var i=t("../internals/global");r.exports=i},{"../internals/global":274}],323:[function(t,r,l){r.exports=function(i){try{return{error:!1,value:i()}}catch(s){return{error:!0,value:s}}}},{}],324:[function(t,r,l){var i=t("../internals/global"),s=t("../internals/promise-native-constructor"),a=t("../internals/is-callable"),o=t("../internals/is-forced"),n=t("../internals/inspect-source"),c=t("../internals/well-known-symbol"),d=t("../internals/engine-is-browser"),u=t("../internals/engine-is-deno"),h=t("../internals/is-pure"),p=t("../internals/engine-v8-version"),m=s&&s.prototype,f=c("species"),b=!1,y=a(i.PromiseRejectionEvent),_=o("Promise",function(){var E=n(s),M=E!==String(s);if(!M&&p===66||h&&(!m.catch||!m.finally))return!0;if(!p||p<51||!/native code/.test(E)){var D=new s(function(O){O(1)}),z=function(O){O(function(){},function(){})};if((D.constructor={})[f]=z,!(b=D.then(function(){})instanceof z))return!0}return!M&&(d||u)&&!y});r.exports={CONSTRUCTOR:_,REJECTION_EVENT:y,SUBCLASSING:b}},{"../internals/engine-is-browser":250,"../internals/engine-is-deno":251,"../internals/engine-v8-version":257,"../internals/global":274,"../internals/inspect-source":281,"../internals/is-callable":285,"../internals/is-forced":287,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/well-known-symbol":357}],325:[function(t,r,l){var i=t("../internals/global");r.exports=i.Promise},{"../internals/global":274}],326:[function(t,r,l){var i=t("../internals/an-object"),s=t("../internals/is-object"),a=t("../internals/new-promise-capability");r.exports=function(o,n){if(i(o),s(n)&&n.constructor===o)return n;var c=a.f(o);return(0,c.resolve)(n),c.promise}},{"../internals/an-object":227,"../internals/is-object":289,"../internals/new-promise-capability":303}],327:[function(t,r,l){var i=t("../internals/promise-native-constructor"),s=t("../internals/check-correctness-of-iteration"),a=t("../internals/promise-constructor-detection").CONSTRUCTOR;r.exports=a||!s(function(o){i.all(o).then(void 0,function(){})})},{"../internals/check-correctness-of-iteration":234,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],328:[function(t,r,l){var i=function(){this.head=null,this.tail=null};i.prototype={add:function(s){var a={item:s,next:null},o=this.tail;o?o.next=a:this.head=a,this.tail=a},get:function(){var s=this.head;if(s)return(this.head=s.next)===null&&(this.tail=null),s.item}},r.exports=i},{}],329:[function(t,r,l){var i=t("../internals/is-null-or-undefined"),s=TypeError;r.exports=function(a){if(i(a))throw new s("Can't call method on "+a);return a}},{"../internals/is-null-or-undefined":288}],330:[function(t,r,l){var i=t("../internals/get-built-in"),s=t("../internals/define-built-in-accessor"),a=t("../internals/well-known-symbol"),o=t("../internals/descriptors"),n=a("species");r.exports=function(c){var d=i(c);o&&d&&!d[n]&&s(d,n,{configurable:!0,get:function(){return this}})}},{"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],331:[function(t,r,l){var i=t("../internals/object-define-property").f,s=t("../internals/has-own-property"),a=t("../internals/well-known-symbol")("toStringTag");r.exports=function(o,n,c){o&&!c&&(o=o.prototype),o&&!s(o,a)&&i(o,a,{configurable:!0,value:n})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],332:[function(t,r,l){var i=t("../internals/shared"),s=t("../internals/uid"),a=i("keys");r.exports=function(o){return a[o]||(a[o]=s(o))}},{"../internals/shared":334,"../internals/uid":350}],333:[function(t,r,l){var i=t("../internals/global"),s=t("../internals/define-global-property"),a=i["__core-js_shared__"]||s("__core-js_shared__",{});r.exports=a},{"../internals/define-global-property":246,"../internals/global":274}],334:[function(t,r,l){var i=t("../internals/is-pure"),s=t("../internals/shared-store");(r.exports=function(a,o){return s[a]||(s[a]=o!==void 0?o:{})})("versions",[]).push({version:"3.33.0",mode:i?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.0/LICENSE",source:"https://github.com/zloirock/core-js"})},{"../internals/is-pure":290,"../internals/shared-store":333}],335:[function(t,r,l){var i=t("../internals/an-object"),s=t("../internals/a-constructor"),a=t("../internals/is-null-or-undefined"),o=t("../internals/well-known-symbol")("species");r.exports=function(n,c){var d,u=i(n).constructor;return u===void 0||a(d=i(u)[o])?c:s(d)}},{"../internals/a-constructor":223,"../internals/an-object":227,"../internals/is-null-or-undefined":288,"../internals/well-known-symbol":357}],336:[function(t,r,l){var i=t("../internals/engine-v8-version"),s=t("../internals/fails"),a=t("../internals/global").String;r.exports=!!Object.getOwnPropertySymbols&&!s(function(){var o=Symbol("symbol detection");return!a(o)||!(Object(o)instanceof Symbol)||!Symbol.sham&&i&&i<41})},{"../internals/engine-v8-version":257,"../internals/fails":260,"../internals/global":274}],337:[function(t,r,l){var i=t("../internals/function-call"),s=t("../internals/get-built-in"),a=t("../internals/well-known-symbol"),o=t("../internals/define-built-in");r.exports=function(){var n=s("Symbol"),c=n&&n.prototype,d=c&&c.valueOf,u=a("toPrimitive");c&&!c[u]&&o(c,u,function(h){return i(d,this)},{arity:1})}},{"../internals/define-built-in":245,"../internals/function-call":264,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],338:[function(t,r,l){var i=t("../internals/symbol-constructor-detection");r.exports=i&&!!Symbol.for&&!!Symbol.keyFor},{"../internals/symbol-constructor-detection":336}],339:[function(t,r,l){var i,s,a,o,n=t("../internals/global"),c=t("../internals/function-apply"),d=t("../internals/function-bind-context"),u=t("../internals/is-callable"),h=t("../internals/has-own-property"),p=t("../internals/fails"),m=t("../internals/html"),f=t("../internals/array-slice"),b=t("../internals/document-create-element"),y=t("../internals/validate-arguments-length"),_=t("../internals/engine-is-ios"),E=t("../internals/engine-is-node"),M=n.setImmediate,D=n.clearImmediate,z=n.process,O=n.Dispatch,N=n.Function,B=n.MessageChannel,H=n.String,$=0,C={};p(function(){i=n.location});var R=function(x){if(h(C,x)){var S=C[x];delete C[x],S()}},k=function(x){return function(){R(x)}},v=function(x){R(x.data)},w=function(x){n.postMessage(H(x),i.protocol+"//"+i.host)};M&&D||(M=function(x){y(arguments.length,1);var S=u(x)?x:N(x),T=f(arguments,1);return C[++$]=function(){c(S,void 0,T)},s($),$},D=function(x){delete C[x]},E?s=function(x){z.nextTick(k(x))}:O&&O.now?s=function(x){O.now(k(x))}:B&&!_?(o=(a=new B).port2,a.port1.onmessage=v,s=d(o.postMessage,o)):n.addEventListener&&u(n.postMessage)&&!n.importScripts&&i&&i.protocol!=="file:"&&!p(w)?(s=w,n.addEventListener("message",v,!1)):s="onreadystatechange"in b("script")?function(x){m.appendChild(b("script")).onreadystatechange=function(){m.removeChild(this),R(x)}}:function(x){setTimeout(k(x),0)}),r.exports={set:M,clear:D}},{"../internals/array-slice":231,"../internals/document-create-element":249,"../internals/engine-is-ios":253,"../internals/engine-is-node":254,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-bind-context":262,"../internals/global":274,"../internals/has-own-property":275,"../internals/html":278,"../internals/is-callable":285,"../internals/validate-arguments-length":353}],340:[function(t,r,l){var i=t("../internals/to-integer-or-infinity"),s=Math.max,a=Math.min;r.exports=function(o,n){var c=i(o);return c<0?s(c+n,0):a(c,n)}},{"../internals/to-integer-or-infinity":342}],341:[function(t,r,l){var i=t("../internals/indexed-object"),s=t("../internals/require-object-coercible");r.exports=function(a){return i(s(a))}},{"../internals/indexed-object":280,"../internals/require-object-coercible":329}],342:[function(t,r,l){var i=t("../internals/math-trunc");r.exports=function(s){var a=+s;return a!=a||a===0?0:i(a)}},{"../internals/math-trunc":301}],343:[function(t,r,l){var i=t("../internals/to-integer-or-infinity"),s=Math.min;r.exports=function(a){return a>0?s(i(a),9007199254740991):0}},{"../internals/to-integer-or-infinity":342}],344:[function(t,r,l){var i=t("../internals/require-object-coercible"),s=Object;r.exports=function(a){return s(i(a))}},{"../internals/require-object-coercible":329}],345:[function(t,r,l){var i=t("../internals/function-call"),s=t("../internals/is-object"),a=t("../internals/is-symbol"),o=t("../internals/get-method"),n=t("../internals/ordinary-to-primitive"),c=t("../internals/well-known-symbol"),d=TypeError,u=c("toPrimitive");r.exports=function(h,p){if(!s(h)||a(h))return h;var m,f=o(h,u);if(f){if(p===void 0&&(p="default"),m=i(f,h,p),!s(m)||a(m))return m;throw new d("Can't convert object to primitive value")}return p===void 0&&(p="number"),n(h,p)}},{"../internals/function-call":264,"../internals/get-method":273,"../internals/is-object":289,"../internals/is-symbol":292,"../internals/ordinary-to-primitive":320,"../internals/well-known-symbol":357}],346:[function(t,r,l){var i=t("../internals/to-primitive"),s=t("../internals/is-symbol");r.exports=function(a){var o=i(a,"string");return s(o)?o:o+""}},{"../internals/is-symbol":292,"../internals/to-primitive":345}],347:[function(t,r,l){var i={};i[t("../internals/well-known-symbol")("toStringTag")]="z",r.exports=String(i)==="[object z]"},{"../internals/well-known-symbol":357}],348:[function(t,r,l){var i=t("../internals/classof"),s=String;r.exports=function(a){if(i(a)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return s(a)}},{"../internals/classof":236}],349:[function(t,r,l){var i=String;r.exports=function(s){try{return i(s)}catch{return"Object"}}},{}],350:[function(t,r,l){var i=t("../internals/function-uncurry-this"),s=0,a=Math.random(),o=i(1 .toString);r.exports=function(n){return"Symbol("+(n===void 0?"":n)+")_"+o(++s+a,36)}},{"../internals/function-uncurry-this":268}],351:[function(t,r,l){var i=t("../internals/symbol-constructor-detection");r.exports=i&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/symbol-constructor-detection":336}],352:[function(t,r,l){var i=t("../internals/descriptors"),s=t("../internals/fails");r.exports=i&&s(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})},{"../internals/descriptors":247,"../internals/fails":260}],353:[function(t,r,l){var i=TypeError;r.exports=function(s,a){if(s<a)throw new i("Not enough arguments");return s}},{}],354:[function(t,r,l){var i=t("../internals/global"),s=t("../internals/is-callable"),a=i.WeakMap;r.exports=s(a)&&/native code/.test(String(a))},{"../internals/global":274,"../internals/is-callable":285}],355:[function(t,r,l){var i=t("../internals/path"),s=t("../internals/has-own-property"),a=t("../internals/well-known-symbol-wrapped"),o=t("../internals/object-define-property").f;r.exports=function(n){var c=i.Symbol||(i.Symbol={});s(c,n)||o(c,n,{value:a.f(n)})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/path":322,"../internals/well-known-symbol-wrapped":356}],356:[function(t,r,l){var i=t("../internals/well-known-symbol");l.f=i},{"../internals/well-known-symbol":357}],357:[function(t,r,l){var i=t("../internals/global"),s=t("../internals/shared"),a=t("../internals/has-own-property"),o=t("../internals/uid"),n=t("../internals/symbol-constructor-detection"),c=t("../internals/use-symbol-as-uid"),d=i.Symbol,u=s("wks"),h=c?d.for||d:d&&d.withoutSetter||o;r.exports=function(p){return a(u,p)||(u[p]=n&&a(d,p)?d[p]:h("Symbol."+p)),u[p]}},{"../internals/global":274,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-constructor-detection":336,"../internals/uid":350,"../internals/use-symbol-as-uid":351}],358:[function(t,r,l){var i=t("../internals/export"),s=t("../internals/array-iteration").findIndex,a=t("../internals/add-to-unscopables"),o=!0;"findIndex"in[]&&Array(1).findIndex(function(){o=!1}),i({target:"Array",proto:!0,forced:o},{findIndex:function(n){return s(this,n,arguments.length>1?arguments[1]:void 0)}}),a("findIndex")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],359:[function(t,r,l){var i=t("../internals/export"),s=t("../internals/array-iteration").find,a=t("../internals/add-to-unscopables"),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),i({target:"Array",proto:!0,forced:o},{find:function(n){return s(this,n,arguments.length>1?arguments[1]:void 0)}}),a("find")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],360:[function(t,r,l){var i=t("../internals/export"),s=t("../internals/array-includes").includes,a=t("../internals/fails"),o=t("../internals/add-to-unscopables");i({target:"Array",proto:!0,forced:a(function(){return!Array(1).includes()})},{includes:function(n){return s(this,n,arguments.length>1?arguments[1]:void 0)}}),o("includes")},{"../internals/add-to-unscopables":225,"../internals/array-includes":228,"../internals/export":259,"../internals/fails":260}],361:[function(t,r,l){var i=t("../internals/to-indexed-object"),s=t("../internals/add-to-unscopables"),a=t("../internals/iterators"),o=t("../internals/internal-state"),n=t("../internals/object-define-property").f,c=t("../internals/iterator-define"),d=t("../internals/create-iter-result-object"),u=t("../internals/is-pure"),h=t("../internals/descriptors"),p=o.set,m=o.getterFor("Array Iterator");r.exports=c(Array,"Array",function(b,y){p(this,{type:"Array Iterator",target:i(b),index:0,kind:y})},function(){var b=m(this),y=b.target,_=b.kind,E=b.index++;if(!y||E>=y.length)return b.target=void 0,d(void 0,!0);switch(_){case"keys":return d(E,!1);case"values":return d(y[E],!1)}return d([E,y[E]],!1)},"values");var f=a.Arguments=a.Array;if(s("keys"),s("values"),s("entries"),!u&&h&&f.name!=="values")try{n(f,"name",{value:"values"})}catch{}},{"../internals/add-to-unscopables":225,"../internals/create-iter-result-object":240,"../internals/descriptors":247,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/iterator-define":296,"../internals/iterators":298,"../internals/object-define-property":308,"../internals/to-indexed-object":341}],362:[function(t,r,l){var i=t("../internals/export"),s=t("../internals/get-built-in"),a=t("../internals/function-apply"),o=t("../internals/function-call"),n=t("../internals/function-uncurry-this"),c=t("../internals/fails"),d=t("../internals/is-callable"),u=t("../internals/is-symbol"),h=t("../internals/array-slice"),p=t("../internals/get-json-replacer-function"),m=t("../internals/symbol-constructor-detection"),f=String,b=s("JSON","stringify"),y=n(/./.exec),_=n("".charAt),E=n("".charCodeAt),M=n("".replace),D=n(1 .toString),z=/[\uD800-\uDFFF]/g,O=/^[\uD800-\uDBFF]$/,N=/^[\uDC00-\uDFFF]$/,B=!m||c(function(){var R=s("Symbol")("stringify detection");return b([R])!=="[null]"||b({a:R})!=="{}"||b(Object(R))!=="{}"}),H=c(function(){return b("\uDF06\uD834")!=='"\\udf06\\ud834"'||b("\uDEAD")!=='"\\udead"'}),$=function(R,k){var v=h(arguments),w=p(k);if(d(w)||R!==void 0&&!u(R))return v[1]=function(x,S){if(d(w)&&(S=o(w,this,f(x),S)),!u(S))return S},a(b,null,v)},C=function(R,k,v){var w=_(v,k-1),x=_(v,k+1);return y(O,R)&&!y(N,x)||y(N,R)&&!y(O,w)?"\\u"+D(E(R,0),16):R};b&&i({target:"JSON",stat:!0,arity:3,forced:B||H},{stringify:function(R,k,v){var w=h(arguments),x=a(B?$:b,null,w);return H&&typeof x=="string"?M(x,z,C):x}})},{"../internals/array-slice":231,"../internals/export":259,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/get-json-replacer-function":272,"../internals/is-callable":285,"../internals/is-symbol":292,"../internals/symbol-constructor-detection":336}],363:[function(t,r,l){t("../internals/export")({target:"Number",stat:!0},{isNaN:function(i){return i!=i}})},{"../internals/export":259}],364:[function(t,r,l){var i=t("../internals/export"),s=t("../internals/object-assign");i({target:"Object",stat:!0,arity:2,forced:Object.assign!==s},{assign:s})},{"../internals/export":259,"../internals/object-assign":305}],365:[function(t,r,l){var i=t("../internals/export"),s=t("../internals/symbol-constructor-detection"),a=t("../internals/fails"),o=t("../internals/object-get-own-property-symbols"),n=t("../internals/to-object");i({target:"Object",stat:!0,forced:!s||a(function(){o.f(1)})},{getOwnPropertySymbols:function(c){var d=o.f;return d?d(n(c)):[]}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-get-own-property-symbols":312,"../internals/symbol-constructor-detection":336,"../internals/to-object":344}],366:[function(t,r,l){var i=t("../internals/export"),s=t("../internals/to-object"),a=t("../internals/object-keys");i({target:"Object",stat:!0,forced:t("../internals/fails")(function(){a(1)})},{keys:function(o){return a(s(o))}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-keys":316,"../internals/to-object":344}],367:[function(t,r,l){var i=t("../internals/export"),s=t("../internals/object-to-array").values;i({target:"Object",stat:!0},{values:function(a){return s(a)}})},{"../internals/export":259,"../internals/object-to-array":319}],368:[function(t,r,l){var i=t("../internals/export"),s=t("../internals/function-call"),a=t("../internals/a-callable"),o=t("../internals/new-promise-capability"),n=t("../internals/perform"),c=t("../internals/iterate");i({target:"Promise",stat:!0,forced:t("../internals/promise-statics-incorrect-iteration")},{all:function(d){var u=this,h=o.f(u),p=h.resolve,m=h.reject,f=n(function(){var b=a(u.resolve),y=[],_=0,E=1;c(d,function(M){var D=_++,z=!1;E++,s(b,u,M).then(function(O){z||(z=!0,y[D]=O,--E||p(y))},m)}),--E||p(y)});return f.error&&m(f.value),h.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],369:[function(t,r,l){var i=t("../internals/export"),s=t("../internals/is-pure"),a=t("../internals/promise-constructor-detection").CONSTRUCTOR,o=t("../internals/promise-native-constructor"),n=t("../internals/get-built-in"),c=t("../internals/is-callable"),d=t("../internals/define-built-in"),u=o&&o.prototype;if(i({target:"Promise",proto:!0,forced:a,real:!0},{catch:function(p){return this.then(void 0,p)}}),!s&&c(o)){var h=n("Promise").prototype.catch;u.catch!==h&&d(u,"catch",h,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],370:[function(t,r,l){var i,s,a,o=t("../internals/export"),n=t("../internals/is-pure"),c=t("../internals/engine-is-node"),d=t("../internals/global"),u=t("../internals/function-call"),h=t("../internals/define-built-in"),p=t("../internals/object-set-prototype-of"),m=t("../internals/set-to-string-tag"),f=t("../internals/set-species"),b=t("../internals/a-callable"),y=t("../internals/is-callable"),_=t("../internals/is-object"),E=t("../internals/an-instance"),M=t("../internals/species-constructor"),D=t("../internals/task").set,z=t("../internals/microtask"),O=t("../internals/host-report-errors"),N=t("../internals/perform"),B=t("../internals/queue"),H=t("../internals/internal-state"),$=t("../internals/promise-native-constructor"),C=t("../internals/promise-constructor-detection"),R=t("../internals/new-promise-capability"),k=C.CONSTRUCTOR,v=C.REJECTION_EVENT,w=C.SUBCLASSING,x=H.getterFor("Promise"),S=H.set,T=$&&$.prototype,L=$,j=T,U=d.TypeError,W=d.document,Y=d.process,F=R.f,X=F,P=!!(W&&W.createEvent&&d.dispatchEvent),I=function(rt){var lt;return!(!_(rt)||!y(lt=rt.then))&&lt},V=function(rt,lt){var at,ct,ut,dt=lt.value,gt=lt.state===1,vt=gt?rt.ok:rt.fail,_t=rt.resolve,wt=rt.reject,Ot=rt.domain;try{vt?(gt||(lt.rejection===2&&it(lt),lt.rejection=1),vt===!0?at=dt:(Ot&&Ot.enter(),at=vt(dt),Ot&&(Ot.exit(),ut=!0)),at===rt.promise?wt(new U("Promise-chain cycle")):(ct=I(at))?u(ct,at,_t,wt):_t(at)):wt(dt)}catch(Pt){Ot&&!ut&&Ot.exit(),wt(Pt)}},Q=function(rt,lt){rt.notified||(rt.notified=!0,z(function(){for(var at,ct=rt.reactions;at=ct.get();)V(at,rt);rt.notified=!1,lt&&!rt.rejection&&q(rt)}))},G=function(rt,lt,at){var ct,ut;P?((ct=W.createEvent("Event")).promise=lt,ct.reason=at,ct.initEvent(rt,!1,!0),d.dispatchEvent(ct)):ct={promise:lt,reason:at},!v&&(ut=d["on"+rt])?ut(ct):rt==="unhandledrejection"&&O("Unhandled promise rejection",at)},q=function(rt){u(D,d,function(){var lt,at=rt.facade,ct=rt.value;if(J(rt)&&(lt=N(function(){c?Y.emit("unhandledRejection",ct,at):G("unhandledrejection",at,ct)}),rt.rejection=c||J(rt)?2:1,lt.error))throw lt.value})},J=function(rt){return rt.rejection!==1&&!rt.parent},it=function(rt){u(D,d,function(){var lt=rt.facade;c?Y.emit("rejectionHandled",lt):G("rejectionhandled",lt,rt.value)})},nt=function(rt,lt,at){return function(ct){rt(lt,ct,at)}},Z=function(rt,lt,at){rt.done||(rt.done=!0,at&&(rt=at),rt.value=lt,rt.state=2,Q(rt,!0))},st=function(rt,lt,at){if(!rt.done){rt.done=!0,at&&(rt=at);try{if(rt.facade===lt)throw new U("Promise can't be resolved itself");var ct=I(lt);ct?z(function(){var ut={done:!1};try{u(ct,lt,nt(st,ut,rt),nt(Z,ut,rt))}catch(dt){Z(ut,dt,rt)}}):(rt.value=lt,rt.state=1,Q(rt,!1))}catch(ut){Z({done:!1},ut,rt)}}};if(k&&(j=(L=function(rt){E(this,j),b(rt),u(i,this);var lt=x(this);try{rt(nt(st,lt),nt(Z,lt))}catch(at){Z(lt,at)}}).prototype,(i=function(rt){S(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new B,rejection:!1,state:0,value:void 0})}).prototype=h(j,"then",function(rt,lt){var at=x(this),ct=F(M(this,L));return at.parent=!0,ct.ok=!y(rt)||rt,ct.fail=y(lt)&&lt,ct.domain=c?Y.domain:void 0,at.state===0?at.reactions.add(ct):z(function(){V(ct,at)}),ct.promise}),s=function(){var rt=new i,lt=x(rt);this.promise=rt,this.resolve=nt(st,lt),this.reject=nt(Z,lt)},R.f=F=function(rt){return rt===L||rt===void 0?new s(rt):X(rt)},!n&&y($)&&T!==Object.prototype)){a=T.then,w||h(T,"then",function(rt,lt){var at=this;return new L(function(ct,ut){u(a,at,ct,ut)}).then(rt,lt)},{unsafe:!0});try{delete T.constructor}catch{}p&&p(T,j)}o({global:!0,constructor:!0,wrap:!0,forced:k},{Promise:L}),m(L,"Promise",!1,!0),f("Promise")},{"../internals/a-callable":222,"../internals/an-instance":226,"../internals/define-built-in":245,"../internals/engine-is-node":254,"../internals/export":259,"../internals/function-call":264,"../internals/global":274,"../internals/host-report-errors":277,"../internals/internal-state":282,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/microtask":302,"../internals/new-promise-capability":303,"../internals/object-set-prototype-of":318,"../internals/perform":323,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/queue":328,"../internals/set-species":330,"../internals/set-to-string-tag":331,"../internals/species-constructor":335,"../internals/task":339}],371:[function(t,r,l){var i=t("../internals/export"),s=t("../internals/is-pure"),a=t("../internals/promise-native-constructor"),o=t("../internals/fails"),n=t("../internals/get-built-in"),c=t("../internals/is-callable"),d=t("../internals/species-constructor"),u=t("../internals/promise-resolve"),h=t("../internals/define-built-in"),p=a&&a.prototype;if(i({target:"Promise",proto:!0,real:!0,forced:!!a&&o(function(){p.finally.call({then:function(){}},function(){})})},{finally:function(f){var b=d(this,n("Promise")),y=c(f);return this.then(y?function(_){return u(b,f()).then(function(){return _})}:f,y?function(_){return u(b,f()).then(function(){throw _})}:f)}}),!s&&c(a)){var m=n("Promise").prototype.finally;p.finally!==m&&h(p,"finally",m,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/fails":260,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326,"../internals/species-constructor":335}],372:[function(t,r,l){t("../modules/es.promise.constructor"),t("../modules/es.promise.all"),t("../modules/es.promise.catch"),t("../modules/es.promise.race"),t("../modules/es.promise.reject"),t("../modules/es.promise.resolve")},{"../modules/es.promise.all":368,"../modules/es.promise.catch":369,"../modules/es.promise.constructor":370,"../modules/es.promise.race":373,"../modules/es.promise.reject":374,"../modules/es.promise.resolve":375}],373:[function(t,r,l){var i=t("../internals/export"),s=t("../internals/function-call"),a=t("../internals/a-callable"),o=t("../internals/new-promise-capability"),n=t("../internals/perform"),c=t("../internals/iterate");i({target:"Promise",stat:!0,forced:t("../internals/promise-statics-incorrect-iteration")},{race:function(d){var u=this,h=o.f(u),p=h.reject,m=n(function(){var f=a(u.resolve);c(d,function(b){s(f,u,b).then(h.resolve,p)})});return m.error&&p(m.value),h.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],374:[function(t,r,l){var i=t("../internals/export"),s=t("../internals/function-call"),a=t("../internals/new-promise-capability");i({target:"Promise",stat:!0,forced:t("../internals/promise-constructor-detection").CONSTRUCTOR},{reject:function(o){var n=a.f(this);return s(n.reject,void 0,o),n.promise}})},{"../internals/export":259,"../internals/function-call":264,"../internals/new-promise-capability":303,"../internals/promise-constructor-detection":324}],375:[function(t,r,l){var i=t("../internals/export"),s=t("../internals/get-built-in"),a=t("../internals/is-pure"),o=t("../internals/promise-native-constructor"),n=t("../internals/promise-constructor-detection").CONSTRUCTOR,c=t("../internals/promise-resolve"),d=s("Promise"),u=a&&!n;i({target:"Promise",stat:!0,forced:a||n},{resolve:function(h){return c(u&&this===d?o:this,h)}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326}],376:[function(t,r,l){var i=t("../internals/export"),s=t("../internals/function-uncurry-this"),a=t("../internals/to-absolute-index"),o=RangeError,n=String.fromCharCode,c=String.fromCodePoint,d=s([].join);i({target:"String",stat:!0,arity:1,forced:!!c&&c.length!==1},{fromCodePoint:function(u){for(var h,p=[],m=arguments.length,f=0;m>f;){if(h=+arguments[f++],a(h,1114111)!==h)throw new o(h+" is not a valid code point");p[f]=h<65536?n(h):n(55296+((h-=65536)>>10),h%1024+56320)}return d(p,"")}})},{"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/to-absolute-index":340}],377:[function(t,r,l){var i=t("../internals/export"),s=t("../internals/function-uncurry-this"),a=t("../internals/not-a-regexp"),o=t("../internals/require-object-coercible"),n=t("../internals/to-string"),c=t("../internals/correct-is-regexp-logic"),d=s("".indexOf);i({target:"String",proto:!0,forced:!c("includes")},{includes:function(u){return!!~d(n(o(this)),n(a(u)),arguments.length>1?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":238,"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/not-a-regexp":304,"../internals/require-object-coercible":329,"../internals/to-string":348}],378:[function(t,r,l){t("../internals/well-known-symbol-define")("asyncIterator")},{"../internals/well-known-symbol-define":355}],379:[function(t,r,l){var i=t("../internals/export"),s=t("../internals/global"),a=t("../internals/function-call"),o=t("../internals/function-uncurry-this"),n=t("../internals/is-pure"),c=t("../internals/descriptors"),d=t("../internals/symbol-constructor-detection"),u=t("../internals/fails"),h=t("../internals/has-own-property"),p=t("../internals/object-is-prototype-of"),m=t("../internals/an-object"),f=t("../internals/to-indexed-object"),b=t("../internals/to-property-key"),y=t("../internals/to-string"),_=t("../internals/create-property-descriptor"),E=t("../internals/object-create"),M=t("../internals/object-keys"),D=t("../internals/object-get-own-property-names"),z=t("../internals/object-get-own-property-names-external"),O=t("../internals/object-get-own-property-symbols"),N=t("../internals/object-get-own-property-descriptor"),B=t("../internals/object-define-property"),H=t("../internals/object-define-properties"),$=t("../internals/object-property-is-enumerable"),C=t("../internals/define-built-in"),R=t("../internals/define-built-in-accessor"),k=t("../internals/shared"),v=t("../internals/shared-key"),w=t("../internals/hidden-keys"),x=t("../internals/uid"),S=t("../internals/well-known-symbol"),T=t("../internals/well-known-symbol-wrapped"),L=t("../internals/well-known-symbol-define"),j=t("../internals/symbol-define-to-primitive"),U=t("../internals/set-to-string-tag"),W=t("../internals/internal-state"),Y=t("../internals/array-iteration").forEach,F=v("hidden"),X=W.set,P=W.getterFor("Symbol"),I=Object.prototype,V=s.Symbol,Q=V&&V.prototype,G=s.RangeError,q=s.TypeError,J=s.QObject,it=N.f,nt=B.f,Z=z.f,st=$.f,rt=o([].push),lt=k("symbols"),at=k("op-symbols"),ct=k("wks"),ut=!J||!J.prototype||!J.prototype.findChild,dt=function(Mt,St,kt){var Nt=it(I,St);Nt&&delete I[St],nt(Mt,St,kt),Nt&&Mt!==I&&nt(I,St,Nt)},gt=c&&u(function(){return E(nt({},"a",{get:function(){return nt(this,"a",{value:7}).a}})).a!==7})?dt:nt,vt=function(Mt,St){var kt=lt[Mt]=E(Q);return X(kt,{type:"Symbol",tag:Mt,description:St}),c||(kt.description=St),kt},_t=function(Mt,St,kt){Mt===I&&_t(at,St,kt),m(Mt);var Nt=b(St);return m(kt),h(lt,Nt)?(kt.enumerable?(h(Mt,F)&&Mt[F][Nt]&&(Mt[F][Nt]=!1),kt=E(kt,{enumerable:_(0,!1)})):(h(Mt,F)||nt(Mt,F,_(1,{})),Mt[F][Nt]=!0),gt(Mt,Nt,kt)):nt(Mt,Nt,kt)},wt=function(Mt,St){m(Mt);var kt=f(St),Nt=M(kt).concat(jt(kt));return Y(Nt,function(Lt){c&&!a(Ot,kt,Lt)||_t(Mt,Lt,kt[Lt])}),Mt},Ot=function(Mt){var St=b(Mt),kt=a(st,this,St);return!(this===I&&h(lt,St)&&!h(at,St))&&(!(kt||!h(this,St)||!h(lt,St)||h(this,F)&&this[F][St])||kt)},Pt=function(Mt,St){var kt=f(Mt),Nt=b(St);if(kt!==I||!h(lt,Nt)||h(at,Nt)){var Lt=it(kt,Nt);return!Lt||!h(lt,Nt)||h(kt,F)&&kt[F][Nt]||(Lt.enumerable=!0),Lt}},Dt=function(Mt){var St=Z(f(Mt)),kt=[];return Y(St,function(Nt){h(lt,Nt)||h(w,Nt)||rt(kt,Nt)}),kt},jt=function(Mt){var St=Mt===I,kt=Z(St?at:f(Mt)),Nt=[];return Y(kt,function(Lt){!h(lt,Lt)||St&&!h(I,Lt)||rt(Nt,lt[Lt])}),Nt};d||(C(Q=(V=function(){if(p(Q,this))throw new q("Symbol is not a constructor");var Mt=arguments.length&&arguments[0]!==void 0?y(arguments[0]):void 0,St=x(Mt),kt=function(Nt){this===I&&a(kt,at,Nt),h(this,F)&&h(this[F],St)&&(this[F][St]=!1);var Lt=_(1,Nt);try{gt(this,St,Lt)}catch(be){if(!(be instanceof G))throw be;dt(this,St,Lt)}};return c&&ut&&gt(I,St,{configurable:!0,set:kt}),vt(St,Mt)}).prototype,"toString",function(){return P(this).tag}),C(V,"withoutSetter",function(Mt){return vt(x(Mt),Mt)}),$.f=Ot,B.f=_t,H.f=wt,N.f=Pt,D.f=z.f=Dt,O.f=jt,T.f=function(Mt){return vt(S(Mt),Mt)},c&&(R(Q,"description",{configurable:!0,get:function(){return P(this).description}}),n||C(I,"propertyIsEnumerable",Ot,{unsafe:!0}))),i({global:!0,constructor:!0,wrap:!0,forced:!d,sham:!d},{Symbol:V}),Y(M(ct),function(Mt){L(Mt)}),i({target:"Symbol",stat:!0,forced:!d},{useSetter:function(){ut=!0},useSimple:function(){ut=!1}}),i({target:"Object",stat:!0,forced:!d,sham:!c},{create:function(Mt,St){return St===void 0?E(Mt):wt(E(Mt),St)},defineProperty:_t,defineProperties:wt,getOwnPropertyDescriptor:Pt}),i({target:"Object",stat:!0,forced:!d},{getOwnPropertyNames:Dt}),j(),U(V,"Symbol"),w[F]=!0},{"../internals/an-object":227,"../internals/array-iteration":229,"../internals/create-property-descriptor":242,"../internals/define-built-in":245,"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/export":259,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-define-properties":307,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-names-external":310,"../internals/object-get-own-property-symbols":312,"../internals/object-is-prototype-of":314,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/set-to-string-tag":331,"../internals/shared":334,"../internals/shared-key":332,"../internals/symbol-constructor-detection":336,"../internals/symbol-define-to-primitive":337,"../internals/to-indexed-object":341,"../internals/to-property-key":346,"../internals/to-string":348,"../internals/uid":350,"../internals/well-known-symbol":357,"../internals/well-known-symbol-define":355,"../internals/well-known-symbol-wrapped":356}],380:[function(t,r,l){var i=t("../internals/export"),s=t("../internals/get-built-in"),a=t("../internals/has-own-property"),o=t("../internals/to-string"),n=t("../internals/shared"),c=t("../internals/symbol-registry-detection"),d=n("string-to-symbol-registry"),u=n("symbol-to-string-registry");i({target:"Symbol",stat:!0,forced:!c},{for:function(h){var p=o(h);if(a(d,p))return d[p];var m=s("Symbol")(p);return d[p]=m,u[m]=p,m}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/to-string":348}],381:[function(t,r,l){t("../modules/es.symbol.constructor"),t("../modules/es.symbol.for"),t("../modules/es.symbol.key-for"),t("../modules/es.json.stringify"),t("../modules/es.object.get-own-property-symbols")},{"../modules/es.json.stringify":362,"../modules/es.object.get-own-property-symbols":365,"../modules/es.symbol.constructor":379,"../modules/es.symbol.for":380,"../modules/es.symbol.key-for":382}],382:[function(t,r,l){var i=t("../internals/export"),s=t("../internals/has-own-property"),a=t("../internals/is-symbol"),o=t("../internals/try-to-string"),n=t("../internals/shared"),c=t("../internals/symbol-registry-detection"),d=n("symbol-to-string-registry");i({target:"Symbol",stat:!0,forced:!c},{keyFor:function(u){if(!a(u))throw new TypeError(o(u)+" is not a symbol");if(s(d,u))return d[u]}})},{"../internals/export":259,"../internals/has-own-property":275,"../internals/is-symbol":292,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/try-to-string":349}],383:[function(t,r,l){function i(s){return Object.prototype.toString.call(s)}l.isArray=function(s){return Array.isArray?Array.isArray(s):i(s)==="[object Array]"},l.isBoolean=function(s){return typeof s=="boolean"},l.isNull=function(s){return s===null},l.isNullOrUndefined=function(s){return s==null},l.isNumber=function(s){return typeof s=="number"},l.isString=function(s){return typeof s=="string"},l.isSymbol=function(s){return typeof s=="symbol"},l.isUndefined=function(s){return s===void 0},l.isRegExp=function(s){return i(s)==="[object RegExp]"},l.isObject=function(s){return typeof s=="object"&&s!==null},l.isDate=function(s){return i(s)==="[object Date]"},l.isError=function(s){return i(s)==="[object Error]"||s instanceof Error},l.isFunction=function(s){return typeof s=="function"},l.isPrimitive=function(s){return s===null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||typeof s=="symbol"||s===void 0},l.isBuffer=t("buffer").Buffer.isBuffer},{buffer:220}],384:[function(t,r,l){(function(i){(function(){var s=t("elliptic"),a=t("bn.js");r.exports=function(d){return new n(d)};var o={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function n(d){this.curveType=o[d],this.curveType||(this.curveType={name:d}),this.curve=new s.ec(this.curveType.name),this.keys=void 0}function c(d,u,h){Array.isArray(d)||(d=d.toArray());var p=new i(d);if(h&&p.length<h){var m=new i(h-p.length);m.fill(0),p=i.concat([m,p])}return u?p.toString(u):p}o.p224=o.secp224r1,o.p256=o.secp256r1=o.prime256v1,o.p192=o.secp192r1=o.prime192v1,o.p384=o.secp384r1,o.p521=o.secp521r1,n.prototype.generateKeys=function(d,u){return this.keys=this.curve.genKeyPair(),this.getPublicKey(d,u)},n.prototype.computeSecret=function(d,u,h){return u=u||"utf8",i.isBuffer(d)||(d=new i(d,u)),c(this.curve.keyFromPublic(d).getPublic().mul(this.keys.getPrivate()).getX(),h,this.curveType.byteLength)},n.prototype.getPublicKey=function(d,u){var h=this.keys.getPublic(u==="compressed",!0);return u==="hybrid"&&(h[h.length-1]%2?h[0]=7:h[0]=6),c(h,d)},n.prototype.getPrivateKey=function(d){return c(this.keys.getPrivate(),d)},n.prototype.setPublicKey=function(d,u){return u=u||"utf8",i.isBuffer(d)||(d=new i(d,u)),this.keys._importPublic(d),this},n.prototype.setPrivateKey=function(d,u){u=u||"utf8",i.isBuffer(d)||(d=new i(d,u));var h=new a(d);return h=h.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(h),this}}).call(this)}).call(this,t("buffer").Buffer)},{"bn.js":385,buffer:220,elliptic:405}],385:[function(t,r,l){arguments[4][184][0].apply(l,arguments)},{buffer:188,dup:184}],386:[function(t,r,l){var i=t("inherits"),s=t("md5.js"),a=t("ripemd160"),o=t("sha.js"),n=t("cipher-base");function c(d){n.call(this,"digest"),this._hash=d}i(c,n),c.prototype._update=function(d){this._hash.update(d)},c.prototype._final=function(){return this._hash.digest()},r.exports=function(d){return(d=d.toLowerCase())==="md5"?new s:d==="rmd160"||d==="ripemd160"?new a:new c(o(d))}},{"cipher-base":221,inherits:440,"md5.js":450,ripemd160:493,"sha.js":498}],387:[function(t,r,l){var i=t("md5.js");r.exports=function(s){return new i().update(s).digest()}},{"md5.js":450}],388:[function(t,r,l){var i=t("inherits"),s=t("./legacy"),a=t("cipher-base"),o=t("safe-buffer").Buffer,n=t("create-hash/md5"),c=t("ripemd160"),d=t("sha.js"),u=o.alloc(128);function h(p,m){a.call(this,"digest"),typeof m=="string"&&(m=o.from(m));var f=p==="sha512"||p==="sha384"?128:64;this._alg=p,this._key=m,m.length>f?m=(p==="rmd160"?new c:d(p)).update(m).digest():m.length<f&&(m=o.concat([m,u],f));for(var b=this._ipad=o.allocUnsafe(f),y=this._opad=o.allocUnsafe(f),_=0;_<f;_++)b[_]=54^m[_],y[_]=92^m[_];this._hash=p==="rmd160"?new c:d(p),this._hash.update(b)}i(h,a),h.prototype._update=function(p){this._hash.update(p)},h.prototype._final=function(){var p=this._hash.digest();return(this._alg==="rmd160"?new c:d(this._alg)).update(this._opad).update(p).digest()},r.exports=function(p,m){return(p=p.toLowerCase())==="rmd160"||p==="ripemd160"?new h("rmd160",m):p==="md5"?new s(n,m):new h(p,m)}},{"./legacy":389,"cipher-base":221,"create-hash/md5":387,inherits:440,ripemd160:493,"safe-buffer":494,"sha.js":498}],389:[function(t,r,l){var i=t("inherits"),s=t("safe-buffer").Buffer,a=t("cipher-base"),o=s.alloc(128);function n(c,d){a.call(this,"digest"),typeof d=="string"&&(d=s.from(d)),this._alg=c,this._key=d,d.length>64?d=c(d):d.length<64&&(d=s.concat([d,o],64));for(var u=this._ipad=s.allocUnsafe(64),h=this._opad=s.allocUnsafe(64),p=0;p<64;p++)u[p]=54^d[p],h[p]=92^d[p];this._hash=[u]}i(n,a),n.prototype._update=function(c){this._hash.push(c)},n.prototype._final=function(){var c=this._alg(s.concat(this._hash));return this._alg(s.concat([this._opad,c]))},r.exports=n},{"cipher-base":221,inherits:440,"safe-buffer":494}],390:[function(t,r,l){l.randomBytes=l.rng=l.pseudoRandomBytes=l.prng=t("randombytes"),l.createHash=l.Hash=t("create-hash"),l.createHmac=l.Hmac=t("create-hmac");var i=t("browserify-sign/algos"),s=Object.keys(i),a=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(s);l.getHashes=function(){return a};var o=t("pbkdf2");l.pbkdf2=o.pbkdf2,l.pbkdf2Sync=o.pbkdf2Sync;var n=t("browserify-cipher");l.Cipher=n.Cipher,l.createCipher=n.createCipher,l.Cipheriv=n.Cipheriv,l.createCipheriv=n.createCipheriv,l.Decipher=n.Decipher,l.createDecipher=n.createDecipher,l.Decipheriv=n.Decipheriv,l.createDecipheriv=n.createDecipheriv,l.getCiphers=n.getCiphers,l.listCiphers=n.listCiphers;var c=t("diffie-hellman");l.DiffieHellmanGroup=c.DiffieHellmanGroup,l.createDiffieHellmanGroup=c.createDiffieHellmanGroup,l.getDiffieHellman=c.getDiffieHellman,l.createDiffieHellman=c.createDiffieHellman,l.DiffieHellman=c.DiffieHellman;var d=t("browserify-sign");l.createSign=d.createSign,l.Sign=d.Sign,l.createVerify=d.createVerify,l.Verify=d.Verify,l.createECDH=t("create-ecdh");var u=t("public-encrypt");l.publicEncrypt=u.publicEncrypt,l.privateEncrypt=u.privateEncrypt,l.publicDecrypt=u.publicDecrypt,l.privateDecrypt=u.privateDecrypt;var h=t("randomfill");l.randomFill=h.randomFill,l.randomFillSync=h.randomFillSync,l.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},l.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},{"browserify-cipher":206,"browserify-sign":213,"browserify-sign/algos":210,"create-ecdh":384,"create-hash":386,"create-hmac":388,"diffie-hellman":400,pbkdf2:460,"public-encrypt":468,randombytes:475,randomfill:476}],391:[function(t,r,l){(function(i,s){typeof l=="object"&&r!==void 0?r.exports=s():(i=typeof globalThis<"u"?globalThis:i||self).dayjs=s()})(void 0,function(){var i=6e4,s=36e5,a="millisecond",o="second",n="minute",c="hour",d="day",u="week",h="month",p="quarter",m="year",f="date",b="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,_=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,E={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(v){var w=["th","st","nd","rd"],x=v%100;return"["+v+(w[(x-20)%10]||w[x]||w[0])+"]"}},M=function(v,w,x){var S=String(v);return!S||S.length>=w?v:""+Array(w+1-S.length).join(x)+v},D={s:M,z:function(v){var w=-v.utcOffset(),x=Math.abs(w),S=Math.floor(x/60),T=x%60;return(w<=0?"+":"-")+M(S,2,"0")+":"+M(T,2,"0")},m:function v(w,x){if(w.date()<x.date())return-v(x,w);var S=12*(x.year()-w.year())+(x.month()-w.month()),T=w.clone().add(S,h),L=x-T<0,j=w.clone().add(S+(L?-1:1),h);return+(-(S+(x-T)/(L?T-j:j-T))||0)},a:function(v){return v<0?Math.ceil(v)||0:Math.floor(v)},p:function(v){return{M:h,y:m,w:u,d,D:f,h:c,m:n,s:o,ms:a,Q:p}[v]||String(v||"").toLowerCase().replace(/s$/,"")},u:function(v){return v===void 0}},z="en",O={};O[z]=E;var N="$isDayjsObject",B=function(v){return v instanceof R||!(!v||!v[N])},H=function v(w,x,S){var T;if(!w)return z;if(typeof w=="string"){var L=w.toLowerCase();O[L]&&(T=L),x&&(O[L]=x,T=L);var j=w.split("-");if(!T&&j.length>1)return v(j[0])}else{var U=w.name;O[U]=w,T=U}return!S&&T&&(z=T),T||!S&&z},$=function(v,w){if(B(v))return v.clone();var x=typeof w=="object"?w:{};return x.date=v,x.args=arguments,new R(x)},C=D;C.l=H,C.i=B,C.w=function(v,w){return $(v,{locale:w.$L,utc:w.$u,x:w.$x,$offset:w.$offset})};var R=function(){function v(x){this.$L=H(x.locale,null,!0),this.parse(x),this.$x=this.$x||x.x||{},this[N]=!0}var w=v.prototype;return w.parse=function(x){this.$d=function(S){var T=S.date,L=S.utc;if(T===null)return new Date(NaN);if(C.u(T))return new Date;if(T instanceof Date)return new Date(T);if(typeof T=="string"&&!/Z$/i.test(T)){var j=T.match(y);if(j){var U=j[2]-1||0,W=(j[7]||"0").substring(0,3);return L?new Date(Date.UTC(j[1],U,j[3]||1,j[4]||0,j[5]||0,j[6]||0,W)):new Date(j[1],U,j[3]||1,j[4]||0,j[5]||0,j[6]||0,W)}}return new Date(T)}(x),this.init()},w.init=function(){var x=this.$d;this.$y=x.getFullYear(),this.$M=x.getMonth(),this.$D=x.getDate(),this.$W=x.getDay(),this.$H=x.getHours(),this.$m=x.getMinutes(),this.$s=x.getSeconds(),this.$ms=x.getMilliseconds()},w.$utils=function(){return C},w.isValid=function(){return this.$d.toString()!==b},w.isSame=function(x,S){var T=$(x);return this.startOf(S)<=T&&T<=this.endOf(S)},w.isAfter=function(x,S){return $(x)<this.startOf(S)},w.isBefore=function(x,S){return this.endOf(S)<$(x)},w.$g=function(x,S,T){return C.u(x)?this[S]:this.set(T,x)},w.unix=function(){return Math.floor(this.valueOf()/1e3)},w.valueOf=function(){return this.$d.getTime()},w.startOf=function(x,S){var T=this,L=!!C.u(S)||S,j=C.p(x),U=function(Q,G){var q=C.w(T.$u?Date.UTC(T.$y,G,Q):new Date(T.$y,G,Q),T);return L?q:q.endOf(d)},W=function(Q,G){return C.w(T.toDate()[Q].apply(T.toDate("s"),(L?[0,0,0,0]:[23,59,59,999]).slice(G)),T)},Y=this.$W,F=this.$M,X=this.$D,P="set"+(this.$u?"UTC":"");switch(j){case m:return L?U(1,0):U(31,11);case h:return L?U(1,F):U(0,F+1);case u:var I=this.$locale().weekStart||0,V=(Y<I?Y+7:Y)-I;return U(L?X-V:X+(6-V),F);case d:case f:return W(P+"Hours",0);case c:return W(P+"Minutes",1);case n:return W(P+"Seconds",2);case o:return W(P+"Milliseconds",3);default:return this.clone()}},w.endOf=function(x){return this.startOf(x,!1)},w.$set=function(x,S){var T,L=C.p(x),j="set"+(this.$u?"UTC":""),U=(T={},T[d]=j+"Date",T[f]=j+"Date",T[h]=j+"Month",T[m]=j+"FullYear",T[c]=j+"Hours",T[n]=j+"Minutes",T[o]=j+"Seconds",T[a]=j+"Milliseconds",T)[L],W=L===d?this.$D+(S-this.$W):S;if(L===h||L===m){var Y=this.clone().set(f,1);Y.$d[U](W),Y.init(),this.$d=Y.set(f,Math.min(this.$D,Y.daysInMonth())).$d}else U&&this.$d[U](W);return this.init(),this},w.set=function(x,S){return this.clone().$set(x,S)},w.get=function(x){return this[C.p(x)]()},w.add=function(x,S){var T,L=this;x=Number(x);var j=C.p(S),U=function(F){var X=$(L);return C.w(X.date(X.date()+Math.round(F*x)),L)};if(j===h)return this.set(h,this.$M+x);if(j===m)return this.set(m,this.$y+x);if(j===d)return U(1);if(j===u)return U(7);var W=(T={},T[n]=i,T[c]=s,T[o]=1e3,T)[j]||1,Y=this.$d.getTime()+x*W;return C.w(Y,this)},w.subtract=function(x,S){return this.add(-1*x,S)},w.format=function(x){var S=this,T=this.$locale();if(!this.isValid())return T.invalidDate||b;var L=x||"YYYY-MM-DDTHH:mm:ssZ",j=C.z(this),U=this.$H,W=this.$m,Y=this.$M,F=T.weekdays,X=T.months,P=T.meridiem,I=function(G,q,J,it){return G&&(G[q]||G(S,L))||J[q].slice(0,it)},V=function(G){return C.s(U%12||12,G,"0")},Q=P||function(G,q,J){var it=G<12?"AM":"PM";return J?it.toLowerCase():it};return L.replace(_,function(G,q){return q||function(J){switch(J){case"YY":return String(S.$y).slice(-2);case"YYYY":return C.s(S.$y,4,"0");case"M":return Y+1;case"MM":return C.s(Y+1,2,"0");case"MMM":return I(T.monthsShort,Y,X,3);case"MMMM":return I(X,Y);case"D":return S.$D;case"DD":return C.s(S.$D,2,"0");case"d":return String(S.$W);case"dd":return I(T.weekdaysMin,S.$W,F,2);case"ddd":return I(T.weekdaysShort,S.$W,F,3);case"dddd":return F[S.$W];case"H":return String(U);case"HH":return C.s(U,2,"0");case"h":return V(1);case"hh":return V(2);case"a":return Q(U,W,!0);case"A":return Q(U,W,!1);case"m":return String(W);case"mm":return C.s(W,2,"0");case"s":return String(S.$s);case"ss":return C.s(S.$s,2,"0");case"SSS":return C.s(S.$ms,3,"0");case"Z":return j}return null}(G)||j.replace(":","")})},w.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},w.diff=function(x,S,T){var L,j=this,U=C.p(S),W=$(x),Y=(W.utcOffset()-this.utcOffset())*i,F=this-W,X=function(){return C.m(j,W)};switch(U){case m:L=X()/12;break;case h:L=X();break;case p:L=X()/3;break;case u:L=(F-Y)/6048e5;break;case d:L=(F-Y)/864e5;break;case c:L=F/s;break;case n:L=F/i;break;case o:L=F/1e3;break;default:L=F}return T?L:C.a(L)},w.daysInMonth=function(){return this.endOf(h).$D},w.$locale=function(){return O[this.$L]},w.locale=function(x,S){if(!x)return this.$L;var T=this.clone(),L=H(x,S,!0);return L&&(T.$L=L),T},w.clone=function(){return C.w(this.$d,this)},w.toDate=function(){return new Date(this.valueOf())},w.toJSON=function(){return this.isValid()?this.toISOString():null},w.toISOString=function(){return this.$d.toISOString()},w.toString=function(){return this.$d.toUTCString()},v}(),k=R.prototype;return $.prototype=k,[["$ms",a],["$s",o],["$m",n],["$H",c],["$W",d],["$M",h],["$y",m],["$D",f]].forEach(function(v){k[v[1]]=function(w){return this.$g(w,v[0],v[1])}}),$.extend=function(v,w){return v.$i||(v(w,R,$),v.$i=!0),$},$.locale=H,$.isDayjs=B,$.unix=function(v){return $(1e3*v)},$.en=O[z],$.Ls=O,$.p={},$})},{}],392:[function(t,r,l){(function(i,s){typeof l=="object"&&r!==void 0?r.exports=s():(i=typeof globalThis<"u"?globalThis:i||self).dayjs_plugin_customParseFormat=s()})(void 0,function(){var i={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},s=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,a=/\d\d/,o=/\d\d?/,n=/\d*[^-_:/,()\s\d]+/,c={},d=function(y){return(y=+y)+(y>68?1900:2e3)},u=function(y){return function(_){this[y]=+_}},h=[/[+-]\d\d:?(\d\d)?|Z/,function(y){(this.zone||(this.zone={})).offset=function(_){if(!_||_==="Z")return 0;var E=_.match(/([+-]|\d\d)/g),M=60*E[1]+(+E[2]||0);return M===0?0:E[0]==="+"?-M:M}(y)}],p=function(y){var _=c[y];return _&&(_.indexOf?_:_.s.concat(_.f))},m=function(y,_){var E,M=c.meridiem;if(M){for(var D=1;D<=24;D+=1)if(y.indexOf(M(D,0,_))>-1){E=D>12;break}}else E=y===(_?"pm":"PM");return E},f={A:[n,function(y){this.afternoon=m(y,!1)}],a:[n,function(y){this.afternoon=m(y,!0)}],S:[/\d/,function(y){this.milliseconds=100*+y}],SS:[a,function(y){this.milliseconds=10*+y}],SSS:[/\d{3}/,function(y){this.milliseconds=+y}],s:[o,u("seconds")],ss:[o,u("seconds")],m:[o,u("minutes")],mm:[o,u("minutes")],H:[o,u("hours")],h:[o,u("hours")],HH:[o,u("hours")],hh:[o,u("hours")],D:[o,u("day")],DD:[a,u("day")],Do:[n,function(y){var _=c.ordinal,E=y.match(/\d+/);if(this.day=E[0],_)for(var M=1;M<=31;M+=1)_(M).replace(/\[|\]/g,"")===y&&(this.day=M)}],M:[o,u("month")],MM:[a,u("month")],MMM:[n,function(y){var _=p("months"),E=(p("monthsShort")||_.map(function(M){return M.slice(0,3)})).indexOf(y)+1;if(E<1)throw new Error;this.month=E%12||E}],MMMM:[n,function(y){var _=p("months").indexOf(y)+1;if(_<1)throw new Error;this.month=_%12||_}],Y:[/[+-]?\d+/,u("year")],YY:[a,function(y){this.year=d(y)}],YYYY:[/\d{4}/,u("year")],Z:h,ZZ:h};function b(y){var _,E;_=y,E=c&&c.formats;for(var M=(y=_.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function($,C,R){var k=R&&R.toUpperCase();return C||E[R]||i[R]||E[k].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(v,w,x){return w||x.slice(1)})})).match(s),D=M.length,z=0;z<D;z+=1){var O=M[z],N=f[O],B=N&&N[0],H=N&&N[1];M[z]=H?{regex:B,parser:H}:O.replace(/^\[|\]$/g,"")}return function($){for(var C={},R=0,k=0;R<D;R+=1){var v=M[R];if(typeof v=="string")k+=v.length;else{var w=v.regex,x=v.parser,S=$.slice(k),T=w.exec(S)[0];x.call(C,T),$=$.replace(T,"")}}return function(L){var j=L.afternoon;if(j!==void 0){var U=L.hours;j?U<12&&(L.hours+=12):U===12&&(L.hours=0),delete L.afternoon}}(C),C}}return function(y,_,E){E.p.customParseFormat=!0,y&&y.parseTwoDigitYear&&(d=y.parseTwoDigitYear);var M=_.prototype,D=M.parse;M.parse=function(z){var O=z.date,N=z.utc,B=z.args;this.$u=N;var H=B[1];if(typeof H=="string"){var $=B[2]===!0,C=B[3]===!0,R=$||C,k=B[2];C&&(k=B[2]),c=this.$locale(),!$&&k&&(c=E.Ls[k]),this.$d=function(S,T,L){try{if(["x","X"].indexOf(T)>-1)return new Date((T==="X"?1e3:1)*S);var j=b(T)(S),U=j.year,W=j.month,Y=j.day,F=j.hours,X=j.minutes,P=j.seconds,I=j.milliseconds,V=j.zone,Q=new Date,G=Y||(U||W?1:Q.getDate()),q=U||Q.getFullYear(),J=0;U&&!W||(J=W>0?W-1:Q.getMonth());var it=F||0,nt=X||0,Z=P||0,st=I||0;return V?new Date(Date.UTC(q,J,G,it,nt,Z,st+60*V.offset*1e3)):L?new Date(Date.UTC(q,J,G,it,nt,Z,st)):new Date(q,J,G,it,nt,Z,st)}catch{return new Date("")}}(O,H,N),this.init(),k&&k!==!0&&(this.$L=this.locale(k).$L),R&&O!=this.format(H)&&(this.$d=new Date("")),c={}}else if(H instanceof Array)for(var v=H.length,w=1;w<=v;w+=1){B[1]=H[w-1];var x=E.apply(this,B);if(x.isValid()){this.$d=x.$d,this.$L=x.$L,this.init();break}w===v&&(this.$d=new Date(""))}else D.call(this,z)}}})},{}],393:[function(t,r,l){(function(i,s){typeof l=="object"&&r!==void 0?r.exports=s():(i=typeof globalThis<"u"?globalThis:i||self).dayjs_plugin_utc=s()})(void 0,function(){var i="minute",s=/[+-]\d\d(?::?\d\d)?/g,a=/([+-]|\d\d)/g;return function(o,n,c){var d=n.prototype;c.utc=function(y){var _={date:y,utc:!0,args:arguments};return new n(_)},d.utc=function(y){var _=c(this.toDate(),{locale:this.$L,utc:!0});return y?_.add(this.utcOffset(),i):_},d.local=function(){return c(this.toDate(),{locale:this.$L,utc:!1})};var u=d.parse;d.parse=function(y){y.utc&&(this.$u=!0),this.$utils().u(y.$offset)||(this.$offset=y.$offset),u.call(this,y)};var h=d.init;d.init=function(){if(this.$u){var y=this.$d;this.$y=y.getUTCFullYear(),this.$M=y.getUTCMonth(),this.$D=y.getUTCDate(),this.$W=y.getUTCDay(),this.$H=y.getUTCHours(),this.$m=y.getUTCMinutes(),this.$s=y.getUTCSeconds(),this.$ms=y.getUTCMilliseconds()}else h.call(this)};var p=d.utcOffset;d.utcOffset=function(y,_){var E=this.$utils().u;if(E(y))return this.$u?0:E(this.$offset)?p.call(this):this.$offset;if(typeof y=="string"&&(y=function(O){O===void 0&&(O="");var N=O.match(s);if(!N)return null;var B=(""+N[0]).match(a)||["-",0,0],H=B[0],$=60*+B[1]+ +B[2];return $===0?0:H==="+"?$:-$}(y))===null)return this;var M=Math.abs(y)<=16?60*y:y,D=this;if(_)return D.$offset=M,D.$u=y===0,D;if(y!==0){var z=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(D=this.local().add(M+z,i)).$offset=M,D.$x.$localOffset=z}else D=this.utc();return D};var m=d.format;d.format=function(y){var _=y||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return m.call(this,_)},d.valueOf=function(){var y=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*y},d.isUTC=function(){return!!this.$u},d.toISOString=function(){return this.toDate().toISOString()},d.toString=function(){return this.toDate().toUTCString()};var f=d.toDate;d.toDate=function(y){return y==="s"&&this.$offset?c(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():f.call(this)};var b=d.diff;d.diff=function(y,_,E){if(y&&this.$u===y.$u)return b.call(this,y,_,E);var M=this.local(),D=c(y).local();return b.call(M,D,_,E)}}})},{}],394:[function(t,r,l){l.utils=t("./des/utils"),l.Cipher=t("./des/cipher"),l.DES=t("./des/des"),l.CBC=t("./des/cbc"),l.EDE=t("./des/ede")},{"./des/cbc":395,"./des/cipher":396,"./des/des":397,"./des/ede":398,"./des/utils":399}],395:[function(t,r,l){var i=t("minimalistic-assert"),s=t("inherits"),a={};function o(n){i.equal(n.length,8,"Invalid IV length"),this.iv=new Array(8);for(var c=0;c<this.iv.length;c++)this.iv[c]=n[c]}l.instantiate=function(n){function c(p){n.call(this,p),this._cbcInit()}s(c,n);for(var d=Object.keys(a),u=0;u<d.length;u++){var h=d[u];c.prototype[h]=a[h]}return c.create=function(p){return new c(p)},c},a._cbcInit=function(){var n=new o(this.options.iv);this._cbcState=n},a._update=function(n,c,d,u){var h=this._cbcState,p=this.constructor.super_.prototype,m=h.iv;if(this.type==="encrypt"){for(var f=0;f<this.blockSize;f++)m[f]^=n[c+f];for(p._update.call(this,m,0,d,u),f=0;f<this.blockSize;f++)m[f]=d[u+f]}else{for(p._update.call(this,n,c,d,u),f=0;f<this.blockSize;f++)d[u+f]^=m[f];for(f=0;f<this.blockSize;f++)m[f]=n[c+f]}}},{inherits:440,"minimalistic-assert":453}],396:[function(t,r,l){var i=t("minimalistic-assert");function s(a){this.options=a,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=a.padding!==!1}r.exports=s,s.prototype._init=function(){},s.prototype.update=function(a){return a.length===0?[]:this.type==="decrypt"?this._updateDecrypt(a):this._updateEncrypt(a)},s.prototype._buffer=function(a,o){for(var n=Math.min(this.buffer.length-this.bufferOff,a.length-o),c=0;c<n;c++)this.buffer[this.bufferOff+c]=a[o+c];return this.bufferOff+=n,n},s.prototype._flushBuffer=function(a,o){return this._update(this.buffer,0,a,o),this.bufferOff=0,this.blockSize},s.prototype._updateEncrypt=function(a){var o=0,n=0,c=(this.bufferOff+a.length)/this.blockSize|0,d=new Array(c*this.blockSize);this.bufferOff!==0&&(o+=this._buffer(a,o),this.bufferOff===this.buffer.length&&(n+=this._flushBuffer(d,n)));for(var u=a.length-(a.length-o)%this.blockSize;o<u;o+=this.blockSize)this._update(a,o,d,n),n+=this.blockSize;for(;o<a.length;o++,this.bufferOff++)this.buffer[this.bufferOff]=a[o];return d},s.prototype._updateDecrypt=function(a){for(var o=0,n=0,c=Math.ceil((this.bufferOff+a.length)/this.blockSize)-1,d=new Array(c*this.blockSize);c>0;c--)o+=this._buffer(a,o),n+=this._flushBuffer(d,n);return o+=this._buffer(a,o),d},s.prototype.final=function(a){var o,n;return a&&(o=this.update(a)),n=this.type==="encrypt"?this._finalEncrypt():this._finalDecrypt(),o?o.concat(n):n},s.prototype._pad=function(a,o){if(o===0)return!1;for(;o<a.length;)a[o++]=0;return!0},s.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var a=new Array(this.blockSize);return this._update(this.buffer,0,a,0),a},s.prototype._unpad=function(a){return a},s.prototype._finalDecrypt=function(){i.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var a=new Array(this.blockSize);return this._flushBuffer(a,0),this._unpad(a)}},{"minimalistic-assert":453}],397:[function(t,r,l){var i=t("minimalistic-assert"),s=t("inherits"),a=t("./utils"),o=t("./cipher");function n(){this.tmp=new Array(2),this.keys=null}function c(u){o.call(this,u);var h=new n;this._desState=h,this.deriveKeys(h,u.key)}s(c,o),r.exports=c,c.create=function(u){return new c(u)};var d=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];c.prototype.deriveKeys=function(u,h){u.keys=new Array(32),i.equal(h.length,this.blockSize,"Invalid key length");var p=a.readUInt32BE(h,0),m=a.readUInt32BE(h,4);a.pc1(p,m,u.tmp,0),p=u.tmp[0],m=u.tmp[1];for(var f=0;f<u.keys.length;f+=2){var b=d[f>>>1];p=a.r28shl(p,b),m=a.r28shl(m,b),a.pc2(p,m,u.keys,f)}},c.prototype._update=function(u,h,p,m){var f=this._desState,b=a.readUInt32BE(u,h),y=a.readUInt32BE(u,h+4);a.ip(b,y,f.tmp,0),b=f.tmp[0],y=f.tmp[1],this.type==="encrypt"?this._encrypt(f,b,y,f.tmp,0):this._decrypt(f,b,y,f.tmp,0),b=f.tmp[0],y=f.tmp[1],a.writeUInt32BE(p,b,m),a.writeUInt32BE(p,y,m+4)},c.prototype._pad=function(u,h){if(this.padding===!1)return!1;for(var p=u.length-h,m=h;m<u.length;m++)u[m]=p;return!0},c.prototype._unpad=function(u){if(this.padding===!1)return u;for(var h=u[u.length-1],p=u.length-h;p<u.length;p++)i.equal(u[p],h);return u.slice(0,u.length-h)},c.prototype._encrypt=function(u,h,p,m,f){for(var b=h,y=p,_=0;_<u.keys.length;_+=2){var E=u.keys[_],M=u.keys[_+1];a.expand(y,u.tmp,0),E^=u.tmp[0],M^=u.tmp[1];var D=a.substitute(E,M),z=y;y=(b^a.permute(D))>>>0,b=z}a.rip(y,b,m,f)},c.prototype._decrypt=function(u,h,p,m,f){for(var b=p,y=h,_=u.keys.length-2;_>=0;_-=2){var E=u.keys[_],M=u.keys[_+1];a.expand(b,u.tmp,0),E^=u.tmp[0],M^=u.tmp[1];var D=a.substitute(E,M),z=b;b=(y^a.permute(D))>>>0,y=z}a.rip(b,y,m,f)}},{"./cipher":396,"./utils":399,inherits:440,"minimalistic-assert":453}],398:[function(t,r,l){var i=t("minimalistic-assert"),s=t("inherits"),a=t("./cipher"),o=t("./des");function n(d,u){i.equal(u.length,24,"Invalid key length");var h=u.slice(0,8),p=u.slice(8,16),m=u.slice(16,24);this.ciphers=d==="encrypt"?[o.create({type:"encrypt",key:h}),o.create({type:"decrypt",key:p}),o.create({type:"encrypt",key:m})]:[o.create({type:"decrypt",key:m}),o.create({type:"encrypt",key:p}),o.create({type:"decrypt",key:h})]}function c(d){a.call(this,d);var u=new n(this.type,this.options.key);this._edeState=u}s(c,a),r.exports=c,c.create=function(d){return new c(d)},c.prototype._update=function(d,u,h,p){var m=this._edeState;m.ciphers[0]._update(d,u,h,p),m.ciphers[1]._update(h,p,h,p),m.ciphers[2]._update(h,p,h,p)},c.prototype._pad=o.prototype._pad,c.prototype._unpad=o.prototype._unpad},{"./cipher":396,"./des":397,inherits:440,"minimalistic-assert":453}],399:[function(t,r,l){l.readUInt32BE=function(o,n){return(o[0+n]<<24|o[1+n]<<16|o[2+n]<<8|o[3+n])>>>0},l.writeUInt32BE=function(o,n,c){o[0+c]=n>>>24,o[1+c]=n>>>16&255,o[2+c]=n>>>8&255,o[3+c]=255&n},l.ip=function(o,n,c,d){for(var u=0,h=0,p=6;p>=0;p-=2){for(var m=0;m<=24;m+=8)u<<=1,u|=n>>>m+p&1;for(m=0;m<=24;m+=8)u<<=1,u|=o>>>m+p&1}for(p=6;p>=0;p-=2){for(m=1;m<=25;m+=8)h<<=1,h|=n>>>m+p&1;for(m=1;m<=25;m+=8)h<<=1,h|=o>>>m+p&1}c[d+0]=u>>>0,c[d+1]=h>>>0},l.rip=function(o,n,c,d){for(var u=0,h=0,p=0;p<4;p++)for(var m=24;m>=0;m-=8)u<<=1,u|=n>>>m+p&1,u<<=1,u|=o>>>m+p&1;for(p=4;p<8;p++)for(m=24;m>=0;m-=8)h<<=1,h|=n>>>m+p&1,h<<=1,h|=o>>>m+p&1;c[d+0]=u>>>0,c[d+1]=h>>>0},l.pc1=function(o,n,c,d){for(var u=0,h=0,p=7;p>=5;p--){for(var m=0;m<=24;m+=8)u<<=1,u|=n>>m+p&1;for(m=0;m<=24;m+=8)u<<=1,u|=o>>m+p&1}for(m=0;m<=24;m+=8)u<<=1,u|=n>>m+p&1;for(p=1;p<=3;p++){for(m=0;m<=24;m+=8)h<<=1,h|=n>>m+p&1;for(m=0;m<=24;m+=8)h<<=1,h|=o>>m+p&1}for(m=0;m<=24;m+=8)h<<=1,h|=o>>m+p&1;c[d+0]=u>>>0,c[d+1]=h>>>0},l.r28shl=function(o,n){return o<<n&268435455|o>>>28-n};var i=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];l.pc2=function(o,n,c,d){for(var u=0,h=0,p=i.length>>>1,m=0;m<p;m++)u<<=1,u|=o>>>i[m]&1;for(m=p;m<i.length;m++)h<<=1,h|=n>>>i[m]&1;c[d+0]=u>>>0,c[d+1]=h>>>0},l.expand=function(o,n,c){var d=0,u=0;d=(1&o)<<5|o>>>27;for(var h=23;h>=15;h-=4)d<<=6,d|=o>>>h&63;for(h=11;h>=3;h-=4)u|=o>>>h&63,u<<=6;u|=(31&o)<<1|o>>>31,n[c+0]=d>>>0,n[c+1]=u>>>0};var s=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];l.substitute=function(o,n){for(var c=0,d=0;d<4;d++)c<<=4,c|=s[64*d+(o>>>18-6*d&63)];for(d=0;d<4;d++)c<<=4,c|=s[256+64*d+(n>>>18-6*d&63)];return c>>>0};var a=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];l.permute=function(o){for(var n=0,c=0;c<a.length;c++)n<<=1,n|=o>>>a[c]&1;return n>>>0},l.padSplit=function(o,n,c){for(var d=o.toString(2);d.length<n;)d="0"+d;for(var u=[],h=0;h<n;h+=c)u.push(d.slice(h,h+c));return u.join(" ")}},{}],400:[function(t,r,l){(function(i){(function(){var s=t("./lib/generatePrime"),a=t("./lib/primes.json"),o=t("./lib/dh"),n={binary:!0,hex:!0,base64:!0};l.DiffieHellmanGroup=l.createDiffieHellmanGroup=l.getDiffieHellman=function(c){var d=new i(a[c].prime,"hex"),u=new i(a[c].gen,"hex");return new o(d,u)},l.createDiffieHellman=l.DiffieHellman=function c(d,u,h,p){return i.isBuffer(u)||n[u]===void 0?c(d,"binary",u,h):(u=u||"binary",p=p||"binary",h=h||new i([2]),i.isBuffer(h)||(h=new i(h,p)),typeof d=="number"?new o(s(d,h),h,!0):(i.isBuffer(d)||(d=new i(d,u)),new o(d,h,!0)))}}).call(this)}).call(this,t("buffer").Buffer)},{"./lib/dh":401,"./lib/generatePrime":402,"./lib/primes.json":403,buffer:220}],401:[function(t,r,l){(function(i){(function(){var s=t("bn.js"),a=new(t("miller-rabin")),o=new s(24),n=new s(11),c=new s(10),d=new s(3),u=new s(7),h=t("./generatePrime"),p=t("randombytes");function m(E,M){return M=M||"utf8",i.isBuffer(E)||(E=new i(E,M)),this._pub=new s(E),this}function f(E,M){return M=M||"utf8",i.isBuffer(E)||(E=new i(E,M)),this._priv=new s(E),this}r.exports=y;var b={};function y(E,M,D){this.setGenerator(M),this.__prime=new s(E),this._prime=s.mont(this.__prime),this._primeLen=E.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,D?(this.setPublicKey=m,this.setPrivateKey=f):this._primeCode=8}function _(E,M){var D=new i(E.toArray());return M?D.toString(M):D}Object.defineProperty(y.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=function(E,M){var D=M.toString("hex"),z=[D,E.toString(16)].join("_");if(z in b)return b[z];var O,N=0;if(E.isEven()||!h.simpleSieve||!h.fermatTest(E)||!a.test(E))return N+=1,N+=D==="02"||D==="05"?8:4,b[z]=N,N;switch(a.test(E.shrn(1))||(N+=2),D){case"02":E.mod(o).cmp(n)&&(N+=8);break;case"05":(O=E.mod(c)).cmp(d)&&O.cmp(u)&&(N+=8);break;default:N+=4}return b[z]=N,N}(this.__prime,this.__gen)),this._primeCode}}),y.prototype.generateKeys=function(){return this._priv||(this._priv=new s(p(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},y.prototype.computeSecret=function(E){var M=(E=(E=new s(E)).toRed(this._prime)).redPow(this._priv).fromRed(),D=new i(M.toArray()),z=this.getPrime();if(D.length<z.length){var O=new i(z.length-D.length);O.fill(0),D=i.concat([O,D])}return D},y.prototype.getPublicKey=function(E){return _(this._pub,E)},y.prototype.getPrivateKey=function(E){return _(this._priv,E)},y.prototype.getPrime=function(E){return _(this.__prime,E)},y.prototype.getGenerator=function(E){return _(this._gen,E)},y.prototype.setGenerator=function(E,M){return M=M||"utf8",i.isBuffer(E)||(E=new i(E,M)),this.__gen=E,this._gen=new s(E),this}}).call(this)}).call(this,t("buffer").Buffer)},{"./generatePrime":402,"bn.js":404,buffer:220,"miller-rabin":451,randombytes:475}],402:[function(t,r,l){var i=t("randombytes");r.exports=E,E.simpleSieve=y,E.fermatTest=_;var s=t("bn.js"),a=new s(24),o=new(t("miller-rabin")),n=new s(1),c=new s(2),d=new s(5),u=(new s(16),new s(8),new s(10)),h=new s(3),p=(new s(7),new s(11)),m=new s(4),f=(new s(12),null);function b(){if(f!==null)return f;var M=[];M[0]=2;for(var D=1,z=3;z<1048576;z+=2){for(var O=Math.ceil(Math.sqrt(z)),N=0;N<D&&M[N]<=O&&z%M[N]!=0;N++);D!==N&&M[N]<=O||(M[D++]=z)}return f=M,M}function y(M){for(var D=b(),z=0;z<D.length;z++)if(M.modn(D[z])===0)return M.cmpn(D[z])===0;return!0}function _(M){var D=s.mont(M);return c.toRed(D).redPow(M.subn(1)).fromRed().cmpn(1)===0}function E(M,D){if(M<16)return new s(D===2||D===5?[140,123]:[140,39]);var z,O;for(D=new s(D);;){for(z=new s(i(Math.ceil(M/8)));z.bitLength()>M;)z.ishrn(1);if(z.isEven()&&z.iadd(n),z.testn(1)||z.iadd(c),D.cmp(c)){if(!D.cmp(d))for(;z.mod(u).cmp(h);)z.iadd(m)}else for(;z.mod(a).cmp(p);)z.iadd(m);if(y(O=z.shrn(1))&&y(z)&&_(O)&&_(z)&&o.test(O)&&o.test(z))return z}}},{"bn.js":404,"miller-rabin":451,randombytes:475}],403:[function(t,r,l){r.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],404:[function(t,r,l){arguments[4][184][0].apply(l,arguments)},{buffer:188,dup:184}],405:[function(t,r,l){var i=l;i.version=t("../package.json").version,i.utils=t("./elliptic/utils"),i.rand=t("brorand"),i.curve=t("./elliptic/curve"),i.curves=t("./elliptic/curves"),i.ec=t("./elliptic/ec"),i.eddsa=t("./elliptic/eddsa")},{"../package.json":421,"./elliptic/curve":408,"./elliptic/curves":411,"./elliptic/ec":412,"./elliptic/eddsa":415,"./elliptic/utils":419,brorand:187}],406:[function(t,r,l){var i=t("bn.js"),s=t("../utils"),a=s.getNAF,o=s.getJSF,n=s.assert;function c(u,h){this.type=u,this.p=new i(h.p,16),this.red=h.prime?i.red(h.prime):i.mont(this.p),this.zero=new i(0).toRed(this.red),this.one=new i(1).toRed(this.red),this.two=new i(2).toRed(this.red),this.n=h.n&&new i(h.n,16),this.g=h.g&&this.pointFromJSON(h.g,h.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var p=this.n&&this.p.div(this.n);!p||p.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function d(u,h){this.curve=u,this.type=h,this.precomputed=null}r.exports=c,c.prototype.point=function(){throw new Error("Not implemented")},c.prototype.validate=function(){throw new Error("Not implemented")},c.prototype._fixedNafMul=function(u,h){n(u.precomputed);var p=u._getDoubles(),m=a(h,1,this._bitLength),f=(1<<p.step+1)-(p.step%2==0?2:1);f/=3;var b,y,_=[];for(b=0;b<m.length;b+=p.step){y=0;for(var E=b+p.step-1;E>=b;E--)y=(y<<1)+m[E];_.push(y)}for(var M=this.jpoint(null,null,null),D=this.jpoint(null,null,null),z=f;z>0;z--){for(b=0;b<_.length;b++)(y=_[b])===z?D=D.mixedAdd(p.points[b]):y===-z&&(D=D.mixedAdd(p.points[b].neg()));M=M.add(D)}return M.toP()},c.prototype._wnafMul=function(u,h){var p=4,m=u._getNAFPoints(p);p=m.wnd;for(var f=m.points,b=a(h,p,this._bitLength),y=this.jpoint(null,null,null),_=b.length-1;_>=0;_--){for(var E=0;_>=0&&b[_]===0;_--)E++;if(_>=0&&E++,y=y.dblp(E),_<0)break;var M=b[_];n(M!==0),y=u.type==="affine"?M>0?y.mixedAdd(f[M-1>>1]):y.mixedAdd(f[-M-1>>1].neg()):M>0?y.add(f[M-1>>1]):y.add(f[-M-1>>1].neg())}return u.type==="affine"?y.toP():y},c.prototype._wnafMulAdd=function(u,h,p,m,f){var b,y,_,E=this._wnafT1,M=this._wnafT2,D=this._wnafT3,z=0;for(b=0;b<m;b++){var O=(_=h[b])._getNAFPoints(u);E[b]=O.wnd,M[b]=O.points}for(b=m-1;b>=1;b-=2){var N=b-1,B=b;if(E[N]===1&&E[B]===1){var H=[h[N],null,null,h[B]];h[N].y.cmp(h[B].y)===0?(H[1]=h[N].add(h[B]),H[2]=h[N].toJ().mixedAdd(h[B].neg())):h[N].y.cmp(h[B].y.redNeg())===0?(H[1]=h[N].toJ().mixedAdd(h[B]),H[2]=h[N].add(h[B].neg())):(H[1]=h[N].toJ().mixedAdd(h[B]),H[2]=h[N].toJ().mixedAdd(h[B].neg()));var $=[-3,-1,-5,-7,0,7,5,1,3],C=o(p[N],p[B]);for(z=Math.max(C[0].length,z),D[N]=new Array(z),D[B]=new Array(z),y=0;y<z;y++){var R=0|C[0][y],k=0|C[1][y];D[N][y]=$[3*(R+1)+(k+1)],D[B][y]=0,M[N]=H}}else D[N]=a(p[N],E[N],this._bitLength),D[B]=a(p[B],E[B],this._bitLength),z=Math.max(D[N].length,z),z=Math.max(D[B].length,z)}var v=this.jpoint(null,null,null),w=this._wnafT4;for(b=z;b>=0;b--){for(var x=0;b>=0;){var S=!0;for(y=0;y<m;y++)w[y]=0|D[y][b],w[y]!==0&&(S=!1);if(!S)break;x++,b--}if(b>=0&&x++,v=v.dblp(x),b<0)break;for(y=0;y<m;y++){var T=w[y];T!==0&&(T>0?_=M[y][T-1>>1]:T<0&&(_=M[y][-T-1>>1].neg()),v=_.type==="affine"?v.mixedAdd(_):v.add(_))}}for(b=0;b<m;b++)M[b]=null;return f?v:v.toP()},c.BasePoint=d,d.prototype.eq=function(){throw new Error("Not implemented")},d.prototype.validate=function(){return this.curve.validate(this)},c.prototype.decodePoint=function(u,h){u=s.toArray(u,h);var p=this.p.byteLength();if((u[0]===4||u[0]===6||u[0]===7)&&u.length-1==2*p)return u[0]===6?n(u[u.length-1]%2==0):u[0]===7&&n(u[u.length-1]%2==1),this.point(u.slice(1,1+p),u.slice(1+p,1+2*p));if((u[0]===2||u[0]===3)&&u.length-1===p)return this.pointFromX(u.slice(1,1+p),u[0]===3);throw new Error("Unknown point format")},d.prototype.encodeCompressed=function(u){return this.encode(u,!0)},d.prototype._encode=function(u){var h=this.curve.p.byteLength(),p=this.getX().toArray("be",h);return u?[this.getY().isEven()?2:3].concat(p):[4].concat(p,this.getY().toArray("be",h))},d.prototype.encode=function(u,h){return s.encode(this._encode(h),u)},d.prototype.precompute=function(u){if(this.precomputed)return this;var h={doubles:null,naf:null,beta:null};return h.naf=this._getNAFPoints(8),h.doubles=this._getDoubles(4,u),h.beta=this._getBeta(),this.precomputed=h,this},d.prototype._hasDoubles=function(u){if(!this.precomputed)return!1;var h=this.precomputed.doubles;return!!h&&h.points.length>=Math.ceil((u.bitLength()+1)/h.step)},d.prototype._getDoubles=function(u,h){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var p=[this],m=this,f=0;f<h;f+=u){for(var b=0;b<u;b++)m=m.dbl();p.push(m)}return{step:u,points:p}},d.prototype._getNAFPoints=function(u){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var h=[this],p=(1<<u)-1,m=p===1?null:this.dbl(),f=1;f<p;f++)h[f]=h[f-1].add(m);return{wnd:u,points:h}},d.prototype._getBeta=function(){return null},d.prototype.dblp=function(u){for(var h=this,p=0;p<u;p++)h=h.dbl();return h}},{"../utils":419,"bn.js":420}],407:[function(t,r,l){var i=t("../utils"),s=t("bn.js"),a=t("inherits"),o=t("./base"),n=i.assert;function c(u){this.twisted=(0|u.a)!=1,this.mOneA=this.twisted&&(0|u.a)==-1,this.extended=this.mOneA,o.call(this,"edwards",u),this.a=new s(u.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new s(u.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new s(u.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),n(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(0|u.c)==1}function d(u,h,p,m,f){o.BasePoint.call(this,u,"projective"),h===null&&p===null&&m===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new s(h,16),this.y=new s(p,16),this.z=m?new s(m,16):this.curve.one,this.t=f&&new s(f,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}a(c,o),r.exports=c,c.prototype._mulA=function(u){return this.mOneA?u.redNeg():this.a.redMul(u)},c.prototype._mulC=function(u){return this.oneC?u:this.c.redMul(u)},c.prototype.jpoint=function(u,h,p,m){return this.point(u,h,p,m)},c.prototype.pointFromX=function(u,h){(u=new s(u,16)).red||(u=u.toRed(this.red));var p=u.redSqr(),m=this.c2.redSub(this.a.redMul(p)),f=this.one.redSub(this.c2.redMul(this.d).redMul(p)),b=m.redMul(f.redInvm()),y=b.redSqrt();if(y.redSqr().redSub(b).cmp(this.zero)!==0)throw new Error("invalid point");var _=y.fromRed().isOdd();return(h&&!_||!h&&_)&&(y=y.redNeg()),this.point(u,y)},c.prototype.pointFromY=function(u,h){(u=new s(u,16)).red||(u=u.toRed(this.red));var p=u.redSqr(),m=p.redSub(this.c2),f=p.redMul(this.d).redMul(this.c2).redSub(this.a),b=m.redMul(f.redInvm());if(b.cmp(this.zero)===0){if(h)throw new Error("invalid point");return this.point(this.zero,u)}var y=b.redSqrt();if(y.redSqr().redSub(b).cmp(this.zero)!==0)throw new Error("invalid point");return y.fromRed().isOdd()!==h&&(y=y.redNeg()),this.point(y,u)},c.prototype.validate=function(u){if(u.isInfinity())return!0;u.normalize();var h=u.x.redSqr(),p=u.y.redSqr(),m=h.redMul(this.a).redAdd(p),f=this.c2.redMul(this.one.redAdd(this.d.redMul(h).redMul(p)));return m.cmp(f)===0},a(d,o.BasePoint),c.prototype.pointFromJSON=function(u){return d.fromJSON(this,u)},c.prototype.point=function(u,h,p,m){return new d(this,u,h,p,m)},d.fromJSON=function(u,h){return new d(u,h[0],h[1],h[2])},d.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},d.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},d.prototype._extDbl=function(){var u=this.x.redSqr(),h=this.y.redSqr(),p=this.z.redSqr();p=p.redIAdd(p);var m=this.curve._mulA(u),f=this.x.redAdd(this.y).redSqr().redISub(u).redISub(h),b=m.redAdd(h),y=b.redSub(p),_=m.redSub(h),E=f.redMul(y),M=b.redMul(_),D=f.redMul(_),z=y.redMul(b);return this.curve.point(E,M,z,D)},d.prototype._projDbl=function(){var u,h,p,m,f,b,y=this.x.redAdd(this.y).redSqr(),_=this.x.redSqr(),E=this.y.redSqr();if(this.curve.twisted){var M=(m=this.curve._mulA(_)).redAdd(E);this.zOne?(u=y.redSub(_).redSub(E).redMul(M.redSub(this.curve.two)),h=M.redMul(m.redSub(E)),p=M.redSqr().redSub(M).redSub(M)):(f=this.z.redSqr(),b=M.redSub(f).redISub(f),u=y.redSub(_).redISub(E).redMul(b),h=M.redMul(m.redSub(E)),p=M.redMul(b))}else m=_.redAdd(E),f=this.curve._mulC(this.z).redSqr(),b=m.redSub(f).redSub(f),u=this.curve._mulC(y.redISub(m)).redMul(b),h=this.curve._mulC(m).redMul(_.redISub(E)),p=m.redMul(b);return this.curve.point(u,h,p)},d.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},d.prototype._extAdd=function(u){var h=this.y.redSub(this.x).redMul(u.y.redSub(u.x)),p=this.y.redAdd(this.x).redMul(u.y.redAdd(u.x)),m=this.t.redMul(this.curve.dd).redMul(u.t),f=this.z.redMul(u.z.redAdd(u.z)),b=p.redSub(h),y=f.redSub(m),_=f.redAdd(m),E=p.redAdd(h),M=b.redMul(y),D=_.redMul(E),z=b.redMul(E),O=y.redMul(_);return this.curve.point(M,D,O,z)},d.prototype._projAdd=function(u){var h,p,m=this.z.redMul(u.z),f=m.redSqr(),b=this.x.redMul(u.x),y=this.y.redMul(u.y),_=this.curve.d.redMul(b).redMul(y),E=f.redSub(_),M=f.redAdd(_),D=this.x.redAdd(this.y).redMul(u.x.redAdd(u.y)).redISub(b).redISub(y),z=m.redMul(E).redMul(D);return this.curve.twisted?(h=m.redMul(M).redMul(y.redSub(this.curve._mulA(b))),p=E.redMul(M)):(h=m.redMul(M).redMul(y.redSub(b)),p=this.curve._mulC(E).redMul(M)),this.curve.point(z,h,p)},d.prototype.add=function(u){return this.isInfinity()?u:u.isInfinity()?this:this.curve.extended?this._extAdd(u):this._projAdd(u)},d.prototype.mul=function(u){return this._hasDoubles(u)?this.curve._fixedNafMul(this,u):this.curve._wnafMul(this,u)},d.prototype.mulAdd=function(u,h,p){return this.curve._wnafMulAdd(1,[this,h],[u,p],2,!1)},d.prototype.jmulAdd=function(u,h,p){return this.curve._wnafMulAdd(1,[this,h],[u,p],2,!0)},d.prototype.normalize=function(){if(this.zOne)return this;var u=this.z.redInvm();return this.x=this.x.redMul(u),this.y=this.y.redMul(u),this.t&&(this.t=this.t.redMul(u)),this.z=this.curve.one,this.zOne=!0,this},d.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},d.prototype.getX=function(){return this.normalize(),this.x.fromRed()},d.prototype.getY=function(){return this.normalize(),this.y.fromRed()},d.prototype.eq=function(u){return this===u||this.getX().cmp(u.getX())===0&&this.getY().cmp(u.getY())===0},d.prototype.eqXToP=function(u){var h=u.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(h)===0)return!0;for(var p=u.clone(),m=this.curve.redN.redMul(this.z);;){if(p.iadd(this.curve.n),p.cmp(this.curve.p)>=0)return!1;if(h.redIAdd(m),this.x.cmp(h)===0)return!0}},d.prototype.toP=d.prototype.normalize,d.prototype.mixedAdd=d.prototype.add},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],408:[function(t,r,l){var i=l;i.base=t("./base"),i.short=t("./short"),i.mont=t("./mont"),i.edwards=t("./edwards")},{"./base":406,"./edwards":407,"./mont":409,"./short":410}],409:[function(t,r,l){var i=t("bn.js"),s=t("inherits"),a=t("./base"),o=t("../utils");function n(d){a.call(this,"mont",d),this.a=new i(d.a,16).toRed(this.red),this.b=new i(d.b,16).toRed(this.red),this.i4=new i(4).toRed(this.red).redInvm(),this.two=new i(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function c(d,u,h){a.BasePoint.call(this,d,"projective"),u===null&&h===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new i(u,16),this.z=new i(h,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}s(n,a),r.exports=n,n.prototype.validate=function(d){var u=d.normalize().x,h=u.redSqr(),p=h.redMul(u).redAdd(h.redMul(this.a)).redAdd(u);return p.redSqrt().redSqr().cmp(p)===0},s(c,a.BasePoint),n.prototype.decodePoint=function(d,u){return this.point(o.toArray(d,u),1)},n.prototype.point=function(d,u){return new c(this,d,u)},n.prototype.pointFromJSON=function(d){return c.fromJSON(this,d)},c.prototype.precompute=function(){},c.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},c.fromJSON=function(d,u){return new c(d,u[0],u[1]||d.one)},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.z.cmpn(0)===0},c.prototype.dbl=function(){var d=this.x.redAdd(this.z).redSqr(),u=this.x.redSub(this.z).redSqr(),h=d.redSub(u),p=d.redMul(u),m=h.redMul(u.redAdd(this.curve.a24.redMul(h)));return this.curve.point(p,m)},c.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.diffAdd=function(d,u){var h=this.x.redAdd(this.z),p=this.x.redSub(this.z),m=d.x.redAdd(d.z),f=d.x.redSub(d.z).redMul(h),b=m.redMul(p),y=u.z.redMul(f.redAdd(b).redSqr()),_=u.x.redMul(f.redISub(b).redSqr());return this.curve.point(y,_)},c.prototype.mul=function(d){for(var u=d.clone(),h=this,p=this.curve.point(null,null),m=[];u.cmpn(0)!==0;u.iushrn(1))m.push(u.andln(1));for(var f=m.length-1;f>=0;f--)m[f]===0?(h=h.diffAdd(p,this),p=p.dbl()):(p=h.diffAdd(p,this),h=h.dbl());return p},c.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.eq=function(d){return this.getX().cmp(d.getX())===0},c.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],410:[function(t,r,l){var i=t("../utils"),s=t("bn.js"),a=t("inherits"),o=t("./base"),n=i.assert;function c(h){o.call(this,"short",h),this.a=new s(h.a,16).toRed(this.red),this.b=new s(h.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(h),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function d(h,p,m,f){o.BasePoint.call(this,h,"affine"),p===null&&m===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new s(p,16),this.y=new s(m,16),f&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function u(h,p,m,f){o.BasePoint.call(this,h,"jacobian"),p===null&&m===null&&f===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new s(0)):(this.x=new s(p,16),this.y=new s(m,16),this.z=new s(f,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}a(c,o),r.exports=c,c.prototype._getEndomorphism=function(h){if(this.zeroA&&this.g&&this.n&&this.p.modn(3)===1){var p,m;if(h.beta)p=new s(h.beta,16).toRed(this.red);else{var f=this._getEndoRoots(this.p);p=(p=f[0].cmp(f[1])<0?f[0]:f[1]).toRed(this.red)}if(h.lambda)m=new s(h.lambda,16);else{var b=this._getEndoRoots(this.n);this.g.mul(b[0]).x.cmp(this.g.x.redMul(p))===0?m=b[0]:(m=b[1],n(this.g.mul(m).x.cmp(this.g.x.redMul(p))===0))}return{beta:p,lambda:m,basis:h.basis?h.basis.map(function(y){return{a:new s(y.a,16),b:new s(y.b,16)}}):this._getEndoBasis(m)}}},c.prototype._getEndoRoots=function(h){var p=h===this.p?this.red:s.mont(h),m=new s(2).toRed(p).redInvm(),f=m.redNeg(),b=new s(3).toRed(p).redNeg().redSqrt().redMul(m);return[f.redAdd(b).fromRed(),f.redSub(b).fromRed()]},c.prototype._getEndoBasis=function(h){for(var p,m,f,b,y,_,E,M,D,z=this.n.ushrn(Math.floor(this.n.bitLength()/2)),O=h,N=this.n.clone(),B=new s(1),H=new s(0),$=new s(0),C=new s(1),R=0;O.cmpn(0)!==0;){var k=N.div(O);M=N.sub(k.mul(O)),D=$.sub(k.mul(B));var v=C.sub(k.mul(H));if(!f&&M.cmp(z)<0)p=E.neg(),m=B,f=M.neg(),b=D;else if(f&&++R==2)break;E=M,N=O,O=M,$=B,B=D,C=H,H=v}y=M.neg(),_=D;var w=f.sqr().add(b.sqr());return y.sqr().add(_.sqr()).cmp(w)>=0&&(y=p,_=m),f.negative&&(f=f.neg(),b=b.neg()),y.negative&&(y=y.neg(),_=_.neg()),[{a:f,b},{a:y,b:_}]},c.prototype._endoSplit=function(h){var p=this.endo.basis,m=p[0],f=p[1],b=f.b.mul(h).divRound(this.n),y=m.b.neg().mul(h).divRound(this.n),_=b.mul(m.a),E=y.mul(f.a),M=b.mul(m.b),D=y.mul(f.b);return{k1:h.sub(_).sub(E),k2:M.add(D).neg()}},c.prototype.pointFromX=function(h,p){(h=new s(h,16)).red||(h=h.toRed(this.red));var m=h.redSqr().redMul(h).redIAdd(h.redMul(this.a)).redIAdd(this.b),f=m.redSqrt();if(f.redSqr().redSub(m).cmp(this.zero)!==0)throw new Error("invalid point");var b=f.fromRed().isOdd();return(p&&!b||!p&&b)&&(f=f.redNeg()),this.point(h,f)},c.prototype.validate=function(h){if(h.inf)return!0;var p=h.x,m=h.y,f=this.a.redMul(p),b=p.redSqr().redMul(p).redIAdd(f).redIAdd(this.b);return m.redSqr().redISub(b).cmpn(0)===0},c.prototype._endoWnafMulAdd=function(h,p,m){for(var f=this._endoWnafT1,b=this._endoWnafT2,y=0;y<h.length;y++){var _=this._endoSplit(p[y]),E=h[y],M=E._getBeta();_.k1.negative&&(_.k1.ineg(),E=E.neg(!0)),_.k2.negative&&(_.k2.ineg(),M=M.neg(!0)),f[2*y]=E,f[2*y+1]=M,b[2*y]=_.k1,b[2*y+1]=_.k2}for(var D=this._wnafMulAdd(1,f,b,2*y,m),z=0;z<2*y;z++)f[z]=null,b[z]=null;return D},a(d,o.BasePoint),c.prototype.point=function(h,p,m){return new d(this,h,p,m)},c.prototype.pointFromJSON=function(h,p){return d.fromJSON(this,h,p)},d.prototype._getBeta=function(){if(this.curve.endo){var h=this.precomputed;if(h&&h.beta)return h.beta;var p=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(h){var m=this.curve,f=function(b){return m.point(b.x.redMul(m.endo.beta),b.y)};h.beta=p,p.precomputed={beta:null,naf:h.naf&&{wnd:h.naf.wnd,points:h.naf.points.map(f)},doubles:h.doubles&&{step:h.doubles.step,points:h.doubles.points.map(f)}}}return p}},d.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},d.fromJSON=function(h,p,m){typeof p=="string"&&(p=JSON.parse(p));var f=h.point(p[0],p[1],m);if(!p[2])return f;function b(_){return h.point(_[0],_[1],m)}var y=p[2];return f.precomputed={beta:null,doubles:y.doubles&&{step:y.doubles.step,points:[f].concat(y.doubles.points.map(b))},naf:y.naf&&{wnd:y.naf.wnd,points:[f].concat(y.naf.points.map(b))}},f},d.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},d.prototype.isInfinity=function(){return this.inf},d.prototype.add=function(h){if(this.inf)return h;if(h.inf)return this;if(this.eq(h))return this.dbl();if(this.neg().eq(h))return this.curve.point(null,null);if(this.x.cmp(h.x)===0)return this.curve.point(null,null);var p=this.y.redSub(h.y);p.cmpn(0)!==0&&(p=p.redMul(this.x.redSub(h.x).redInvm()));var m=p.redSqr().redISub(this.x).redISub(h.x),f=p.redMul(this.x.redSub(m)).redISub(this.y);return this.curve.point(m,f)},d.prototype.dbl=function(){if(this.inf)return this;var h=this.y.redAdd(this.y);if(h.cmpn(0)===0)return this.curve.point(null,null);var p=this.curve.a,m=this.x.redSqr(),f=h.redInvm(),b=m.redAdd(m).redIAdd(m).redIAdd(p).redMul(f),y=b.redSqr().redISub(this.x.redAdd(this.x)),_=b.redMul(this.x.redSub(y)).redISub(this.y);return this.curve.point(y,_)},d.prototype.getX=function(){return this.x.fromRed()},d.prototype.getY=function(){return this.y.fromRed()},d.prototype.mul=function(h){return h=new s(h,16),this.isInfinity()?this:this._hasDoubles(h)?this.curve._fixedNafMul(this,h):this.curve.endo?this.curve._endoWnafMulAdd([this],[h]):this.curve._wnafMul(this,h)},d.prototype.mulAdd=function(h,p,m){var f=[this,p],b=[h,m];return this.curve.endo?this.curve._endoWnafMulAdd(f,b):this.curve._wnafMulAdd(1,f,b,2)},d.prototype.jmulAdd=function(h,p,m){var f=[this,p],b=[h,m];return this.curve.endo?this.curve._endoWnafMulAdd(f,b,!0):this.curve._wnafMulAdd(1,f,b,2,!0)},d.prototype.eq=function(h){return this===h||this.inf===h.inf&&(this.inf||this.x.cmp(h.x)===0&&this.y.cmp(h.y)===0)},d.prototype.neg=function(h){if(this.inf)return this;var p=this.curve.point(this.x,this.y.redNeg());if(h&&this.precomputed){var m=this.precomputed,f=function(b){return b.neg()};p.precomputed={naf:m.naf&&{wnd:m.naf.wnd,points:m.naf.points.map(f)},doubles:m.doubles&&{step:m.doubles.step,points:m.doubles.points.map(f)}}}return p},d.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},a(u,o.BasePoint),c.prototype.jpoint=function(h,p,m){return new u(this,h,p,m)},u.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var h=this.z.redInvm(),p=h.redSqr(),m=this.x.redMul(p),f=this.y.redMul(p).redMul(h);return this.curve.point(m,f)},u.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},u.prototype.add=function(h){if(this.isInfinity())return h;if(h.isInfinity())return this;var p=h.z.redSqr(),m=this.z.redSqr(),f=this.x.redMul(p),b=h.x.redMul(m),y=this.y.redMul(p.redMul(h.z)),_=h.y.redMul(m.redMul(this.z)),E=f.redSub(b),M=y.redSub(_);if(E.cmpn(0)===0)return M.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var D=E.redSqr(),z=D.redMul(E),O=f.redMul(D),N=M.redSqr().redIAdd(z).redISub(O).redISub(O),B=M.redMul(O.redISub(N)).redISub(y.redMul(z)),H=this.z.redMul(h.z).redMul(E);return this.curve.jpoint(N,B,H)},u.prototype.mixedAdd=function(h){if(this.isInfinity())return h.toJ();if(h.isInfinity())return this;var p=this.z.redSqr(),m=this.x,f=h.x.redMul(p),b=this.y,y=h.y.redMul(p).redMul(this.z),_=m.redSub(f),E=b.redSub(y);if(_.cmpn(0)===0)return E.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var M=_.redSqr(),D=M.redMul(_),z=m.redMul(M),O=E.redSqr().redIAdd(D).redISub(z).redISub(z),N=E.redMul(z.redISub(O)).redISub(b.redMul(D)),B=this.z.redMul(_);return this.curve.jpoint(O,N,B)},u.prototype.dblp=function(h){if(h===0)return this;if(this.isInfinity())return this;if(!h)return this.dbl();var p;if(this.curve.zeroA||this.curve.threeA){var m=this;for(p=0;p<h;p++)m=m.dbl();return m}var f=this.curve.a,b=this.curve.tinv,y=this.x,_=this.y,E=this.z,M=E.redSqr().redSqr(),D=_.redAdd(_);for(p=0;p<h;p++){var z=y.redSqr(),O=D.redSqr(),N=O.redSqr(),B=z.redAdd(z).redIAdd(z).redIAdd(f.redMul(M)),H=y.redMul(O),$=B.redSqr().redISub(H.redAdd(H)),C=H.redISub($),R=B.redMul(C);R=R.redIAdd(R).redISub(N);var k=D.redMul(E);p+1<h&&(M=M.redMul(N)),y=$,E=k,D=R}return this.curve.jpoint(y,D.redMul(b),E)},u.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},u.prototype._zeroDbl=function(){var h,p,m;if(this.zOne){var f=this.x.redSqr(),b=this.y.redSqr(),y=b.redSqr(),_=this.x.redAdd(b).redSqr().redISub(f).redISub(y);_=_.redIAdd(_);var E=f.redAdd(f).redIAdd(f),M=E.redSqr().redISub(_).redISub(_),D=y.redIAdd(y);D=(D=D.redIAdd(D)).redIAdd(D),h=M,p=E.redMul(_.redISub(M)).redISub(D),m=this.y.redAdd(this.y)}else{var z=this.x.redSqr(),O=this.y.redSqr(),N=O.redSqr(),B=this.x.redAdd(O).redSqr().redISub(z).redISub(N);B=B.redIAdd(B);var H=z.redAdd(z).redIAdd(z),$=H.redSqr(),C=N.redIAdd(N);C=(C=C.redIAdd(C)).redIAdd(C),h=$.redISub(B).redISub(B),p=H.redMul(B.redISub(h)).redISub(C),m=(m=this.y.redMul(this.z)).redIAdd(m)}return this.curve.jpoint(h,p,m)},u.prototype._threeDbl=function(){var h,p,m;if(this.zOne){var f=this.x.redSqr(),b=this.y.redSqr(),y=b.redSqr(),_=this.x.redAdd(b).redSqr().redISub(f).redISub(y);_=_.redIAdd(_);var E=f.redAdd(f).redIAdd(f).redIAdd(this.curve.a),M=E.redSqr().redISub(_).redISub(_);h=M;var D=y.redIAdd(y);D=(D=D.redIAdd(D)).redIAdd(D),p=E.redMul(_.redISub(M)).redISub(D),m=this.y.redAdd(this.y)}else{var z=this.z.redSqr(),O=this.y.redSqr(),N=this.x.redMul(O),B=this.x.redSub(z).redMul(this.x.redAdd(z));B=B.redAdd(B).redIAdd(B);var H=N.redIAdd(N),$=(H=H.redIAdd(H)).redAdd(H);h=B.redSqr().redISub($),m=this.y.redAdd(this.z).redSqr().redISub(O).redISub(z);var C=O.redSqr();C=(C=(C=C.redIAdd(C)).redIAdd(C)).redIAdd(C),p=B.redMul(H.redISub(h)).redISub(C)}return this.curve.jpoint(h,p,m)},u.prototype._dbl=function(){var h=this.curve.a,p=this.x,m=this.y,f=this.z,b=f.redSqr().redSqr(),y=p.redSqr(),_=m.redSqr(),E=y.redAdd(y).redIAdd(y).redIAdd(h.redMul(b)),M=p.redAdd(p),D=(M=M.redIAdd(M)).redMul(_),z=E.redSqr().redISub(D.redAdd(D)),O=D.redISub(z),N=_.redSqr();N=(N=(N=N.redIAdd(N)).redIAdd(N)).redIAdd(N);var B=E.redMul(O).redISub(N),H=m.redAdd(m).redMul(f);return this.curve.jpoint(z,B,H)},u.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var h=this.x.redSqr(),p=this.y.redSqr(),m=this.z.redSqr(),f=p.redSqr(),b=h.redAdd(h).redIAdd(h),y=b.redSqr(),_=this.x.redAdd(p).redSqr().redISub(h).redISub(f),E=(_=(_=(_=_.redIAdd(_)).redAdd(_).redIAdd(_)).redISub(y)).redSqr(),M=f.redIAdd(f);M=(M=(M=M.redIAdd(M)).redIAdd(M)).redIAdd(M);var D=b.redIAdd(_).redSqr().redISub(y).redISub(E).redISub(M),z=p.redMul(D);z=(z=z.redIAdd(z)).redIAdd(z);var O=this.x.redMul(E).redISub(z);O=(O=O.redIAdd(O)).redIAdd(O);var N=this.y.redMul(D.redMul(M.redISub(D)).redISub(_.redMul(E)));N=(N=(N=N.redIAdd(N)).redIAdd(N)).redIAdd(N);var B=this.z.redAdd(_).redSqr().redISub(m).redISub(E);return this.curve.jpoint(O,N,B)},u.prototype.mul=function(h,p){return h=new s(h,p),this.curve._wnafMul(this,h)},u.prototype.eq=function(h){if(h.type==="affine")return this.eq(h.toJ());if(this===h)return!0;var p=this.z.redSqr(),m=h.z.redSqr();if(this.x.redMul(m).redISub(h.x.redMul(p)).cmpn(0)!==0)return!1;var f=p.redMul(this.z),b=m.redMul(h.z);return this.y.redMul(b).redISub(h.y.redMul(f)).cmpn(0)===0},u.prototype.eqXToP=function(h){var p=this.z.redSqr(),m=h.toRed(this.curve.red).redMul(p);if(this.x.cmp(m)===0)return!0;for(var f=h.clone(),b=this.curve.redN.redMul(p);;){if(f.iadd(this.curve.n),f.cmp(this.curve.p)>=0)return!1;if(m.redIAdd(b),this.x.cmp(m)===0)return!0}},u.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},u.prototype.isInfinity=function(){return this.z.cmpn(0)===0}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],411:[function(t,r,l){var i,s=l,a=t("hash.js"),o=t("./curve"),n=t("./utils").assert;function c(u){u.type==="short"?this.curve=new o.short(u):u.type==="edwards"?this.curve=new o.edwards(u):this.curve=new o.mont(u),this.g=this.curve.g,this.n=this.curve.n,this.hash=u.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function d(u,h){Object.defineProperty(s,u,{configurable:!0,enumerable:!0,get:function(){var p=new c(h);return Object.defineProperty(s,u,{configurable:!0,enumerable:!0,value:p}),p}})}s.PresetCurve=c,d("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:a.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),d("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:a.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),d("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:a.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),d("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:a.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),d("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:a.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),d("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["9"]}),d("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{i=t("./precomputed/secp256k1")}catch{i=void 0}d("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:a.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",i]})},{"./curve":408,"./precomputed/secp256k1":418,"./utils":419,"hash.js":426}],412:[function(t,r,l){var i=t("bn.js"),s=t("hmac-drbg"),a=t("../utils"),o=t("../curves"),n=t("brorand"),c=a.assert,d=t("./key"),u=t("./signature");function h(p){if(!(this instanceof h))return new h(p);typeof p=="string"&&(c(Object.prototype.hasOwnProperty.call(o,p),"Unknown curve "+p),p=o[p]),p instanceof o.PresetCurve&&(p={curve:p}),this.curve=p.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=p.curve.g,this.g.precompute(p.curve.n.bitLength()+1),this.hash=p.hash||p.curve.hash}r.exports=h,h.prototype.keyPair=function(p){return new d(this,p)},h.prototype.keyFromPrivate=function(p,m){return d.fromPrivate(this,p,m)},h.prototype.keyFromPublic=function(p,m){return d.fromPublic(this,p,m)},h.prototype.genKeyPair=function(p){p||(p={});for(var m=new s({hash:this.hash,pers:p.pers,persEnc:p.persEnc||"utf8",entropy:p.entropy||n(this.hash.hmacStrength),entropyEnc:p.entropy&&p.entropyEnc||"utf8",nonce:this.n.toArray()}),f=this.n.byteLength(),b=this.n.sub(new i(2));;){var y=new i(m.generate(f));if(!(y.cmp(b)>0))return y.iaddn(1),this.keyFromPrivate(y)}},h.prototype._truncateToN=function(p,m){var f=8*p.byteLength()-this.n.bitLength();return f>0&&(p=p.ushrn(f)),!m&&p.cmp(this.n)>=0?p.sub(this.n):p},h.prototype.sign=function(p,m,f,b){typeof f=="object"&&(b=f,f=null),b||(b={}),m=this.keyFromPrivate(m,f),p=this._truncateToN(new i(p,16));for(var y=this.n.byteLength(),_=m.getPrivate().toArray("be",y),E=p.toArray("be",y),M=new s({hash:this.hash,entropy:_,nonce:E,pers:b.pers,persEnc:b.persEnc||"utf8"}),D=this.n.sub(new i(1)),z=0;;z++){var O=b.k?b.k(z):new i(M.generate(this.n.byteLength()));if(!((O=this._truncateToN(O,!0)).cmpn(1)<=0||O.cmp(D)>=0)){var N=this.g.mul(O);if(!N.isInfinity()){var B=N.getX(),H=B.umod(this.n);if(H.cmpn(0)!==0){var $=O.invm(this.n).mul(H.mul(m.getPrivate()).iadd(p));if(($=$.umod(this.n)).cmpn(0)!==0){var C=(N.getY().isOdd()?1:0)|(B.cmp(H)!==0?2:0);return b.canonical&&$.cmp(this.nh)>0&&($=this.n.sub($),C^=1),new u({r:H,s:$,recoveryParam:C})}}}}}},h.prototype.verify=function(p,m,f,b){p=this._truncateToN(new i(p,16)),f=this.keyFromPublic(f,b);var y=(m=new u(m,"hex")).r,_=m.s;if(y.cmpn(1)<0||y.cmp(this.n)>=0||_.cmpn(1)<0||_.cmp(this.n)>=0)return!1;var E,M=_.invm(this.n),D=M.mul(p).umod(this.n),z=M.mul(y).umod(this.n);return this.curve._maxwellTrick?!(E=this.g.jmulAdd(D,f.getPublic(),z)).isInfinity()&&E.eqXToP(y):!(E=this.g.mulAdd(D,f.getPublic(),z)).isInfinity()&&E.getX().umod(this.n).cmp(y)===0},h.prototype.recoverPubKey=function(p,m,f,b){c((3&f)===f,"The recovery param is more than two bits"),m=new u(m,b);var y=this.n,_=new i(p),E=m.r,M=m.s,D=1&f,z=f>>1;if(E.cmp(this.curve.p.umod(this.curve.n))>=0&&z)throw new Error("Unable to find sencond key candinate");E=z?this.curve.pointFromX(E.add(this.curve.n),D):this.curve.pointFromX(E,D);var O=m.r.invm(y),N=y.sub(_).mul(O).umod(y),B=M.mul(O).umod(y);return this.g.mulAdd(N,E,B)},h.prototype.getKeyRecoveryParam=function(p,m,f,b){if((m=new u(m,b)).recoveryParam!==null)return m.recoveryParam;for(var y=0;y<4;y++){var _;try{_=this.recoverPubKey(p,m,y)}catch{continue}if(_.eq(f))return y}throw new Error("Unable to find valid recovery factor")}},{"../curves":411,"../utils":419,"./key":413,"./signature":414,"bn.js":420,brorand:187,"hmac-drbg":438}],413:[function(t,r,l){var i=t("bn.js"),s=t("../utils").assert;function a(o,n){this.ec=o,this.priv=null,this.pub=null,n.priv&&this._importPrivate(n.priv,n.privEnc),n.pub&&this._importPublic(n.pub,n.pubEnc)}r.exports=a,a.fromPublic=function(o,n,c){return n instanceof a?n:new a(o,{pub:n,pubEnc:c})},a.fromPrivate=function(o,n,c){return n instanceof a?n:new a(o,{priv:n,privEnc:c})},a.prototype.validate=function(){var o=this.getPublic();return o.isInfinity()?{result:!1,reason:"Invalid public key"}:o.validate()?o.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},a.prototype.getPublic=function(o,n){return typeof o=="string"&&(n=o,o=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),n?this.pub.encode(n,o):this.pub},a.prototype.getPrivate=function(o){return o==="hex"?this.priv.toString(16,2):this.priv},a.prototype._importPrivate=function(o,n){this.priv=new i(o,n||16),this.priv=this.priv.umod(this.ec.curve.n)},a.prototype._importPublic=function(o,n){if(o.x||o.y)return this.ec.curve.type==="mont"?s(o.x,"Need x coordinate"):this.ec.curve.type!=="short"&&this.ec.curve.type!=="edwards"||s(o.x&&o.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(o.x,o.y));this.pub=this.ec.curve.decodePoint(o,n)},a.prototype.derive=function(o){return o.validate()||s(o.validate(),"public point not validated"),o.mul(this.priv).getX()},a.prototype.sign=function(o,n,c){return this.ec.sign(o,this,n,c)},a.prototype.verify=function(o,n){return this.ec.verify(o,n,this)},a.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../utils":419,"bn.js":420}],414:[function(t,r,l){var i=t("bn.js"),s=t("../utils"),a=s.assert;function o(h,p){if(h instanceof o)return h;this._importDER(h,p)||(a(h.r&&h.s,"Signature without r or s"),this.r=new i(h.r,16),this.s=new i(h.s,16),h.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=h.recoveryParam)}function n(){this.place=0}function c(h,p){var m=h[p.place++];if(!(128&m))return m;var f=15&m;if(f===0||f>4)return!1;for(var b=0,y=0,_=p.place;y<f;y++,_++)b<<=8,b|=h[_],b>>>=0;return!(b<=127)&&(p.place=_,b)}function d(h){for(var p=0,m=h.length-1;!h[p]&&!(128&h[p+1])&&p<m;)p++;return p===0?h:h.slice(p)}function u(h,p){if(p<128)h.push(p);else{var m=1+(Math.log(p)/Math.LN2>>>3);for(h.push(128|m);--m;)h.push(p>>>(m<<3)&255);h.push(p)}}r.exports=o,o.prototype._importDER=function(h,p){h=s.toArray(h,p);var m=new n;if(h[m.place++]!==48)return!1;var f=c(h,m);if(f===!1||f+m.place!==h.length||h[m.place++]!==2)return!1;var b=c(h,m);if(b===!1)return!1;var y=h.slice(m.place,b+m.place);if(m.place+=b,h[m.place++]!==2)return!1;var _=c(h,m);if(_===!1||h.length!==_+m.place)return!1;var E=h.slice(m.place,_+m.place);if(y[0]===0){if(!(128&y[1]))return!1;y=y.slice(1)}if(E[0]===0){if(!(128&E[1]))return!1;E=E.slice(1)}return this.r=new i(y),this.s=new i(E),this.recoveryParam=null,!0},o.prototype.toDER=function(h){var p=this.r.toArray(),m=this.s.toArray();for(128&p[0]&&(p=[0].concat(p)),128&m[0]&&(m=[0].concat(m)),p=d(p),m=d(m);!(m[0]||128&m[1]);)m=m.slice(1);var f=[2];u(f,p.length),(f=f.concat(p)).push(2),u(f,m.length);var b=f.concat(m),y=[48];return u(y,b.length),y=y.concat(b),s.encode(y,h)}},{"../utils":419,"bn.js":420}],415:[function(t,r,l){var i=t("hash.js"),s=t("../curves"),a=t("../utils"),o=a.assert,n=a.parseBytes,c=t("./key"),d=t("./signature");function u(h){if(o(h==="ed25519","only tested with ed25519 so far"),!(this instanceof u))return new u(h);h=s[h].curve,this.curve=h,this.g=h.g,this.g.precompute(h.n.bitLength()+1),this.pointClass=h.point().constructor,this.encodingLength=Math.ceil(h.n.bitLength()/8),this.hash=i.sha512}r.exports=u,u.prototype.sign=function(h,p){h=n(h);var m=this.keyFromSecret(p),f=this.hashInt(m.messagePrefix(),h),b=this.g.mul(f),y=this.encodePoint(b),_=this.hashInt(y,m.pubBytes(),h).mul(m.priv()),E=f.add(_).umod(this.curve.n);return this.makeSignature({R:b,S:E,Rencoded:y})},u.prototype.verify=function(h,p,m){h=n(h),p=this.makeSignature(p);var f=this.keyFromPublic(m),b=this.hashInt(p.Rencoded(),f.pubBytes(),h),y=this.g.mul(p.S());return p.R().add(f.pub().mul(b)).eq(y)},u.prototype.hashInt=function(){for(var h=this.hash(),p=0;p<arguments.length;p++)h.update(arguments[p]);return a.intFromLE(h.digest()).umod(this.curve.n)},u.prototype.keyFromPublic=function(h){return c.fromPublic(this,h)},u.prototype.keyFromSecret=function(h){return c.fromSecret(this,h)},u.prototype.makeSignature=function(h){return h instanceof d?h:new d(this,h)},u.prototype.encodePoint=function(h){var p=h.getY().toArray("le",this.encodingLength);return p[this.encodingLength-1]|=h.getX().isOdd()?128:0,p},u.prototype.decodePoint=function(h){var p=(h=a.parseBytes(h)).length-1,m=h.slice(0,p).concat(-129&h[p]),f=(128&h[p])!=0,b=a.intFromLE(m);return this.curve.pointFromY(b,f)},u.prototype.encodeInt=function(h){return h.toArray("le",this.encodingLength)},u.prototype.decodeInt=function(h){return a.intFromLE(h)},u.prototype.isPoint=function(h){return h instanceof this.pointClass}},{"../curves":411,"../utils":419,"./key":416,"./signature":417,"hash.js":426}],416:[function(t,r,l){var i=t("../utils"),s=i.assert,a=i.parseBytes,o=i.cachedProperty;function n(c,d){this.eddsa=c,this._secret=a(d.secret),c.isPoint(d.pub)?this._pub=d.pub:this._pubBytes=a(d.pub)}n.fromPublic=function(c,d){return d instanceof n?d:new n(c,{pub:d})},n.fromSecret=function(c,d){return d instanceof n?d:new n(c,{secret:d})},n.prototype.secret=function(){return this._secret},o(n,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),o(n,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),o(n,"privBytes",function(){var c=this.eddsa,d=this.hash(),u=c.encodingLength-1,h=d.slice(0,c.encodingLength);return h[0]&=248,h[u]&=127,h[u]|=64,h}),o(n,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),o(n,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),o(n,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),n.prototype.sign=function(c){return s(this._secret,"KeyPair can only verify"),this.eddsa.sign(c,this)},n.prototype.verify=function(c,d){return this.eddsa.verify(c,d,this)},n.prototype.getSecret=function(c){return s(this._secret,"KeyPair is public only"),i.encode(this.secret(),c)},n.prototype.getPublic=function(c){return i.encode(this.pubBytes(),c)},r.exports=n},{"../utils":419}],417:[function(t,r,l){var i=t("bn.js"),s=t("../utils"),a=s.assert,o=s.cachedProperty,n=s.parseBytes;function c(d,u){this.eddsa=d,typeof u!="object"&&(u=n(u)),Array.isArray(u)&&(u={R:u.slice(0,d.encodingLength),S:u.slice(d.encodingLength)}),a(u.R&&u.S,"Signature without R or S"),d.isPoint(u.R)&&(this._R=u.R),u.S instanceof i&&(this._S=u.S),this._Rencoded=Array.isArray(u.R)?u.R:u.Rencoded,this._Sencoded=Array.isArray(u.S)?u.S:u.Sencoded}o(c,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),o(c,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),o(c,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),o(c,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),c.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},c.prototype.toHex=function(){return s.encode(this.toBytes(),"hex").toUpperCase()},r.exports=c},{"../utils":419,"bn.js":420}],418:[function(t,r,l){r.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},{}],419:[function(t,r,l){var i=l,s=t("bn.js"),a=t("minimalistic-assert"),o=t("minimalistic-crypto-utils");i.assert=a,i.toArray=o.toArray,i.zero2=o.zero2,i.toHex=o.toHex,i.encode=o.encode,i.getNAF=function(n,c,d){var u=new Array(Math.max(n.bitLength(),d)+1);u.fill(0);for(var h=1<<c+1,p=n.clone(),m=0;m<u.length;m++){var f,b=p.andln(h-1);p.isOdd()?(f=b>(h>>1)-1?(h>>1)-b:b,p.isubn(f)):f=0,u[m]=f,p.iushrn(1)}return u},i.getJSF=function(n,c){var d=[[],[]];n=n.clone(),c=c.clone();for(var u,h=0,p=0;n.cmpn(-h)>0||c.cmpn(-p)>0;){var m,f,b=n.andln(3)+h&3,y=c.andln(3)+p&3;b===3&&(b=-1),y===3&&(y=-1),m=(1&b)==0?0:(u=n.andln(7)+h&7)!==3&&u!==5||y!==2?b:-b,d[0].push(m),f=(1&y)==0?0:(u=c.andln(7)+p&7)!==3&&u!==5||b!==2?y:-y,d[1].push(f),2*h===m+1&&(h=1-h),2*p===f+1&&(p=1-p),n.iushrn(1),c.iushrn(1)}return d},i.cachedProperty=function(n,c,d){var u="_"+c;n.prototype[c]=function(){return this[u]!==void 0?this[u]:this[u]=d.call(this)}},i.parseBytes=function(n){return typeof n=="string"?i.toArray(n,"hex"):n},i.intFromLE=function(n){return new s(n,"hex","le")}},{"bn.js":420,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],420:[function(t,r,l){arguments[4][184][0].apply(l,arguments)},{buffer:188,dup:184}],421:[function(t,r,l){r.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}},{}],422:[function(t,r,l){var i=Object.create||function(O){var N=function(){};return N.prototype=O,new N},s=Object.keys||function(O){var N=[];for(var B in O)Object.prototype.hasOwnProperty.call(O,B)&&N.push(B);return B},a=Function.prototype.bind||function(O){var N=this;return function(){return N.apply(O,arguments)}};function o(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=i(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}r.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._maxListeners=void 0;var n,c=10;try{var d={};Object.defineProperty&&Object.defineProperty(d,"x",{value:0}),n=d.x===0}catch{n=!1}function u(O){return O._maxListeners===void 0?o.defaultMaxListeners:O._maxListeners}function h(O,N,B){if(N)O.call(B);else for(var H=O.length,$=z(O,H),C=0;C<H;++C)$[C].call(B)}function p(O,N,B,H){if(N)O.call(B,H);else for(var $=O.length,C=z(O,$),R=0;R<$;++R)C[R].call(B,H)}function m(O,N,B,H,$){if(N)O.call(B,H,$);else for(var C=O.length,R=z(O,C),k=0;k<C;++k)R[k].call(B,H,$)}function f(O,N,B,H,$,C){if(N)O.call(B,H,$,C);else for(var R=O.length,k=z(O,R),v=0;v<R;++v)k[v].call(B,H,$,C)}function b(O,N,B,H){if(N)O.apply(B,H);else for(var $=O.length,C=z(O,$),R=0;R<$;++R)C[R].apply(B,H)}function y(O,N,B,H){var $,C,R;if(typeof B!="function")throw new TypeError('"listener" argument must be a function');if((C=O._events)?(C.newListener&&(O.emit("newListener",N,B.listener?B.listener:B),C=O._events),R=C[N]):(C=O._events=i(null),O._eventsCount=0),R){if(typeof R=="function"?R=C[N]=H?[B,R]:[R,B]:H?R.unshift(B):R.push(B),!R.warned&&($=u(O))&&$>0&&R.length>$){R.warned=!0;var k=new Error("Possible EventEmitter memory leak detected. "+R.length+' "'+String(N)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');k.name="MaxListenersExceededWarning",k.emitter=O,k.type=N,k.count=R.length,typeof console=="object"&&console.warn&&console.warn("%s: %s",k.name,k.message)}}else R=C[N]=B,++O._eventsCount;return O}function _(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var O=new Array(arguments.length),N=0;N<O.length;++N)O[N]=arguments[N];this.listener.apply(this.target,O)}}function E(O,N,B){var H={fired:!1,wrapFn:void 0,target:O,type:N,listener:B},$=a.call(_,H);return $.listener=B,H.wrapFn=$,$}function M(O,N,B){var H=O._events;if(!H)return[];var $=H[N];return $?typeof $=="function"?B?[$.listener||$]:[$]:B?function(C){for(var R=new Array(C.length),k=0;k<R.length;++k)R[k]=C[k].listener||C[k];return R}($):z($,$.length):[]}function D(O){var N=this._events;if(N){var B=N[O];if(typeof B=="function")return 1;if(B)return B.length}return 0}function z(O,N){for(var B=new Array(N),H=0;H<N;++H)B[H]=O[H];return B}n?Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(O){if(typeof O!="number"||O<0||O!=O)throw new TypeError('"defaultMaxListeners" must be a positive number');c=O}}):o.defaultMaxListeners=c,o.prototype.setMaxListeners=function(O){if(typeof O!="number"||O<0||isNaN(O))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=O,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(O){var N,B,H,$,C,R,k=O==="error";if(R=this._events)k=k&&R.error==null;else if(!k)return!1;if(k){if(arguments.length>1&&(N=arguments[1]),N instanceof Error)throw N;var v=new Error('Unhandled "error" event. ('+N+")");throw v.context=N,v}if(!(B=R[O]))return!1;var w=typeof B=="function";switch(H=arguments.length){case 1:h(B,w,this);break;case 2:p(B,w,this,arguments[1]);break;case 3:m(B,w,this,arguments[1],arguments[2]);break;case 4:f(B,w,this,arguments[1],arguments[2],arguments[3]);break;default:for($=new Array(H-1),C=1;C<H;C++)$[C-1]=arguments[C];b(B,w,this,$)}return!0},o.prototype.addListener=function(O,N){return y(this,O,N,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(O,N){return y(this,O,N,!0)},o.prototype.once=function(O,N){if(typeof N!="function")throw new TypeError('"listener" argument must be a function');return this.on(O,E(this,O,N)),this},o.prototype.prependOnceListener=function(O,N){if(typeof N!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(O,E(this,O,N)),this},o.prototype.removeListener=function(O,N){var B,H,$,C,R;if(typeof N!="function")throw new TypeError('"listener" argument must be a function');if(!(H=this._events))return this;if(!(B=H[O]))return this;if(B===N||B.listener===N)--this._eventsCount==0?this._events=i(null):(delete H[O],H.removeListener&&this.emit("removeListener",O,B.listener||N));else if(typeof B!="function"){for($=-1,C=B.length-1;C>=0;C--)if(B[C]===N||B[C].listener===N){R=B[C].listener,$=C;break}if($<0)return this;$===0?B.shift():function(k,v){for(var w=v,x=w+1,S=k.length;x<S;w+=1,x+=1)k[w]=k[x];k.pop()}(B,$),B.length===1&&(H[O]=B[0]),H.removeListener&&this.emit("removeListener",O,R||N)}return this},o.prototype.removeAllListeners=function(O){var N,B,H;if(!(B=this._events))return this;if(!B.removeListener)return arguments.length===0?(this._events=i(null),this._eventsCount=0):B[O]&&(--this._eventsCount==0?this._events=i(null):delete B[O]),this;if(arguments.length===0){var $,C=s(B);for(H=0;H<C.length;++H)($=C[H])!=="removeListener"&&this.removeAllListeners($);return this.removeAllListeners("removeListener"),this._events=i(null),this._eventsCount=0,this}if(typeof(N=B[O])=="function")this.removeListener(O,N);else if(N)for(H=N.length-1;H>=0;H--)this.removeListener(O,N[H]);return this},o.prototype.listeners=function(O){return M(this,O,!0)},o.prototype.rawListeners=function(O){return M(this,O,!1)},o.listenerCount=function(O,N){return typeof O.listenerCount=="function"?O.listenerCount(N):D.call(O,N)},o.prototype.listenerCount=D,o.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],423:[function(t,r,l){var i=t("safe-buffer").Buffer,s=t("md5.js");r.exports=function(a,o,n,c){if(i.isBuffer(a)||(a=i.from(a,"binary")),o&&(i.isBuffer(o)||(o=i.from(o,"binary")),o.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var d=n/8,u=i.alloc(d),h=i.alloc(c||0),p=i.alloc(0);d>0||c>0;){var m=new s;m.update(p),m.update(a),o&&m.update(o),p=m.digest();var f=0;if(d>0){var b=u.length-d;f=Math.min(d,p.length),p.copy(u,b,0,f),d-=f}if(f<p.length&&c>0){var y=h.length-c,_=Math.min(c,p.length-f);p.copy(h,y,f,f+_),c-=_}}return p.fill(0),{key:u,iv:h}}},{"md5.js":450,"safe-buffer":494}],424:[function(t,r,l){Object.defineProperty(l,"__esModule",{value:!0}),l.CsvParserStream=l.ParserOptions=l.parseFile=l.parseStream=l.parseString=l.parse=l.FormatterOptions=l.CsvFormatterStream=l.writeToPath=l.writeToString=l.writeToBuffer=l.writeToStream=l.write=l.format=void 0;var i=t("@fast-csv/format");Object.defineProperty(l,"format",{enumerable:!0,get:function(){return i.format}}),Object.defineProperty(l,"write",{enumerable:!0,get:function(){return i.write}}),Object.defineProperty(l,"writeToStream",{enumerable:!0,get:function(){return i.writeToStream}}),Object.defineProperty(l,"writeToBuffer",{enumerable:!0,get:function(){return i.writeToBuffer}}),Object.defineProperty(l,"writeToString",{enumerable:!0,get:function(){return i.writeToString}}),Object.defineProperty(l,"writeToPath",{enumerable:!0,get:function(){return i.writeToPath}}),Object.defineProperty(l,"CsvFormatterStream",{enumerable:!0,get:function(){return i.CsvFormatterStream}}),Object.defineProperty(l,"FormatterOptions",{enumerable:!0,get:function(){return i.FormatterOptions}});var s=t("@fast-csv/parse");Object.defineProperty(l,"parse",{enumerable:!0,get:function(){return s.parse}}),Object.defineProperty(l,"parseString",{enumerable:!0,get:function(){return s.parseString}}),Object.defineProperty(l,"parseStream",{enumerable:!0,get:function(){return s.parseStream}}),Object.defineProperty(l,"parseFile",{enumerable:!0,get:function(){return s.parseFile}}),Object.defineProperty(l,"ParserOptions",{enumerable:!0,get:function(){return s.ParserOptions}}),Object.defineProperty(l,"CsvParserStream",{enumerable:!0,get:function(){return s.CsvParserStream}})},{"@fast-csv/format":151,"@fast-csv/parse":155}],425:[function(t,r,l){var i=t("safe-buffer").Buffer,s=t("readable-stream").Transform;function a(o){s.call(this),this._block=i.allocUnsafe(o),this._blockSize=o,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}t("inherits")(a,s),a.prototype._transform=function(o,n,c){var d=null;try{this.update(o,n)}catch(u){d=u}c(d)},a.prototype._flush=function(o){var n=null;try{this.push(this.digest())}catch(c){n=c}o(n)},a.prototype.update=function(o,n){if(function(m,f){if(!i.isBuffer(m)&&typeof m!="string")throw new TypeError(f+" must be a string or a buffer")}(o,"Data"),this._finalized)throw new Error("Digest already called");i.isBuffer(o)||(o=i.from(o,n));for(var c=this._block,d=0;this._blockOffset+o.length-d>=this._blockSize;){for(var u=this._blockOffset;u<this._blockSize;)c[u++]=o[d++];this._update(),this._blockOffset=0}for(;d<o.length;)c[this._blockOffset++]=o[d++];for(var h=0,p=8*o.length;p>0;++h)this._length[h]+=p,(p=this._length[h]/4294967296|0)>0&&(this._length[h]-=4294967296*p);return this},a.prototype._update=function(){throw new Error("_update is not implemented")},a.prototype.digest=function(o){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var n=this._digest();o!==void 0&&(n=n.toString(o)),this._block.fill(0),this._blockOffset=0;for(var c=0;c<4;++c)this._length[c]=0;return n},a.prototype._digest=function(){throw new Error("_digest is not implemented")},r.exports=a},{inherits:440,"readable-stream":491,"safe-buffer":494}],426:[function(t,r,l){var i=l;i.utils=t("./hash/utils"),i.common=t("./hash/common"),i.sha=t("./hash/sha"),i.ripemd=t("./hash/ripemd"),i.hmac=t("./hash/hmac"),i.sha1=i.sha.sha1,i.sha256=i.sha.sha256,i.sha224=i.sha.sha224,i.sha384=i.sha.sha384,i.sha512=i.sha.sha512,i.ripemd160=i.ripemd.ripemd160},{"./hash/common":427,"./hash/hmac":428,"./hash/ripemd":429,"./hash/sha":430,"./hash/utils":437}],427:[function(t,r,l){var i=t("./utils"),s=t("minimalistic-assert");function a(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}l.BlockHash=a,a.prototype.update=function(o,n){if(o=i.toArray(o,n),this.pending?this.pending=this.pending.concat(o):this.pending=o,this.pendingTotal+=o.length,this.pending.length>=this._delta8){var c=(o=this.pending).length%this._delta8;this.pending=o.slice(o.length-c,o.length),this.pending.length===0&&(this.pending=null),o=i.join32(o,0,o.length-c,this.endian);for(var d=0;d<o.length;d+=this._delta32)this._update(o,d,d+this._delta32)}return this},a.prototype.digest=function(o){return this.update(this._pad()),s(this.pending===null),this._digest(o)},a.prototype._pad=function(){var o=this.pendingTotal,n=this._delta8,c=n-(o+this.padLength)%n,d=new Array(c+this.padLength);d[0]=128;for(var u=1;u<c;u++)d[u]=0;if(o<<=3,this.endian==="big"){for(var h=8;h<this.padLength;h++)d[u++]=0;d[u++]=0,d[u++]=0,d[u++]=0,d[u++]=0,d[u++]=o>>>24&255,d[u++]=o>>>16&255,d[u++]=o>>>8&255,d[u++]=255&o}else for(d[u++]=255&o,d[u++]=o>>>8&255,d[u++]=o>>>16&255,d[u++]=o>>>24&255,d[u++]=0,d[u++]=0,d[u++]=0,d[u++]=0,h=8;h<this.padLength;h++)d[u++]=0;return d}},{"./utils":437,"minimalistic-assert":453}],428:[function(t,r,l){var i=t("./utils"),s=t("minimalistic-assert");function a(o,n,c){if(!(this instanceof a))return new a(o,n,c);this.Hash=o,this.blockSize=o.blockSize/8,this.outSize=o.outSize/8,this.inner=null,this.outer=null,this._init(i.toArray(n,c))}r.exports=a,a.prototype._init=function(o){o.length>this.blockSize&&(o=new this.Hash().update(o).digest()),s(o.length<=this.blockSize);for(var n=o.length;n<this.blockSize;n++)o.push(0);for(n=0;n<o.length;n++)o[n]^=54;for(this.inner=new this.Hash().update(o),n=0;n<o.length;n++)o[n]^=106;this.outer=new this.Hash().update(o)},a.prototype.update=function(o,n){return this.inner.update(o,n),this},a.prototype.digest=function(o){return this.outer.update(this.inner.digest()),this.outer.digest(o)}},{"./utils":437,"minimalistic-assert":453}],429:[function(t,r,l){var i=t("./utils"),s=t("./common"),a=i.rotl32,o=i.sum32,n=i.sum32_3,c=i.sum32_4,d=s.BlockHash;function u(){if(!(this instanceof u))return new u;d.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function h(E,M,D,z){return E<=15?M^D^z:E<=31?M&D|~M&z:E<=47?(M|~D)^z:E<=63?M&z|D&~z:M^(D|~z)}function p(E){return E<=15?0:E<=31?1518500249:E<=47?1859775393:E<=63?2400959708:2840853838}function m(E){return E<=15?1352829926:E<=31?1548603684:E<=47?1836072691:E<=63?2053994217:0}i.inherits(u,d),l.ripemd160=u,u.blockSize=512,u.outSize=160,u.hmacStrength=192,u.padLength=64,u.prototype._update=function(E,M){for(var D=this.h[0],z=this.h[1],O=this.h[2],N=this.h[3],B=this.h[4],H=D,$=z,C=O,R=N,k=B,v=0;v<80;v++){var w=o(a(c(D,h(v,z,O,N),E[f[v]+M],p(v)),y[v]),B);D=B,B=N,N=a(O,10),O=z,z=w,w=o(a(c(H,h(79-v,$,C,R),E[b[v]+M],m(v)),_[v]),k),H=k,k=R,R=a(C,10),C=$,$=w}w=n(this.h[1],O,R),this.h[1]=n(this.h[2],N,k),this.h[2]=n(this.h[3],B,H),this.h[3]=n(this.h[4],D,$),this.h[4]=n(this.h[0],z,C),this.h[0]=w},u.prototype._digest=function(E){return E==="hex"?i.toHex32(this.h,"little"):i.split32(this.h,"little")};var f=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],b=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],y=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],_=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"./common":427,"./utils":437}],430:[function(t,r,l){l.sha1=t("./sha/1"),l.sha224=t("./sha/224"),l.sha256=t("./sha/256"),l.sha384=t("./sha/384"),l.sha512=t("./sha/512")},{"./sha/1":431,"./sha/224":432,"./sha/256":433,"./sha/384":434,"./sha/512":435}],431:[function(t,r,l){var i=t("../utils"),s=t("../common"),a=t("./common"),o=i.rotl32,n=i.sum32,c=i.sum32_5,d=a.ft_1,u=s.BlockHash,h=[1518500249,1859775393,2400959708,3395469782];function p(){if(!(this instanceof p))return new p;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}i.inherits(p,u),r.exports=p,p.blockSize=512,p.outSize=160,p.hmacStrength=80,p.padLength=64,p.prototype._update=function(m,f){for(var b=this.W,y=0;y<16;y++)b[y]=m[f+y];for(;y<b.length;y++)b[y]=o(b[y-3]^b[y-8]^b[y-14]^b[y-16],1);var _=this.h[0],E=this.h[1],M=this.h[2],D=this.h[3],z=this.h[4];for(y=0;y<b.length;y++){var O=~~(y/20),N=c(o(_,5),d(O,E,M,D),z,b[y],h[O]);z=D,D=M,M=o(E,30),E=_,_=N}this.h[0]=n(this.h[0],_),this.h[1]=n(this.h[1],E),this.h[2]=n(this.h[2],M),this.h[3]=n(this.h[3],D),this.h[4]=n(this.h[4],z)},p.prototype._digest=function(m){return m==="hex"?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436}],432:[function(t,r,l){var i=t("../utils"),s=t("./256");function a(){if(!(this instanceof a))return new a;s.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}i.inherits(a,s),r.exports=a,a.blockSize=512,a.outSize=224,a.hmacStrength=192,a.padLength=64,a.prototype._digest=function(o){return o==="hex"?i.toHex32(this.h.slice(0,7),"big"):i.split32(this.h.slice(0,7),"big")}},{"../utils":437,"./256":433}],433:[function(t,r,l){var i=t("../utils"),s=t("../common"),a=t("./common"),o=t("minimalistic-assert"),n=i.sum32,c=i.sum32_4,d=i.sum32_5,u=a.ch32,h=a.maj32,p=a.s0_256,m=a.s1_256,f=a.g0_256,b=a.g1_256,y=s.BlockHash,_=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function E(){if(!(this instanceof E))return new E;y.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=_,this.W=new Array(64)}i.inherits(E,y),r.exports=E,E.blockSize=512,E.outSize=256,E.hmacStrength=192,E.padLength=64,E.prototype._update=function(M,D){for(var z=this.W,O=0;O<16;O++)z[O]=M[D+O];for(;O<z.length;O++)z[O]=c(b(z[O-2]),z[O-7],f(z[O-15]),z[O-16]);var N=this.h[0],B=this.h[1],H=this.h[2],$=this.h[3],C=this.h[4],R=this.h[5],k=this.h[6],v=this.h[7];for(o(this.k.length===z.length),O=0;O<z.length;O++){var w=d(v,m(C),u(C,R,k),this.k[O],z[O]),x=n(p(N),h(N,B,H));v=k,k=R,R=C,C=n($,w),$=H,H=B,B=N,N=n(w,x)}this.h[0]=n(this.h[0],N),this.h[1]=n(this.h[1],B),this.h[2]=n(this.h[2],H),this.h[3]=n(this.h[3],$),this.h[4]=n(this.h[4],C),this.h[5]=n(this.h[5],R),this.h[6]=n(this.h[6],k),this.h[7]=n(this.h[7],v)},E.prototype._digest=function(M){return M==="hex"?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436,"minimalistic-assert":453}],434:[function(t,r,l){var i=t("../utils"),s=t("./512");function a(){if(!(this instanceof a))return new a;s.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}i.inherits(a,s),r.exports=a,a.blockSize=1024,a.outSize=384,a.hmacStrength=192,a.padLength=128,a.prototype._digest=function(o){return o==="hex"?i.toHex32(this.h.slice(0,12),"big"):i.split32(this.h.slice(0,12),"big")}},{"../utils":437,"./512":435}],435:[function(t,r,l){var i=t("../utils"),s=t("../common"),a=t("minimalistic-assert"),o=i.rotr64_hi,n=i.rotr64_lo,c=i.shr64_hi,d=i.shr64_lo,u=i.sum64,h=i.sum64_hi,p=i.sum64_lo,m=i.sum64_4_hi,f=i.sum64_4_lo,b=i.sum64_5_hi,y=i.sum64_5_lo,_=s.BlockHash,E=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function M(){if(!(this instanceof M))return new M;_.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=E,this.W=new Array(160)}function D(x,S,T,L,j){var U=x&T^~x&j;return U<0&&(U+=4294967296),U}function z(x,S,T,L,j,U){var W=S&L^~S&U;return W<0&&(W+=4294967296),W}function O(x,S,T,L,j){var U=x&T^x&j^T&j;return U<0&&(U+=4294967296),U}function N(x,S,T,L,j,U){var W=S&L^S&U^L&U;return W<0&&(W+=4294967296),W}function B(x,S){var T=o(x,S,28)^o(S,x,2)^o(S,x,7);return T<0&&(T+=4294967296),T}function H(x,S){var T=n(x,S,28)^n(S,x,2)^n(S,x,7);return T<0&&(T+=4294967296),T}function $(x,S){var T=o(x,S,14)^o(x,S,18)^o(S,x,9);return T<0&&(T+=4294967296),T}function C(x,S){var T=n(x,S,14)^n(x,S,18)^n(S,x,9);return T<0&&(T+=4294967296),T}function R(x,S){var T=o(x,S,1)^o(x,S,8)^c(x,S,7);return T<0&&(T+=4294967296),T}function k(x,S){var T=n(x,S,1)^n(x,S,8)^d(x,S,7);return T<0&&(T+=4294967296),T}function v(x,S){var T=o(x,S,19)^o(S,x,29)^c(x,S,6);return T<0&&(T+=4294967296),T}function w(x,S){var T=n(x,S,19)^n(S,x,29)^d(x,S,6);return T<0&&(T+=4294967296),T}i.inherits(M,_),r.exports=M,M.blockSize=1024,M.outSize=512,M.hmacStrength=192,M.padLength=128,M.prototype._prepareBlock=function(x,S){for(var T=this.W,L=0;L<32;L++)T[L]=x[S+L];for(;L<T.length;L+=2){var j=v(T[L-4],T[L-3]),U=w(T[L-4],T[L-3]),W=T[L-14],Y=T[L-13],F=R(T[L-30],T[L-29]),X=k(T[L-30],T[L-29]),P=T[L-32],I=T[L-31];T[L]=m(j,U,W,Y,F,X,P,I),T[L+1]=f(j,U,W,Y,F,X,P,I)}},M.prototype._update=function(x,S){this._prepareBlock(x,S);var T=this.W,L=this.h[0],j=this.h[1],U=this.h[2],W=this.h[3],Y=this.h[4],F=this.h[5],X=this.h[6],P=this.h[7],I=this.h[8],V=this.h[9],Q=this.h[10],G=this.h[11],q=this.h[12],J=this.h[13],it=this.h[14],nt=this.h[15];a(this.k.length===T.length);for(var Z=0;Z<T.length;Z+=2){var st=it,rt=nt,lt=$(I,V),at=C(I,V),ct=D(I,V,Q,G,q),ut=z(I,V,Q,G,q,J),dt=this.k[Z],gt=this.k[Z+1],vt=T[Z],_t=T[Z+1],wt=b(st,rt,lt,at,ct,ut,dt,gt,vt,_t),Ot=y(st,rt,lt,at,ct,ut,dt,gt,vt,_t);st=B(L,j),rt=H(L,j),lt=O(L,j,U,W,Y),at=N(L,j,U,W,Y,F);var Pt=h(st,rt,lt,at),Dt=p(st,rt,lt,at);it=q,nt=J,q=Q,J=G,Q=I,G=V,I=h(X,P,wt,Ot),V=p(P,P,wt,Ot),X=Y,P=F,Y=U,F=W,U=L,W=j,L=h(wt,Ot,Pt,Dt),j=p(wt,Ot,Pt,Dt)}u(this.h,0,L,j),u(this.h,2,U,W),u(this.h,4,Y,F),u(this.h,6,X,P),u(this.h,8,I,V),u(this.h,10,Q,G),u(this.h,12,q,J),u(this.h,14,it,nt)},M.prototype._digest=function(x){return x==="hex"?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},{"../common":427,"../utils":437,"minimalistic-assert":453}],436:[function(t,r,l){var i=t("../utils").rotr32;function s(n,c,d){return n&c^~n&d}function a(n,c,d){return n&c^n&d^c&d}function o(n,c,d){return n^c^d}l.ft_1=function(n,c,d,u){return n===0?s(c,d,u):n===1||n===3?o(c,d,u):n===2?a(c,d,u):void 0},l.ch32=s,l.maj32=a,l.p32=o,l.s0_256=function(n){return i(n,2)^i(n,13)^i(n,22)},l.s1_256=function(n){return i(n,6)^i(n,11)^i(n,25)},l.g0_256=function(n){return i(n,7)^i(n,18)^n>>>3},l.g1_256=function(n){return i(n,17)^i(n,19)^n>>>10}},{"../utils":437}],437:[function(t,r,l){var i=t("minimalistic-assert"),s=t("inherits");function a(d,u){return(64512&d.charCodeAt(u))==55296&&!(u<0||u+1>=d.length)&&(64512&d.charCodeAt(u+1))==56320}function o(d){return(d>>>24|d>>>8&65280|d<<8&16711680|(255&d)<<24)>>>0}function n(d){return d.length===1?"0"+d:d}function c(d){return d.length===7?"0"+d:d.length===6?"00"+d:d.length===5?"000"+d:d.length===4?"0000"+d:d.length===3?"00000"+d:d.length===2?"000000"+d:d.length===1?"0000000"+d:d}l.inherits=s,l.toArray=function(d,u){if(Array.isArray(d))return d.slice();if(!d)return[];var h=[];if(typeof d=="string")if(u){if(u==="hex")for((d=d.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(d="0"+d),m=0;m<d.length;m+=2)h.push(parseInt(d[m]+d[m+1],16))}else for(var p=0,m=0;m<d.length;m++){var f=d.charCodeAt(m);f<128?h[p++]=f:f<2048?(h[p++]=f>>6|192,h[p++]=63&f|128):a(d,m)?(f=65536+((1023&f)<<10)+(1023&d.charCodeAt(++m)),h[p++]=f>>18|240,h[p++]=f>>12&63|128,h[p++]=f>>6&63|128,h[p++]=63&f|128):(h[p++]=f>>12|224,h[p++]=f>>6&63|128,h[p++]=63&f|128)}else for(m=0;m<d.length;m++)h[m]=0|d[m];return h},l.toHex=function(d){for(var u="",h=0;h<d.length;h++)u+=n(d[h].toString(16));return u},l.htonl=o,l.toHex32=function(d,u){for(var h="",p=0;p<d.length;p++){var m=d[p];u==="little"&&(m=o(m)),h+=c(m.toString(16))}return h},l.zero2=n,l.zero8=c,l.join32=function(d,u,h,p){var m=h-u;i(m%4==0);for(var f=new Array(m/4),b=0,y=u;b<f.length;b++,y+=4){var _;_=p==="big"?d[y]<<24|d[y+1]<<16|d[y+2]<<8|d[y+3]:d[y+3]<<24|d[y+2]<<16|d[y+1]<<8|d[y],f[b]=_>>>0}return f},l.split32=function(d,u){for(var h=new Array(4*d.length),p=0,m=0;p<d.length;p++,m+=4){var f=d[p];u==="big"?(h[m]=f>>>24,h[m+1]=f>>>16&255,h[m+2]=f>>>8&255,h[m+3]=255&f):(h[m+3]=f>>>24,h[m+2]=f>>>16&255,h[m+1]=f>>>8&255,h[m]=255&f)}return h},l.rotr32=function(d,u){return d>>>u|d<<32-u},l.rotl32=function(d,u){return d<<u|d>>>32-u},l.sum32=function(d,u){return d+u>>>0},l.sum32_3=function(d,u,h){return d+u+h>>>0},l.sum32_4=function(d,u,h,p){return d+u+h+p>>>0},l.sum32_5=function(d,u,h,p,m){return d+u+h+p+m>>>0},l.sum64=function(d,u,h,p){var m=d[u],f=p+d[u+1]>>>0,b=(f<p?1:0)+h+m;d[u]=b>>>0,d[u+1]=f},l.sum64_hi=function(d,u,h,p){return(u+p>>>0<u?1:0)+d+h>>>0},l.sum64_lo=function(d,u,h,p){return u+p>>>0},l.sum64_4_hi=function(d,u,h,p,m,f,b,y){var _=0,E=u;return _+=(E=E+p>>>0)<u?1:0,_+=(E=E+f>>>0)<f?1:0,d+h+m+b+(_+=(E=E+y>>>0)<y?1:0)>>>0},l.sum64_4_lo=function(d,u,h,p,m,f,b,y){return u+p+f+y>>>0},l.sum64_5_hi=function(d,u,h,p,m,f,b,y,_,E){var M=0,D=u;return M+=(D=D+p>>>0)<u?1:0,M+=(D=D+f>>>0)<f?1:0,M+=(D=D+y>>>0)<y?1:0,d+h+m+b+_+(M+=(D=D+E>>>0)<E?1:0)>>>0},l.sum64_5_lo=function(d,u,h,p,m,f,b,y,_,E){return u+p+f+y+E>>>0},l.rotr64_hi=function(d,u,h){return(u<<32-h|d>>>h)>>>0},l.rotr64_lo=function(d,u,h){return(d<<32-h|u>>>h)>>>0},l.shr64_hi=function(d,u,h){return d>>>h},l.shr64_lo=function(d,u,h){return(d<<32-h|u>>>h)>>>0}},{inherits:440,"minimalistic-assert":453}],438:[function(t,r,l){var i=t("hash.js"),s=t("minimalistic-crypto-utils"),a=t("minimalistic-assert");function o(n){if(!(this instanceof o))return new o(n);this.hash=n.hash,this.predResist=!!n.predResist,this.outLen=this.hash.outSize,this.minEntropy=n.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var c=s.toArray(n.entropy,n.entropyEnc||"hex"),d=s.toArray(n.nonce,n.nonceEnc||"hex"),u=s.toArray(n.pers,n.persEnc||"hex");a(c.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(c,d,u)}r.exports=o,o.prototype._init=function(n,c,d){var u=n.concat(c).concat(d);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var h=0;h<this.V.length;h++)this.K[h]=0,this.V[h]=1;this._update(u),this._reseed=1,this.reseedInterval=281474976710656},o.prototype._hmac=function(){return new i.hmac(this.hash,this.K)},o.prototype._update=function(n){var c=this._hmac().update(this.V).update([0]);n&&(c=c.update(n)),this.K=c.digest(),this.V=this._hmac().update(this.V).digest(),n&&(this.K=this._hmac().update(this.V).update([1]).update(n).digest(),this.V=this._hmac().update(this.V).digest())},o.prototype.reseed=function(n,c,d,u){typeof c!="string"&&(u=d,d=c,c=null),n=s.toArray(n,c),d=s.toArray(d,u),a(n.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(n.concat(d||[])),this._reseed=1},o.prototype.generate=function(n,c,d,u){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof c!="string"&&(u=d,d=c,c=null),d&&(d=s.toArray(d,u||"hex"),this._update(d));for(var h=[];h.length<n;)this.V=this._hmac().update(this.V).digest(),h=h.concat(this.V);var p=h.slice(0,n);return this._update(d),this._reseed++,s.encode(p,c)}},{"hash.js":426,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],439:[function(t,r,l){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */l.read=function(i,s,a,o,n){var c,d,u=8*n-o-1,h=(1<<u)-1,p=h>>1,m=-7,f=a?n-1:0,b=a?-1:1,y=i[s+f];for(f+=b,c=y&(1<<-m)-1,y>>=-m,m+=u;m>0;c=256*c+i[s+f],f+=b,m-=8);for(d=c&(1<<-m)-1,c>>=-m,m+=o;m>0;d=256*d+i[s+f],f+=b,m-=8);if(c===0)c=1-p;else{if(c===h)return d?NaN:1/0*(y?-1:1);d+=Math.pow(2,o),c-=p}return(y?-1:1)*d*Math.pow(2,c-o)},l.write=function(i,s,a,o,n,c){var d,u,h,p=8*c-n-1,m=(1<<p)-1,f=m>>1,b=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=o?0:c-1,_=o?1:-1,E=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(u=isNaN(s)?1:0,d=m):(d=Math.floor(Math.log(s)/Math.LN2),s*(h=Math.pow(2,-d))<1&&(d--,h*=2),(s+=d+f>=1?b/h:b*Math.pow(2,1-f))*h>=2&&(d++,h/=2),d+f>=m?(u=0,d=m):d+f>=1?(u=(s*h-1)*Math.pow(2,n),d+=f):(u=s*Math.pow(2,f-1)*Math.pow(2,n),d=0));n>=8;i[a+y]=255&u,y+=_,u/=256,n-=8);for(d=d<<n|u,p+=n;p>0;i[a+y]=255&d,y+=_,d/=256,p-=8);i[a+y-_]|=128*E}},{}],440:[function(t,r,l){typeof Object.create=="function"?r.exports=function(i,s){s&&(i.super_=s,i.prototype=Object.create(s.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}))}:r.exports=function(i,s){if(s){i.super_=s;var a=function(){};a.prototype=s.prototype,i.prototype=new a,i.prototype.constructor=i}}},{}],441:[function(t,r,l){(function(i,s,a,o,n,c,d,u){(function(){/*!

		JSZip v3.10.1 - A JavaScript class for generating and reading zip files
		<http://stuartk.com/jszip>

		(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
		Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

		JSZip uses the library pako released under the MIT license :
		https://github.com/nodeca/pako/blob/main/LICENSE
		*/(function(h){typeof l=="object"&&r!==void 0?r.exports=h():(typeof window<"u"?window:s!==void 0?s:typeof self<"u"?self:this).JSZip=h()})(function(){return function h(p,m,f){function b(E,M){if(!m[E]){if(!p[E]){var D=typeof t=="function"&&t;if(!M&&D)return D(E,!0);if(y)return y(E,!0);var z=new Error("Cannot find module '"+E+"'");throw z.code="MODULE_NOT_FOUND",z}var O=m[E]={exports:{}};p[E][0].call(O.exports,function(N){return b(p[E][1][N]||N)},O,O.exports,h,p,m,f)}return m[E].exports}for(var y=typeof t=="function"&&t,_=0;_<f.length;_++)b(f[_]);return b}({1:[function(h,p,m){var f=h("./utils"),b=h("./support"),y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";m.encode=function(_){for(var E,M,D,z,O,N,B,H=[],$=0,C=_.length,R=C,k=f.getTypeOf(_)!=="string";$<_.length;)R=C-$,D=k?(E=_[$++],M=$<C?_[$++]:0,$<C?_[$++]:0):(E=_.charCodeAt($++),M=$<C?_.charCodeAt($++):0,$<C?_.charCodeAt($++):0),z=E>>2,O=(3&E)<<4|M>>4,N=1<R?(15&M)<<2|D>>6:64,B=2<R?63&D:64,H.push(y.charAt(z)+y.charAt(O)+y.charAt(N)+y.charAt(B));return H.join("")},m.decode=function(_){var E,M,D,z,O,N,B=0,H=0,$="data:";if(_.substr(0,$.length)===$)throw new Error("Invalid base64 input, it looks like a data url.");var C,R=3*(_=_.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(_.charAt(_.length-1)===y.charAt(64)&&R--,_.charAt(_.length-2)===y.charAt(64)&&R--,R%1!=0)throw new Error("Invalid base64 input, bad content length.");for(C=b.uint8array?new Uint8Array(0|R):new Array(0|R);B<_.length;)E=y.indexOf(_.charAt(B++))<<2|(z=y.indexOf(_.charAt(B++)))>>4,M=(15&z)<<4|(O=y.indexOf(_.charAt(B++)))>>2,D=(3&O)<<6|(N=y.indexOf(_.charAt(B++))),C[H++]=E,O!==64&&(C[H++]=M),N!==64&&(C[H++]=D);return C}},{"./support":30,"./utils":32}],2:[function(h,p,m){var f=h("./external"),b=h("./stream/DataWorker"),y=h("./stream/Crc32Probe"),_=h("./stream/DataLengthProbe");function E(M,D,z,O,N){this.compressedSize=M,this.uncompressedSize=D,this.crc32=z,this.compression=O,this.compressedContent=N}E.prototype={getContentWorker:function(){var M=new b(f.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new _("data_length")),D=this;return M.on("end",function(){if(this.streamInfo.data_length!==D.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),M},getCompressedWorker:function(){return new b(f.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},E.createWorkerFrom=function(M,D,z){return M.pipe(new y).pipe(new _("uncompressedSize")).pipe(D.compressWorker(z)).pipe(new _("compressedSize")).withStreamInfo("compression",D)},p.exports=E},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(h,p,m){var f=h("./stream/GenericWorker");m.STORE={magic:"\0\0",compressWorker:function(){return new f("STORE compression")},uncompressWorker:function(){return new f("STORE decompression")}},m.DEFLATE=h("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(h,p,m){var f=h("./utils"),b=function(){for(var y,_=[],E=0;E<256;E++){y=E;for(var M=0;M<8;M++)y=1&y?3988292384^y>>>1:y>>>1;_[E]=y}return _}();p.exports=function(y,_){return y!==void 0&&y.length?f.getTypeOf(y)!=="string"?function(E,M,D,z){var O=b,N=0+D;E^=-1;for(var B=0;B<N;B++)E=E>>>8^O[255&(E^M[B])];return-1^E}(0|_,y,y.length):function(E,M,D,z){var O=b,N=0+D;E^=-1;for(var B=0;B<N;B++)E=E>>>8^O[255&(E^M.charCodeAt(B))];return-1^E}(0|_,y,y.length):0}},{"./utils":32}],5:[function(h,p,m){m.base64=!1,m.binary=!1,m.dir=!1,m.createFolders=!0,m.date=null,m.compression=null,m.compressionOptions=null,m.comment=null,m.unixPermissions=null,m.dosPermissions=null},{}],6:[function(h,p,m){var f;f=typeof Promise<"u"?Promise:h("lie"),p.exports={Promise:f}},{lie:37}],7:[function(h,p,m){var f=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",b=h("pako"),y=h("./utils"),_=h("./stream/GenericWorker"),E=f?"uint8array":"array";function M(D,z){_.call(this,"FlateWorker/"+D),this._pako=null,this._pakoAction=D,this._pakoOptions=z,this.meta={}}m.magic="\b\0",y.inherits(M,_),M.prototype.processChunk=function(D){this.meta=D.meta,this._pako===null&&this._createPako(),this._pako.push(y.transformTo(E,D.data),!1)},M.prototype.flush=function(){_.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},M.prototype.cleanUp=function(){_.prototype.cleanUp.call(this),this._pako=null},M.prototype._createPako=function(){this._pako=new b[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var D=this;this._pako.onData=function(z){D.push({data:z,meta:D.meta})}},m.compressWorker=function(D){return new M("Deflate",D)},m.uncompressWorker=function(){return new M("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(h,p,m){function f(O,N){var B,H="";for(B=0;B<N;B++)H+=String.fromCharCode(255&O),O>>>=8;return H}function b(O,N,B,H,$,C){var R,k,v=O.file,w=O.compression,x=C!==E.utf8encode,S=y.transformTo("string",C(v.name)),T=y.transformTo("string",E.utf8encode(v.name)),L=v.comment,j=y.transformTo("string",C(L)),U=y.transformTo("string",E.utf8encode(L)),W=T.length!==v.name.length,Y=U.length!==L.length,F="",X="",P="",I=v.dir,V=v.date,Q={crc32:0,compressedSize:0,uncompressedSize:0};N&&!B||(Q.crc32=O.crc32,Q.compressedSize=O.compressedSize,Q.uncompressedSize=O.uncompressedSize);var G=0;N&&(G|=8),x||!W&&!Y||(G|=2048);var q=0,J=0;I&&(q|=16),$==="UNIX"?(J=798,q|=function(nt,Z){var st=nt;return nt||(st=Z?16893:33204),(65535&st)<<16}(v.unixPermissions,I)):(J=20,q|=function(nt){return 63&(nt||0)}(v.dosPermissions)),R=V.getUTCHours(),R<<=6,R|=V.getUTCMinutes(),R<<=5,R|=V.getUTCSeconds()/2,k=V.getUTCFullYear()-1980,k<<=4,k|=V.getUTCMonth()+1,k<<=5,k|=V.getUTCDate(),W&&(X=f(1,1)+f(M(S),4)+T,F+="up"+f(X.length,2)+X),Y&&(P=f(1,1)+f(M(j),4)+U,F+="uc"+f(P.length,2)+P);var it="";return it+=`
\0`,it+=f(G,2),it+=w.magic,it+=f(R,2),it+=f(k,2),it+=f(Q.crc32,4),it+=f(Q.compressedSize,4),it+=f(Q.uncompressedSize,4),it+=f(S.length,2),it+=f(F.length,2),{fileRecord:D.LOCAL_FILE_HEADER+it+S+F,dirRecord:D.CENTRAL_FILE_HEADER+f(J,2)+it+f(j.length,2)+"\0\0\0\0"+f(q,4)+f(H,4)+S+F+j}}var y=h("../utils"),_=h("../stream/GenericWorker"),E=h("../utf8"),M=h("../crc32"),D=h("../signature");function z(O,N,B,H){_.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=N,this.zipPlatform=B,this.encodeFileName=H,this.streamFiles=O,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}y.inherits(z,_),z.prototype.push=function(O){var N=O.meta.percent||0,B=this.entriesCount,H=this._sources.length;this.accumulate?this.contentBuffer.push(O):(this.bytesWritten+=O.data.length,_.prototype.push.call(this,{data:O.data,meta:{currentFile:this.currentFile,percent:B?(N+100*(B-H-1))/B:100}}))},z.prototype.openedSource=function(O){this.currentSourceOffset=this.bytesWritten,this.currentFile=O.file.name;var N=this.streamFiles&&!O.file.dir;if(N){var B=b(O,N,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:B.fileRecord,meta:{percent:0}})}else this.accumulate=!0},z.prototype.closedSource=function(O){this.accumulate=!1;var N=this.streamFiles&&!O.file.dir,B=b(O,N,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(B.dirRecord),N)this.push({data:function(H){return D.DATA_DESCRIPTOR+f(H.crc32,4)+f(H.compressedSize,4)+f(H.uncompressedSize,4)}(O),meta:{percent:100}});else for(this.push({data:B.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},z.prototype.flush=function(){for(var O=this.bytesWritten,N=0;N<this.dirRecords.length;N++)this.push({data:this.dirRecords[N],meta:{percent:100}});var B=this.bytesWritten-O,H=function($,C,R,k,v){var w=y.transformTo("string",v(k));return D.CENTRAL_DIRECTORY_END+"\0\0\0\0"+f($,2)+f($,2)+f(C,4)+f(R,4)+f(w.length,2)+w}(this.dirRecords.length,B,O,this.zipComment,this.encodeFileName);this.push({data:H,meta:{percent:100}})},z.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},z.prototype.registerPrevious=function(O){this._sources.push(O);var N=this;return O.on("data",function(B){N.processChunk(B)}),O.on("end",function(){N.closedSource(N.previous.streamInfo),N._sources.length?N.prepareNextSource():N.end()}),O.on("error",function(B){N.error(B)}),this},z.prototype.resume=function(){return!!_.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},z.prototype.error=function(O){var N=this._sources;if(!_.prototype.error.call(this,O))return!1;for(var B=0;B<N.length;B++)try{N[B].error(O)}catch{}return!0},z.prototype.lock=function(){_.prototype.lock.call(this);for(var O=this._sources,N=0;N<O.length;N++)O[N].lock()},p.exports=z},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(h,p,m){var f=h("../compressions"),b=h("./ZipFileWorker");m.generateWorker=function(y,_,E){var M=new b(_.streamFiles,E,_.platform,_.encodeFileName),D=0;try{y.forEach(function(z,O){D++;var N=function(C,R){var k=C||R,v=f[k];if(!v)throw new Error(k+" is not a valid compression method !");return v}(O.options.compression,_.compression),B=O.options.compressionOptions||_.compressionOptions||{},H=O.dir,$=O.date;O._compressWorker(N,B).withStreamInfo("file",{name:z,dir:H,date:$,comment:O.comment||"",unixPermissions:O.unixPermissions,dosPermissions:O.dosPermissions}).pipe(M)}),M.entriesCount=D}catch(z){M.error(z)}return M}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(h,p,m){function f(){if(!(this instanceof f))return new f;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var b=new f;for(var y in this)typeof this[y]!="function"&&(b[y]=this[y]);return b}}(f.prototype=h("./object")).loadAsync=h("./load"),f.support=h("./support"),f.defaults=h("./defaults"),f.version="3.10.1",f.loadAsync=function(b,y){return new f().loadAsync(b,y)},f.external=h("./external"),p.exports=f},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(h,p,m){var f=h("./utils"),b=h("./external"),y=h("./utf8"),_=h("./zipEntries"),E=h("./stream/Crc32Probe"),M=h("./nodejsUtils");function D(z){return new b.Promise(function(O,N){var B=z.decompressed.getContentWorker().pipe(new E);B.on("error",function(H){N(H)}).on("end",function(){B.streamInfo.crc32!==z.decompressed.crc32?N(new Error("Corrupted zip : CRC32 mismatch")):O()}).resume()})}p.exports=function(z,O){var N=this;return O=f.extend(O||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:y.utf8decode}),M.isNode&&M.isStream(z)?b.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):f.prepareContent("the loaded zip file",z,!0,O.optimizedBinaryString,O.base64).then(function(B){var H=new _(O);return H.load(B),H}).then(function(B){var H=[b.Promise.resolve(B)],$=B.files;if(O.checkCRC32)for(var C=0;C<$.length;C++)H.push(D($[C]));return b.Promise.all(H)}).then(function(B){for(var H=B.shift(),$=H.files,C=0;C<$.length;C++){var R=$[C],k=R.fileNameStr,v=f.resolve(R.fileNameStr);N.file(v,R.decompressed,{binary:!0,optimizedBinaryString:!0,date:R.date,dir:R.dir,comment:R.fileCommentStr.length?R.fileCommentStr:null,unixPermissions:R.unixPermissions,dosPermissions:R.dosPermissions,createFolders:O.createFolders}),R.dir||(N.file(v).unsafeOriginalName=k)}return H.zipComment.length&&(N.comment=H.zipComment),N})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(h,p,m){var f=h("../utils"),b=h("../stream/GenericWorker");function y(_,E){b.call(this,"Nodejs stream input adapter for "+_),this._upstreamEnded=!1,this._bindStream(E)}f.inherits(y,b),y.prototype._bindStream=function(_){var E=this;(this._stream=_).pause(),_.on("data",function(M){E.push({data:M,meta:{percent:0}})}).on("error",function(M){E.isPaused?this.generatedError=M:E.error(M)}).on("end",function(){E.isPaused?E._upstreamEnded=!0:E.end()})},y.prototype.pause=function(){return!!b.prototype.pause.call(this)&&(this._stream.pause(),!0)},y.prototype.resume=function(){return!!b.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},p.exports=y},{"../stream/GenericWorker":28,"../utils":32}],13:[function(h,p,m){var f=h("readable-stream").Readable;function b(y,_,E){f.call(this,_),this._helper=y;var M=this;y.on("data",function(D,z){M.push(D)||M._helper.pause(),E&&E(z)}).on("error",function(D){M.emit("error",D)}).on("end",function(){M.push(null)})}h("../utils").inherits(b,f),b.prototype._read=function(){this._helper.resume()},p.exports=b},{"../utils":32,"readable-stream":16}],14:[function(h,p,m){p.exports={isNode:a!==void 0,newBufferFrom:function(f,b){if(a.from&&a.from!==Uint8Array.from)return a.from(f,b);if(typeof f=="number")throw new Error('The "data" argument must not be a number');return new a(f,b)},allocBuffer:function(f){if(a.alloc)return a.alloc(f);var b=new a(f);return b.fill(0),b},isBuffer:function(f){return a.isBuffer(f)},isStream:function(f){return f&&typeof f.on=="function"&&typeof f.pause=="function"&&typeof f.resume=="function"}}},{}],15:[function(h,p,m){function f(v,w,x){var S,T=y.getTypeOf(w),L=y.extend(x||{},M);L.date=L.date||new Date,L.compression!==null&&(L.compression=L.compression.toUpperCase()),typeof L.unixPermissions=="string"&&(L.unixPermissions=parseInt(L.unixPermissions,8)),L.unixPermissions&&16384&L.unixPermissions&&(L.dir=!0),L.dosPermissions&&16&L.dosPermissions&&(L.dir=!0),L.dir&&(v=$(v)),L.createFolders&&(S=H(v))&&C.call(this,S,!0);var j=T==="string"&&L.binary===!1&&L.base64===!1;x&&x.binary!==void 0||(L.binary=!j),(w instanceof D&&w.uncompressedSize===0||L.dir||!w||w.length===0)&&(L.base64=!1,L.binary=!0,w="",L.compression="STORE",T="string");var U;U=w instanceof D||w instanceof _?w:N.isNode&&N.isStream(w)?new B(v,w):y.prepareContent(v,w,L.binary,L.optimizedBinaryString,L.base64);var W=new z(v,U,L);this.files[v]=W}var b=h("./utf8"),y=h("./utils"),_=h("./stream/GenericWorker"),E=h("./stream/StreamHelper"),M=h("./defaults"),D=h("./compressedObject"),z=h("./zipObject"),O=h("./generate"),N=h("./nodejsUtils"),B=h("./nodejs/NodejsStreamInputAdapter"),H=function(v){v.slice(-1)==="/"&&(v=v.substring(0,v.length-1));var w=v.lastIndexOf("/");return 0<w?v.substring(0,w):""},$=function(v){return v.slice(-1)!=="/"&&(v+="/"),v},C=function(v,w){return w=w!==void 0?w:M.createFolders,v=$(v),this.files[v]||f.call(this,v,null,{dir:!0,createFolders:w}),this.files[v]};function R(v){return Object.prototype.toString.call(v)==="[object RegExp]"}var k={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(v){var w,x,S;for(w in this.files)S=this.files[w],(x=w.slice(this.root.length,w.length))&&w.slice(0,this.root.length)===this.root&&v(x,S)},filter:function(v){var w=[];return this.forEach(function(x,S){v(x,S)&&w.push(S)}),w},file:function(v,w,x){if(arguments.length!==1)return v=this.root+v,f.call(this,v,w,x),this;if(R(v)){var S=v;return this.filter(function(L,j){return!j.dir&&S.test(L)})}var T=this.files[this.root+v];return T&&!T.dir?T:null},folder:function(v){if(!v)return this;if(R(v))return this.filter(function(T,L){return L.dir&&v.test(T)});var w=this.root+v,x=C.call(this,w),S=this.clone();return S.root=x.name,S},remove:function(v){v=this.root+v;var w=this.files[v];if(w||(v.slice(-1)!=="/"&&(v+="/"),w=this.files[v]),w&&!w.dir)delete this.files[v];else for(var x=this.filter(function(T,L){return L.name.slice(0,v.length)===v}),S=0;S<x.length;S++)delete this.files[x[S].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(v){var w,x={};try{if((x=y.extend(v||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:b.utf8encode})).type=x.type.toLowerCase(),x.compression=x.compression.toUpperCase(),x.type==="binarystring"&&(x.type="string"),!x.type)throw new Error("No output type specified.");y.checkSupport(x.type),x.platform!=="darwin"&&x.platform!=="freebsd"&&x.platform!=="linux"&&x.platform!=="sunos"||(x.platform="UNIX"),x.platform==="win32"&&(x.platform="DOS");var S=x.comment||this.comment||"";w=O.generateWorker(this,x,S)}catch(T){(w=new _("error")).error(T)}return new E(w,x.type||"string",x.mimeType)},generateAsync:function(v,w){return this.generateInternalStream(v).accumulate(w)},generateNodeStream:function(v,w){return(v=v||{}).type||(v.type="nodebuffer"),this.generateInternalStream(v).toNodejsStream(w)}};p.exports=k},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(h,p,m){p.exports=h("stream")},{stream:void 0}],17:[function(h,p,m){var f=h("./DataReader");function b(y){f.call(this,y);for(var _=0;_<this.data.length;_++)y[_]=255&y[_]}h("../utils").inherits(b,f),b.prototype.byteAt=function(y){return this.data[this.zero+y]},b.prototype.lastIndexOfSignature=function(y){for(var _=y.charCodeAt(0),E=y.charCodeAt(1),M=y.charCodeAt(2),D=y.charCodeAt(3),z=this.length-4;0<=z;--z)if(this.data[z]===_&&this.data[z+1]===E&&this.data[z+2]===M&&this.data[z+3]===D)return z-this.zero;return-1},b.prototype.readAndCheckSignature=function(y){var _=y.charCodeAt(0),E=y.charCodeAt(1),M=y.charCodeAt(2),D=y.charCodeAt(3),z=this.readData(4);return _===z[0]&&E===z[1]&&M===z[2]&&D===z[3]},b.prototype.readData=function(y){if(this.checkOffset(y),y===0)return[];var _=this.data.slice(this.zero+this.index,this.zero+this.index+y);return this.index+=y,_},p.exports=b},{"../utils":32,"./DataReader":18}],18:[function(h,p,m){var f=h("../utils");function b(y){this.data=y,this.length=y.length,this.index=0,this.zero=0}b.prototype={checkOffset:function(y){this.checkIndex(this.index+y)},checkIndex:function(y){if(this.length<this.zero+y||y<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+y+"). Corrupted zip ?")},setIndex:function(y){this.checkIndex(y),this.index=y},skip:function(y){this.setIndex(this.index+y)},byteAt:function(){},readInt:function(y){var _,E=0;for(this.checkOffset(y),_=this.index+y-1;_>=this.index;_--)E=(E<<8)+this.byteAt(_);return this.index+=y,E},readString:function(y){return f.transformTo("string",this.readData(y))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var y=this.readInt(4);return new Date(Date.UTC(1980+(y>>25&127),(y>>21&15)-1,y>>16&31,y>>11&31,y>>5&63,(31&y)<<1))}},p.exports=b},{"../utils":32}],19:[function(h,p,m){var f=h("./Uint8ArrayReader");function b(y){f.call(this,y)}h("../utils").inherits(b,f),b.prototype.readData=function(y){this.checkOffset(y);var _=this.data.slice(this.zero+this.index,this.zero+this.index+y);return this.index+=y,_},p.exports=b},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(h,p,m){var f=h("./DataReader");function b(y){f.call(this,y)}h("../utils").inherits(b,f),b.prototype.byteAt=function(y){return this.data.charCodeAt(this.zero+y)},b.prototype.lastIndexOfSignature=function(y){return this.data.lastIndexOf(y)-this.zero},b.prototype.readAndCheckSignature=function(y){return y===this.readData(4)},b.prototype.readData=function(y){this.checkOffset(y);var _=this.data.slice(this.zero+this.index,this.zero+this.index+y);return this.index+=y,_},p.exports=b},{"../utils":32,"./DataReader":18}],21:[function(h,p,m){var f=h("./ArrayReader");function b(y){f.call(this,y)}h("../utils").inherits(b,f),b.prototype.readData=function(y){if(this.checkOffset(y),y===0)return new Uint8Array(0);var _=this.data.subarray(this.zero+this.index,this.zero+this.index+y);return this.index+=y,_},p.exports=b},{"../utils":32,"./ArrayReader":17}],22:[function(h,p,m){var f=h("../utils"),b=h("../support"),y=h("./ArrayReader"),_=h("./StringReader"),E=h("./NodeBufferReader"),M=h("./Uint8ArrayReader");p.exports=function(D){var z=f.getTypeOf(D);return f.checkSupport(z),z!=="string"||b.uint8array?z==="nodebuffer"?new E(D):b.uint8array?new M(f.transformTo("uint8array",D)):new y(f.transformTo("array",D)):new _(D)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(h,p,m){m.LOCAL_FILE_HEADER="PK",m.CENTRAL_FILE_HEADER="PK",m.CENTRAL_DIRECTORY_END="PK",m.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",m.ZIP64_CENTRAL_DIRECTORY_END="PK",m.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(h,p,m){var f=h("./GenericWorker"),b=h("../utils");function y(_){f.call(this,"ConvertWorker to "+_),this.destType=_}b.inherits(y,f),y.prototype.processChunk=function(_){this.push({data:b.transformTo(this.destType,_.data),meta:_.meta})},p.exports=y},{"../utils":32,"./GenericWorker":28}],25:[function(h,p,m){var f=h("./GenericWorker"),b=h("../crc32");function y(){f.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}h("../utils").inherits(y,f),y.prototype.processChunk=function(_){this.streamInfo.crc32=b(_.data,this.streamInfo.crc32||0),this.push(_)},p.exports=y},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(h,p,m){var f=h("../utils"),b=h("./GenericWorker");function y(_){b.call(this,"DataLengthProbe for "+_),this.propName=_,this.withStreamInfo(_,0)}f.inherits(y,b),y.prototype.processChunk=function(_){if(_){var E=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=E+_.data.length}b.prototype.processChunk.call(this,_)},p.exports=y},{"../utils":32,"./GenericWorker":28}],27:[function(h,p,m){var f=h("../utils"),b=h("./GenericWorker");function y(_){b.call(this,"DataWorker");var E=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,_.then(function(M){E.dataIsReady=!0,E.data=M,E.max=M&&M.length||0,E.type=f.getTypeOf(M),E.isPaused||E._tickAndRepeat()},function(M){E.error(M)})}f.inherits(y,b),y.prototype.cleanUp=function(){b.prototype.cleanUp.call(this),this.data=null},y.prototype.resume=function(){return!!b.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,f.delay(this._tickAndRepeat,[],this)),!0)},y.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(f.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},y.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var _=null,E=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":_=this.data.substring(this.index,E);break;case"uint8array":_=this.data.subarray(this.index,E);break;case"array":case"nodebuffer":_=this.data.slice(this.index,E)}return this.index=E,this.push({data:_,meta:{percent:this.max?this.index/this.max*100:0}})},p.exports=y},{"../utils":32,"./GenericWorker":28}],28:[function(h,p,m){function f(b){this.name=b||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}f.prototype={push:function(b){this.emit("data",b)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(b){this.emit("error",b)}return!0},error:function(b){return!this.isFinished&&(this.isPaused?this.generatedError=b:(this.isFinished=!0,this.emit("error",b),this.previous&&this.previous.error(b),this.cleanUp()),!0)},on:function(b,y){return this._listeners[b].push(y),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(b,y){if(this._listeners[b])for(var _=0;_<this._listeners[b].length;_++)this._listeners[b][_].call(this,y)},pipe:function(b){return b.registerPrevious(this)},registerPrevious:function(b){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=b.streamInfo,this.mergeStreamInfo(),this.previous=b;var y=this;return b.on("data",function(_){y.processChunk(_)}),b.on("end",function(){y.end()}),b.on("error",function(_){y.error(_)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var b=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),b=!0),this.previous&&this.previous.resume(),!b},flush:function(){},processChunk:function(b){this.push(b)},withStreamInfo:function(b,y){return this.extraStreamInfo[b]=y,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var b in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,b)&&(this.streamInfo[b]=this.extraStreamInfo[b])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var b="Worker "+this.name;return this.previous?this.previous+" -> "+b:b}},p.exports=f},{}],29:[function(h,p,m){var f=h("../utils"),b=h("./ConvertWorker"),y=h("./GenericWorker"),_=h("../base64"),E=h("../support"),M=h("../external"),D=null;if(E.nodestream)try{D=h("../nodejs/NodejsStreamOutputAdapter")}catch{}function z(O,N,B){var H=N;switch(N){case"blob":case"arraybuffer":H="uint8array";break;case"base64":H="string"}try{this._internalType=H,this._outputType=N,this._mimeType=B,f.checkSupport(H),this._worker=O.pipe(new b(H)),O.lock()}catch($){this._worker=new y("error"),this._worker.error($)}}z.prototype={accumulate:function(O){return function(N,B){return new M.Promise(function(H,$){var C=[],R=N._internalType,k=N._outputType,v=N._mimeType;N.on("data",function(w,x){C.push(w),B&&B(x)}).on("error",function(w){C=[],$(w)}).on("end",function(){try{var w=function(x,S,T){switch(x){case"blob":return f.newBlob(f.transformTo("arraybuffer",S),T);case"base64":return _.encode(S);default:return f.transformTo(x,S)}}(k,function(x,S){var T,L=0,j=null,U=0;for(T=0;T<S.length;T++)U+=S[T].length;switch(x){case"string":return S.join("");case"array":return Array.prototype.concat.apply([],S);case"uint8array":for(j=new Uint8Array(U),T=0;T<S.length;T++)j.set(S[T],L),L+=S[T].length;return j;case"nodebuffer":return a.concat(S);default:throw new Error("concat : unsupported type '"+x+"'")}}(R,C),v);H(w)}catch(x){$(x)}C=[]}).resume()})}(this,O)},on:function(O,N){var B=this;return O==="data"?this._worker.on(O,function(H){N.call(B,H.data,H.meta)}):this._worker.on(O,function(){f.delay(N,arguments,B)}),this},resume:function(){return f.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(O){if(f.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new D(this,{objectMode:this._outputType!=="nodebuffer"},O)}},p.exports=z},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(h,p,m){if(m.base64=!0,m.array=!0,m.string=!0,m.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",m.nodebuffer=a!==void 0,m.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")m.blob=!1;else{var f=new ArrayBuffer(0);try{m.blob=new Blob([f],{type:"application/zip"}).size===0}catch{try{var b=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);b.append(f),m.blob=b.getBlob("application/zip").size===0}catch{m.blob=!1}}}try{m.nodestream=!!h("readable-stream").Readable}catch{m.nodestream=!1}},{"readable-stream":16}],31:[function(h,p,m){for(var f=h("./utils"),b=h("./support"),y=h("./nodejsUtils"),_=h("./stream/GenericWorker"),E=new Array(256),M=0;M<256;M++)E[M]=252<=M?6:248<=M?5:240<=M?4:224<=M?3:192<=M?2:1;function D(){_.call(this,"utf-8 decode"),this.leftOver=null}function z(){_.call(this,"utf-8 encode")}E[254]=E[254]=1,m.utf8encode=function(O){return b.nodebuffer?y.newBufferFrom(O,"utf-8"):function(N){var B,H,$,C,R,k=N.length,v=0;for(C=0;C<k;C++)(64512&(H=N.charCodeAt(C)))==55296&&C+1<k&&(64512&($=N.charCodeAt(C+1)))==56320&&(H=65536+(H-55296<<10)+($-56320),C++),v+=H<128?1:H<2048?2:H<65536?3:4;for(B=b.uint8array?new Uint8Array(v):new Array(v),C=R=0;R<v;C++)(64512&(H=N.charCodeAt(C)))==55296&&C+1<k&&(64512&($=N.charCodeAt(C+1)))==56320&&(H=65536+(H-55296<<10)+($-56320),C++),H<128?B[R++]=H:(H<2048?B[R++]=192|H>>>6:(H<65536?B[R++]=224|H>>>12:(B[R++]=240|H>>>18,B[R++]=128|H>>>12&63),B[R++]=128|H>>>6&63),B[R++]=128|63&H);return B}(O)},m.utf8decode=function(O){return b.nodebuffer?f.transformTo("nodebuffer",O).toString("utf-8"):function(N){var B,H,$,C,R=N.length,k=new Array(2*R);for(B=H=0;B<R;)if(($=N[B++])<128)k[H++]=$;else if(4<(C=E[$]))k[H++]=65533,B+=C-1;else{for($&=C===2?31:C===3?15:7;1<C&&B<R;)$=$<<6|63&N[B++],C--;1<C?k[H++]=65533:$<65536?k[H++]=$:($-=65536,k[H++]=55296|$>>10&1023,k[H++]=56320|1023&$)}return k.length!==H&&(k.subarray?k=k.subarray(0,H):k.length=H),f.applyFromCharCode(k)}(O=f.transformTo(b.uint8array?"uint8array":"array",O))},f.inherits(D,_),D.prototype.processChunk=function(O){var N=f.transformTo(b.uint8array?"uint8array":"array",O.data);if(this.leftOver&&this.leftOver.length){if(b.uint8array){var B=N;(N=new Uint8Array(B.length+this.leftOver.length)).set(this.leftOver,0),N.set(B,this.leftOver.length)}else N=this.leftOver.concat(N);this.leftOver=null}var H=function(C,R){var k;for((R=R||C.length)>C.length&&(R=C.length),k=R-1;0<=k&&(192&C[k])==128;)k--;return k<0||k===0?R:k+E[C[k]]>R?k:R}(N),$=N;H!==N.length&&(b.uint8array?($=N.subarray(0,H),this.leftOver=N.subarray(H,N.length)):($=N.slice(0,H),this.leftOver=N.slice(H,N.length))),this.push({data:m.utf8decode($),meta:O.meta})},D.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:m.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},m.Utf8DecodeWorker=D,f.inherits(z,_),z.prototype.processChunk=function(O){this.push({data:m.utf8encode(O.data),meta:O.meta})},m.Utf8EncodeWorker=z},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(h,p,m){var f=h("./support"),b=h("./base64"),y=h("./nodejsUtils"),_=h("./external");function E(B){return B}function M(B,H){for(var $=0;$<B.length;++$)H[$]=255&B.charCodeAt($);return H}h("setimmediate"),m.newBlob=function(B,H){m.checkSupport("blob");try{return new Blob([B],{type:H})}catch{try{var $=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return $.append(B),$.getBlob(H)}catch{throw new Error("Bug : can't construct the Blob.")}}};var D={stringifyByChunk:function(B,H,$){var C=[],R=0,k=B.length;if(k<=$)return String.fromCharCode.apply(null,B);for(;R<k;)H==="array"||H==="nodebuffer"?C.push(String.fromCharCode.apply(null,B.slice(R,Math.min(R+$,k)))):C.push(String.fromCharCode.apply(null,B.subarray(R,Math.min(R+$,k)))),R+=$;return C.join("")},stringifyByChar:function(B){for(var H="",$=0;$<B.length;$++)H+=String.fromCharCode(B[$]);return H},applyCanBeUsed:{uint8array:function(){try{return f.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return f.nodebuffer&&String.fromCharCode.apply(null,y.allocBuffer(1)).length===1}catch{return!1}}()}};function z(B){var H=65536,$=m.getTypeOf(B),C=!0;if($==="uint8array"?C=D.applyCanBeUsed.uint8array:$==="nodebuffer"&&(C=D.applyCanBeUsed.nodebuffer),C)for(;1<H;)try{return D.stringifyByChunk(B,$,H)}catch{H=Math.floor(H/2)}return D.stringifyByChar(B)}function O(B,H){for(var $=0;$<B.length;$++)H[$]=B[$];return H}m.applyFromCharCode=z;var N={};N.string={string:E,array:function(B){return M(B,new Array(B.length))},arraybuffer:function(B){return N.string.uint8array(B).buffer},uint8array:function(B){return M(B,new Uint8Array(B.length))},nodebuffer:function(B){return M(B,y.allocBuffer(B.length))}},N.array={string:z,array:E,arraybuffer:function(B){return new Uint8Array(B).buffer},uint8array:function(B){return new Uint8Array(B)},nodebuffer:function(B){return y.newBufferFrom(B)}},N.arraybuffer={string:function(B){return z(new Uint8Array(B))},array:function(B){return O(new Uint8Array(B),new Array(B.byteLength))},arraybuffer:E,uint8array:function(B){return new Uint8Array(B)},nodebuffer:function(B){return y.newBufferFrom(new Uint8Array(B))}},N.uint8array={string:z,array:function(B){return O(B,new Array(B.length))},arraybuffer:function(B){return B.buffer},uint8array:E,nodebuffer:function(B){return y.newBufferFrom(B)}},N.nodebuffer={string:z,array:function(B){return O(B,new Array(B.length))},arraybuffer:function(B){return N.nodebuffer.uint8array(B).buffer},uint8array:function(B){return O(B,new Uint8Array(B.length))},nodebuffer:E},m.transformTo=function(B,H){if(H=H||"",!B)return H;m.checkSupport(B);var $=m.getTypeOf(H);return N[$][B](H)},m.resolve=function(B){for(var H=B.split("/"),$=[],C=0;C<H.length;C++){var R=H[C];R==="."||R===""&&C!==0&&C!==H.length-1||(R===".."?$.pop():$.push(R))}return $.join("/")},m.getTypeOf=function(B){return typeof B=="string"?"string":Object.prototype.toString.call(B)==="[object Array]"?"array":f.nodebuffer&&y.isBuffer(B)?"nodebuffer":f.uint8array&&B instanceof Uint8Array?"uint8array":f.arraybuffer&&B instanceof ArrayBuffer?"arraybuffer":void 0},m.checkSupport=function(B){if(!f[B.toLowerCase()])throw new Error(B+" is not supported by this platform")},m.MAX_VALUE_16BITS=65535,m.MAX_VALUE_32BITS=-1,m.pretty=function(B){var H,$,C="";for($=0;$<(B||"").length;$++)C+="\\x"+((H=B.charCodeAt($))<16?"0":"")+H.toString(16).toUpperCase();return C},m.delay=function(B,H,$){u(function(){B.apply($||null,H||[])})},m.inherits=function(B,H){function $(){}$.prototype=H.prototype,B.prototype=new $},m.extend=function(){var B,H,$={};for(B=0;B<arguments.length;B++)for(H in arguments[B])Object.prototype.hasOwnProperty.call(arguments[B],H)&&$[H]===void 0&&($[H]=arguments[B][H]);return $},m.prepareContent=function(B,H,$,C,R){return _.Promise.resolve(H).then(function(k){return f.blob&&(k instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(k))!==-1)&&typeof FileReader<"u"?new _.Promise(function(v,w){var x=new FileReader;x.onload=function(S){v(S.target.result)},x.onerror=function(S){w(S.target.error)},x.readAsArrayBuffer(k)}):k}).then(function(k){var v=m.getTypeOf(k);return v?(v==="arraybuffer"?k=m.transformTo("uint8array",k):v==="string"&&(R?k=b.decode(k):$&&C!==!0&&(k=function(w){return M(w,f.uint8array?new Uint8Array(w.length):new Array(w.length))}(k))),k):_.Promise.reject(new Error("Can't read the data of '"+B+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(h,p,m){var f=h("./reader/readerFor"),b=h("./utils"),y=h("./signature"),_=h("./zipEntry"),E=h("./support");function M(D){this.files=[],this.loadOptions=D}M.prototype={checkSignature:function(D){if(!this.reader.readAndCheckSignature(D)){this.reader.index-=4;var z=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+b.pretty(z)+", expected "+b.pretty(D)+")")}},isSignature:function(D,z){var O=this.reader.index;this.reader.setIndex(D);var N=this.reader.readString(4)===z;return this.reader.setIndex(O),N},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var D=this.reader.readData(this.zipCommentLength),z=E.uint8array?"uint8array":"array",O=b.transformTo(z,D);this.zipComment=this.loadOptions.decodeFileName(O)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var D,z,O,N=this.zip64EndOfCentralSize-44;0<N;)D=this.reader.readInt(2),z=this.reader.readInt(4),O=this.reader.readData(z),this.zip64ExtensibleData[D]={id:D,length:z,value:O}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var D,z;for(D=0;D<this.files.length;D++)z=this.files[D],this.reader.setIndex(z.localHeaderOffset),this.checkSignature(y.LOCAL_FILE_HEADER),z.readLocalPart(this.reader),z.handleUTF8(),z.processAttributes()},readCentralDir:function(){var D;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(y.CENTRAL_FILE_HEADER);)(D=new _({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(D);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var D=this.reader.lastIndexOfSignature(y.CENTRAL_DIRECTORY_END);if(D<0)throw this.isSignature(0,y.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(D);var z=D;if(this.checkSignature(y.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===b.MAX_VALUE_16BITS||this.diskWithCentralDirStart===b.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===b.MAX_VALUE_16BITS||this.centralDirRecords===b.MAX_VALUE_16BITS||this.centralDirSize===b.MAX_VALUE_32BITS||this.centralDirOffset===b.MAX_VALUE_32BITS){if(this.zip64=!0,(D=this.reader.lastIndexOfSignature(y.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(D),this.checkSignature(y.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,y.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(y.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(y.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var O=this.centralDirOffset+this.centralDirSize;this.zip64&&(O+=20,O+=12+this.zip64EndOfCentralSize);var N=z-O;if(0<N)this.isSignature(z,y.CENTRAL_FILE_HEADER)||(this.reader.zero=N);else if(N<0)throw new Error("Corrupted zip: missing "+Math.abs(N)+" bytes.")},prepareReader:function(D){this.reader=f(D)},load:function(D){this.prepareReader(D),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},p.exports=M},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(h,p,m){var f=h("./reader/readerFor"),b=h("./utils"),y=h("./compressedObject"),_=h("./crc32"),E=h("./utf8"),M=h("./compressions"),D=h("./support");function z(O,N){this.options=O,this.loadOptions=N}z.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(O){var N,B;if(O.skip(22),this.fileNameLength=O.readInt(2),B=O.readInt(2),this.fileName=O.readData(this.fileNameLength),O.skip(B),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((N=function(H){for(var $ in M)if(Object.prototype.hasOwnProperty.call(M,$)&&M[$].magic===H)return M[$];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+b.pretty(this.compressionMethod)+" unknown (inner file : "+b.transformTo("string",this.fileName)+")");this.decompressed=new y(this.compressedSize,this.uncompressedSize,this.crc32,N,O.readData(this.compressedSize))},readCentralPart:function(O){this.versionMadeBy=O.readInt(2),O.skip(2),this.bitFlag=O.readInt(2),this.compressionMethod=O.readString(2),this.date=O.readDate(),this.crc32=O.readInt(4),this.compressedSize=O.readInt(4),this.uncompressedSize=O.readInt(4);var N=O.readInt(2);if(this.extraFieldsLength=O.readInt(2),this.fileCommentLength=O.readInt(2),this.diskNumberStart=O.readInt(2),this.internalFileAttributes=O.readInt(2),this.externalFileAttributes=O.readInt(4),this.localHeaderOffset=O.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");O.skip(N),this.readExtraFields(O),this.parseZIP64ExtraField(O),this.fileComment=O.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var O=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),O==0&&(this.dosPermissions=63&this.externalFileAttributes),O==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var O=f(this.extraFields[1].value);this.uncompressedSize===b.MAX_VALUE_32BITS&&(this.uncompressedSize=O.readInt(8)),this.compressedSize===b.MAX_VALUE_32BITS&&(this.compressedSize=O.readInt(8)),this.localHeaderOffset===b.MAX_VALUE_32BITS&&(this.localHeaderOffset=O.readInt(8)),this.diskNumberStart===b.MAX_VALUE_32BITS&&(this.diskNumberStart=O.readInt(4))}},readExtraFields:function(O){var N,B,H,$=O.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});O.index+4<$;)N=O.readInt(2),B=O.readInt(2),H=O.readData(B),this.extraFields[N]={id:N,length:B,value:H};O.setIndex($)},handleUTF8:function(){var O=D.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=E.utf8decode(this.fileName),this.fileCommentStr=E.utf8decode(this.fileComment);else{var N=this.findExtraFieldUnicodePath();if(N!==null)this.fileNameStr=N;else{var B=b.transformTo(O,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(B)}var H=this.findExtraFieldUnicodeComment();if(H!==null)this.fileCommentStr=H;else{var $=b.transformTo(O,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName($)}}},findExtraFieldUnicodePath:function(){var O=this.extraFields[28789];if(O){var N=f(O.value);return N.readInt(1)!==1||_(this.fileName)!==N.readInt(4)?null:E.utf8decode(N.readData(O.length-5))}return null},findExtraFieldUnicodeComment:function(){var O=this.extraFields[25461];if(O){var N=f(O.value);return N.readInt(1)!==1||_(this.fileComment)!==N.readInt(4)?null:E.utf8decode(N.readData(O.length-5))}return null}},p.exports=z},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(h,p,m){function f(N,B,H){this.name=N,this.dir=H.dir,this.date=H.date,this.comment=H.comment,this.unixPermissions=H.unixPermissions,this.dosPermissions=H.dosPermissions,this._data=B,this._dataBinary=H.binary,this.options={compression:H.compression,compressionOptions:H.compressionOptions}}var b=h("./stream/StreamHelper"),y=h("./stream/DataWorker"),_=h("./utf8"),E=h("./compressedObject"),M=h("./stream/GenericWorker");f.prototype={internalStream:function(N){var B=null,H="string";try{if(!N)throw new Error("No output type specified.");var $=(H=N.toLowerCase())==="string"||H==="text";H!=="binarystring"&&H!=="text"||(H="string"),B=this._decompressWorker();var C=!this._dataBinary;C&&!$&&(B=B.pipe(new _.Utf8EncodeWorker)),!C&&$&&(B=B.pipe(new _.Utf8DecodeWorker))}catch(R){(B=new M("error")).error(R)}return new b(B,H,"")},async:function(N,B){return this.internalStream(N).accumulate(B)},nodeStream:function(N,B){return this.internalStream(N||"nodebuffer").toNodejsStream(B)},_compressWorker:function(N,B){if(this._data instanceof E&&this._data.compression.magic===N.magic)return this._data.getCompressedWorker();var H=this._decompressWorker();return this._dataBinary||(H=H.pipe(new _.Utf8EncodeWorker)),E.createWorkerFrom(H,N,B)},_decompressWorker:function(){return this._data instanceof E?this._data.getContentWorker():this._data instanceof M?this._data:new y(this._data)}};for(var D=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],z=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},O=0;O<D.length;O++)f.prototype[D[O]]=z;p.exports=f},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(h,p,m){(function(f){var b,y,_=f.MutationObserver||f.WebKitMutationObserver;if(_){var E=0,M=new _(N),D=f.document.createTextNode("");M.observe(D,{characterData:!0}),b=function(){D.data=E=++E%2}}else if(f.setImmediate||f.MessageChannel===void 0)b="document"in f&&"onreadystatechange"in f.document.createElement("script")?function(){var B=f.document.createElement("script");B.onreadystatechange=function(){N(),B.onreadystatechange=null,B.parentNode.removeChild(B),B=null},f.document.documentElement.appendChild(B)}:function(){setTimeout(N,0)};else{var z=new f.MessageChannel;z.port1.onmessage=N,b=function(){z.port2.postMessage(0)}}var O=[];function N(){var B,H;y=!0;for(var $=O.length;$;){for(H=O,O=[],B=-1;++B<$;)H[B]();$=O.length}y=!1}p.exports=function(B){O.push(B)!==1||y||b()}}).call(this,s!==void 0?s:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(h,p,m){var f=h("immediate");function b(){}var y={},_=["REJECTED"],E=["FULFILLED"],M=["PENDING"];function D($){if(typeof $!="function")throw new TypeError("resolver must be a function");this.state=M,this.queue=[],this.outcome=void 0,$!==b&&B(this,$)}function z($,C,R){this.promise=$,typeof C=="function"&&(this.onFulfilled=C,this.callFulfilled=this.otherCallFulfilled),typeof R=="function"&&(this.onRejected=R,this.callRejected=this.otherCallRejected)}function O($,C,R){f(function(){var k;try{k=C(R)}catch(v){return y.reject($,v)}k===$?y.reject($,new TypeError("Cannot resolve promise with itself")):y.resolve($,k)})}function N($){var C=$&&$.then;if($&&(typeof $=="object"||typeof $=="function")&&typeof C=="function")return function(){C.apply($,arguments)}}function B($,C){var R=!1;function k(x){R||(R=!0,y.reject($,x))}function v(x){R||(R=!0,y.resolve($,x))}var w=H(function(){C(v,k)});w.status==="error"&&k(w.value)}function H($,C){var R={};try{R.value=$(C),R.status="success"}catch(k){R.status="error",R.value=k}return R}(p.exports=D).prototype.finally=function($){if(typeof $!="function")return this;var C=this.constructor;return this.then(function(R){return C.resolve($()).then(function(){return R})},function(R){return C.resolve($()).then(function(){throw R})})},D.prototype.catch=function($){return this.then(null,$)},D.prototype.then=function($,C){if(typeof $!="function"&&this.state===E||typeof C!="function"&&this.state===_)return this;var R=new this.constructor(b);return this.state!==M?O(R,this.state===E?$:C,this.outcome):this.queue.push(new z(R,$,C)),R},z.prototype.callFulfilled=function($){y.resolve(this.promise,$)},z.prototype.otherCallFulfilled=function($){O(this.promise,this.onFulfilled,$)},z.prototype.callRejected=function($){y.reject(this.promise,$)},z.prototype.otherCallRejected=function($){O(this.promise,this.onRejected,$)},y.resolve=function($,C){var R=H(N,C);if(R.status==="error")return y.reject($,R.value);var k=R.value;if(k)B($,k);else{$.state=E,$.outcome=C;for(var v=-1,w=$.queue.length;++v<w;)$.queue[v].callFulfilled(C)}return $},y.reject=function($,C){$.state=_,$.outcome=C;for(var R=-1,k=$.queue.length;++R<k;)$.queue[R].callRejected(C);return $},D.resolve=function($){return $ instanceof this?$:y.resolve(new this(b),$)},D.reject=function($){var C=new this(b);return y.reject(C,$)},D.all=function($){var C=this;if(Object.prototype.toString.call($)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=$.length,k=!1;if(!R)return this.resolve([]);for(var v=new Array(R),w=0,x=-1,S=new this(b);++x<R;)T($[x],x);return S;function T(L,j){C.resolve(L).then(function(U){v[j]=U,++w!==R||k||(k=!0,y.resolve(S,v))},function(U){k||(k=!0,y.reject(S,U))})}},D.race=function($){if(Object.prototype.toString.call($)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=$.length,R=!1;if(!C)return this.resolve([]);for(var k,v=-1,w=new this(b);++v<C;)k=$[v],this.resolve(k).then(function(x){R||(R=!0,y.resolve(w,x))},function(x){R||(R=!0,y.reject(w,x))});return w}},{immediate:36}],38:[function(h,p,m){var f={};(0,h("./lib/utils/common").assign)(f,h("./lib/deflate"),h("./lib/inflate"),h("./lib/zlib/constants")),p.exports=f},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(h,p,m){var f=h("./zlib/deflate"),b=h("./utils/common"),y=h("./utils/strings"),_=h("./zlib/messages"),E=h("./zlib/zstream"),M=Object.prototype.toString;function D(O){if(!(this instanceof D))return new D(O);this.options=b.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},O||{});var N=this.options;N.raw&&0<N.windowBits?N.windowBits=-N.windowBits:N.gzip&&0<N.windowBits&&N.windowBits<16&&(N.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new E,this.strm.avail_out=0;var B=f.deflateInit2(this.strm,N.level,N.method,N.windowBits,N.memLevel,N.strategy);if(B!==0)throw new Error(_[B]);if(N.header&&f.deflateSetHeader(this.strm,N.header),N.dictionary){var H;if(H=typeof N.dictionary=="string"?y.string2buf(N.dictionary):M.call(N.dictionary)==="[object ArrayBuffer]"?new Uint8Array(N.dictionary):N.dictionary,(B=f.deflateSetDictionary(this.strm,H))!==0)throw new Error(_[B]);this._dict_set=!0}}function z(O,N){var B=new D(N);if(B.push(O,!0),B.err)throw B.msg||_[B.err];return B.result}D.prototype.push=function(O,N){var B,H,$=this.strm,C=this.options.chunkSize;if(this.ended)return!1;H=N===~~N?N:N===!0?4:0,typeof O=="string"?$.input=y.string2buf(O):M.call(O)==="[object ArrayBuffer]"?$.input=new Uint8Array(O):$.input=O,$.next_in=0,$.avail_in=$.input.length;do{if($.avail_out===0&&($.output=new b.Buf8(C),$.next_out=0,$.avail_out=C),(B=f.deflate($,H))!==1&&B!==0)return this.onEnd(B),!(this.ended=!0);$.avail_out!==0&&($.avail_in!==0||H!==4&&H!==2)||(this.options.to==="string"?this.onData(y.buf2binstring(b.shrinkBuf($.output,$.next_out))):this.onData(b.shrinkBuf($.output,$.next_out)))}while((0<$.avail_in||$.avail_out===0)&&B!==1);return H===4?(B=f.deflateEnd(this.strm),this.onEnd(B),this.ended=!0,B===0):H!==2||(this.onEnd(0),!($.avail_out=0))},D.prototype.onData=function(O){this.chunks.push(O)},D.prototype.onEnd=function(O){O===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=b.flattenChunks(this.chunks)),this.chunks=[],this.err=O,this.msg=this.strm.msg},m.Deflate=D,m.deflate=z,m.deflateRaw=function(O,N){return(N=N||{}).raw=!0,z(O,N)},m.gzip=function(O,N){return(N=N||{}).gzip=!0,z(O,N)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(h,p,m){var f=h("./zlib/inflate"),b=h("./utils/common"),y=h("./utils/strings"),_=h("./zlib/constants"),E=h("./zlib/messages"),M=h("./zlib/zstream"),D=h("./zlib/gzheader"),z=Object.prototype.toString;function O(B){if(!(this instanceof O))return new O(B);this.options=b.assign({chunkSize:16384,windowBits:0,to:""},B||{});var H=this.options;H.raw&&0<=H.windowBits&&H.windowBits<16&&(H.windowBits=-H.windowBits,H.windowBits===0&&(H.windowBits=-15)),!(0<=H.windowBits&&H.windowBits<16)||B&&B.windowBits||(H.windowBits+=32),15<H.windowBits&&H.windowBits<48&&(15&H.windowBits)==0&&(H.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new M,this.strm.avail_out=0;var $=f.inflateInit2(this.strm,H.windowBits);if($!==_.Z_OK)throw new Error(E[$]);this.header=new D,f.inflateGetHeader(this.strm,this.header)}function N(B,H){var $=new O(H);if($.push(B,!0),$.err)throw $.msg||E[$.err];return $.result}O.prototype.push=function(B,H){var $,C,R,k,v,w,x=this.strm,S=this.options.chunkSize,T=this.options.dictionary,L=!1;if(this.ended)return!1;C=H===~~H?H:H===!0?_.Z_FINISH:_.Z_NO_FLUSH,typeof B=="string"?x.input=y.binstring2buf(B):z.call(B)==="[object ArrayBuffer]"?x.input=new Uint8Array(B):x.input=B,x.next_in=0,x.avail_in=x.input.length;do{if(x.avail_out===0&&(x.output=new b.Buf8(S),x.next_out=0,x.avail_out=S),($=f.inflate(x,_.Z_NO_FLUSH))===_.Z_NEED_DICT&&T&&(w=typeof T=="string"?y.string2buf(T):z.call(T)==="[object ArrayBuffer]"?new Uint8Array(T):T,$=f.inflateSetDictionary(this.strm,w)),$===_.Z_BUF_ERROR&&L===!0&&($=_.Z_OK,L=!1),$!==_.Z_STREAM_END&&$!==_.Z_OK)return this.onEnd($),!(this.ended=!0);x.next_out&&(x.avail_out!==0&&$!==_.Z_STREAM_END&&(x.avail_in!==0||C!==_.Z_FINISH&&C!==_.Z_SYNC_FLUSH)||(this.options.to==="string"?(R=y.utf8border(x.output,x.next_out),k=x.next_out-R,v=y.buf2string(x.output,R),x.next_out=k,x.avail_out=S-k,k&&b.arraySet(x.output,x.output,R,k,0),this.onData(v)):this.onData(b.shrinkBuf(x.output,x.next_out)))),x.avail_in===0&&x.avail_out===0&&(L=!0)}while((0<x.avail_in||x.avail_out===0)&&$!==_.Z_STREAM_END);return $===_.Z_STREAM_END&&(C=_.Z_FINISH),C===_.Z_FINISH?($=f.inflateEnd(this.strm),this.onEnd($),this.ended=!0,$===_.Z_OK):C!==_.Z_SYNC_FLUSH||(this.onEnd(_.Z_OK),!(x.avail_out=0))},O.prototype.onData=function(B){this.chunks.push(B)},O.prototype.onEnd=function(B){B===_.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=b.flattenChunks(this.chunks)),this.chunks=[],this.err=B,this.msg=this.strm.msg},m.Inflate=O,m.inflate=N,m.inflateRaw=function(B,H){return(H=H||{}).raw=!0,N(B,H)},m.ungzip=N},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(h,p,m){var f=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";m.assign=function(_){for(var E=Array.prototype.slice.call(arguments,1);E.length;){var M=E.shift();if(M){if(typeof M!="object")throw new TypeError(M+"must be non-object");for(var D in M)M.hasOwnProperty(D)&&(_[D]=M[D])}}return _},m.shrinkBuf=function(_,E){return _.length===E?_:_.subarray?_.subarray(0,E):(_.length=E,_)};var b={arraySet:function(_,E,M,D,z){if(E.subarray&&_.subarray)_.set(E.subarray(M,M+D),z);else for(var O=0;O<D;O++)_[z+O]=E[M+O]},flattenChunks:function(_){var E,M,D,z,O,N;for(E=D=0,M=_.length;E<M;E++)D+=_[E].length;for(N=new Uint8Array(D),E=z=0,M=_.length;E<M;E++)O=_[E],N.set(O,z),z+=O.length;return N}},y={arraySet:function(_,E,M,D,z){for(var O=0;O<D;O++)_[z+O]=E[M+O]},flattenChunks:function(_){return[].concat.apply([],_)}};m.setTyped=function(_){_?(m.Buf8=Uint8Array,m.Buf16=Uint16Array,m.Buf32=Int32Array,m.assign(m,b)):(m.Buf8=Array,m.Buf16=Array,m.Buf32=Array,m.assign(m,y))},m.setTyped(f)},{}],42:[function(h,p,m){var f=h("./common"),b=!0,y=!0;try{String.fromCharCode.apply(null,[0])}catch{b=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{y=!1}for(var _=new f.Buf8(256),E=0;E<256;E++)_[E]=252<=E?6:248<=E?5:240<=E?4:224<=E?3:192<=E?2:1;function M(D,z){if(z<65537&&(D.subarray&&y||!D.subarray&&b))return String.fromCharCode.apply(null,f.shrinkBuf(D,z));for(var O="",N=0;N<z;N++)O+=String.fromCharCode(D[N]);return O}_[254]=_[254]=1,m.string2buf=function(D){var z,O,N,B,H,$=D.length,C=0;for(B=0;B<$;B++)(64512&(O=D.charCodeAt(B)))==55296&&B+1<$&&(64512&(N=D.charCodeAt(B+1)))==56320&&(O=65536+(O-55296<<10)+(N-56320),B++),C+=O<128?1:O<2048?2:O<65536?3:4;for(z=new f.Buf8(C),B=H=0;H<C;B++)(64512&(O=D.charCodeAt(B)))==55296&&B+1<$&&(64512&(N=D.charCodeAt(B+1)))==56320&&(O=65536+(O-55296<<10)+(N-56320),B++),O<128?z[H++]=O:(O<2048?z[H++]=192|O>>>6:(O<65536?z[H++]=224|O>>>12:(z[H++]=240|O>>>18,z[H++]=128|O>>>12&63),z[H++]=128|O>>>6&63),z[H++]=128|63&O);return z},m.buf2binstring=function(D){return M(D,D.length)},m.binstring2buf=function(D){for(var z=new f.Buf8(D.length),O=0,N=z.length;O<N;O++)z[O]=D.charCodeAt(O);return z},m.buf2string=function(D,z){var O,N,B,H,$=z||D.length,C=new Array(2*$);for(O=N=0;O<$;)if((B=D[O++])<128)C[N++]=B;else if(4<(H=_[B]))C[N++]=65533,O+=H-1;else{for(B&=H===2?31:H===3?15:7;1<H&&O<$;)B=B<<6|63&D[O++],H--;1<H?C[N++]=65533:B<65536?C[N++]=B:(B-=65536,C[N++]=55296|B>>10&1023,C[N++]=56320|1023&B)}return M(C,N)},m.utf8border=function(D,z){var O;for((z=z||D.length)>D.length&&(z=D.length),O=z-1;0<=O&&(192&D[O])==128;)O--;return O<0||O===0?z:O+_[D[O]]>z?O:z}},{"./common":41}],43:[function(h,p,m){p.exports=function(f,b,y,_){for(var E=65535&f|0,M=f>>>16&65535|0,D=0;y!==0;){for(y-=D=2e3<y?2e3:y;M=M+(E=E+b[_++]|0)|0,--D;);E%=65521,M%=65521}return E|M<<16|0}},{}],44:[function(h,p,m){p.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(h,p,m){var f=function(){for(var b,y=[],_=0;_<256;_++){b=_;for(var E=0;E<8;E++)b=1&b?3988292384^b>>>1:b>>>1;y[_]=b}return y}();p.exports=function(b,y,_,E){var M=f,D=E+_;b^=-1;for(var z=E;z<D;z++)b=b>>>8^M[255&(b^y[z])];return-1^b}},{}],46:[function(h,p,m){var f,b=h("../utils/common"),y=h("./trees"),_=h("./adler32"),E=h("./crc32"),M=h("./messages"),D=-2,z=258,O=262,N=113;function B(F,X){return F.msg=M[X],X}function H(F){return(F<<1)-(4<F?9:0)}function $(F){for(var X=F.length;0<=--X;)F[X]=0}function C(F){var X=F.state,P=X.pending;P>F.avail_out&&(P=F.avail_out),P!==0&&(b.arraySet(F.output,X.pending_buf,X.pending_out,P,F.next_out),F.next_out+=P,X.pending_out+=P,F.total_out+=P,F.avail_out-=P,X.pending-=P,X.pending===0&&(X.pending_out=0))}function R(F,X){y._tr_flush_block(F,0<=F.block_start?F.block_start:-1,F.strstart-F.block_start,X),F.block_start=F.strstart,C(F.strm)}function k(F,X){F.pending_buf[F.pending++]=X}function v(F,X){F.pending_buf[F.pending++]=X>>>8&255,F.pending_buf[F.pending++]=255&X}function w(F,X){var P,I,V=F.max_chain_length,Q=F.strstart,G=F.prev_length,q=F.nice_match,J=F.strstart>F.w_size-O?F.strstart-(F.w_size-O):0,it=F.window,nt=F.w_mask,Z=F.prev,st=F.strstart+z,rt=it[Q+G-1],lt=it[Q+G];F.prev_length>=F.good_match&&(V>>=2),q>F.lookahead&&(q=F.lookahead);do if(it[(P=X)+G]===lt&&it[P+G-1]===rt&&it[P]===it[Q]&&it[++P]===it[Q+1]){Q+=2,P++;do;while(it[++Q]===it[++P]&&it[++Q]===it[++P]&&it[++Q]===it[++P]&&it[++Q]===it[++P]&&it[++Q]===it[++P]&&it[++Q]===it[++P]&&it[++Q]===it[++P]&&it[++Q]===it[++P]&&Q<st);if(I=z-(st-Q),Q=st-z,G<I){if(F.match_start=X,q<=(G=I))break;rt=it[Q+G-1],lt=it[Q+G]}}while((X=Z[X&nt])>J&&--V!=0);return G<=F.lookahead?G:F.lookahead}function x(F){var X,P,I,V,Q,G,q,J,it,nt,Z=F.w_size;do{if(V=F.window_size-F.lookahead-F.strstart,F.strstart>=Z+(Z-O)){for(b.arraySet(F.window,F.window,Z,Z,0),F.match_start-=Z,F.strstart-=Z,F.block_start-=Z,X=P=F.hash_size;I=F.head[--X],F.head[X]=Z<=I?I-Z:0,--P;);for(X=P=Z;I=F.prev[--X],F.prev[X]=Z<=I?I-Z:0,--P;);V+=Z}if(F.strm.avail_in===0)break;if(G=F.strm,q=F.window,J=F.strstart+F.lookahead,nt=void 0,(it=V)<(nt=G.avail_in)&&(nt=it),P=nt===0?0:(G.avail_in-=nt,b.arraySet(q,G.input,G.next_in,nt,J),G.state.wrap===1?G.adler=_(G.adler,q,nt,J):G.state.wrap===2&&(G.adler=E(G.adler,q,nt,J)),G.next_in+=nt,G.total_in+=nt,nt),F.lookahead+=P,F.lookahead+F.insert>=3)for(Q=F.strstart-F.insert,F.ins_h=F.window[Q],F.ins_h=(F.ins_h<<F.hash_shift^F.window[Q+1])&F.hash_mask;F.insert&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[Q+3-1])&F.hash_mask,F.prev[Q&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=Q,Q++,F.insert--,!(F.lookahead+F.insert<3)););}while(F.lookahead<O&&F.strm.avail_in!==0)}function S(F,X){for(var P,I;;){if(F.lookahead<O){if(x(F),F.lookahead<O&&X===0)return 1;if(F.lookahead===0)break}if(P=0,F.lookahead>=3&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+3-1])&F.hash_mask,P=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart),P!==0&&F.strstart-P<=F.w_size-O&&(F.match_length=w(F,P)),F.match_length>=3)if(I=y._tr_tally(F,F.strstart-F.match_start,F.match_length-3),F.lookahead-=F.match_length,F.match_length<=F.max_lazy_match&&F.lookahead>=3){for(F.match_length--;F.strstart++,F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+3-1])&F.hash_mask,P=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart,--F.match_length!=0;);F.strstart++}else F.strstart+=F.match_length,F.match_length=0,F.ins_h=F.window[F.strstart],F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+1])&F.hash_mask;else I=y._tr_tally(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++;if(I&&(R(F,!1),F.strm.avail_out===0))return 1}return F.insert=F.strstart<2?F.strstart:2,X===4?(R(F,!0),F.strm.avail_out===0?3:4):F.last_lit&&(R(F,!1),F.strm.avail_out===0)?1:2}function T(F,X){for(var P,I,V;;){if(F.lookahead<O){if(x(F),F.lookahead<O&&X===0)return 1;if(F.lookahead===0)break}if(P=0,F.lookahead>=3&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+3-1])&F.hash_mask,P=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart),F.prev_length=F.match_length,F.prev_match=F.match_start,F.match_length=2,P!==0&&F.prev_length<F.max_lazy_match&&F.strstart-P<=F.w_size-O&&(F.match_length=w(F,P),F.match_length<=5&&(F.strategy===1||F.match_length===3&&4096<F.strstart-F.match_start)&&(F.match_length=2)),F.prev_length>=3&&F.match_length<=F.prev_length){for(V=F.strstart+F.lookahead-3,I=y._tr_tally(F,F.strstart-1-F.prev_match,F.prev_length-3),F.lookahead-=F.prev_length-1,F.prev_length-=2;++F.strstart<=V&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+3-1])&F.hash_mask,P=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart),--F.prev_length!=0;);if(F.match_available=0,F.match_length=2,F.strstart++,I&&(R(F,!1),F.strm.avail_out===0))return 1}else if(F.match_available){if((I=y._tr_tally(F,0,F.window[F.strstart-1]))&&R(F,!1),F.strstart++,F.lookahead--,F.strm.avail_out===0)return 1}else F.match_available=1,F.strstart++,F.lookahead--}return F.match_available&&(I=y._tr_tally(F,0,F.window[F.strstart-1]),F.match_available=0),F.insert=F.strstart<2?F.strstart:2,X===4?(R(F,!0),F.strm.avail_out===0?3:4):F.last_lit&&(R(F,!1),F.strm.avail_out===0)?1:2}function L(F,X,P,I,V){this.good_length=F,this.max_lazy=X,this.nice_length=P,this.max_chain=I,this.func=V}function j(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new b.Buf16(1146),this.dyn_dtree=new b.Buf16(122),this.bl_tree=new b.Buf16(78),$(this.dyn_ltree),$(this.dyn_dtree),$(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new b.Buf16(16),this.heap=new b.Buf16(573),$(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new b.Buf16(573),$(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function U(F){var X;return F&&F.state?(F.total_in=F.total_out=0,F.data_type=2,(X=F.state).pending=0,X.pending_out=0,X.wrap<0&&(X.wrap=-X.wrap),X.status=X.wrap?42:N,F.adler=X.wrap===2?0:1,X.last_flush=0,y._tr_init(X),0):B(F,D)}function W(F){var X=U(F);return X===0&&function(P){P.window_size=2*P.w_size,$(P.head),P.max_lazy_match=f[P.level].max_lazy,P.good_match=f[P.level].good_length,P.nice_match=f[P.level].nice_length,P.max_chain_length=f[P.level].max_chain,P.strstart=0,P.block_start=0,P.lookahead=0,P.insert=0,P.match_length=P.prev_length=2,P.match_available=0,P.ins_h=0}(F.state),X}function Y(F,X,P,I,V,Q){if(!F)return D;var G=1;if(X===-1&&(X=6),I<0?(G=0,I=-I):15<I&&(G=2,I-=16),V<1||9<V||P!==8||I<8||15<I||X<0||9<X||Q<0||4<Q)return B(F,D);I===8&&(I=9);var q=new j;return(F.state=q).strm=F,q.wrap=G,q.gzhead=null,q.w_bits=I,q.w_size=1<<q.w_bits,q.w_mask=q.w_size-1,q.hash_bits=V+7,q.hash_size=1<<q.hash_bits,q.hash_mask=q.hash_size-1,q.hash_shift=~~((q.hash_bits+3-1)/3),q.window=new b.Buf8(2*q.w_size),q.head=new b.Buf16(q.hash_size),q.prev=new b.Buf16(q.w_size),q.lit_bufsize=1<<V+6,q.pending_buf_size=4*q.lit_bufsize,q.pending_buf=new b.Buf8(q.pending_buf_size),q.d_buf=1*q.lit_bufsize,q.l_buf=3*q.lit_bufsize,q.level=X,q.strategy=Q,q.method=P,W(F)}f=[new L(0,0,0,0,function(F,X){var P=65535;for(P>F.pending_buf_size-5&&(P=F.pending_buf_size-5);;){if(F.lookahead<=1){if(x(F),F.lookahead===0&&X===0)return 1;if(F.lookahead===0)break}F.strstart+=F.lookahead,F.lookahead=0;var I=F.block_start+P;if((F.strstart===0||F.strstart>=I)&&(F.lookahead=F.strstart-I,F.strstart=I,R(F,!1),F.strm.avail_out===0)||F.strstart-F.block_start>=F.w_size-O&&(R(F,!1),F.strm.avail_out===0))return 1}return F.insert=0,X===4?(R(F,!0),F.strm.avail_out===0?3:4):(F.strstart>F.block_start&&(R(F,!1),F.strm.avail_out),1)}),new L(4,4,8,4,S),new L(4,5,16,8,S),new L(4,6,32,32,S),new L(4,4,16,16,T),new L(8,16,32,32,T),new L(8,16,128,128,T),new L(8,32,128,256,T),new L(32,128,258,1024,T),new L(32,258,258,4096,T)],m.deflateInit=function(F,X){return Y(F,X,8,15,8,0)},m.deflateInit2=Y,m.deflateReset=W,m.deflateResetKeep=U,m.deflateSetHeader=function(F,X){return F&&F.state?F.state.wrap!==2?D:(F.state.gzhead=X,0):D},m.deflate=function(F,X){var P,I,V,Q;if(!F||!F.state||5<X||X<0)return F?B(F,D):D;if(I=F.state,!F.output||!F.input&&F.avail_in!==0||I.status===666&&X!==4)return B(F,F.avail_out===0?-5:D);if(I.strm=F,P=I.last_flush,I.last_flush=X,I.status===42)if(I.wrap===2)F.adler=0,k(I,31),k(I,139),k(I,8),I.gzhead?(k(I,(I.gzhead.text?1:0)+(I.gzhead.hcrc?2:0)+(I.gzhead.extra?4:0)+(I.gzhead.name?8:0)+(I.gzhead.comment?16:0)),k(I,255&I.gzhead.time),k(I,I.gzhead.time>>8&255),k(I,I.gzhead.time>>16&255),k(I,I.gzhead.time>>24&255),k(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),k(I,255&I.gzhead.os),I.gzhead.extra&&I.gzhead.extra.length&&(k(I,255&I.gzhead.extra.length),k(I,I.gzhead.extra.length>>8&255)),I.gzhead.hcrc&&(F.adler=E(F.adler,I.pending_buf,I.pending,0)),I.gzindex=0,I.status=69):(k(I,0),k(I,0),k(I,0),k(I,0),k(I,0),k(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),k(I,3),I.status=N);else{var G=8+(I.w_bits-8<<4)<<8;G|=(2<=I.strategy||I.level<2?0:I.level<6?1:I.level===6?2:3)<<6,I.strstart!==0&&(G|=32),G+=31-G%31,I.status=N,v(I,G),I.strstart!==0&&(v(I,F.adler>>>16),v(I,65535&F.adler)),F.adler=1}if(I.status===69)if(I.gzhead.extra){for(V=I.pending;I.gzindex<(65535&I.gzhead.extra.length)&&(I.pending!==I.pending_buf_size||(I.gzhead.hcrc&&I.pending>V&&(F.adler=E(F.adler,I.pending_buf,I.pending-V,V)),C(F),V=I.pending,I.pending!==I.pending_buf_size));)k(I,255&I.gzhead.extra[I.gzindex]),I.gzindex++;I.gzhead.hcrc&&I.pending>V&&(F.adler=E(F.adler,I.pending_buf,I.pending-V,V)),I.gzindex===I.gzhead.extra.length&&(I.gzindex=0,I.status=73)}else I.status=73;if(I.status===73)if(I.gzhead.name){V=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>V&&(F.adler=E(F.adler,I.pending_buf,I.pending-V,V)),C(F),V=I.pending,I.pending===I.pending_buf_size)){Q=1;break}Q=I.gzindex<I.gzhead.name.length?255&I.gzhead.name.charCodeAt(I.gzindex++):0,k(I,Q)}while(Q!==0);I.gzhead.hcrc&&I.pending>V&&(F.adler=E(F.adler,I.pending_buf,I.pending-V,V)),Q===0&&(I.gzindex=0,I.status=91)}else I.status=91;if(I.status===91)if(I.gzhead.comment){V=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>V&&(F.adler=E(F.adler,I.pending_buf,I.pending-V,V)),C(F),V=I.pending,I.pending===I.pending_buf_size)){Q=1;break}Q=I.gzindex<I.gzhead.comment.length?255&I.gzhead.comment.charCodeAt(I.gzindex++):0,k(I,Q)}while(Q!==0);I.gzhead.hcrc&&I.pending>V&&(F.adler=E(F.adler,I.pending_buf,I.pending-V,V)),Q===0&&(I.status=103)}else I.status=103;if(I.status===103&&(I.gzhead.hcrc?(I.pending+2>I.pending_buf_size&&C(F),I.pending+2<=I.pending_buf_size&&(k(I,255&F.adler),k(I,F.adler>>8&255),F.adler=0,I.status=N)):I.status=N),I.pending!==0){if(C(F),F.avail_out===0)return I.last_flush=-1,0}else if(F.avail_in===0&&H(X)<=H(P)&&X!==4)return B(F,-5);if(I.status===666&&F.avail_in!==0)return B(F,-5);if(F.avail_in!==0||I.lookahead!==0||X!==0&&I.status!==666){var q=I.strategy===2?function(J,it){for(var nt;;){if(J.lookahead===0&&(x(J),J.lookahead===0)){if(it===0)return 1;break}if(J.match_length=0,nt=y._tr_tally(J,0,J.window[J.strstart]),J.lookahead--,J.strstart++,nt&&(R(J,!1),J.strm.avail_out===0))return 1}return J.insert=0,it===4?(R(J,!0),J.strm.avail_out===0?3:4):J.last_lit&&(R(J,!1),J.strm.avail_out===0)?1:2}(I,X):I.strategy===3?function(J,it){for(var nt,Z,st,rt,lt=J.window;;){if(J.lookahead<=z){if(x(J),J.lookahead<=z&&it===0)return 1;if(J.lookahead===0)break}if(J.match_length=0,J.lookahead>=3&&0<J.strstart&&(Z=lt[st=J.strstart-1])===lt[++st]&&Z===lt[++st]&&Z===lt[++st]){rt=J.strstart+z;do;while(Z===lt[++st]&&Z===lt[++st]&&Z===lt[++st]&&Z===lt[++st]&&Z===lt[++st]&&Z===lt[++st]&&Z===lt[++st]&&Z===lt[++st]&&st<rt);J.match_length=z-(rt-st),J.match_length>J.lookahead&&(J.match_length=J.lookahead)}if(J.match_length>=3?(nt=y._tr_tally(J,1,J.match_length-3),J.lookahead-=J.match_length,J.strstart+=J.match_length,J.match_length=0):(nt=y._tr_tally(J,0,J.window[J.strstart]),J.lookahead--,J.strstart++),nt&&(R(J,!1),J.strm.avail_out===0))return 1}return J.insert=0,it===4?(R(J,!0),J.strm.avail_out===0?3:4):J.last_lit&&(R(J,!1),J.strm.avail_out===0)?1:2}(I,X):f[I.level].func(I,X);if(q!==3&&q!==4||(I.status=666),q===1||q===3)return F.avail_out===0&&(I.last_flush=-1),0;if(q===2&&(X===1?y._tr_align(I):X!==5&&(y._tr_stored_block(I,0,0,!1),X===3&&($(I.head),I.lookahead===0&&(I.strstart=0,I.block_start=0,I.insert=0))),C(F),F.avail_out===0))return I.last_flush=-1,0}return X!==4?0:I.wrap<=0?1:(I.wrap===2?(k(I,255&F.adler),k(I,F.adler>>8&255),k(I,F.adler>>16&255),k(I,F.adler>>24&255),k(I,255&F.total_in),k(I,F.total_in>>8&255),k(I,F.total_in>>16&255),k(I,F.total_in>>24&255)):(v(I,F.adler>>>16),v(I,65535&F.adler)),C(F),0<I.wrap&&(I.wrap=-I.wrap),I.pending!==0?0:1)},m.deflateEnd=function(F){var X;return F&&F.state?(X=F.state.status)!==42&&X!==69&&X!==73&&X!==91&&X!==103&&X!==N&&X!==666?B(F,D):(F.state=null,X===N?B(F,-3):0):D},m.deflateSetDictionary=function(F,X){var P,I,V,Q,G,q,J,it,nt=X.length;if(!F||!F.state||(Q=(P=F.state).wrap)===2||Q===1&&P.status!==42||P.lookahead)return D;for(Q===1&&(F.adler=_(F.adler,X,nt,0)),P.wrap=0,nt>=P.w_size&&(Q===0&&($(P.head),P.strstart=0,P.block_start=0,P.insert=0),it=new b.Buf8(P.w_size),b.arraySet(it,X,nt-P.w_size,P.w_size,0),X=it,nt=P.w_size),G=F.avail_in,q=F.next_in,J=F.input,F.avail_in=nt,F.next_in=0,F.input=X,x(P);P.lookahead>=3;){for(I=P.strstart,V=P.lookahead-2;P.ins_h=(P.ins_h<<P.hash_shift^P.window[I+3-1])&P.hash_mask,P.prev[I&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=I,I++,--V;);P.strstart=I,P.lookahead=2,x(P)}return P.strstart+=P.lookahead,P.block_start=P.strstart,P.insert=P.lookahead,P.lookahead=0,P.match_length=P.prev_length=2,P.match_available=0,F.next_in=q,F.input=J,F.avail_in=G,P.wrap=Q,0},m.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(h,p,m){p.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(h,p,m){p.exports=function(f,b){var y,_,E,M,D,z,O,N,B,H,$,C,R,k,v,w,x,S,T,L,j,U,W,Y,F;y=f.state,_=f.next_in,Y=f.input,E=_+(f.avail_in-5),M=f.next_out,F=f.output,D=M-(b-f.avail_out),z=M+(f.avail_out-257),O=y.dmax,N=y.wsize,B=y.whave,H=y.wnext,$=y.window,C=y.hold,R=y.bits,k=y.lencode,v=y.distcode,w=(1<<y.lenbits)-1,x=(1<<y.distbits)-1;t:do{R<15&&(C+=Y[_++]<<R,R+=8,C+=Y[_++]<<R,R+=8),S=k[C&w];e:for(;;){if(C>>>=T=S>>>24,R-=T,(T=S>>>16&255)==0)F[M++]=65535&S;else{if(!(16&T)){if((64&T)==0){S=k[(65535&S)+(C&(1<<T)-1)];continue e}if(32&T){y.mode=12;break t}f.msg="invalid literal/length code",y.mode=30;break t}L=65535&S,(T&=15)&&(R<T&&(C+=Y[_++]<<R,R+=8),L+=C&(1<<T)-1,C>>>=T,R-=T),R<15&&(C+=Y[_++]<<R,R+=8,C+=Y[_++]<<R,R+=8),S=v[C&x];r:for(;;){if(C>>>=T=S>>>24,R-=T,!(16&(T=S>>>16&255))){if((64&T)==0){S=v[(65535&S)+(C&(1<<T)-1)];continue r}f.msg="invalid distance code",y.mode=30;break t}if(j=65535&S,R<(T&=15)&&(C+=Y[_++]<<R,(R+=8)<T&&(C+=Y[_++]<<R,R+=8)),O<(j+=C&(1<<T)-1)){f.msg="invalid distance too far back",y.mode=30;break t}if(C>>>=T,R-=T,(T=M-D)<j){if(B<(T=j-T)&&y.sane){f.msg="invalid distance too far back",y.mode=30;break t}if(W=$,(U=0)===H){if(U+=N-T,T<L){for(L-=T;F[M++]=$[U++],--T;);U=M-j,W=F}}else if(H<T){if(U+=N+H-T,(T-=H)<L){for(L-=T;F[M++]=$[U++],--T;);if(U=0,H<L){for(L-=T=H;F[M++]=$[U++],--T;);U=M-j,W=F}}}else if(U+=H-T,T<L){for(L-=T;F[M++]=$[U++],--T;);U=M-j,W=F}for(;2<L;)F[M++]=W[U++],F[M++]=W[U++],F[M++]=W[U++],L-=3;L&&(F[M++]=W[U++],1<L&&(F[M++]=W[U++]))}else{for(U=M-j;F[M++]=F[U++],F[M++]=F[U++],F[M++]=F[U++],2<(L-=3););L&&(F[M++]=F[U++],1<L&&(F[M++]=F[U++]))}break}}break}}while(_<E&&M<z);_-=L=R>>3,C&=(1<<(R-=L<<3))-1,f.next_in=_,f.next_out=M,f.avail_in=_<E?E-_+5:5-(_-E),f.avail_out=M<z?z-M+257:257-(M-z),y.hold=C,y.bits=R}},{}],49:[function(h,p,m){var f=h("../utils/common"),b=h("./adler32"),y=h("./crc32"),_=h("./inffast"),E=h("./inftrees"),M=-2;function D(w){return(w>>>24&255)+(w>>>8&65280)+((65280&w)<<8)+((255&w)<<24)}function z(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new f.Buf16(320),this.work=new f.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function O(w){var x;return w&&w.state?(x=w.state,w.total_in=w.total_out=x.total=0,w.msg="",x.wrap&&(w.adler=1&x.wrap),x.mode=1,x.last=0,x.havedict=0,x.dmax=32768,x.head=null,x.hold=0,x.bits=0,x.lencode=x.lendyn=new f.Buf32(852),x.distcode=x.distdyn=new f.Buf32(592),x.sane=1,x.back=-1,0):M}function N(w){var x;return w&&w.state?((x=w.state).wsize=0,x.whave=0,x.wnext=0,O(w)):M}function B(w,x){var S,T;return w&&w.state?(T=w.state,x<0?(S=0,x=-x):(S=1+(x>>4),x<48&&(x&=15)),x&&(x<8||15<x)?M:(T.window!==null&&T.wbits!==x&&(T.window=null),T.wrap=S,T.wbits=x,N(w))):M}function H(w,x){var S,T;return w?(T=new z,(w.state=T).window=null,(S=B(w,x))!==0&&(w.state=null),S):M}var $,C,R=!0;function k(w){if(R){var x;for($=new f.Buf32(512),C=new f.Buf32(32),x=0;x<144;)w.lens[x++]=8;for(;x<256;)w.lens[x++]=9;for(;x<280;)w.lens[x++]=7;for(;x<288;)w.lens[x++]=8;for(E(1,w.lens,0,288,$,0,w.work,{bits:9}),x=0;x<32;)w.lens[x++]=5;E(2,w.lens,0,32,C,0,w.work,{bits:5}),R=!1}w.lencode=$,w.lenbits=9,w.distcode=C,w.distbits=5}function v(w,x,S,T){var L,j=w.state;return j.window===null&&(j.wsize=1<<j.wbits,j.wnext=0,j.whave=0,j.window=new f.Buf8(j.wsize)),T>=j.wsize?(f.arraySet(j.window,x,S-j.wsize,j.wsize,0),j.wnext=0,j.whave=j.wsize):(T<(L=j.wsize-j.wnext)&&(L=T),f.arraySet(j.window,x,S-T,L,j.wnext),(T-=L)?(f.arraySet(j.window,x,S-T,T,0),j.wnext=T,j.whave=j.wsize):(j.wnext+=L,j.wnext===j.wsize&&(j.wnext=0),j.whave<j.wsize&&(j.whave+=L))),0}m.inflateReset=N,m.inflateReset2=B,m.inflateResetKeep=O,m.inflateInit=function(w){return H(w,15)},m.inflateInit2=H,m.inflate=function(w,x){var S,T,L,j,U,W,Y,F,X,P,I,V,Q,G,q,J,it,nt,Z,st,rt,lt,at,ct,ut=0,dt=new f.Buf8(4),gt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!w||!w.state||!w.output||!w.input&&w.avail_in!==0)return M;(S=w.state).mode===12&&(S.mode=13),U=w.next_out,L=w.output,Y=w.avail_out,j=w.next_in,T=w.input,W=w.avail_in,F=S.hold,X=S.bits,P=W,I=Y,lt=0;t:for(;;)switch(S.mode){case 1:if(S.wrap===0){S.mode=13;break}for(;X<16;){if(W===0)break t;W--,F+=T[j++]<<X,X+=8}if(2&S.wrap&&F===35615){dt[S.check=0]=255&F,dt[1]=F>>>8&255,S.check=y(S.check,dt,2,0),X=F=0,S.mode=2;break}if(S.flags=0,S.head&&(S.head.done=!1),!(1&S.wrap)||(((255&F)<<8)+(F>>8))%31){w.msg="incorrect header check",S.mode=30;break}if((15&F)!=8){w.msg="unknown compression method",S.mode=30;break}if(X-=4,rt=8+(15&(F>>>=4)),S.wbits===0)S.wbits=rt;else if(rt>S.wbits){w.msg="invalid window size",S.mode=30;break}S.dmax=1<<rt,w.adler=S.check=1,S.mode=512&F?10:12,X=F=0;break;case 2:for(;X<16;){if(W===0)break t;W--,F+=T[j++]<<X,X+=8}if(S.flags=F,(255&S.flags)!=8){w.msg="unknown compression method",S.mode=30;break}if(57344&S.flags){w.msg="unknown header flags set",S.mode=30;break}S.head&&(S.head.text=F>>8&1),512&S.flags&&(dt[0]=255&F,dt[1]=F>>>8&255,S.check=y(S.check,dt,2,0)),X=F=0,S.mode=3;case 3:for(;X<32;){if(W===0)break t;W--,F+=T[j++]<<X,X+=8}S.head&&(S.head.time=F),512&S.flags&&(dt[0]=255&F,dt[1]=F>>>8&255,dt[2]=F>>>16&255,dt[3]=F>>>24&255,S.check=y(S.check,dt,4,0)),X=F=0,S.mode=4;case 4:for(;X<16;){if(W===0)break t;W--,F+=T[j++]<<X,X+=8}S.head&&(S.head.xflags=255&F,S.head.os=F>>8),512&S.flags&&(dt[0]=255&F,dt[1]=F>>>8&255,S.check=y(S.check,dt,2,0)),X=F=0,S.mode=5;case 5:if(1024&S.flags){for(;X<16;){if(W===0)break t;W--,F+=T[j++]<<X,X+=8}S.length=F,S.head&&(S.head.extra_len=F),512&S.flags&&(dt[0]=255&F,dt[1]=F>>>8&255,S.check=y(S.check,dt,2,0)),X=F=0}else S.head&&(S.head.extra=null);S.mode=6;case 6:if(1024&S.flags&&(W<(V=S.length)&&(V=W),V&&(S.head&&(rt=S.head.extra_len-S.length,S.head.extra||(S.head.extra=new Array(S.head.extra_len)),f.arraySet(S.head.extra,T,j,V,rt)),512&S.flags&&(S.check=y(S.check,T,V,j)),W-=V,j+=V,S.length-=V),S.length))break t;S.length=0,S.mode=7;case 7:if(2048&S.flags){if(W===0)break t;for(V=0;rt=T[j+V++],S.head&&rt&&S.length<65536&&(S.head.name+=String.fromCharCode(rt)),rt&&V<W;);if(512&S.flags&&(S.check=y(S.check,T,V,j)),W-=V,j+=V,rt)break t}else S.head&&(S.head.name=null);S.length=0,S.mode=8;case 8:if(4096&S.flags){if(W===0)break t;for(V=0;rt=T[j+V++],S.head&&rt&&S.length<65536&&(S.head.comment+=String.fromCharCode(rt)),rt&&V<W;);if(512&S.flags&&(S.check=y(S.check,T,V,j)),W-=V,j+=V,rt)break t}else S.head&&(S.head.comment=null);S.mode=9;case 9:if(512&S.flags){for(;X<16;){if(W===0)break t;W--,F+=T[j++]<<X,X+=8}if(F!==(65535&S.check)){w.msg="header crc mismatch",S.mode=30;break}X=F=0}S.head&&(S.head.hcrc=S.flags>>9&1,S.head.done=!0),w.adler=S.check=0,S.mode=12;break;case 10:for(;X<32;){if(W===0)break t;W--,F+=T[j++]<<X,X+=8}w.adler=S.check=D(F),X=F=0,S.mode=11;case 11:if(S.havedict===0)return w.next_out=U,w.avail_out=Y,w.next_in=j,w.avail_in=W,S.hold=F,S.bits=X,2;w.adler=S.check=1,S.mode=12;case 12:if(x===5||x===6)break t;case 13:if(S.last){F>>>=7&X,X-=7&X,S.mode=27;break}for(;X<3;){if(W===0)break t;W--,F+=T[j++]<<X,X+=8}switch(S.last=1&F,X-=1,3&(F>>>=1)){case 0:S.mode=14;break;case 1:if(k(S),S.mode=20,x!==6)break;F>>>=2,X-=2;break t;case 2:S.mode=17;break;case 3:w.msg="invalid block type",S.mode=30}F>>>=2,X-=2;break;case 14:for(F>>>=7&X,X-=7&X;X<32;){if(W===0)break t;W--,F+=T[j++]<<X,X+=8}if((65535&F)!=(F>>>16^65535)){w.msg="invalid stored block lengths",S.mode=30;break}if(S.length=65535&F,X=F=0,S.mode=15,x===6)break t;case 15:S.mode=16;case 16:if(V=S.length){if(W<V&&(V=W),Y<V&&(V=Y),V===0)break t;f.arraySet(L,T,j,V,U),W-=V,j+=V,Y-=V,U+=V,S.length-=V;break}S.mode=12;break;case 17:for(;X<14;){if(W===0)break t;W--,F+=T[j++]<<X,X+=8}if(S.nlen=257+(31&F),F>>>=5,X-=5,S.ndist=1+(31&F),F>>>=5,X-=5,S.ncode=4+(15&F),F>>>=4,X-=4,286<S.nlen||30<S.ndist){w.msg="too many length or distance symbols",S.mode=30;break}S.have=0,S.mode=18;case 18:for(;S.have<S.ncode;){for(;X<3;){if(W===0)break t;W--,F+=T[j++]<<X,X+=8}S.lens[gt[S.have++]]=7&F,F>>>=3,X-=3}for(;S.have<19;)S.lens[gt[S.have++]]=0;if(S.lencode=S.lendyn,S.lenbits=7,at={bits:S.lenbits},lt=E(0,S.lens,0,19,S.lencode,0,S.work,at),S.lenbits=at.bits,lt){w.msg="invalid code lengths set",S.mode=30;break}S.have=0,S.mode=19;case 19:for(;S.have<S.nlen+S.ndist;){for(;J=(ut=S.lencode[F&(1<<S.lenbits)-1])>>>16&255,it=65535&ut,!((q=ut>>>24)<=X);){if(W===0)break t;W--,F+=T[j++]<<X,X+=8}if(it<16)F>>>=q,X-=q,S.lens[S.have++]=it;else{if(it===16){for(ct=q+2;X<ct;){if(W===0)break t;W--,F+=T[j++]<<X,X+=8}if(F>>>=q,X-=q,S.have===0){w.msg="invalid bit length repeat",S.mode=30;break}rt=S.lens[S.have-1],V=3+(3&F),F>>>=2,X-=2}else if(it===17){for(ct=q+3;X<ct;){if(W===0)break t;W--,F+=T[j++]<<X,X+=8}X-=q,rt=0,V=3+(7&(F>>>=q)),F>>>=3,X-=3}else{for(ct=q+7;X<ct;){if(W===0)break t;W--,F+=T[j++]<<X,X+=8}X-=q,rt=0,V=11+(127&(F>>>=q)),F>>>=7,X-=7}if(S.have+V>S.nlen+S.ndist){w.msg="invalid bit length repeat",S.mode=30;break}for(;V--;)S.lens[S.have++]=rt}}if(S.mode===30)break;if(S.lens[256]===0){w.msg="invalid code -- missing end-of-block",S.mode=30;break}if(S.lenbits=9,at={bits:S.lenbits},lt=E(1,S.lens,0,S.nlen,S.lencode,0,S.work,at),S.lenbits=at.bits,lt){w.msg="invalid literal/lengths set",S.mode=30;break}if(S.distbits=6,S.distcode=S.distdyn,at={bits:S.distbits},lt=E(2,S.lens,S.nlen,S.ndist,S.distcode,0,S.work,at),S.distbits=at.bits,lt){w.msg="invalid distances set",S.mode=30;break}if(S.mode=20,x===6)break t;case 20:S.mode=21;case 21:if(6<=W&&258<=Y){w.next_out=U,w.avail_out=Y,w.next_in=j,w.avail_in=W,S.hold=F,S.bits=X,_(w,I),U=w.next_out,L=w.output,Y=w.avail_out,j=w.next_in,T=w.input,W=w.avail_in,F=S.hold,X=S.bits,S.mode===12&&(S.back=-1);break}for(S.back=0;J=(ut=S.lencode[F&(1<<S.lenbits)-1])>>>16&255,it=65535&ut,!((q=ut>>>24)<=X);){if(W===0)break t;W--,F+=T[j++]<<X,X+=8}if(J&&(240&J)==0){for(nt=q,Z=J,st=it;J=(ut=S.lencode[st+((F&(1<<nt+Z)-1)>>nt)])>>>16&255,it=65535&ut,!(nt+(q=ut>>>24)<=X);){if(W===0)break t;W--,F+=T[j++]<<X,X+=8}F>>>=nt,X-=nt,S.back+=nt}if(F>>>=q,X-=q,S.back+=q,S.length=it,J===0){S.mode=26;break}if(32&J){S.back=-1,S.mode=12;break}if(64&J){w.msg="invalid literal/length code",S.mode=30;break}S.extra=15&J,S.mode=22;case 22:if(S.extra){for(ct=S.extra;X<ct;){if(W===0)break t;W--,F+=T[j++]<<X,X+=8}S.length+=F&(1<<S.extra)-1,F>>>=S.extra,X-=S.extra,S.back+=S.extra}S.was=S.length,S.mode=23;case 23:for(;J=(ut=S.distcode[F&(1<<S.distbits)-1])>>>16&255,it=65535&ut,!((q=ut>>>24)<=X);){if(W===0)break t;W--,F+=T[j++]<<X,X+=8}if((240&J)==0){for(nt=q,Z=J,st=it;J=(ut=S.distcode[st+((F&(1<<nt+Z)-1)>>nt)])>>>16&255,it=65535&ut,!(nt+(q=ut>>>24)<=X);){if(W===0)break t;W--,F+=T[j++]<<X,X+=8}F>>>=nt,X-=nt,S.back+=nt}if(F>>>=q,X-=q,S.back+=q,64&J){w.msg="invalid distance code",S.mode=30;break}S.offset=it,S.extra=15&J,S.mode=24;case 24:if(S.extra){for(ct=S.extra;X<ct;){if(W===0)break t;W--,F+=T[j++]<<X,X+=8}S.offset+=F&(1<<S.extra)-1,F>>>=S.extra,X-=S.extra,S.back+=S.extra}if(S.offset>S.dmax){w.msg="invalid distance too far back",S.mode=30;break}S.mode=25;case 25:if(Y===0)break t;if(V=I-Y,S.offset>V){if((V=S.offset-V)>S.whave&&S.sane){w.msg="invalid distance too far back",S.mode=30;break}Q=V>S.wnext?(V-=S.wnext,S.wsize-V):S.wnext-V,V>S.length&&(V=S.length),G=S.window}else G=L,Q=U-S.offset,V=S.length;for(Y<V&&(V=Y),Y-=V,S.length-=V;L[U++]=G[Q++],--V;);S.length===0&&(S.mode=21);break;case 26:if(Y===0)break t;L[U++]=S.length,Y--,S.mode=21;break;case 27:if(S.wrap){for(;X<32;){if(W===0)break t;W--,F|=T[j++]<<X,X+=8}if(I-=Y,w.total_out+=I,S.total+=I,I&&(w.adler=S.check=S.flags?y(S.check,L,I,U-I):b(S.check,L,I,U-I)),I=Y,(S.flags?F:D(F))!==S.check){w.msg="incorrect data check",S.mode=30;break}X=F=0}S.mode=28;case 28:if(S.wrap&&S.flags){for(;X<32;){if(W===0)break t;W--,F+=T[j++]<<X,X+=8}if(F!==(4294967295&S.total)){w.msg="incorrect length check",S.mode=30;break}X=F=0}S.mode=29;case 29:lt=1;break t;case 30:lt=-3;break t;case 31:return-4;case 32:default:return M}return w.next_out=U,w.avail_out=Y,w.next_in=j,w.avail_in=W,S.hold=F,S.bits=X,(S.wsize||I!==w.avail_out&&S.mode<30&&(S.mode<27||x!==4))&&v(w,w.output,w.next_out,I-w.avail_out)?(S.mode=31,-4):(P-=w.avail_in,I-=w.avail_out,w.total_in+=P,w.total_out+=I,S.total+=I,S.wrap&&I&&(w.adler=S.check=S.flags?y(S.check,L,I,w.next_out-I):b(S.check,L,I,w.next_out-I)),w.data_type=S.bits+(S.last?64:0)+(S.mode===12?128:0)+(S.mode===20||S.mode===15?256:0),(P==0&&I===0||x===4)&&lt===0&&(lt=-5),lt)},m.inflateEnd=function(w){if(!w||!w.state)return M;var x=w.state;return x.window&&(x.window=null),w.state=null,0},m.inflateGetHeader=function(w,x){var S;return w&&w.state?(2&(S=w.state).wrap)==0?M:((S.head=x).done=!1,0):M},m.inflateSetDictionary=function(w,x){var S,T=x.length;return w&&w.state?(S=w.state).wrap!==0&&S.mode!==11?M:S.mode===11&&b(1,x,T,0)!==S.check?-3:v(w,x,T,T)?(S.mode=31,-4):(S.havedict=1,0):M},m.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(h,p,m){var f=h("../utils/common"),b=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],y=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],_=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],E=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];p.exports=function(M,D,z,O,N,B,H,$){var C,R,k,v,w,x,S,T,L,j=$.bits,U=0,W=0,Y=0,F=0,X=0,P=0,I=0,V=0,Q=0,G=0,q=null,J=0,it=new f.Buf16(16),nt=new f.Buf16(16),Z=null,st=0;for(U=0;U<=15;U++)it[U]=0;for(W=0;W<O;W++)it[D[z+W]]++;for(X=j,F=15;1<=F&&it[F]===0;F--);if(F<X&&(X=F),F===0)return N[B++]=20971520,N[B++]=20971520,$.bits=1,0;for(Y=1;Y<F&&it[Y]===0;Y++);for(X<Y&&(X=Y),U=V=1;U<=15;U++)if(V<<=1,(V-=it[U])<0)return-1;if(0<V&&(M===0||F!==1))return-1;for(nt[1]=0,U=1;U<15;U++)nt[U+1]=nt[U]+it[U];for(W=0;W<O;W++)D[z+W]!==0&&(H[nt[D[z+W]]++]=W);if(x=M===0?(q=Z=H,19):M===1?(q=b,J-=257,Z=y,st-=257,256):(q=_,Z=E,-1),U=Y,w=B,I=W=G=0,k=-1,v=(Q=1<<(P=X))-1,M===1&&852<Q||M===2&&592<Q)return 1;for(;;){for(S=U-I,L=H[W]<x?(T=0,H[W]):H[W]>x?(T=Z[st+H[W]],q[J+H[W]]):(T=96,0),C=1<<U-I,Y=R=1<<P;N[w+(G>>I)+(R-=C)]=S<<24|T<<16|L|0,R!==0;);for(C=1<<U-1;G&C;)C>>=1;if(C!==0?(G&=C-1,G+=C):G=0,W++,--it[U]==0){if(U===F)break;U=D[z+H[W]]}if(X<U&&(G&v)!==k){for(I===0&&(I=X),w+=Y,V=1<<(P=U-I);P+I<F&&!((V-=it[P+I])<=0);)P++,V<<=1;if(Q+=1<<P,M===1&&852<Q||M===2&&592<Q)return 1;N[k=G&v]=X<<24|P<<16|w-B|0}}return G!==0&&(N[w+G]=U-I<<24|64<<16|0),$.bits=X,0}},{"../utils/common":41}],51:[function(h,p,m){p.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(h,p,m){var f=h("../utils/common");function b(Z){for(var st=Z.length;0<=--st;)Z[st]=0}var y=256,_=286,E=30,M=15,D=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],B=new Array(576);b(B);var H=new Array(60);b(H);var $=new Array(512);b($);var C=new Array(256);b(C);var R=new Array(29);b(R);var k,v,w,x=new Array(E);function S(Z,st,rt,lt,at){this.static_tree=Z,this.extra_bits=st,this.extra_base=rt,this.elems=lt,this.max_length=at,this.has_stree=Z&&Z.length}function T(Z,st){this.dyn_tree=Z,this.max_code=0,this.stat_desc=st}function L(Z){return Z<256?$[Z]:$[256+(Z>>>7)]}function j(Z,st){Z.pending_buf[Z.pending++]=255&st,Z.pending_buf[Z.pending++]=st>>>8&255}function U(Z,st,rt){Z.bi_valid>16-rt?(Z.bi_buf|=st<<Z.bi_valid&65535,j(Z,Z.bi_buf),Z.bi_buf=st>>16-Z.bi_valid,Z.bi_valid+=rt-16):(Z.bi_buf|=st<<Z.bi_valid&65535,Z.bi_valid+=rt)}function W(Z,st,rt){U(Z,rt[2*st],rt[2*st+1])}function Y(Z,st){for(var rt=0;rt|=1&Z,Z>>>=1,rt<<=1,0<--st;);return rt>>>1}function F(Z,st,rt){var lt,at,ct=new Array(16),ut=0;for(lt=1;lt<=M;lt++)ct[lt]=ut=ut+rt[lt-1]<<1;for(at=0;at<=st;at++){var dt=Z[2*at+1];dt!==0&&(Z[2*at]=Y(ct[dt]++,dt))}}function X(Z){var st;for(st=0;st<_;st++)Z.dyn_ltree[2*st]=0;for(st=0;st<E;st++)Z.dyn_dtree[2*st]=0;for(st=0;st<19;st++)Z.bl_tree[2*st]=0;Z.dyn_ltree[512]=1,Z.opt_len=Z.static_len=0,Z.last_lit=Z.matches=0}function P(Z){8<Z.bi_valid?j(Z,Z.bi_buf):0<Z.bi_valid&&(Z.pending_buf[Z.pending++]=Z.bi_buf),Z.bi_buf=0,Z.bi_valid=0}function I(Z,st,rt,lt){var at=2*st,ct=2*rt;return Z[at]<Z[ct]||Z[at]===Z[ct]&&lt[st]<=lt[rt]}function V(Z,st,rt){for(var lt=Z.heap[rt],at=rt<<1;at<=Z.heap_len&&(at<Z.heap_len&&I(st,Z.heap[at+1],Z.heap[at],Z.depth)&&at++,!I(st,lt,Z.heap[at],Z.depth));)Z.heap[rt]=Z.heap[at],rt=at,at<<=1;Z.heap[rt]=lt}function Q(Z,st,rt){var lt,at,ct,ut,dt=0;if(Z.last_lit!==0)for(;lt=Z.pending_buf[Z.d_buf+2*dt]<<8|Z.pending_buf[Z.d_buf+2*dt+1],at=Z.pending_buf[Z.l_buf+dt],dt++,lt===0?W(Z,at,st):(W(Z,(ct=C[at])+y+1,st),(ut=D[ct])!==0&&U(Z,at-=R[ct],ut),W(Z,ct=L(--lt),rt),(ut=z[ct])!==0&&U(Z,lt-=x[ct],ut)),dt<Z.last_lit;);W(Z,256,st)}function G(Z,st){var rt,lt,at,ct=st.dyn_tree,ut=st.stat_desc.static_tree,dt=st.stat_desc.has_stree,gt=st.stat_desc.elems,vt=-1;for(Z.heap_len=0,Z.heap_max=573,rt=0;rt<gt;rt++)ct[2*rt]!==0?(Z.heap[++Z.heap_len]=vt=rt,Z.depth[rt]=0):ct[2*rt+1]=0;for(;Z.heap_len<2;)ct[2*(at=Z.heap[++Z.heap_len]=vt<2?++vt:0)]=1,Z.depth[at]=0,Z.opt_len--,dt&&(Z.static_len-=ut[2*at+1]);for(st.max_code=vt,rt=Z.heap_len>>1;1<=rt;rt--)V(Z,ct,rt);for(at=gt;rt=Z.heap[1],Z.heap[1]=Z.heap[Z.heap_len--],V(Z,ct,1),lt=Z.heap[1],Z.heap[--Z.heap_max]=rt,Z.heap[--Z.heap_max]=lt,ct[2*at]=ct[2*rt]+ct[2*lt],Z.depth[at]=(Z.depth[rt]>=Z.depth[lt]?Z.depth[rt]:Z.depth[lt])+1,ct[2*rt+1]=ct[2*lt+1]=at,Z.heap[1]=at++,V(Z,ct,1),2<=Z.heap_len;);Z.heap[--Z.heap_max]=Z.heap[1],function(_t,wt){var Ot,Pt,Dt,jt,Mt,St,kt=wt.dyn_tree,Nt=wt.max_code,Lt=wt.stat_desc.static_tree,be=wt.stat_desc.has_stree,Re=wt.stat_desc.extra_bits,qt=wt.stat_desc.extra_base,Ae=wt.stat_desc.max_length,me=0;for(jt=0;jt<=M;jt++)_t.bl_count[jt]=0;for(kt[2*_t.heap[_t.heap_max]+1]=0,Ot=_t.heap_max+1;Ot<573;Ot++)Ae<(jt=kt[2*kt[2*(Pt=_t.heap[Ot])+1]+1]+1)&&(jt=Ae,me++),kt[2*Pt+1]=jt,Nt<Pt||(_t.bl_count[jt]++,Mt=0,qt<=Pt&&(Mt=Re[Pt-qt]),St=kt[2*Pt],_t.opt_len+=St*(jt+Mt),be&&(_t.static_len+=St*(Lt[2*Pt+1]+Mt)));if(me!==0){do{for(jt=Ae-1;_t.bl_count[jt]===0;)jt--;_t.bl_count[jt]--,_t.bl_count[jt+1]+=2,_t.bl_count[Ae]--,me-=2}while(0<me);for(jt=Ae;jt!==0;jt--)for(Pt=_t.bl_count[jt];Pt!==0;)Nt<(Dt=_t.heap[--Ot])||(kt[2*Dt+1]!==jt&&(_t.opt_len+=(jt-kt[2*Dt+1])*kt[2*Dt],kt[2*Dt+1]=jt),Pt--)}}(Z,st),F(ct,vt,Z.bl_count)}function q(Z,st,rt){var lt,at,ct=-1,ut=st[1],dt=0,gt=7,vt=4;for(ut===0&&(gt=138,vt=3),st[2*(rt+1)+1]=65535,lt=0;lt<=rt;lt++)at=ut,ut=st[2*(lt+1)+1],++dt<gt&&at===ut||(dt<vt?Z.bl_tree[2*at]+=dt:at!==0?(at!==ct&&Z.bl_tree[2*at]++,Z.bl_tree[32]++):dt<=10?Z.bl_tree[34]++:Z.bl_tree[36]++,ct=at,vt=(dt=0)===ut?(gt=138,3):at===ut?(gt=6,3):(gt=7,4))}function J(Z,st,rt){var lt,at,ct=-1,ut=st[1],dt=0,gt=7,vt=4;for(ut===0&&(gt=138,vt=3),lt=0;lt<=rt;lt++)if(at=ut,ut=st[2*(lt+1)+1],!(++dt<gt&&at===ut)){if(dt<vt)for(;W(Z,at,Z.bl_tree),--dt!=0;);else at!==0?(at!==ct&&(W(Z,at,Z.bl_tree),dt--),W(Z,16,Z.bl_tree),U(Z,dt-3,2)):dt<=10?(W(Z,17,Z.bl_tree),U(Z,dt-3,3)):(W(Z,18,Z.bl_tree),U(Z,dt-11,7));ct=at,vt=(dt=0)===ut?(gt=138,3):at===ut?(gt=6,3):(gt=7,4)}}b(x);var it=!1;function nt(Z,st,rt,lt){U(Z,0+(lt?1:0),3),function(at,ct,ut,dt){P(at),j(at,ut),j(at,~ut),f.arraySet(at.pending_buf,at.window,ct,ut,at.pending),at.pending+=ut}(Z,st,rt)}m._tr_init=function(Z){it||(function(){var st,rt,lt,at,ct,ut=new Array(16);for(at=lt=0;at<28;at++)for(R[at]=lt,st=0;st<1<<D[at];st++)C[lt++]=at;for(C[lt-1]=at,at=ct=0;at<16;at++)for(x[at]=ct,st=0;st<1<<z[at];st++)$[ct++]=at;for(ct>>=7;at<E;at++)for(x[at]=ct<<7,st=0;st<1<<z[at]-7;st++)$[256+ct++]=at;for(rt=0;rt<=M;rt++)ut[rt]=0;for(st=0;st<=143;)B[2*st+1]=8,st++,ut[8]++;for(;st<=255;)B[2*st+1]=9,st++,ut[9]++;for(;st<=279;)B[2*st+1]=7,st++,ut[7]++;for(;st<=287;)B[2*st+1]=8,st++,ut[8]++;for(F(B,287,ut),st=0;st<E;st++)H[2*st+1]=5,H[2*st]=Y(st,5);k=new S(B,D,257,_,M),v=new S(H,z,0,E,M),w=new S(new Array(0),O,0,19,7)}(),it=!0),Z.l_desc=new T(Z.dyn_ltree,k),Z.d_desc=new T(Z.dyn_dtree,v),Z.bl_desc=new T(Z.bl_tree,w),Z.bi_buf=0,Z.bi_valid=0,X(Z)},m._tr_stored_block=nt,m._tr_flush_block=function(Z,st,rt,lt){var at,ct,ut=0;0<Z.level?(Z.strm.data_type===2&&(Z.strm.data_type=function(dt){var gt,vt=4093624447;for(gt=0;gt<=31;gt++,vt>>>=1)if(1&vt&&dt.dyn_ltree[2*gt]!==0)return 0;if(dt.dyn_ltree[18]!==0||dt.dyn_ltree[20]!==0||dt.dyn_ltree[26]!==0)return 1;for(gt=32;gt<y;gt++)if(dt.dyn_ltree[2*gt]!==0)return 1;return 0}(Z)),G(Z,Z.l_desc),G(Z,Z.d_desc),ut=function(dt){var gt;for(q(dt,dt.dyn_ltree,dt.l_desc.max_code),q(dt,dt.dyn_dtree,dt.d_desc.max_code),G(dt,dt.bl_desc),gt=18;3<=gt&&dt.bl_tree[2*N[gt]+1]===0;gt--);return dt.opt_len+=3*(gt+1)+5+5+4,gt}(Z),at=Z.opt_len+3+7>>>3,(ct=Z.static_len+3+7>>>3)<=at&&(at=ct)):at=ct=rt+5,rt+4<=at&&st!==-1?nt(Z,st,rt,lt):Z.strategy===4||ct===at?(U(Z,2+(lt?1:0),3),Q(Z,B,H)):(U(Z,4+(lt?1:0),3),function(dt,gt,vt,_t){var wt;for(U(dt,gt-257,5),U(dt,vt-1,5),U(dt,_t-4,4),wt=0;wt<_t;wt++)U(dt,dt.bl_tree[2*N[wt]+1],3);J(dt,dt.dyn_ltree,gt-1),J(dt,dt.dyn_dtree,vt-1)}(Z,Z.l_desc.max_code+1,Z.d_desc.max_code+1,ut+1),Q(Z,Z.dyn_ltree,Z.dyn_dtree)),X(Z),lt&&P(Z)},m._tr_tally=function(Z,st,rt){return Z.pending_buf[Z.d_buf+2*Z.last_lit]=st>>>8&255,Z.pending_buf[Z.d_buf+2*Z.last_lit+1]=255&st,Z.pending_buf[Z.l_buf+Z.last_lit]=255&rt,Z.last_lit++,st===0?Z.dyn_ltree[2*rt]++:(Z.matches++,st--,Z.dyn_ltree[2*(C[rt]+y+1)]++,Z.dyn_dtree[2*L(st)]++),Z.last_lit===Z.lit_bufsize-1},m._tr_align=function(Z){U(Z,2,3),W(Z,256,B),function(st){st.bi_valid===16?(j(st,st.bi_buf),st.bi_buf=0,st.bi_valid=0):8<=st.bi_valid&&(st.pending_buf[st.pending++]=255&st.bi_buf,st.bi_buf>>=8,st.bi_valid-=8)}(Z)}},{"../utils/common":41}],53:[function(h,p,m){p.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(h,p,m){(function(f){(function(b,y){if(!b.setImmediate){var _,E,M,D,z=1,O={},N=!1,B=b.document,H=Object.getPrototypeOf&&Object.getPrototypeOf(b);H=H&&H.setTimeout?H:b,_={}.toString.call(b.process)==="[object process]"?function(k){i.nextTick(function(){C(k)})}:function(){if(b.postMessage&&!b.importScripts){var k=!0,v=b.onmessage;return b.onmessage=function(){k=!1},b.postMessage("","*"),b.onmessage=v,k}}()?(D="setImmediate$"+Math.random()+"$",b.addEventListener?b.addEventListener("message",R,!1):b.attachEvent("onmessage",R),function(k){b.postMessage(D+k,"*")}):b.MessageChannel?((M=new MessageChannel).port1.onmessage=function(k){C(k.data)},function(k){M.port2.postMessage(k)}):B&&"onreadystatechange"in B.createElement("script")?(E=B.documentElement,function(k){var v=B.createElement("script");v.onreadystatechange=function(){C(k),v.onreadystatechange=null,E.removeChild(v),v=null},E.appendChild(v)}):function(k){setTimeout(C,0,k)},H.setImmediate=function(k){typeof k!="function"&&(k=new Function(""+k));for(var v=new Array(arguments.length-1),w=0;w<v.length;w++)v[w]=arguments[w+1];var x={callback:k,args:v};return O[z]=x,_(z),z++},H.clearImmediate=$}function $(k){delete O[k]}function C(k){if(N)setTimeout(C,0,k);else{var v=O[k];if(v){N=!0;try{(function(w){var x=w.callback,S=w.args;switch(S.length){case 0:x();break;case 1:x(S[0]);break;case 2:x(S[0],S[1]);break;case 3:x(S[0],S[1],S[2]);break;default:x.apply(void 0,S)}})(v)}finally{$(k),N=!1}}}}function R(k){k.source===b&&typeof k.data=="string"&&k.data.indexOf(D)===0&&C(+k.data.slice(D.length))}})(typeof self>"u"?f===void 0?this:f:self)}).call(this,s!==void 0?s:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}).call(this)}).call(this,t("_process"),typeof ve<"u"?ve:typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],t("timers").setImmediate)},{_process:467,buffer:220,timers:523}],442:[function(t,r,l){(function(i){(function(){var s=/[\\^$.*+?()[\]{}|]/g,a=RegExp(s.source),o=typeof i=="object"&&i&&i.Object===Object&&i,n=typeof self=="object"&&self&&self.Object===Object&&self,c=o||n||Function("return this")(),d=Object.prototype.toString,u=c.Symbol,h=u?u.prototype:void 0,p=h?h.toString:void 0;function m(f){if(typeof f=="string")return f;if(function(y){return typeof y=="symbol"||function(_){return!!_&&typeof _=="object"}(y)&&d.call(y)=="[object Symbol]"}(f))return p?p.call(f):"";var b=f+"";return b=="0"&&1/f==-1/0?"-0":b}r.exports=function(f){var b;return(f=(b=f)==null?"":m(b))&&a.test(f)?f.replace(s,"\\$&"):f}}).call(this)}).call(this,typeof ve<"u"?ve:typeof self<"u"?self:typeof window<"u"?window:{})},{}],443:[function(t,r,l){(function(i){(function(){var s="[object Arguments]",a="[object Map]",o="[object Object]",n="[object Set]",c=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,d=/^\w*$/,u=/^\./,h=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,p=/\\(\\)?/g,m=/^\[object .+?Constructor\]$/,f=/^(?:0|[1-9]\d*)$/,b={};b["[object Float32Array]"]=b["[object Float64Array]"]=b["[object Int8Array]"]=b["[object Int16Array]"]=b["[object Int32Array]"]=b["[object Uint8Array]"]=b["[object Uint8ClampedArray]"]=b["[object Uint16Array]"]=b["[object Uint32Array]"]=!0,b[s]=b["[object Array]"]=b["[object ArrayBuffer]"]=b["[object Boolean]"]=b["[object DataView]"]=b["[object Date]"]=b["[object Error]"]=b["[object Function]"]=b[a]=b["[object Number]"]=b[o]=b["[object RegExp]"]=b[n]=b["[object String]"]=b["[object WeakMap]"]=!1;var y=typeof i=="object"&&i&&i.Object===Object&&i,_=typeof self=="object"&&self&&self.Object===Object&&self,E=y||_||Function("return this")(),M=typeof l=="object"&&l&&!l.nodeType&&l,D=M&&typeof r=="object"&&r&&!r.nodeType&&r,z=D&&D.exports===M&&y.process,O=function(){try{return z&&z.binding("util")}catch{}}(),N=O&&O.isTypedArray;function B(ot,mt,yt,xt){for(var $t=-1,Et=ot?ot.length:0;++$t<Et;){var Tt=ot[$t];mt(xt,Tt,yt(Tt),ot)}return xt}function H(ot,mt){for(var yt=-1,xt=ot?ot.length:0;++yt<xt;)if(mt(ot[yt],yt,ot))return!0;return!1}function $(ot){var mt=!1;if(ot!=null&&typeof ot.toString!="function")try{mt=!!(ot+"")}catch{}return mt}function C(ot){var mt=-1,yt=Array(ot.size);return ot.forEach(function(xt,$t){yt[++mt]=[$t,xt]}),yt}function R(ot){var mt=-1,yt=Array(ot.size);return ot.forEach(function(xt){yt[++mt]=xt}),yt}var k,v,w,x=Array.prototype,S=Function.prototype,T=Object.prototype,L=E["__core-js_shared__"],j=(k=/[^.]+$/.exec(L&&L.keys&&L.keys.IE_PROTO||""))?"Symbol(src)_1."+k:"",U=S.toString,W=T.hasOwnProperty,Y=T.toString,F=RegExp("^"+U.call(W).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),X=E.Symbol,P=E.Uint8Array,I=T.propertyIsEnumerable,V=x.splice,Q=(v=Object.keys,w=Object,function(ot){return v(w(ot))}),G=Yt(E,"DataView"),q=Yt(E,"Map"),J=Yt(E,"Promise"),it=Yt(E,"Set"),nt=Yt(E,"WeakMap"),Z=Yt(Object,"create"),st=pt(G),rt=pt(q),lt=pt(J),at=pt(it),ct=pt(nt),ut=X?X.prototype:void 0,dt=ut?ut.valueOf:void 0,gt=ut?ut.toString:void 0;function vt(ot){var mt=-1,yt=ot?ot.length:0;for(this.clear();++mt<yt;){var xt=ot[mt];this.set(xt[0],xt[1])}}function _t(ot){var mt=-1,yt=ot?ot.length:0;for(this.clear();++mt<yt;){var xt=ot[mt];this.set(xt[0],xt[1])}}function wt(ot){var mt=-1,yt=ot?ot.length:0;for(this.clear();++mt<yt;){var xt=ot[mt];this.set(xt[0],xt[1])}}function Ot(ot){var mt=-1,yt=ot?ot.length:0;for(this.__data__=new wt;++mt<yt;)this.add(ot[mt])}function Pt(ot){this.__data__=new _t(ot)}function Dt(ot,mt){var yt=Gt(ot)||te(ot)?function(Tt,ye){for(var ce=-1,fe=Array(Tt);++ce<Tt;)fe[ce]=ye(ce);return fe}(ot.length,String):[],xt=yt.length,$t=!!xt;for(var Et in ot)!W.call(ot,Et)||$t&&(Et=="length"||je(Et,xt))||yt.push(Et);return yt}function jt(ot,mt){for(var yt=ot.length;yt--;)if(Rt(ot[yt][0],mt))return yt;return-1}function Mt(ot,mt,yt,xt){return kt(ot,function($t,Et,Tt){mt(xt,$t,yt($t),Tt)}),xt}vt.prototype.clear=function(){this.__data__=Z?Z(null):{}},vt.prototype.delete=function(ot){return this.has(ot)&&delete this.__data__[ot]},vt.prototype.get=function(ot){var mt=this.__data__;if(Z){var yt=mt[ot];return yt==="__lodash_hash_undefined__"?void 0:yt}return W.call(mt,ot)?mt[ot]:void 0},vt.prototype.has=function(ot){var mt=this.__data__;return Z?mt[ot]!==void 0:W.call(mt,ot)},vt.prototype.set=function(ot,mt){return this.__data__[ot]=Z&&mt===void 0?"__lodash_hash_undefined__":mt,this},_t.prototype.clear=function(){this.__data__=[]},_t.prototype.delete=function(ot){var mt=this.__data__,yt=jt(mt,ot);return!(yt<0)&&(yt==mt.length-1?mt.pop():V.call(mt,yt,1),!0)},_t.prototype.get=function(ot){var mt=this.__data__,yt=jt(mt,ot);return yt<0?void 0:mt[yt][1]},_t.prototype.has=function(ot){return jt(this.__data__,ot)>-1},_t.prototype.set=function(ot,mt){var yt=this.__data__,xt=jt(yt,ot);return xt<0?yt.push([ot,mt]):yt[xt][1]=mt,this},wt.prototype.clear=function(){this.__data__={hash:new vt,map:new(q||_t),string:new vt}},wt.prototype.delete=function(ot){return ke(this,ot).delete(ot)},wt.prototype.get=function(ot){return ke(this,ot).get(ot)},wt.prototype.has=function(ot){return ke(this,ot).has(ot)},wt.prototype.set=function(ot,mt){return ke(this,ot).set(ot,mt),this},Ot.prototype.add=Ot.prototype.push=function(ot){return this.__data__.set(ot,"__lodash_hash_undefined__"),this},Ot.prototype.has=function(ot){return this.__data__.has(ot)},Pt.prototype.clear=function(){this.__data__=new _t},Pt.prototype.delete=function(ot){return this.__data__.delete(ot)},Pt.prototype.get=function(ot){return this.__data__.get(ot)},Pt.prototype.has=function(ot){return this.__data__.has(ot)},Pt.prototype.set=function(ot,mt){var yt=this.__data__;if(yt instanceof _t){var xt=yt.__data__;if(!q||xt.length<199)return xt.push([ot,mt]),this;yt=this.__data__=new wt(xt)}return yt.set(ot,mt),this};var St,kt=(St=function(ot,mt){return ot&&Nt(ot,mt,_r)},function(ot,mt){if(ot==null)return ot;if(!Vt(ot))return St(ot,mt);for(var yt=ot.length,xt=-1,$t=Object(ot);++xt<yt&&mt($t[xt],xt,$t)!==!1;);return ot}),Nt=function(ot){return function(mt,yt,xt){for(var $t=-1,Et=Object(mt),Tt=xt(mt),ye=Tt.length;ye--;){var ce=Tt[++$t];if(yt(Et[ce],ce,Et)===!1)break}return mt}}();function Lt(ot,mt){for(var yt=0,xt=(mt=Qt(mt,ot)?[mt]:se(mt)).length;ot!=null&&yt<xt;)ot=ot[ht(mt[yt++])];return yt&&yt==xt?ot:void 0}function be(ot,mt){return ot!=null&&mt in Object(ot)}function Re(ot,mt,yt,xt,$t){return ot===mt||(ot==null||mt==null||!de(ot)&&!or(mt)?ot!=ot&&mt!=mt:function(Et,Tt,ye,ce,fe,Kt){var Pe=Gt(Et),Oe=Gt(Tt),ze="[object Array]",nr="[object Array]";Pe||(ze=(ze=_e(Et))==s?o:ze),Oe||(nr=(nr=_e(Tt))==s?o:nr);var Tr=ze==o&&!$(Et),es=nr==o&&!$(Tt),an=ze==nr;if(an&&!Tr)return Kt||(Kt=new Pt),Pe||wr(Et)?He(Et,Tt,ye,ce,fe,Kt):function(Ne,Se,Gi,Ka,Cd,As,ti){switch(Gi){case"[object DataView]":if(Ne.byteLength!=Se.byteLength||Ne.byteOffset!=Se.byteOffset)return!1;Ne=Ne.buffer,Se=Se.buffer;case"[object ArrayBuffer]":return!(Ne.byteLength!=Se.byteLength||!Ka(new P(Ne),new P(Se)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Rt(+Ne,+Se);case"[object Error]":return Ne.name==Se.name&&Ne.message==Se.message;case"[object RegExp]":case"[object String]":return Ne==Se+"";case a:var Ki=C;case n:var tu=2&As;if(Ki||(Ki=R),Ne.size!=Se.size&&!tu)return!1;var Td=ti.get(Ne);if(Td)return Td==Se;As|=1,ti.set(Ne,Se);var Al=He(Ki(Ne),Ki(Se),Ka,Cd,As,ti);return ti.delete(Ne),Al;case"[object Symbol]":if(dt)return dt.call(Ne)==dt.call(Se)}return!1}(Et,Tt,ze,ye,ce,fe,Kt);if(!(2&fe)){var Ga=Tr&&W.call(Et,"__wrapped__"),_l=es&&W.call(Tt,"__wrapped__");if(Ga||_l){var xl=Ga?Et.value():Et,Sl=_l?Tt.value():Tt;return Kt||(Kt=new Pt),ye(xl,Sl,ce,fe,Kt)}}return an?(Kt||(Kt=new Pt),function(Ne,Se,Gi,Ka,Cd,As){var ti=2&Cd,Ki=_r(Ne),tu=Ki.length,Td=_r(Se).length;if(tu!=Td&&!ti)return!1;for(var Al=tu;Al--;){var Yi=Ki[Al];if(!(ti?Yi in Se:W.call(Se,Yi)))return!1}var yg=As.get(Ne);if(yg&&As.get(Se))return yg==Se;var Md=!0;As.set(Ne,Se),As.set(Se,Ne);for(var Dp=ti;++Al<tu;){Yi=Ki[Al];var Rd=Ne[Yi],Id=Se[Yi];if(Ka)var vg=ti?Ka(Id,Rd,Yi,Se,Ne,As):Ka(Rd,Id,Yi,Ne,Se,As);if(!(vg===void 0?Rd===Id||Gi(Rd,Id,Ka,Cd,As):vg)){Md=!1;break}Dp||(Dp=Yi=="constructor")}if(Md&&!Dp){var Pd=Ne.constructor,Od=Se.constructor;Pd==Od||!("constructor"in Ne)||!("constructor"in Se)||typeof Pd=="function"&&Pd instanceof Pd&&typeof Od=="function"&&Od instanceof Od||(Md=!1)}return As.delete(Ne),As.delete(Se),Md}(Et,Tt,ye,ce,fe,Kt)):!1}(ot,mt,Re,yt,xt,$t))}function qt(ot){return!(!de(ot)||function(mt){return!!j&&j in mt}(ot))&&(ne(ot)||$(ot)?F:m).test(pt(ot))}function Ae(ot){return typeof ot=="function"?ot:ot==null?gs:typeof ot=="object"?Gt(ot)?function(xt,$t){return Qt(xt)&&Te($t)?Be(ht(xt),$t):function(Et){var Tt=function(ye,ce,fe){var Kt=ye==null?void 0:Lt(ye,ce);return Kt===void 0?fe:Kt}(Et,xt);return Tt===void 0&&Tt===$t?function(ye,ce){return ye!=null&&function(fe,Kt,Pe){Kt=Qt(Kt,fe)?[Kt]:se(Kt);for(var Oe,ze=-1,nr=Kt.length;++ze<nr;){var Tr=ht(Kt[ze]);if(!(Oe=fe!=null&&Pe(fe,Tr)))break;fe=fe[Tr]}return Oe||!!(nr=fe?fe.length:0)&&ee(nr)&&je(Tr,nr)&&(Gt(fe)||te(fe))}(ye,ce,be)}(Et,xt):Re($t,Tt,void 0,3)}}(ot[0],ot[1]):function(xt){var $t=function(Et){for(var Tt=_r(Et),ye=Tt.length;ye--;){var ce=Tt[ye],fe=Et[ce];Tt[ye]=[ce,fe,Te(fe)]}return Tt}(xt);return $t.length==1&&$t[0][2]?Be($t[0][0],$t[0][1]):function(Et){return Et===xt||function(Tt,ye,ce,fe){var Kt=ce.length,Pe=Kt;if(Tt==null)return!Pe;for(Tt=Object(Tt);Kt--;){var Oe=ce[Kt];if(Oe[2]?Oe[1]!==Tt[Oe[0]]:!(Oe[0]in Tt))return!1}for(;++Kt<Pe;){var ze=(Oe=ce[Kt])[0],nr=Tt[ze],Tr=Oe[1];if(Oe[2]){if(nr===void 0&&!(ze in Tt))return!1}else{var es=new Pt,an;if(!(an===void 0?Re(Tr,nr,fe,3,es):an))return!1}}return!0}(Et,xt,$t)}}(ot):Qt(mt=ot)?(yt=ht(mt),function(xt){return xt==null?void 0:xt[yt]}):function(xt){return function($t){return Lt($t,xt)}}(mt);var mt,yt}function me(ot){if(yt=(mt=ot)&&mt.constructor,xt=typeof yt=="function"&&yt.prototype||T,mt!==xt)return Q(ot);var mt,yt,xt,$t=[];for(var Et in Object(ot))W.call(ot,Et)&&Et!="constructor"&&$t.push(Et);return $t}function se(ot){return Gt(ot)?ot:ae(ot)}function He(ot,mt,yt,xt,$t,Et){var Tt=2&$t,ye=ot.length,ce=mt.length;if(ye!=ce&&!(Tt&&ce>ye))return!1;var fe=Et.get(ot);if(fe&&Et.get(mt))return fe==mt;var Kt=-1,Pe=!0,Oe=1&$t?new Ot:void 0;for(Et.set(ot,mt),Et.set(mt,ot);++Kt<ye;){var ze=ot[Kt],nr=mt[Kt];if(xt)var Tr=Tt?xt(nr,ze,Kt,mt,ot,Et):xt(ze,nr,Kt,ot,mt,Et);if(Tr!==void 0){if(Tr)continue;Pe=!1;break}if(Oe){if(!H(mt,function(es,an){if(!Oe.has(an)&&(ze===es||yt(ze,es,xt,$t,Et)))return Oe.add(an)})){Pe=!1;break}}else if(ze!==nr&&!yt(ze,nr,xt,$t,Et)){Pe=!1;break}}return Et.delete(ot),Et.delete(mt),Pe}function ke(ot,mt){var yt,xt,$t=ot.__data__;return((xt=typeof(yt=mt))=="string"||xt=="number"||xt=="symbol"||xt=="boolean"?yt!=="__proto__":yt===null)?$t[typeof mt=="string"?"string":"hash"]:$t.map}function Yt(ot,mt){var yt=function(xt,$t){return xt==null?void 0:xt[$t]}(ot,mt);return qt(yt)?yt:void 0}var _e=function(ot){return Y.call(ot)};function je(ot,mt){return!!(mt=mt??9007199254740991)&&(typeof ot=="number"||f.test(ot))&&ot>-1&&ot%1==0&&ot<mt}function Qt(ot,mt){if(Gt(ot))return!1;var yt=typeof ot;return!(yt!="number"&&yt!="symbol"&&yt!="boolean"&&ot!=null&&!Xe(ot))||d.test(ot)||!c.test(ot)||mt!=null&&ot in Object(mt)}function Te(ot){return ot==ot&&!de(ot)}function Be(ot,mt){return function(yt){return yt!=null&&yt[ot]===mt&&(mt!==void 0||ot in Object(yt))}}(G&&_e(new G(new ArrayBuffer(1)))!="[object DataView]"||q&&_e(new q)!=a||J&&_e(J.resolve())!="[object Promise]"||it&&_e(new it)!=n||nt&&_e(new nt)!="[object WeakMap]")&&(_e=function(ot){var mt=Y.call(ot),yt=mt==o?ot.constructor:void 0,xt=yt?pt(yt):void 0;if(xt)switch(xt){case st:return"[object DataView]";case rt:return a;case lt:return"[object Promise]";case at:return n;case ct:return"[object WeakMap]"}return mt});var ae=Xt(function(ot){var mt;ot=(mt=ot)==null?"":function(xt){if(typeof xt=="string")return xt;if(Xe(xt))return gt?gt.call(xt):"";var $t=xt+"";return $t=="0"&&1/xt==-1/0?"-0":$t}(mt);var yt=[];return u.test(ot)&&yt.push(""),ot.replace(h,function(xt,$t,Et,Tt){yt.push(Et?Tt.replace(p,"$1"):$t||xt)}),yt});function ht(ot){if(typeof ot=="string"||Xe(ot))return ot;var mt=ot+"";return mt=="0"&&1/ot==-1/0?"-0":mt}function pt(ot){if(ot!=null){try{return U.call(ot)}catch{}try{return ot+""}catch{}}return""}var bt,Ct=(bt=function(ot,mt,yt){W.call(ot,yt)?ot[yt].push(mt):ot[yt]=[mt]},function(ot,mt){var yt=Gt(ot)?B:Mt,xt={};return yt(ot,bt,Ae(mt),xt)});function Xt(ot,mt){if(typeof ot!="function"||mt&&typeof mt!="function")throw new TypeError("Expected a function");var yt=function(){var xt=arguments,$t=mt?mt.apply(this,xt):xt[0],Et=yt.cache;if(Et.has($t))return Et.get($t);var Tt=ot.apply(this,xt);return yt.cache=Et.set($t,Tt),Tt};return yt.cache=new(Xt.Cache||wt),yt}function Rt(ot,mt){return ot===mt||ot!=ot&&mt!=mt}function te(ot){return function(mt){return or(mt)&&Vt(mt)}(ot)&&W.call(ot,"callee")&&(!I.call(ot,"callee")||Y.call(ot)==s)}Xt.Cache=wt;var Gt=Array.isArray;function Vt(ot){return ot!=null&&ee(ot.length)&&!ne(ot)}function ne(ot){var mt=de(ot)?Y.call(ot):"";return mt=="[object Function]"||mt=="[object GeneratorFunction]"}function ee(ot){return typeof ot=="number"&&ot>-1&&ot%1==0&&ot<=9007199254740991}function de(ot){var mt=typeof ot;return!!ot&&(mt=="object"||mt=="function")}function or(ot){return!!ot&&typeof ot=="object"}function Xe(ot){return typeof ot=="symbol"||or(ot)&&Y.call(ot)=="[object Symbol]"}var wr=N?function(ot){return function(mt){return ot(mt)}}(N):function(ot){return or(ot)&&ee(ot.length)&&!!b[Y.call(ot)]};function _r(ot){return Vt(ot)?Dt(ot):me(ot)}function gs(ot){return ot}r.exports=Ct}).call(this)}).call(this,typeof ve<"u"?ve:typeof self<"u"?self:typeof window<"u"?window:{})},{}],444:[function(t,r,l){var i=Object.prototype.toString;r.exports=function(s){return s===!0||s===!1||function(a){return!!a&&typeof a=="object"}(s)&&i.call(s)=="[object Boolean]"}},{}],445:[function(t,r,l){(function(i){(function(){var s="[object Arguments]",a="[object Map]",o="[object Object]",n="[object Set]",c=/^\[object .+?Constructor\]$/,d=/^(?:0|[1-9]\d*)$/,u={};u["[object Float32Array]"]=u["[object Float64Array]"]=u["[object Int8Array]"]=u["[object Int16Array]"]=u["[object Int32Array]"]=u["[object Uint8Array]"]=u["[object Uint8ClampedArray]"]=u["[object Uint16Array]"]=u["[object Uint32Array]"]=!0,u[s]=u["[object Array]"]=u["[object ArrayBuffer]"]=u["[object Boolean]"]=u["[object DataView]"]=u["[object Date]"]=u["[object Error]"]=u["[object Function]"]=u[a]=u["[object Number]"]=u[o]=u["[object RegExp]"]=u[n]=u["[object String]"]=u["[object WeakMap]"]=!1;var h=typeof i=="object"&&i&&i.Object===Object&&i,p=typeof self=="object"&&self&&self.Object===Object&&self,m=h||p||Function("return this")(),f=typeof l=="object"&&l&&!l.nodeType&&l,b=f&&typeof r=="object"&&r&&!r.nodeType&&r,y=b&&b.exports===f,_=y&&h.process,E=function(){try{return _&&_.binding&&_.binding("util")}catch{}}(),M=E&&E.isTypedArray;function D(ht,pt){for(var bt=-1,Ct=ht==null?0:ht.length;++bt<Ct;)if(pt(ht[bt],bt,ht))return!0;return!1}function z(ht){var pt=-1,bt=Array(ht.size);return ht.forEach(function(Ct,Xt){bt[++pt]=[Xt,Ct]}),bt}function O(ht){var pt=-1,bt=Array(ht.size);return ht.forEach(function(Ct){bt[++pt]=Ct}),bt}var N,B,H,$=Array.prototype,C=Function.prototype,R=Object.prototype,k=m["__core-js_shared__"],v=C.toString,w=R.hasOwnProperty,x=(N=/[^.]+$/.exec(k&&k.keys&&k.keys.IE_PROTO||""))?"Symbol(src)_1."+N:"",S=R.toString,T=RegExp("^"+v.call(w).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),L=y?m.Buffer:void 0,j=m.Symbol,U=m.Uint8Array,W=R.propertyIsEnumerable,Y=$.splice,F=j?j.toStringTag:void 0,X=Object.getOwnPropertySymbols,P=L?L.isBuffer:void 0,I=(B=Object.keys,H=Object,function(ht){return B(H(ht))}),V=be(m,"DataView"),Q=be(m,"Map"),G=be(m,"Promise"),q=be(m,"Set"),J=be(m,"WeakMap"),it=be(Object,"create"),nt=me(V),Z=me(Q),st=me(G),rt=me(q),lt=me(J),at=j?j.prototype:void 0,ct=at?at.valueOf:void 0;function ut(ht){var pt=-1,bt=ht==null?0:ht.length;for(this.clear();++pt<bt;){var Ct=ht[pt];this.set(Ct[0],Ct[1])}}function dt(ht){var pt=-1,bt=ht==null?0:ht.length;for(this.clear();++pt<bt;){var Ct=ht[pt];this.set(Ct[0],Ct[1])}}function gt(ht){var pt=-1,bt=ht==null?0:ht.length;for(this.clear();++pt<bt;){var Ct=ht[pt];this.set(Ct[0],Ct[1])}}function vt(ht){var pt=-1,bt=ht==null?0:ht.length;for(this.__data__=new gt;++pt<bt;)this.add(ht[pt])}function _t(ht){var pt=this.__data__=new dt(ht);this.size=pt.size}function wt(ht,pt){var bt=ke(ht),Ct=!bt&&He(ht),Xt=!bt&&!Ct&&Yt(ht),Rt=!bt&&!Ct&&!Xt&&Be(ht),te=bt||Ct||Xt||Rt,Gt=te?function(ee,de){for(var or=-1,Xe=Array(ee);++or<ee;)Xe[or]=de(or);return Xe}(ht.length,String):[],Vt=Gt.length;for(var ne in ht)!w.call(ht,ne)||te&&(ne=="length"||Xt&&(ne=="offset"||ne=="parent")||Rt&&(ne=="buffer"||ne=="byteLength"||ne=="byteOffset")||Ae(ne,Vt))||Gt.push(ne);return Gt}function Ot(ht,pt){for(var bt=ht.length;bt--;)if(se(ht[bt][0],pt))return bt;return-1}function Pt(ht){return ht==null?ht===void 0?"[object Undefined]":"[object Null]":F&&F in Object(ht)?function(pt){var bt=w.call(pt,F),Ct=pt[F];try{pt[F]=void 0;var Xt=!0}catch{}var Rt=S.call(pt);return Xt&&(bt?pt[F]=Ct:delete pt[F]),Rt}(ht):function(pt){return S.call(pt)}(ht)}function Dt(ht){return Te(ht)&&Pt(ht)==s}function jt(ht,pt,bt,Ct,Xt){return ht===pt||(ht==null||pt==null||!Te(ht)&&!Te(pt)?ht!=ht&&pt!=pt:function(Rt,te,Gt,Vt,ne,ee){var de=ke(Rt),or=ke(te),Xe=de?"[object Array]":qt(Rt),wr=or?"[object Array]":qt(te),_r=(Xe=Xe==s?o:Xe)==o,gs=(wr=wr==s?o:wr)==o,ot=Xe==wr;if(ot&&Yt(Rt)){if(!Yt(te))return!1;de=!0,_r=!1}if(ot&&!_r)return ee||(ee=new _t),de||Be(Rt)?kt(Rt,te,Gt,Vt,ne,ee):function(Et,Tt,ye,ce,fe,Kt,Pe){switch(ye){case"[object DataView]":if(Et.byteLength!=Tt.byteLength||Et.byteOffset!=Tt.byteOffset)return!1;Et=Et.buffer,Tt=Tt.buffer;case"[object ArrayBuffer]":return!(Et.byteLength!=Tt.byteLength||!Kt(new U(Et),new U(Tt)));case"[object Boolean]":case"[object Date]":case"[object Number]":return se(+Et,+Tt);case"[object Error]":return Et.name==Tt.name&&Et.message==Tt.message;case"[object RegExp]":case"[object String]":return Et==Tt+"";case a:var Oe=z;case n:var ze=1&ce;if(Oe||(Oe=O),Et.size!=Tt.size&&!ze)return!1;var nr=Pe.get(Et);if(nr)return nr==Tt;ce|=2,Pe.set(Et,Tt);var Tr=kt(Oe(Et),Oe(Tt),ce,fe,Kt,Pe);return Pe.delete(Et),Tr;case"[object Symbol]":if(ct)return ct.call(Et)==ct.call(Tt)}return!1}(Rt,te,Xe,Gt,Vt,ne,ee);if(!(1&Gt)){var mt=_r&&w.call(Rt,"__wrapped__"),yt=gs&&w.call(te,"__wrapped__");if(mt||yt){var xt=mt?Rt.value():Rt,$t=yt?te.value():te;return ee||(ee=new _t),ne(xt,$t,Gt,Vt,ee)}}return ot?(ee||(ee=new _t),function(Et,Tt,ye,ce,fe,Kt){var Pe=1&ye,Oe=Nt(Et),ze=Oe.length,nr=Nt(Tt).length;if(ze!=nr&&!Pe)return!1;for(var Tr=ze;Tr--;){var es=Oe[Tr];if(!(Pe?es in Tt:w.call(Tt,es)))return!1}var an=Kt.get(Et);if(an&&Kt.get(Tt))return an==Tt;var Ga=!0;Kt.set(Et,Tt),Kt.set(Tt,Et);for(var _l=Pe;++Tr<ze;){es=Oe[Tr];var xl=Et[es],Sl=Tt[es];if(ce)var Ne=Pe?ce(Sl,xl,es,Tt,Et,Kt):ce(xl,Sl,es,Et,Tt,Kt);if(!(Ne===void 0?xl===Sl||fe(xl,Sl,ye,ce,Kt):Ne)){Ga=!1;break}_l||(_l=es=="constructor")}if(Ga&&!_l){var Se=Et.constructor,Gi=Tt.constructor;Se==Gi||!("constructor"in Et)||!("constructor"in Tt)||typeof Se=="function"&&Se instanceof Se&&typeof Gi=="function"&&Gi instanceof Gi||(Ga=!1)}return Kt.delete(Et),Kt.delete(Tt),Ga}(Rt,te,Gt,Vt,ne,ee)):!1}(ht,pt,bt,Ct,jt,Xt))}function Mt(ht){return!(!Qt(ht)||function(pt){return!!x&&x in pt}(ht))&&(_e(ht)?T:c).test(me(ht))}function St(ht){if(bt=(pt=ht)&&pt.constructor,Ct=typeof bt=="function"&&bt.prototype||R,pt!==Ct)return I(ht);var pt,bt,Ct,Xt=[];for(var Rt in Object(ht))w.call(ht,Rt)&&Rt!="constructor"&&Xt.push(Rt);return Xt}function kt(ht,pt,bt,Ct,Xt,Rt){var te=1&bt,Gt=ht.length,Vt=pt.length;if(Gt!=Vt&&!(te&&Vt>Gt))return!1;var ne=Rt.get(ht);if(ne&&Rt.get(pt))return ne==pt;var ee=-1,de=!0,or=2&bt?new vt:void 0;for(Rt.set(ht,pt),Rt.set(pt,ht);++ee<Gt;){var Xe=ht[ee],wr=pt[ee];if(Ct)var _r=te?Ct(wr,Xe,ee,pt,ht,Rt):Ct(Xe,wr,ee,ht,pt,Rt);if(_r!==void 0){if(_r)continue;de=!1;break}if(or){if(!D(pt,function(gs,ot){if(mt=ot,!or.has(mt)&&(Xe===gs||Xt(Xe,gs,bt,Ct,Rt)))return or.push(ot);var mt})){de=!1;break}}else if(Xe!==wr&&!Xt(Xe,wr,bt,Ct,Rt)){de=!1;break}}return Rt.delete(ht),Rt.delete(pt),de}function Nt(ht){return function(pt,bt,Ct){var Xt=bt(pt);return ke(pt)?Xt:function(Rt,te){for(var Gt=-1,Vt=te.length,ne=Rt.length;++Gt<Vt;)Rt[ne+Gt]=te[Gt];return Rt}(Xt,Ct(pt))}(ht,ae,Re)}function Lt(ht,pt){var bt,Ct,Xt=ht.__data__;return((Ct=typeof(bt=pt))=="string"||Ct=="number"||Ct=="symbol"||Ct=="boolean"?bt!=="__proto__":bt===null)?Xt[typeof pt=="string"?"string":"hash"]:Xt.map}function be(ht,pt){var bt=function(Ct,Xt){return Ct==null?void 0:Ct[Xt]}(ht,pt);return Mt(bt)?bt:void 0}ut.prototype.clear=function(){this.__data__=it?it(null):{},this.size=0},ut.prototype.delete=function(ht){var pt=this.has(ht)&&delete this.__data__[ht];return this.size-=pt?1:0,pt},ut.prototype.get=function(ht){var pt=this.__data__;if(it){var bt=pt[ht];return bt==="__lodash_hash_undefined__"?void 0:bt}return w.call(pt,ht)?pt[ht]:void 0},ut.prototype.has=function(ht){var pt=this.__data__;return it?pt[ht]!==void 0:w.call(pt,ht)},ut.prototype.set=function(ht,pt){var bt=this.__data__;return this.size+=this.has(ht)?0:1,bt[ht]=it&&pt===void 0?"__lodash_hash_undefined__":pt,this},dt.prototype.clear=function(){this.__data__=[],this.size=0},dt.prototype.delete=function(ht){var pt=this.__data__,bt=Ot(pt,ht);return!(bt<0)&&(bt==pt.length-1?pt.pop():Y.call(pt,bt,1),--this.size,!0)},dt.prototype.get=function(ht){var pt=this.__data__,bt=Ot(pt,ht);return bt<0?void 0:pt[bt][1]},dt.prototype.has=function(ht){return Ot(this.__data__,ht)>-1},dt.prototype.set=function(ht,pt){var bt=this.__data__,Ct=Ot(bt,ht);return Ct<0?(++this.size,bt.push([ht,pt])):bt[Ct][1]=pt,this},gt.prototype.clear=function(){this.size=0,this.__data__={hash:new ut,map:new(Q||dt),string:new ut}},gt.prototype.delete=function(ht){var pt=Lt(this,ht).delete(ht);return this.size-=pt?1:0,pt},gt.prototype.get=function(ht){return Lt(this,ht).get(ht)},gt.prototype.has=function(ht){return Lt(this,ht).has(ht)},gt.prototype.set=function(ht,pt){var bt=Lt(this,ht),Ct=bt.size;return bt.set(ht,pt),this.size+=bt.size==Ct?0:1,this},vt.prototype.add=vt.prototype.push=function(ht){return this.__data__.set(ht,"__lodash_hash_undefined__"),this},vt.prototype.has=function(ht){return this.__data__.has(ht)},_t.prototype.clear=function(){this.__data__=new dt,this.size=0},_t.prototype.delete=function(ht){var pt=this.__data__,bt=pt.delete(ht);return this.size=pt.size,bt},_t.prototype.get=function(ht){return this.__data__.get(ht)},_t.prototype.has=function(ht){return this.__data__.has(ht)},_t.prototype.set=function(ht,pt){var bt=this.__data__;if(bt instanceof dt){var Ct=bt.__data__;if(!Q||Ct.length<199)return Ct.push([ht,pt]),this.size=++bt.size,this;bt=this.__data__=new gt(Ct)}return bt.set(ht,pt),this.size=bt.size,this};var Re=X?function(ht){return ht==null?[]:(ht=Object(ht),function(pt,bt){for(var Ct=-1,Xt=pt==null?0:pt.length,Rt=0,te=[];++Ct<Xt;){var Gt=pt[Ct];bt(Gt,Ct,pt)&&(te[Rt++]=Gt)}return te}(X(ht),function(pt){return W.call(ht,pt)}))}:function(){return[]},qt=Pt;function Ae(ht,pt){return!!(pt=pt??9007199254740991)&&(typeof ht=="number"||d.test(ht))&&ht>-1&&ht%1==0&&ht<pt}function me(ht){if(ht!=null){try{return v.call(ht)}catch{}try{return ht+""}catch{}}return""}function se(ht,pt){return ht===pt||ht!=ht&&pt!=pt}(V&&qt(new V(new ArrayBuffer(1)))!="[object DataView]"||Q&&qt(new Q)!=a||G&&qt(G.resolve())!="[object Promise]"||q&&qt(new q)!=n||J&&qt(new J)!="[object WeakMap]")&&(qt=function(ht){var pt=Pt(ht),bt=pt==o?ht.constructor:void 0,Ct=bt?me(bt):"";if(Ct)switch(Ct){case nt:return"[object DataView]";case Z:return a;case st:return"[object Promise]";case rt:return n;case lt:return"[object WeakMap]"}return pt});var He=Dt(function(){return arguments}())?Dt:function(ht){return Te(ht)&&w.call(ht,"callee")&&!W.call(ht,"callee")},ke=Array.isArray,Yt=P||function(){return!1};function _e(ht){if(!Qt(ht))return!1;var pt=Pt(ht);return pt=="[object Function]"||pt=="[object GeneratorFunction]"||pt=="[object AsyncFunction]"||pt=="[object Proxy]"}function je(ht){return typeof ht=="number"&&ht>-1&&ht%1==0&&ht<=9007199254740991}function Qt(ht){var pt=typeof ht;return ht!=null&&(pt=="object"||pt=="function")}function Te(ht){return ht!=null&&typeof ht=="object"}var Be=M?function(ht){return function(pt){return ht(pt)}}(M):function(ht){return Te(ht)&&je(ht.length)&&!!u[Pt(ht)]};function ae(ht){return(pt=ht)!=null&&je(pt.length)&&!_e(pt)?wt(ht):St(ht);var pt}r.exports=function(ht,pt){return jt(ht,pt)}}).call(this)}).call(this,typeof ve<"u"?ve:typeof self<"u"?self:typeof window<"u"?window:{})},{}],446:[function(t,r,l){(function(i){(function(){var s=typeof i=="object"&&i&&i.Object===Object&&i,a=typeof self=="object"&&self&&self.Object===Object&&self,o=s||a||Function("return this")(),n=Object.prototype,c=n.hasOwnProperty,d=n.toString,u=o.Symbol,h=u?u.toStringTag:void 0;function p(m){return m==null?m===void 0?"[object Undefined]":"[object Null]":h&&h in Object(m)?function(f){var b=c.call(f,h),y=f[h];try{f[h]=void 0;var _=!0}catch{}var E=d.call(f);return _&&(b?f[h]=y:delete f[h]),E}(m):function(f){return d.call(f)}(m)}r.exports=function(m){if(!function(b){var y=typeof b;return b!=null&&(y=="object"||y=="function")}(m))return!1;var f=p(m);return f=="[object Function]"||f=="[object GeneratorFunction]"||f=="[object AsyncFunction]"||f=="[object Proxy]"}}).call(this)}).call(this,typeof ve<"u"?ve:typeof self<"u"?self:typeof window<"u"?window:{})},{}],447:[function(t,r,l){r.exports=function(i){return i==null}},{}],448:[function(t,r,l){r.exports=function(i){return i===void 0}},{}],449:[function(t,r,l){(function(i){(function(){var s=/^\[object .+?Constructor\]$/,a=typeof i=="object"&&i&&i.Object===Object&&i,o=typeof self=="object"&&self&&self.Object===Object&&self,n=a||o||Function("return this")();function c(j,U){return!!(j&&j.length)&&function(W,Y,F){if(Y!=Y)return function(I,V,Q,G){for(var q=I.length,J=Q+-1;++J<q;)if(V(I[J],J,I))return J;return-1}(W,d,F);for(var X=F-1,P=W.length;++X<P;)if(W[X]===Y)return X;return-1}(j,U,0)>-1}function d(j){return j!=j}function u(j,U){return j.has(U)}function h(j){var U=-1,W=Array(j.size);return j.forEach(function(Y){W[++U]=Y}),W}var p,m=Array.prototype,f=Function.prototype,b=Object.prototype,y=n["__core-js_shared__"],_=(p=/[^.]+$/.exec(y&&y.keys&&y.keys.IE_PROTO||""))?"Symbol(src)_1."+p:"",E=f.toString,M=b.hasOwnProperty,D=b.toString,z=RegExp("^"+E.call(M).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),O=m.splice,N=T(n,"Map"),B=T(n,"Set"),H=T(Object,"create");function $(j){var U=-1,W=j?j.length:0;for(this.clear();++U<W;){var Y=j[U];this.set(Y[0],Y[1])}}function C(j){var U=-1,W=j?j.length:0;for(this.clear();++U<W;){var Y=j[U];this.set(Y[0],Y[1])}}function R(j){var U=-1,W=j?j.length:0;for(this.clear();++U<W;){var Y=j[U];this.set(Y[0],Y[1])}}function k(j){var U=-1,W=j?j.length:0;for(this.__data__=new R;++U<W;)this.add(j[U])}function v(j,U){for(var W,Y,F=j.length;F--;)if((W=j[F][0])===(Y=U)||W!=W&&Y!=Y)return F;return-1}function w(j){return!(!L(j)||(U=j,_&&_ in U))&&(function(W){var Y=L(W)?D.call(W):"";return Y=="[object Function]"||Y=="[object GeneratorFunction]"}(j)||function(W){var Y=!1;if(W!=null&&typeof W.toString!="function")try{Y=!!(W+"")}catch{}return Y}(j)?z:s).test(function(W){if(W!=null){try{return E.call(W)}catch{}try{return W+""}catch{}}return""}(j));var U}$.prototype.clear=function(){this.__data__=H?H(null):{}},$.prototype.delete=function(j){return this.has(j)&&delete this.__data__[j]},$.prototype.get=function(j){var U=this.__data__;if(H){var W=U[j];return W==="__lodash_hash_undefined__"?void 0:W}return M.call(U,j)?U[j]:void 0},$.prototype.has=function(j){var U=this.__data__;return H?U[j]!==void 0:M.call(U,j)},$.prototype.set=function(j,U){return this.__data__[j]=H&&U===void 0?"__lodash_hash_undefined__":U,this},C.prototype.clear=function(){this.__data__=[]},C.prototype.delete=function(j){var U=this.__data__,W=v(U,j);return!(W<0)&&(W==U.length-1?U.pop():O.call(U,W,1),!0)},C.prototype.get=function(j){var U=this.__data__,W=v(U,j);return W<0?void 0:U[W][1]},C.prototype.has=function(j){return v(this.__data__,j)>-1},C.prototype.set=function(j,U){var W=this.__data__,Y=v(W,j);return Y<0?W.push([j,U]):W[Y][1]=U,this},R.prototype.clear=function(){this.__data__={hash:new $,map:new(N||C),string:new $}},R.prototype.delete=function(j){return S(this,j).delete(j)},R.prototype.get=function(j){return S(this,j).get(j)},R.prototype.has=function(j){return S(this,j).has(j)},R.prototype.set=function(j,U){return S(this,j).set(j,U),this},k.prototype.add=k.prototype.push=function(j){return this.__data__.set(j,"__lodash_hash_undefined__"),this},k.prototype.has=function(j){return this.__data__.has(j)};var x=B&&1/h(new B([,-0]))[1]==1/0?function(j){return new B(j)}:function(){};function S(j,U){var W,Y,F=j.__data__;return((Y=typeof(W=U))=="string"||Y=="number"||Y=="symbol"||Y=="boolean"?W!=="__proto__":W===null)?F[typeof U=="string"?"string":"hash"]:F.map}function T(j,U){var W=function(Y,F){return Y==null?void 0:Y[F]}(j,U);return w(W)?W:void 0}function L(j){var U=typeof j;return!!j&&(U=="object"||U=="function")}r.exports=function(j){return j&&j.length?function(U,W,Y){var F=-1,X=c,P=U.length,I=!0,V=[],Q=V;if(P>=200){var G=x(U);if(G)return h(G);I=!1,X=u,Q=new k}else Q=V;t:for(;++F<P;){var q=U[F],J=q;if(q=q!==0?q:0,I&&J==J){for(var it=Q.length;it--;)if(Q[it]===J)continue t;V.push(q)}else X(Q,J,Y)||(Q!==V&&Q.push(J),V.push(q))}return V}(j):[]}}).call(this)}).call(this,typeof ve<"u"?ve:typeof self<"u"?self:typeof window<"u"?window:{})},{}],450:[function(t,r,l){var i=t("inherits"),s=t("hash-base"),a=t("safe-buffer").Buffer,o=new Array(16);function n(){s.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function c(m,f){return m<<f|m>>>32-f}function d(m,f,b,y,_,E,M){return c(m+(f&b|~f&y)+_+E|0,M)+f|0}function u(m,f,b,y,_,E,M){return c(m+(f&y|b&~y)+_+E|0,M)+f|0}function h(m,f,b,y,_,E,M){return c(m+(f^b^y)+_+E|0,M)+f|0}function p(m,f,b,y,_,E,M){return c(m+(b^(f|~y))+_+E|0,M)+f|0}i(n,s),n.prototype._update=function(){for(var m=o,f=0;f<16;++f)m[f]=this._block.readInt32LE(4*f);var b=this._a,y=this._b,_=this._c,E=this._d;b=d(b,y,_,E,m[0],3614090360,7),E=d(E,b,y,_,m[1],3905402710,12),_=d(_,E,b,y,m[2],606105819,17),y=d(y,_,E,b,m[3],3250441966,22),b=d(b,y,_,E,m[4],4118548399,7),E=d(E,b,y,_,m[5],1200080426,12),_=d(_,E,b,y,m[6],2821735955,17),y=d(y,_,E,b,m[7],4249261313,22),b=d(b,y,_,E,m[8],1770035416,7),E=d(E,b,y,_,m[9],2336552879,12),_=d(_,E,b,y,m[10],4294925233,17),y=d(y,_,E,b,m[11],2304563134,22),b=d(b,y,_,E,m[12],1804603682,7),E=d(E,b,y,_,m[13],4254626195,12),_=d(_,E,b,y,m[14],2792965006,17),b=u(b,y=d(y,_,E,b,m[15],1236535329,22),_,E,m[1],4129170786,5),E=u(E,b,y,_,m[6],3225465664,9),_=u(_,E,b,y,m[11],643717713,14),y=u(y,_,E,b,m[0],3921069994,20),b=u(b,y,_,E,m[5],3593408605,5),E=u(E,b,y,_,m[10],38016083,9),_=u(_,E,b,y,m[15],3634488961,14),y=u(y,_,E,b,m[4],3889429448,20),b=u(b,y,_,E,m[9],568446438,5),E=u(E,b,y,_,m[14],3275163606,9),_=u(_,E,b,y,m[3],4107603335,14),y=u(y,_,E,b,m[8],1163531501,20),b=u(b,y,_,E,m[13],2850285829,5),E=u(E,b,y,_,m[2],4243563512,9),_=u(_,E,b,y,m[7],1735328473,14),b=h(b,y=u(y,_,E,b,m[12],2368359562,20),_,E,m[5],4294588738,4),E=h(E,b,y,_,m[8],2272392833,11),_=h(_,E,b,y,m[11],1839030562,16),y=h(y,_,E,b,m[14],4259657740,23),b=h(b,y,_,E,m[1],2763975236,4),E=h(E,b,y,_,m[4],1272893353,11),_=h(_,E,b,y,m[7],4139469664,16),y=h(y,_,E,b,m[10],3200236656,23),b=h(b,y,_,E,m[13],681279174,4),E=h(E,b,y,_,m[0],3936430074,11),_=h(_,E,b,y,m[3],3572445317,16),y=h(y,_,E,b,m[6],76029189,23),b=h(b,y,_,E,m[9],3654602809,4),E=h(E,b,y,_,m[12],3873151461,11),_=h(_,E,b,y,m[15],530742520,16),b=p(b,y=h(y,_,E,b,m[2],3299628645,23),_,E,m[0],4096336452,6),E=p(E,b,y,_,m[7],1126891415,10),_=p(_,E,b,y,m[14],2878612391,15),y=p(y,_,E,b,m[5],4237533241,21),b=p(b,y,_,E,m[12],1700485571,6),E=p(E,b,y,_,m[3],2399980690,10),_=p(_,E,b,y,m[10],4293915773,15),y=p(y,_,E,b,m[1],2240044497,21),b=p(b,y,_,E,m[8],1873313359,6),E=p(E,b,y,_,m[15],4264355552,10),_=p(_,E,b,y,m[6],2734768916,15),y=p(y,_,E,b,m[13],1309151649,21),b=p(b,y,_,E,m[4],4149444226,6),E=p(E,b,y,_,m[11],3174756917,10),_=p(_,E,b,y,m[2],718787259,15),y=p(y,_,E,b,m[9],3951481745,21),this._a=this._a+b|0,this._b=this._b+y|0,this._c=this._c+_|0,this._d=this._d+E|0},n.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var m=a.allocUnsafe(16);return m.writeInt32LE(this._a,0),m.writeInt32LE(this._b,4),m.writeInt32LE(this._c,8),m.writeInt32LE(this._d,12),m},r.exports=n},{"hash-base":425,inherits:440,"safe-buffer":494}],451:[function(t,r,l){var i=t("bn.js"),s=t("brorand");function a(o){this.rand=o||new s.Rand}r.exports=a,a.create=function(o){return new a(o)},a.prototype._randbelow=function(o){var n=o.bitLength(),c=Math.ceil(n/8);do var d=new i(this.rand.generate(c));while(d.cmp(o)>=0);return d},a.prototype._randrange=function(o,n){var c=n.sub(o);return o.add(this._randbelow(c))},a.prototype.test=function(o,n,c){var d=o.bitLength(),u=i.mont(o),h=new i(1).toRed(u);n||(n=Math.max(1,d/48|0));for(var p=o.subn(1),m=0;!p.testn(m);m++);for(var f=o.shrn(m),b=p.toRed(u);n>0;n--){var y=this._randrange(new i(2),p);c&&c(y);var _=y.toRed(u).redPow(f);if(_.cmp(h)!==0&&_.cmp(b)!==0){for(var E=1;E<m;E++){if((_=_.redSqr()).cmp(h)===0)return!1;if(_.cmp(b)===0)break}if(E===m)return!1}}return!0},a.prototype.getDivisor=function(o,n){var c=o.bitLength(),d=i.mont(o),u=new i(1).toRed(d);n||(n=Math.max(1,c/48|0));for(var h=o.subn(1),p=0;!h.testn(p);p++);for(var m=o.shrn(p),f=h.toRed(d);n>0;n--){var b=this._randrange(new i(2),h),y=o.gcd(b);if(y.cmpn(1)!==0)return y;var _=b.toRed(d).redPow(m);if(_.cmp(u)!==0&&_.cmp(f)!==0){for(var E=1;E<p;E++){if((_=_.redSqr()).cmp(u)===0)return _.fromRed().subn(1).gcd(o);if(_.cmp(f)===0)break}if(E===p)return(_=_.redSqr()).fromRed().subn(1).gcd(o)}}return!1}},{"bn.js":452,brorand:187}],452:[function(t,r,l){arguments[4][184][0].apply(l,arguments)},{buffer:188,dup:184}],453:[function(t,r,l){function i(s,a){if(!s)throw new Error(a||"Assertion failed")}r.exports=i,i.equal=function(s,a,o){if(s!=a)throw new Error(o||"Assertion failed: "+s+" != "+a)}},{}],454:[function(t,r,l){var i=l;function s(o){return o.length===1?"0"+o:o}function a(o){for(var n="",c=0;c<o.length;c++)n+=s(o[c].toString(16));return n}i.toArray=function(o,n){if(Array.isArray(o))return o.slice();if(!o)return[];var c=[];if(typeof o!="string"){for(var d=0;d<o.length;d++)c[d]=0|o[d];return c}if(n==="hex")for((o=o.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(o="0"+o),d=0;d<o.length;d+=2)c.push(parseInt(o[d]+o[d+1],16));else for(d=0;d<o.length;d++){var u=o.charCodeAt(d),h=u>>8,p=255&u;h?c.push(h,p):c.push(p)}return c},i.zero2=s,i.toHex=a,i.encode=function(o,n){return n==="hex"?a(o):o}},{}],455:[function(t,r,l){r.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],456:[function(t,r,l){var i=t("asn1.js");l.certificate=t("./certificate");var s=i.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});l.RSAPrivateKey=s;var a=i.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});l.RSAPublicKey=a;var o=i.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(n),this.key("subjectPublicKey").bitstr())});l.PublicKey=o;var n=i.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),c=i.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(n),this.key("subjectPrivateKey").octstr())});l.PrivateKey=c;var d=i.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});l.EncryptedPrivateKey=d;var u=i.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});l.DSAPrivateKey=u,l.DSAparam=i.define("DSAparam",function(){this.int()});var h=i.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(p),this.key("publicKey").optional().explicit(1).bitstr())});l.ECPrivateKey=h;var p=i.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});l.signature=i.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},{"./certificate":457,"asn1.js":170}],457:[function(t,r,l){var i=t("asn1.js"),s=i.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),a=i.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),o=i.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),n=i.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(o),this.key("subjectPublicKey").bitstr())}),c=i.define("RelativeDistinguishedName",function(){this.setof(a)}),d=i.define("RDNSequence",function(){this.seqof(c)}),u=i.define("Name",function(){this.choice({rdnSequence:this.use(d)})}),h=i.define("Validity",function(){this.seq().obj(this.key("notBefore").use(s),this.key("notAfter").use(s))}),p=i.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),m=i.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(o),this.key("issuer").use(u),this.key("validity").use(h),this.key("subject").use(u),this.key("subjectPublicKeyInfo").use(n),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(p).optional())}),f=i.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(m),this.key("signatureAlgorithm").use(o),this.key("signatureValue").bitstr())});r.exports=f},{"asn1.js":170}],458:[function(t,r,l){var i=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,s=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,a=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,o=t("evp_bytestokey"),n=t("browserify-aes"),c=t("safe-buffer").Buffer;r.exports=function(d,u){var h,p=d.toString(),m=p.match(i);if(m){var f="aes"+m[1],b=c.from(m[2],"hex"),y=c.from(m[3].replace(/[\r\n]/g,""),"base64"),_=o(u,b.slice(0,8),parseInt(m[1],10)).key,E=[],M=n.createDecipheriv(f,_,b);E.push(M.update(y)),E.push(M.final()),h=c.concat(E)}else{var D=p.match(a);h=c.from(D[2].replace(/[\r\n]/g,""),"base64")}return{tag:p.match(s)[1],data:h}}},{"browserify-aes":191,evp_bytestokey:423,"safe-buffer":494}],459:[function(t,r,l){var i=t("./asn1"),s=t("./aesid.json"),a=t("./fixProc"),o=t("browserify-aes"),n=t("pbkdf2"),c=t("safe-buffer").Buffer;function d(u){var h;typeof u!="object"||c.isBuffer(u)||(h=u.passphrase,u=u.key),typeof u=="string"&&(u=c.from(u));var p,m,f=a(u,h),b=f.tag,y=f.data;switch(b){case"CERTIFICATE":m=i.certificate.decode(y,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(m||(m=i.PublicKey.decode(y,"der")),p=m.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return i.RSAPublicKey.decode(m.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return m.subjectPrivateKey=m.subjectPublicKey,{type:"ec",data:m};case"1.2.840.10040.4.1":return m.algorithm.params.pub_key=i.DSAparam.decode(m.subjectPublicKey.data,"der"),{type:"dsa",data:m.algorithm.params};default:throw new Error("unknown key id "+p)}case"ENCRYPTED PRIVATE KEY":y=function(_,E){var M=_.algorithm.decrypt.kde.kdeparams.salt,D=parseInt(_.algorithm.decrypt.kde.kdeparams.iters.toString(),10),z=s[_.algorithm.decrypt.cipher.algo.join(".")],O=_.algorithm.decrypt.cipher.iv,N=_.subjectPrivateKey,B=parseInt(z.split("-")[1],10)/8,H=n.pbkdf2Sync(E,M,D,B,"sha1"),$=o.createDecipheriv(z,H,O),C=[];return C.push($.update(N)),C.push($.final()),c.concat(C)}(y=i.EncryptedPrivateKey.decode(y,"der"),h);case"PRIVATE KEY":switch(p=(m=i.PrivateKey.decode(y,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return i.RSAPrivateKey.decode(m.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:m.algorithm.curve,privateKey:i.ECPrivateKey.decode(m.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return m.algorithm.params.priv_key=i.DSAparam.decode(m.subjectPrivateKey,"der"),{type:"dsa",params:m.algorithm.params};default:throw new Error("unknown key id "+p)}case"RSA PUBLIC KEY":return i.RSAPublicKey.decode(y,"der");case"RSA PRIVATE KEY":return i.RSAPrivateKey.decode(y,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:i.DSAPrivateKey.decode(y,"der")};case"EC PRIVATE KEY":return{curve:(y=i.ECPrivateKey.decode(y,"der")).parameters.value,privateKey:y.privateKey};default:throw new Error("unknown key type "+b)}}r.exports=d,d.signature=i.signature},{"./aesid.json":455,"./asn1":456,"./fixProc":458,"browserify-aes":191,pbkdf2:460,"safe-buffer":494}],460:[function(t,r,l){l.pbkdf2=t("./lib/async"),l.pbkdf2Sync=t("./lib/sync")},{"./lib/async":461,"./lib/sync":464}],461:[function(t,r,l){(function(i){(function(){var s,a,o=t("safe-buffer").Buffer,n=t("./precondition"),c=t("./default-encoding"),d=t("./sync"),u=t("./to-buffer"),h=i.crypto&&i.crypto.subtle,p={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},m=[];function f(){return a||(a=i.process&&i.process.nextTick?i.process.nextTick:i.queueMicrotask?i.queueMicrotask:i.setImmediate?i.setImmediate:i.setTimeout)}function b(y,_,E,M,D){return h.importKey("raw",y,{name:"PBKDF2"},!1,["deriveBits"]).then(function(z){return h.deriveBits({name:"PBKDF2",salt:_,iterations:E,hash:{name:D}},z,M<<3)}).then(function(z){return o.from(z)})}r.exports=function(y,_,E,M,D,z){typeof D=="function"&&(z=D,D=void 0);var O=p[(D=D||"sha1").toLowerCase()];if(O&&typeof i.Promise=="function"){if(n(E,M),y=u(y,c,"Password"),_=u(_,c,"Salt"),typeof z!="function")throw new Error("No callback provided to pbkdf2");(function(N,B){N.then(function(H){f()(function(){B(null,H)})},function(H){f()(function(){B(H)})})})(function(N){if(i.process&&!i.process.browser||!h||!h.importKey||!h.deriveBits)return Promise.resolve(!1);if(m[N]!==void 0)return m[N];var B=b(s=s||o.alloc(8),s,10,128,N).then(function(){return!0}).catch(function(){return!1});return m[N]=B,B}(O).then(function(N){return N?b(y,_,E,M,O):d(y,_,E,M,D)}),z)}else f()(function(){var N;try{N=d(y,_,E,M,D)}catch(B){return z(B)}z(null,N)})}}).call(this)}).call(this,typeof ve<"u"?ve:typeof self<"u"?self:typeof window<"u"?window:{})},{"./default-encoding":462,"./precondition":463,"./sync":464,"./to-buffer":465,"safe-buffer":494}],462:[function(t,r,l){(function(i,s){(function(){var a;s.process&&s.process.browser?a="utf-8":s.process&&s.process.version?a=parseInt(i.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":a="utf-8",r.exports=a}).call(this)}).call(this,t("_process"),typeof ve<"u"?ve:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467}],463:[function(t,r,l){var i=Math.pow(2,30)-1;r.exports=function(s,a){if(typeof s!="number")throw new TypeError("Iterations not a number");if(s<0)throw new TypeError("Bad iterations");if(typeof a!="number")throw new TypeError("Key length not a number");if(a<0||a>i||a!=a)throw new TypeError("Bad key length")}},{}],464:[function(t,r,l){var i=t("create-hash/md5"),s=t("ripemd160"),a=t("sha.js"),o=t("safe-buffer").Buffer,n=t("./precondition"),c=t("./default-encoding"),d=t("./to-buffer"),u=o.alloc(128),h={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function p(m,f,b){var y=function(O){function N(B){return a(O).update(B).digest()}return O==="rmd160"||O==="ripemd160"?function(B){return new s().update(B).digest()}:O==="md5"?i:N}(m),_=m==="sha512"||m==="sha384"?128:64;f.length>_?f=y(f):f.length<_&&(f=o.concat([f,u],_));for(var E=o.allocUnsafe(_+h[m]),M=o.allocUnsafe(_+h[m]),D=0;D<_;D++)E[D]=54^f[D],M[D]=92^f[D];var z=o.allocUnsafe(_+b+4);E.copy(z,0,0,_),this.ipad1=z,this.ipad2=E,this.opad=M,this.alg=m,this.blocksize=_,this.hash=y,this.size=h[m]}p.prototype.run=function(m,f){return m.copy(f,this.blocksize),this.hash(f).copy(this.opad,this.blocksize),this.hash(this.opad)},r.exports=function(m,f,b,y,_){n(b,y);var E=new p(_=_||"sha1",m=d(m,c,"Password"),(f=d(f,c,"Salt")).length),M=o.allocUnsafe(y),D=o.allocUnsafe(f.length+4);f.copy(D,0,0,f.length);for(var z=0,O=h[_],N=Math.ceil(y/O),B=1;B<=N;B++){D.writeUInt32BE(B,f.length);for(var H=E.run(D,E.ipad1),$=H,C=1;C<b;C++){$=E.run($,E.ipad2);for(var R=0;R<O;R++)H[R]^=$[R]}H.copy(M,z),z+=O}return M}},{"./default-encoding":462,"./precondition":463,"./to-buffer":465,"create-hash/md5":387,ripemd160:493,"safe-buffer":494,"sha.js":498}],465:[function(t,r,l){var i=t("safe-buffer").Buffer;r.exports=function(s,a,o){if(i.isBuffer(s))return s;if(typeof s=="string")return i.from(s,a);if(ArrayBuffer.isView(s))return i.from(s.buffer);throw new TypeError(o+" must be a string, a Buffer, a typed array or a DataView")}},{"safe-buffer":494}],466:[function(t,r,l){(function(i){(function(){i===void 0||!i.version||i.version.indexOf("v0.")===0||i.version.indexOf("v1.")===0&&i.version.indexOf("v1.8.")!==0?r.exports={nextTick:function(s,a,o,n){if(typeof s!="function")throw new TypeError('"callback" argument must be a function');var c,d,u=arguments.length;switch(u){case 0:case 1:return i.nextTick(s);case 2:return i.nextTick(function(){s.call(null,a)});case 3:return i.nextTick(function(){s.call(null,a,o)});case 4:return i.nextTick(function(){s.call(null,a,o,n)});default:for(c=new Array(u-1),d=0;d<c.length;)c[d++]=arguments[d];return i.nextTick(function(){s.apply(null,c)})}}}:r.exports=i}).call(this)}).call(this,t("_process"))},{_process:467}],467:[function(t,r,l){var i,s,a=r.exports={};function o(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function c(_){if(i===setTimeout)return setTimeout(_,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(_,0);try{return i(_,0)}catch{try{return i.call(null,_,0)}catch{return i.call(this,_,0)}}}(function(){try{i=typeof setTimeout=="function"?setTimeout:o}catch{i=o}try{s=typeof clearTimeout=="function"?clearTimeout:n}catch{s=n}})();var d,u=[],h=!1,p=-1;function m(){h&&d&&(h=!1,d.length?u=d.concat(u):p=-1,u.length&&f())}function f(){if(!h){var _=c(m);h=!0;for(var E=u.length;E;){for(d=u,u=[];++p<E;)d&&d[p].run();p=-1,E=u.length}d=null,h=!1,function(M){if(s===clearTimeout)return clearTimeout(M);if((s===n||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(M);try{s(M)}catch{try{return s.call(null,M)}catch{return s.call(this,M)}}}(_)}}function b(_,E){this.fun=_,this.array=E}function y(){}a.nextTick=function(_){var E=new Array(arguments.length-1);if(arguments.length>1)for(var M=1;M<arguments.length;M++)E[M-1]=arguments[M];u.push(new b(_,E)),u.length!==1||h||c(f)},b.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=y,a.addListener=y,a.once=y,a.off=y,a.removeListener=y,a.removeAllListeners=y,a.emit=y,a.prependListener=y,a.prependOnceListener=y,a.listeners=function(_){return[]},a.binding=function(_){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(_){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],468:[function(t,r,l){l.publicEncrypt=t("./publicEncrypt"),l.privateDecrypt=t("./privateDecrypt"),l.privateEncrypt=function(i,s){return l.publicEncrypt(i,s,!0)},l.publicDecrypt=function(i,s){return l.privateDecrypt(i,s,!0)}},{"./privateDecrypt":471,"./publicEncrypt":472}],469:[function(t,r,l){var i=t("create-hash"),s=t("safe-buffer").Buffer;function a(o){var n=s.allocUnsafe(4);return n.writeUInt32BE(o,0),n}r.exports=function(o,n){for(var c,d=s.alloc(0),u=0;d.length<n;)c=a(u++),d=s.concat([d,i("sha1").update(o).update(c).digest()]);return d.slice(0,n)}},{"create-hash":386,"safe-buffer":494}],470:[function(t,r,l){arguments[4][184][0].apply(l,arguments)},{buffer:188,dup:184}],471:[function(t,r,l){var i=t("parse-asn1"),s=t("./mgf"),a=t("./xor"),o=t("bn.js"),n=t("browserify-rsa"),c=t("create-hash"),d=t("./withPublic"),u=t("safe-buffer").Buffer;r.exports=function(h,p,m){var f;f=h.padding?h.padding:m?1:4;var b,y=i(h),_=y.modulus.byteLength();if(p.length>_||new o(p).cmp(y.modulus)>=0)throw new Error("decryption error");b=m?d(new o(p),y):n(p,y);var E=u.alloc(_-b.length);if(b=u.concat([E,b],_),f===4)return function(M,D){var z=M.modulus.byteLength(),O=c("sha1").update(u.alloc(0)).digest(),N=O.length;if(D[0]!==0)throw new Error("decryption error");var B=D.slice(1,N+1),H=D.slice(N+1),$=a(B,s(H,N)),C=a(H,s($,z-N-1));if(function(k,v){k=u.from(k),v=u.from(v);var w=0,x=k.length;k.length!==v.length&&(w++,x=Math.min(k.length,v.length));for(var S=-1;++S<x;)w+=k[S]^v[S];return w}(O,C.slice(0,N)))throw new Error("decryption error");for(var R=N;C[R]===0;)R++;if(C[R++]!==1)throw new Error("decryption error");return C.slice(R)}(y,b);if(f===1)return function(M,D,z){for(var O=D.slice(0,2),N=2,B=0;D[N++]!==0;)if(N>=D.length){B++;break}var H=D.slice(2,N-1);if((O.toString("hex")!=="0002"&&!z||O.toString("hex")!=="0001"&&z)&&B++,H.length<8&&B++,B)throw new Error("decryption error");return D.slice(N)}(0,b,m);if(f===3)return b;throw new Error("unknown padding")}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,"safe-buffer":494}],472:[function(t,r,l){var i=t("parse-asn1"),s=t("randombytes"),a=t("create-hash"),o=t("./mgf"),n=t("./xor"),c=t("bn.js"),d=t("./withPublic"),u=t("browserify-rsa"),h=t("safe-buffer").Buffer;r.exports=function(p,m,f){var b;b=p.padding?p.padding:f?1:4;var y,_=i(p);if(b===4)y=function(E,M){var D=E.modulus.byteLength(),z=M.length,O=a("sha1").update(h.alloc(0)).digest(),N=O.length,B=2*N;if(z>D-B-2)throw new Error("message too long");var H=h.alloc(D-z-B-2),$=D-N-1,C=s(N),R=n(h.concat([O,H,h.alloc(1,1),M],$),o(C,$)),k=n(C,o(R,N));return new c(h.concat([h.alloc(1),k,R],D))}(_,m);else if(b===1)y=function(E,M,D){var z,O=M.length,N=E.modulus.byteLength();if(O>N-11)throw new Error("message too long");return z=D?h.alloc(N-O-3,255):function(B){for(var H,$=h.allocUnsafe(B),C=0,R=s(2*B),k=0;C<B;)k===R.length&&(R=s(2*B),k=0),(H=R[k++])&&($[C++]=H);return $}(N-O-3),new c(h.concat([h.from([0,D?1:2]),z,h.alloc(1),M],N))}(_,m,f);else{if(b!==3)throw new Error("unknown padding");if((y=new c(m)).cmp(_.modulus)>=0)throw new Error("data too long for modulus")}return f?u(y,_):d(y,_)}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,randombytes:475,"safe-buffer":494}],473:[function(t,r,l){var i=t("bn.js"),s=t("safe-buffer").Buffer;r.exports=function(a,o){return s.from(a.toRed(i.mont(o.modulus)).redPow(new i(o.publicExponent)).fromRed().toArray())}},{"bn.js":470,"safe-buffer":494}],474:[function(t,r,l){r.exports=function(i,s){for(var a=i.length,o=-1;++o<a;)i[o]^=s[o];return i}},{}],475:[function(t,r,l){(function(i,s){(function(){var a=t("safe-buffer").Buffer,o=s.crypto||s.msCrypto;o&&o.getRandomValues?r.exports=function(n,c){if(n>4294967295)throw new RangeError("requested too many random bytes");var d=a.allocUnsafe(n);if(n>0)if(n>65536)for(var u=0;u<n;u+=65536)o.getRandomValues(d.slice(u,u+65536));else o.getRandomValues(d);return typeof c=="function"?i.nextTick(function(){c(null,d)}):d}:r.exports=function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}}).call(this)}).call(this,t("_process"),typeof ve<"u"?ve:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467,"safe-buffer":494}],476:[function(t,r,l){(function(i,s){(function(){function a(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var o=t("safe-buffer"),n=t("randombytes"),c=o.Buffer,d=o.kMaxLength,u=s.crypto||s.msCrypto,h=Math.pow(2,32)-1;function p(b,y){if(typeof b!="number"||b!=b)throw new TypeError("offset must be a number");if(b>h||b<0)throw new TypeError("offset must be a uint32");if(b>d||b>y)throw new RangeError("offset out of range")}function m(b,y,_){if(typeof b!="number"||b!=b)throw new TypeError("size must be a number");if(b>h||b<0)throw new TypeError("size must be a uint32");if(b+y>_||b>d)throw new RangeError("buffer too small")}function f(b,y,_,E){if(i.browser){var M=b.buffer,D=new Uint8Array(M,y,_);return u.getRandomValues(D),E?void i.nextTick(function(){E(null,b)}):b}if(!E)return n(_).copy(b,y),b;n(_,function(z,O){if(z)return E(z);O.copy(b,y),E(null,b)})}u&&u.getRandomValues||!i.browser?(l.randomFill=function(b,y,_,E){if(!(c.isBuffer(b)||b instanceof s.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof y=="function")E=y,y=0,_=b.length;else if(typeof _=="function")E=_,_=b.length-y;else if(typeof E!="function")throw new TypeError('"cb" argument must be a function');return p(y,b.length),m(_,y,b.length),f(b,y,_,E)},l.randomFillSync=function(b,y,_){if(y===void 0&&(y=0),!(c.isBuffer(b)||b instanceof s.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return p(y,b.length),_===void 0&&(_=b.length-y),m(_,y,b.length),f(b,y,_)}):(l.randomFill=a,l.randomFillSync=a)}).call(this)}).call(this,t("_process"),typeof ve<"u"?ve:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467,randombytes:475,"safe-buffer":494}],477:[function(t,r,l){var i={};function s(o,n,c){c||(c=Error);var d=function(u){var h,p;function m(f,b,y){return u.call(this,function(_,E,M){return typeof n=="string"?n:n(_,E,M)}(f,b,y))||this}return p=u,(h=m).prototype=Object.create(p.prototype),h.prototype.constructor=h,h.__proto__=p,m}(c);d.prototype.name=c.name,d.prototype.code=o,i[o]=d}function a(o,n){if(Array.isArray(o)){var c=o.length;return o=o.map(function(d){return String(d)}),c>2?"one of ".concat(n," ").concat(o.slice(0,c-1).join(", "),", or ")+o[c-1]:c===2?"one of ".concat(n," ").concat(o[0]," or ").concat(o[1]):"of ".concat(n," ").concat(o[0])}return"of ".concat(n," ").concat(String(o))}s("ERR_INVALID_OPT_VALUE",function(o,n){return'The value "'+n+'" is invalid for option "'+o+'"'},TypeError),s("ERR_INVALID_ARG_TYPE",function(o,n,c){var d,u,h;if(typeof n=="string"&&(u="not ",n.substr(0,u.length)===u)?(d="must not be",n=n.replace(/^not /,"")):d="must be",function(m,f,b){return(b===void 0||b>m.length)&&(b=m.length),m.substring(b-f.length,b)===f}(o," argument"))h="The ".concat(o," ").concat(d," ").concat(a(n,"type"));else{var p=function(m,f,b){return typeof b!="number"&&(b=0),!(b+f.length>m.length)&&m.indexOf(f,b)!==-1}(o,".")?"property":"argument";h='The "'.concat(o,'" ').concat(p," ").concat(d," ").concat(a(n,"type"))}return h+=". Received type ".concat(typeof c)},TypeError),s("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),s("ERR_METHOD_NOT_IMPLEMENTED",function(o){return"The "+o+" method is not implemented"}),s("ERR_STREAM_PREMATURE_CLOSE","Premature close"),s("ERR_STREAM_DESTROYED",function(o){return"Cannot call "+o+" after a stream was destroyed"}),s("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),s("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),s("ERR_STREAM_WRITE_AFTER_END","write after end"),s("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),s("ERR_UNKNOWN_ENCODING",function(o){return"Unknown encoding: "+o},TypeError),s("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),r.exports.codes=i},{}],478:[function(t,r,l){(function(i){(function(){var s=Object.keys||function(m){var f=[];for(var b in m)f.push(b);return f};r.exports=u;var a=t("./_stream_readable"),o=t("./_stream_writable");t("inherits")(u,a);for(var n=s(o.prototype),c=0;c<n.length;c++){var d=n[c];u.prototype[d]||(u.prototype[d]=o.prototype[d])}function u(m){if(!(this instanceof u))return new u(m);a.call(this,m),o.call(this,m),this.allowHalfOpen=!0,m&&(m.readable===!1&&(this.readable=!1),m.writable===!1&&(this.writable=!1),m.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",h)))}function h(){this._writableState.ended||i.nextTick(p,this)}function p(m){m.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(m){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=m,this._writableState.destroyed=m)}})}).call(this)}).call(this,t("_process"))},{"./_stream_readable":480,"./_stream_writable":482,_process:467,inherits:440}],479:[function(t,r,l){r.exports=s;var i=t("./_stream_transform");function s(a){if(!(this instanceof s))return new s(a);i.call(this,a)}t("inherits")(s,i),s.prototype._transform=function(a,o,n){n(null,a)}},{"./_stream_transform":481,inherits:440}],480:[function(t,r,l){(function(i,s){(function(){var a;r.exports=$,$.ReadableState=H,t("events").EventEmitter;var o=function(P,I){return P.listeners(I).length},n=t("./internal/streams/stream"),c=t("buffer").Buffer,d=(s!==void 0?s:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},u,h=t("util");u=h&&h.debuglog?h.debuglog("stream"):function(){};var p,m,f,b=t("./internal/streams/buffer_list"),y=t("./internal/streams/destroy"),_=t("./internal/streams/state").getHighWaterMark,E=t("../errors").codes,M=E.ERR_INVALID_ARG_TYPE,D=E.ERR_STREAM_PUSH_AFTER_EOF,z=E.ERR_METHOD_NOT_IMPLEMENTED,O=E.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;t("inherits")($,n);var N=y.errorOrDestroy,B=["error","close","destroy","pause","resume"];function H(P,I,V){a=a||t("./_stream_duplex"),P=P||{},typeof V!="boolean"&&(V=I instanceof a),this.objectMode=!!P.objectMode,V&&(this.objectMode=this.objectMode||!!P.readableObjectMode),this.highWaterMark=_(this,P,"readableHighWaterMark",V),this.buffer=new b,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=P.emitClose!==!1,this.autoDestroy=!!P.autoDestroy,this.destroyed=!1,this.defaultEncoding=P.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,P.encoding&&(p||(p=t("string_decoder/").StringDecoder),this.decoder=new p(P.encoding),this.encoding=P.encoding)}function $(P){if(a=a||t("./_stream_duplex"),!(this instanceof $))return new $(P);var I=this instanceof a;this._readableState=new H(P,this,I),this.readable=!0,P&&(typeof P.read=="function"&&(this._read=P.read),typeof P.destroy=="function"&&(this._destroy=P.destroy)),n.call(this)}function C(P,I,V,Q,G){u("readableAddChunk",I);var q,J=P._readableState;if(I===null)J.reading=!1,function(it,nt){if(u("onEofChunk"),!nt.ended){if(nt.decoder){var Z=nt.decoder.end();Z&&Z.length&&(nt.buffer.push(Z),nt.length+=nt.objectMode?1:Z.length)}nt.ended=!0,nt.sync?v(it):(nt.needReadable=!1,nt.emittedReadable||(nt.emittedReadable=!0,w(it)))}}(P,J);else if(G||(q=function(it,nt){var Z;st=nt,c.isBuffer(st)||st instanceof d||typeof nt=="string"||nt===void 0||it.objectMode||(Z=new M("chunk",["string","Buffer","Uint8Array"],nt));var st;return Z}(J,I)),q)N(P,q);else if(J.objectMode||I&&I.length>0)if(typeof I=="string"||J.objectMode||Object.getPrototypeOf(I)===c.prototype||(I=function(it){return c.from(it)}(I)),Q)J.endEmitted?N(P,new O):R(P,J,I,!0);else if(J.ended)N(P,new D);else{if(J.destroyed)return!1;J.reading=!1,J.decoder&&!V?(I=J.decoder.write(I),J.objectMode||I.length!==0?R(P,J,I,!1):x(P,J)):R(P,J,I,!1)}else Q||(J.reading=!1,x(P,J));return!J.ended&&(J.length<J.highWaterMark||J.length===0)}function R(P,I,V,Q){I.flowing&&I.length===0&&!I.sync?(I.awaitDrain=0,P.emit("data",V)):(I.length+=I.objectMode?1:V.length,Q?I.buffer.unshift(V):I.buffer.push(V),I.needReadable&&v(P)),x(P,I)}Object.defineProperty($.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(P){this._readableState&&(this._readableState.destroyed=P)}}),$.prototype.destroy=y.destroy,$.prototype._undestroy=y.undestroy,$.prototype._destroy=function(P,I){I(P)},$.prototype.push=function(P,I){var V,Q=this._readableState;return Q.objectMode?V=!0:typeof P=="string"&&((I=I||Q.defaultEncoding)!==Q.encoding&&(P=c.from(P,I),I=""),V=!0),C(this,P,I,!1,V)},$.prototype.unshift=function(P){return C(this,P,null,!0,!1)},$.prototype.isPaused=function(){return this._readableState.flowing===!1},$.prototype.setEncoding=function(P){p||(p=t("string_decoder/").StringDecoder);var I=new p(P);this._readableState.decoder=I,this._readableState.encoding=this._readableState.decoder.encoding;for(var V=this._readableState.buffer.head,Q="";V!==null;)Q+=I.write(V.data),V=V.next;return this._readableState.buffer.clear(),Q!==""&&this._readableState.buffer.push(Q),this._readableState.length=Q.length,this};function k(P,I){return P<=0||I.length===0&&I.ended?0:I.objectMode?1:P!=P?I.flowing&&I.length?I.buffer.head.data.length:I.length:(P>I.highWaterMark&&(I.highWaterMark=function(V){return V>=1073741824?V=1073741824:(V--,V|=V>>>1,V|=V>>>2,V|=V>>>4,V|=V>>>8,V|=V>>>16,V++),V}(P)),P<=I.length?P:I.ended?I.length:(I.needReadable=!0,0))}function v(P){var I=P._readableState;u("emitReadable",I.needReadable,I.emittedReadable),I.needReadable=!1,I.emittedReadable||(u("emitReadable",I.flowing),I.emittedReadable=!0,i.nextTick(w,P))}function w(P){var I=P._readableState;u("emitReadable_",I.destroyed,I.length,I.ended),I.destroyed||!I.length&&!I.ended||(P.emit("readable"),I.emittedReadable=!1),I.needReadable=!I.flowing&&!I.ended&&I.length<=I.highWaterMark,U(P)}function x(P,I){I.readingMore||(I.readingMore=!0,i.nextTick(S,P,I))}function S(P,I){for(;!I.reading&&!I.ended&&(I.length<I.highWaterMark||I.flowing&&I.length===0);){var V=I.length;if(u("maybeReadMore read 0"),P.read(0),V===I.length)break}I.readingMore=!1}function T(P){var I=P._readableState;I.readableListening=P.listenerCount("readable")>0,I.resumeScheduled&&!I.paused?I.flowing=!0:P.listenerCount("data")>0&&P.resume()}function L(P){u("readable nexttick read 0"),P.read(0)}function j(P,I){u("resume",I.reading),I.reading||P.read(0),I.resumeScheduled=!1,P.emit("resume"),U(P),I.flowing&&!I.reading&&P.read(0)}function U(P){var I=P._readableState;for(u("flow",I.flowing);I.flowing&&P.read()!==null;);}function W(P,I){return I.length===0?null:(I.objectMode?V=I.buffer.shift():!P||P>=I.length?(V=I.decoder?I.buffer.join(""):I.buffer.length===1?I.buffer.first():I.buffer.concat(I.length),I.buffer.clear()):V=I.buffer.consume(P,I.decoder),V);var V}function Y(P){var I=P._readableState;u("endReadable",I.endEmitted),I.endEmitted||(I.ended=!0,i.nextTick(F,I,P))}function F(P,I){if(u("endReadableNT",P.endEmitted,P.length),!P.endEmitted&&P.length===0&&(P.endEmitted=!0,I.readable=!1,I.emit("end"),P.autoDestroy)){var V=I._writableState;(!V||V.autoDestroy&&V.finished)&&I.destroy()}}function X(P,I){for(var V=0,Q=P.length;V<Q;V++)if(P[V]===I)return V;return-1}$.prototype.read=function(P){u("read",P),P=parseInt(P,10);var I=this._readableState,V=P;if(P!==0&&(I.emittedReadable=!1),P===0&&I.needReadable&&((I.highWaterMark!==0?I.length>=I.highWaterMark:I.length>0)||I.ended))return u("read: emitReadable",I.length,I.ended),I.length===0&&I.ended?Y(this):v(this),null;if((P=k(P,I))===0&&I.ended)return I.length===0&&Y(this),null;var Q,G=I.needReadable;return u("need readable",G),(I.length===0||I.length-P<I.highWaterMark)&&u("length less than watermark",G=!0),I.ended||I.reading?u("reading or ended",G=!1):G&&(u("do read"),I.reading=!0,I.sync=!0,I.length===0&&(I.needReadable=!0),this._read(I.highWaterMark),I.sync=!1,I.reading||(P=k(V,I))),(Q=P>0?W(P,I):null)===null?(I.needReadable=I.length<=I.highWaterMark,P=0):(I.length-=P,I.awaitDrain=0),I.length===0&&(I.ended||(I.needReadable=!0),V!==P&&I.ended&&Y(this)),Q!==null&&this.emit("data",Q),Q},$.prototype._read=function(P){N(this,new z("_read()"))},$.prototype.pipe=function(P,I){var V=this,Q=this._readableState;switch(Q.pipesCount){case 0:Q.pipes=P;break;case 1:Q.pipes=[Q.pipes,P];break;default:Q.pipes.push(P)}Q.pipesCount+=1,u("pipe count=%d opts=%j",Q.pipesCount,I);var G=(!I||I.end!==!1)&&P!==i.stdout&&P!==i.stderr?J:at;function q(ct,ut){u("onunpipe"),ct===V&&ut&&ut.hasUnpiped===!1&&(ut.hasUnpiped=!0,u("cleanup"),P.removeListener("close",rt),P.removeListener("finish",lt),P.removeListener("drain",it),P.removeListener("error",st),P.removeListener("unpipe",q),V.removeListener("end",J),V.removeListener("end",at),V.removeListener("data",Z),nt=!0,!Q.awaitDrain||P._writableState&&!P._writableState.needDrain||it())}function J(){u("onend"),P.end()}Q.endEmitted?i.nextTick(G):V.once("end",G),P.on("unpipe",q);var it=function(ct){return function(){var ut=ct._readableState;u("pipeOnDrain",ut.awaitDrain),ut.awaitDrain&&ut.awaitDrain--,ut.awaitDrain===0&&o(ct,"data")&&(ut.flowing=!0,U(ct))}}(V);P.on("drain",it);var nt=!1;function Z(ct){u("ondata");var ut=P.write(ct);u("dest.write",ut),ut===!1&&((Q.pipesCount===1&&Q.pipes===P||Q.pipesCount>1&&X(Q.pipes,P)!==-1)&&!nt&&(u("false write response, pause",Q.awaitDrain),Q.awaitDrain++),V.pause())}function st(ct){u("onerror",ct),at(),P.removeListener("error",st),o(P,"error")===0&&N(P,ct)}function rt(){P.removeListener("finish",lt),at()}function lt(){u("onfinish"),P.removeListener("close",rt),at()}function at(){u("unpipe"),V.unpipe(P)}return V.on("data",Z),function(ct,ut,dt){if(typeof ct.prependListener=="function")return ct.prependListener(ut,dt);ct._events&&ct._events[ut]?Array.isArray(ct._events[ut])?ct._events[ut].unshift(dt):ct._events[ut]=[dt,ct._events[ut]]:ct.on(ut,dt)}(P,"error",st),P.once("close",rt),P.once("finish",lt),P.emit("pipe",V),Q.flowing||(u("pipe resume"),V.resume()),P},$.prototype.unpipe=function(P){var I=this._readableState,V={hasUnpiped:!1};if(I.pipesCount===0)return this;if(I.pipesCount===1)return P&&P!==I.pipes||(P||(P=I.pipes),I.pipes=null,I.pipesCount=0,I.flowing=!1,P&&P.emit("unpipe",this,V)),this;if(!P){var Q=I.pipes,G=I.pipesCount;I.pipes=null,I.pipesCount=0,I.flowing=!1;for(var q=0;q<G;q++)Q[q].emit("unpipe",this,{hasUnpiped:!1});return this}var J=X(I.pipes,P);return J===-1||(I.pipes.splice(J,1),I.pipesCount-=1,I.pipesCount===1&&(I.pipes=I.pipes[0]),P.emit("unpipe",this,V)),this},$.prototype.on=function(P,I){var V=n.prototype.on.call(this,P,I),Q=this._readableState;return P==="data"?(Q.readableListening=this.listenerCount("readable")>0,Q.flowing!==!1&&this.resume()):P==="readable"&&(Q.endEmitted||Q.readableListening||(Q.readableListening=Q.needReadable=!0,Q.flowing=!1,Q.emittedReadable=!1,u("on readable",Q.length,Q.reading),Q.length?v(this):Q.reading||i.nextTick(L,this))),V},$.prototype.addListener=$.prototype.on,$.prototype.removeListener=function(P,I){var V=n.prototype.removeListener.call(this,P,I);return P==="readable"&&i.nextTick(T,this),V},$.prototype.removeAllListeners=function(P){var I=n.prototype.removeAllListeners.apply(this,arguments);return P!=="readable"&&P!==void 0||i.nextTick(T,this),I},$.prototype.resume=function(){var P=this._readableState;return P.flowing||(u("resume"),P.flowing=!P.readableListening,function(I,V){V.resumeScheduled||(V.resumeScheduled=!0,i.nextTick(j,I,V))}(this,P)),P.paused=!1,this},$.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},$.prototype.wrap=function(P){var I=this,V=this._readableState,Q=!1;for(var G in P.on("end",function(){if(u("wrapped end"),V.decoder&&!V.ended){var J=V.decoder.end();J&&J.length&&I.push(J)}I.push(null)}),P.on("data",function(J){u("wrapped data"),V.decoder&&(J=V.decoder.write(J)),V.objectMode&&J==null||(V.objectMode||J&&J.length)&&(I.push(J)||(Q=!0,P.pause()))}),P)this[G]===void 0&&typeof P[G]=="function"&&(this[G]=function(J){return function(){return P[J].apply(P,arguments)}}(G));for(var q=0;q<B.length;q++)P.on(B[q],this.emit.bind(this,B[q]));return this._read=function(J){u("wrapped _read",J),Q&&(Q=!1,P.resume())},this},typeof Symbol=="function"&&($.prototype[Symbol.asyncIterator]=function(){return m===void 0&&(m=t("./internal/streams/async_iterator")),m(this)}),Object.defineProperty($.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty($.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty($.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(P){this._readableState&&(this._readableState.flowing=P)}}),$._fromList=W,Object.defineProperty($.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&($.from=function(P,I){return f===void 0&&(f=t("./internal/streams/from")),f($,P,I)})}).call(this)}).call(this,t("_process"),typeof ve<"u"?ve:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/async_iterator":483,"./internal/streams/buffer_list":484,"./internal/streams/destroy":485,"./internal/streams/from":487,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,events:422,inherits:440,"string_decoder/":522,util:188}],481:[function(t,r,l){r.exports=u;var i=t("../errors").codes,s=i.ERR_METHOD_NOT_IMPLEMENTED,a=i.ERR_MULTIPLE_CALLBACK,o=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,n=i.ERR_TRANSFORM_WITH_LENGTH_0,c=t("./_stream_duplex");function d(m,f){var b=this._transformState;b.transforming=!1;var y=b.writecb;if(y===null)return this.emit("error",new a);b.writechunk=null,b.writecb=null,f!=null&&this.push(f),y(m);var _=this._readableState;_.reading=!1,(_.needReadable||_.length<_.highWaterMark)&&this._read(_.highWaterMark)}function u(m){if(!(this instanceof u))return new u(m);c.call(this,m),this._transformState={afterTransform:d.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,m&&(typeof m.transform=="function"&&(this._transform=m.transform),typeof m.flush=="function"&&(this._flush=m.flush)),this.on("prefinish",h)}function h(){var m=this;typeof this._flush!="function"||this._readableState.destroyed?p(this,null,null):this._flush(function(f,b){p(m,f,b)})}function p(m,f,b){if(f)return m.emit("error",f);if(b!=null&&m.push(b),m._writableState.length)throw new n;if(m._transformState.transforming)throw new o;return m.push(null)}t("inherits")(u,c),u.prototype.push=function(m,f){return this._transformState.needTransform=!1,c.prototype.push.call(this,m,f)},u.prototype._transform=function(m,f,b){b(new s("_transform()"))},u.prototype._write=function(m,f,b){var y=this._transformState;if(y.writecb=b,y.writechunk=m,y.writeencoding=f,!y.transforming){var _=this._readableState;(y.needTransform||_.needReadable||_.length<_.highWaterMark)&&this._read(_.highWaterMark)}},u.prototype._read=function(m){var f=this._transformState;f.writechunk===null||f.transforming?f.needTransform=!0:(f.transforming=!0,this._transform(f.writechunk,f.writeencoding,f.afterTransform))},u.prototype._destroy=function(m,f){c.prototype._destroy.call(this,m,function(b){f(b)})}},{"../errors":477,"./_stream_duplex":478,inherits:440}],482:[function(t,r,l){(function(i,s){(function(){function a(S){var T=this;this.next=null,this.entry=null,this.finish=function(){(function(L,j,U){var W=L.entry;for(L.entry=null;W;){var Y=W.callback;j.pendingcb--,Y(U),W=W.next}j.corkedRequestsFree.next=L})(T,S)}}var o;r.exports=$,$.WritableState=H;var n={deprecate:t("util-deprecate")},c=t("./internal/streams/stream"),d=t("buffer").Buffer,u=(s!==void 0?s:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},h,p=t("./internal/streams/destroy"),m=t("./internal/streams/state").getHighWaterMark,f=t("../errors").codes,b=f.ERR_INVALID_ARG_TYPE,y=f.ERR_METHOD_NOT_IMPLEMENTED,_=f.ERR_MULTIPLE_CALLBACK,E=f.ERR_STREAM_CANNOT_PIPE,M=f.ERR_STREAM_DESTROYED,D=f.ERR_STREAM_NULL_VALUES,z=f.ERR_STREAM_WRITE_AFTER_END,O=f.ERR_UNKNOWN_ENCODING,N=p.errorOrDestroy;function B(){}function H(S,T,L){o=o||t("./_stream_duplex"),S=S||{},typeof L!="boolean"&&(L=T instanceof o),this.objectMode=!!S.objectMode,L&&(this.objectMode=this.objectMode||!!S.writableObjectMode),this.highWaterMark=m(this,S,"writableHighWaterMark",L),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var j=S.decodeStrings===!1;this.decodeStrings=!j,this.defaultEncoding=S.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(U){(function(W,Y){var F=W._writableState,X=F.sync,P=F.writecb;if(typeof P!="function")throw new _;if(function(V){V.writing=!1,V.writecb=null,V.length-=V.writelen,V.writelen=0}(F),Y)(function(V,Q,G,q,J){--Q.pendingcb,G?(i.nextTick(J,q),i.nextTick(x,V,Q),V._writableState.errorEmitted=!0,N(V,q)):(J(q),V._writableState.errorEmitted=!0,N(V,q),x(V,Q))})(W,F,X,Y,P);else{var I=v(F)||W.destroyed;I||F.corked||F.bufferProcessing||!F.bufferedRequest||k(W,F),X?i.nextTick(R,W,F,I,P):R(W,F,I,P)}})(T,U)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=S.emitClose!==!1,this.autoDestroy=!!S.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function $(S){var T=this instanceof(o=o||t("./_stream_duplex"));if(!T&&!h.call($,this))return new $(S);this._writableState=new H(S,this,T),this.writable=!0,S&&(typeof S.write=="function"&&(this._write=S.write),typeof S.writev=="function"&&(this._writev=S.writev),typeof S.destroy=="function"&&(this._destroy=S.destroy),typeof S.final=="function"&&(this._final=S.final)),c.call(this)}function C(S,T,L,j,U,W,Y){T.writelen=j,T.writecb=Y,T.writing=!0,T.sync=!0,T.destroyed?T.onwrite(new M("write")):L?S._writev(U,T.onwrite):S._write(U,W,T.onwrite),T.sync=!1}function R(S,T,L,j){L||function(U,W){W.length===0&&W.needDrain&&(W.needDrain=!1,U.emit("drain"))}(S,T),T.pendingcb--,j(),x(S,T)}function k(S,T){T.bufferProcessing=!0;var L=T.bufferedRequest;if(S._writev&&L&&L.next){var j=T.bufferedRequestCount,U=new Array(j),W=T.corkedRequestsFree;W.entry=L;for(var Y=0,F=!0;L;)U[Y]=L,L.isBuf||(F=!1),L=L.next,Y+=1;U.allBuffers=F,C(S,T,!0,T.length,U,"",W.finish),T.pendingcb++,T.lastBufferedRequest=null,W.next?(T.corkedRequestsFree=W.next,W.next=null):T.corkedRequestsFree=new a(T),T.bufferedRequestCount=0}else{for(;L;){var X=L.chunk,P=L.encoding,I=L.callback;if(C(S,T,!1,T.objectMode?1:X.length,X,P,I),L=L.next,T.bufferedRequestCount--,T.writing)break}L===null&&(T.lastBufferedRequest=null)}T.bufferedRequest=L,T.bufferProcessing=!1}function v(S){return S.ending&&S.length===0&&S.bufferedRequest===null&&!S.finished&&!S.writing}function w(S,T){S._final(function(L){T.pendingcb--,L&&N(S,L),T.prefinished=!0,S.emit("prefinish"),x(S,T)})}function x(S,T){var L=v(T);if(L&&(function(U,W){W.prefinished||W.finalCalled||(typeof U._final!="function"||W.destroyed?(W.prefinished=!0,U.emit("prefinish")):(W.pendingcb++,W.finalCalled=!0,i.nextTick(w,U,W)))}(S,T),T.pendingcb===0&&(T.finished=!0,S.emit("finish"),T.autoDestroy))){var j=S._readableState;(!j||j.autoDestroy&&j.endEmitted)&&S.destroy()}return L}t("inherits")($,c),H.prototype.getBuffer=function(){for(var S=this.bufferedRequest,T=[];S;)T.push(S),S=S.next;return T},function(){try{Object.defineProperty(H.prototype,"buffer",{get:n.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(h=Function.prototype[Symbol.hasInstance],Object.defineProperty($,Symbol.hasInstance,{value:function(S){return!!h.call(this,S)||this===$&&S&&S._writableState instanceof H}})):h=function(S){return S instanceof this},$.prototype.pipe=function(){N(this,new E)},$.prototype.write=function(S,T,L){var j,U=this._writableState,W=!1,Y=!U.objectMode&&(j=S,d.isBuffer(j)||j instanceof u);return Y&&!d.isBuffer(S)&&(S=function(F){return d.from(F)}(S)),typeof T=="function"&&(L=T,T=null),Y?T="buffer":T||(T=U.defaultEncoding),typeof L!="function"&&(L=B),U.ending?function(F,X){var P=new z;N(F,P),i.nextTick(X,P)}(this,L):(Y||function(F,X,P,I){var V;return P===null?V=new D:typeof P=="string"||X.objectMode||(V=new b("chunk",["string","Buffer"],P)),!V||(N(F,V),i.nextTick(I,V),!1)}(this,U,S,L))&&(U.pendingcb++,W=function(F,X,P,I,V,Q){if(!P){var G=function(nt,Z,st){return nt.objectMode||nt.decodeStrings===!1||typeof Z!="string"||(Z=d.from(Z,st)),Z}(X,I,V);I!==G&&(P=!0,V="buffer",I=G)}var q=X.objectMode?1:I.length;X.length+=q;var J=X.length<X.highWaterMark;if(J||(X.needDrain=!0),X.writing||X.corked){var it=X.lastBufferedRequest;X.lastBufferedRequest={chunk:I,encoding:V,isBuf:P,callback:Q,next:null},it?it.next=X.lastBufferedRequest:X.bufferedRequest=X.lastBufferedRequest,X.bufferedRequestCount+=1}else C(F,X,!1,q,I,V,Q);return J}(this,U,Y,S,T,L)),W},$.prototype.cork=function(){this._writableState.corked++},$.prototype.uncork=function(){var S=this._writableState;S.corked&&(S.corked--,S.writing||S.corked||S.bufferProcessing||!S.bufferedRequest||k(this,S))},$.prototype.setDefaultEncoding=function(S){if(typeof S=="string"&&(S=S.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((S+"").toLowerCase())>-1))throw new O(S);return this._writableState.defaultEncoding=S,this},Object.defineProperty($.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty($.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),$.prototype._write=function(S,T,L){L(new y("_write()"))},$.prototype._writev=null,$.prototype.end=function(S,T,L){var j=this._writableState;return typeof S=="function"?(L=S,S=null,T=null):typeof T=="function"&&(L=T,T=null),S!=null&&this.write(S,T),j.corked&&(j.corked=1,this.uncork()),j.ending||function(U,W,Y){W.ending=!0,x(U,W),Y&&(W.finished?i.nextTick(Y):U.once("finish",Y)),W.ended=!0,U.writable=!1}(this,j,L),this},Object.defineProperty($.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty($.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(S){this._writableState&&(this._writableState.destroyed=S)}}),$.prototype.destroy=p.destroy,$.prototype._undestroy=p.undestroy,$.prototype._destroy=function(S,T){T(S)}}).call(this)}).call(this,t("_process"),typeof ve<"u"?ve:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/destroy":485,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,inherits:440,"util-deprecate":524}],483:[function(t,r,l){(function(i){(function(){var s;function a(M,D,z){return(D=function(O){var N=function(B,H){if(typeof B!="object"||B===null)return B;var $=B[Symbol.toPrimitive];if($!==void 0){var C=$.call(B,H);if(typeof C!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(H==="string"?String:Number)(B)}(O,"string");return typeof N=="symbol"?N:String(N)}(D))in M?Object.defineProperty(M,D,{value:z,enumerable:!0,configurable:!0,writable:!0}):M[D]=z,M}var o=t("./end-of-stream"),n=Symbol("lastResolve"),c=Symbol("lastReject"),d=Symbol("error"),u=Symbol("ended"),h=Symbol("lastPromise"),p=Symbol("handlePromise"),m=Symbol("stream");function f(M,D){return{value:M,done:D}}function b(M){var D=M[n];if(D!==null){var z=M[m].read();z!==null&&(M[h]=null,M[n]=null,M[c]=null,D(f(z,!1)))}}function y(M){i.nextTick(b,M)}var _=Object.getPrototypeOf(function(){}),E=Object.setPrototypeOf((a(s={get stream(){return this[m]},next:function(){var M=this,D=this[d];if(D!==null)return Promise.reject(D);if(this[u])return Promise.resolve(f(void 0,!0));if(this[m].destroyed)return new Promise(function(B,H){i.nextTick(function(){M[d]?H(M[d]):B(f(void 0,!0))})});var z,O=this[h];if(O)z=new Promise(function(B,H){return function($,C){B.then(function(){H[u]?$(f(void 0,!0)):H[p]($,C)},C)}}(O,this));else{var N=this[m].read();if(N!==null)return Promise.resolve(f(N,!1));z=new Promise(this[p])}return this[h]=z,z}},Symbol.asyncIterator,function(){return this}),a(s,"return",function(){var M=this;return new Promise(function(D,z){M[m].destroy(null,function(O){O?z(O):D(f(void 0,!0))})})}),s),_);r.exports=function(M){var D,z=Object.create(E,(a(D={},m,{value:M,writable:!0}),a(D,n,{value:null,writable:!0}),a(D,c,{value:null,writable:!0}),a(D,d,{value:null,writable:!0}),a(D,u,{value:M._readableState.endEmitted,writable:!0}),a(D,p,{value:function(O,N){var B=z[m].read();B?(z[h]=null,z[n]=null,z[c]=null,O(f(B,!1))):(z[n]=O,z[c]=N)},writable:!0}),D));return z[h]=null,o(M,function(O){if(O&&O.code!=="ERR_STREAM_PREMATURE_CLOSE"){var N=z[c];return N!==null&&(z[h]=null,z[n]=null,z[c]=null,N(O)),void(z[d]=O)}var B=z[n];B!==null&&(z[h]=null,z[n]=null,z[c]=null,B(f(void 0,!0))),z[u]=!0}),M.on("readable",y.bind(null,z)),z}}).call(this)}).call(this,t("_process"))},{"./end-of-stream":486,_process:467}],484:[function(t,r,l){function i(h,p){var m=Object.keys(h);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(h);p&&(f=f.filter(function(b){return Object.getOwnPropertyDescriptor(h,b).enumerable})),m.push.apply(m,f)}return m}function s(h){for(var p=1;p<arguments.length;p++){var m=arguments[p]!=null?arguments[p]:{};p%2?i(Object(m),!0).forEach(function(f){a(h,f,m[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(m)):i(Object(m)).forEach(function(f){Object.defineProperty(h,f,Object.getOwnPropertyDescriptor(m,f))})}return h}function a(h,p,m){return(p=n(p))in h?Object.defineProperty(h,p,{value:m,enumerable:!0,configurable:!0,writable:!0}):h[p]=m,h}function o(h,p){for(var m=0;m<p.length;m++){var f=p[m];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(h,n(f.key),f)}}function n(h){var p=function(m,f){if(typeof m!="object"||m===null)return m;var b=m[Symbol.toPrimitive];if(b!==void 0){var y=b.call(m,f);if(typeof y!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(f==="string"?String:Number)(m)}(h,"string");return typeof p=="symbol"?p:String(p)}var c=t("buffer").Buffer,d=t("util").inspect,u=d&&d.custom||"inspect";r.exports=function(){function h(){(function(f,b){if(!(f instanceof b))throw new TypeError("Cannot call a class as a function")})(this,h),this.head=null,this.tail=null,this.length=0}var p,m;return p=h,(m=[{key:"push",value:function(f){var b={data:f,next:null};this.length>0?this.tail.next=b:this.head=b,this.tail=b,++this.length}},{key:"unshift",value:function(f){var b={data:f,next:this.head};this.length===0&&(this.tail=b),this.head=b,++this.length}},{key:"shift",value:function(){if(this.length!==0){var f=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,f}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(f){if(this.length===0)return"";for(var b=this.head,y=""+b.data;b=b.next;)y+=f+b.data;return y}},{key:"concat",value:function(f){if(this.length===0)return c.alloc(0);for(var b,y,_,E=c.allocUnsafe(f>>>0),M=this.head,D=0;M;)b=M.data,y=E,_=D,c.prototype.copy.call(b,y,_),D+=M.data.length,M=M.next;return E}},{key:"consume",value:function(f,b){var y;return f<this.head.data.length?(y=this.head.data.slice(0,f),this.head.data=this.head.data.slice(f)):y=f===this.head.data.length?this.shift():b?this._getString(f):this._getBuffer(f),y}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(f){var b=this.head,y=1,_=b.data;for(f-=_.length;b=b.next;){var E=b.data,M=f>E.length?E.length:f;if(M===E.length?_+=E:_+=E.slice(0,f),(f-=M)==0){M===E.length?(++y,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=E.slice(M));break}++y}return this.length-=y,_}},{key:"_getBuffer",value:function(f){var b=c.allocUnsafe(f),y=this.head,_=1;for(y.data.copy(b),f-=y.data.length;y=y.next;){var E=y.data,M=f>E.length?E.length:f;if(E.copy(b,b.length-f,0,M),(f-=M)==0){M===E.length?(++_,y.next?this.head=y.next:this.head=this.tail=null):(this.head=y,y.data=E.slice(M));break}++_}return this.length-=_,b}},{key:u,value:function(f,b){return d(this,s(s({},b),{},{depth:0,customInspect:!1}))}}])&&o(p.prototype,m),Object.defineProperty(p,"prototype",{writable:!1}),h}()},{buffer:220,util:188}],485:[function(t,r,l){(function(i){(function(){function s(n,c){o(n,c),a(n)}function a(n){n._writableState&&!n._writableState.emitClose||n._readableState&&!n._readableState.emitClose||n.emit("close")}function o(n,c){n.emit("error",c)}r.exports={destroy:function(n,c){var d=this,u=this._readableState&&this._readableState.destroyed,h=this._writableState&&this._writableState.destroyed;return u||h?(c?c(n):n&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,i.nextTick(o,this,n)):i.nextTick(o,this,n)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,function(p){!c&&p?d._writableState?d._writableState.errorEmitted?i.nextTick(a,d):(d._writableState.errorEmitted=!0,i.nextTick(s,d,p)):i.nextTick(s,d,p):c?(i.nextTick(a,d),c(p)):i.nextTick(a,d)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(n,c){var d=n._readableState,u=n._writableState;d&&d.autoDestroy||u&&u.autoDestroy?n.destroy(c):n.emit("error",c)}}}).call(this)}).call(this,t("_process"))},{_process:467}],486:[function(t,r,l){var i=t("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function s(){}r.exports=function a(o,n,c){if(typeof n=="function")return a(o,null,n);n||(n={}),c=function(M){var D=!1;return function(){if(!D){D=!0;for(var z=arguments.length,O=new Array(z),N=0;N<z;N++)O[N]=arguments[N];M.apply(this,O)}}}(c||s);var d=n.readable||n.readable!==!1&&o.readable,u=n.writable||n.writable!==!1&&o.writable,h=function(){o.writable||m()},p=o._writableState&&o._writableState.finished,m=function(){u=!1,p=!0,d||c.call(o)},f=o._readableState&&o._readableState.endEmitted,b=function(){d=!1,f=!0,u||c.call(o)},y=function(M){c.call(o,M)},_=function(){var M;return d&&!f?(o._readableState&&o._readableState.ended||(M=new i),c.call(o,M)):u&&!p?(o._writableState&&o._writableState.ended||(M=new i),c.call(o,M)):void 0},E=function(){o.req.on("finish",m)};return function(M){return M.setHeader&&typeof M.abort=="function"}(o)?(o.on("complete",m),o.on("abort",_),o.req?E():o.on("request",E)):u&&!o._writableState&&(o.on("end",h),o.on("close",h)),o.on("end",b),o.on("finish",m),n.error!==!1&&o.on("error",y),o.on("close",_),function(){o.removeListener("complete",m),o.removeListener("abort",_),o.removeListener("request",E),o.req&&o.req.removeListener("finish",m),o.removeListener("end",h),o.removeListener("close",h),o.removeListener("finish",m),o.removeListener("end",b),o.removeListener("error",y),o.removeListener("close",_)}}},{"../../../errors":477}],487:[function(t,r,l){r.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],488:[function(t,r,l){var i,s=t("../../../errors").codes,a=s.ERR_MISSING_ARGS,o=s.ERR_STREAM_DESTROYED;function n(p){if(p)throw p}function c(p,m,f,b){b=function(E){var M=!1;return function(){M||(M=!0,E.apply(void 0,arguments))}}(b);var y=!1;p.on("close",function(){y=!0}),i===void 0&&(i=t("./end-of-stream")),i(p,{readable:m,writable:f},function(E){if(E)return b(E);y=!0,b()});var _=!1;return function(E){if(!y&&!_)return _=!0,function(M){return M.setHeader&&typeof M.abort=="function"}(p)?p.abort():typeof p.destroy=="function"?p.destroy():void b(E||new o("pipe"))}}function d(p){p()}function u(p,m){return p.pipe(m)}function h(p){return p.length?typeof p[p.length-1]!="function"?n:p.pop():n}r.exports=function(){for(var p=arguments.length,m=new Array(p),f=0;f<p;f++)m[f]=arguments[f];var b,y=h(m);if(Array.isArray(m[0])&&(m=m[0]),m.length<2)throw new a("streams");var _=m.map(function(E,M){var D=M<m.length-1;return c(E,D,M>0,function(z){b||(b=z),z&&_.forEach(d),D||(_.forEach(d),y(b))})});return m.reduce(u)}},{"../../../errors":477,"./end-of-stream":486}],489:[function(t,r,l){var i=t("../../../errors").codes.ERR_INVALID_OPT_VALUE;r.exports={getHighWaterMark:function(s,a,o,n){var c=function(d,u,h){return d.highWaterMark!=null?d.highWaterMark:u?d[h]:null}(a,n,o);if(c!=null){if(!isFinite(c)||Math.floor(c)!==c||c<0)throw new i(n?o:"highWaterMark",c);return Math.floor(c)}return s.objectMode?16:16384}}},{"../../../errors":477}],490:[function(t,r,l){r.exports=t("events").EventEmitter},{events:422}],491:[function(t,r,l){(l=r.exports=t("./lib/_stream_readable.js")).Stream=l,l.Readable=l,l.Writable=t("./lib/_stream_writable.js"),l.Duplex=t("./lib/_stream_duplex.js"),l.Transform=t("./lib/_stream_transform.js"),l.PassThrough=t("./lib/_stream_passthrough.js"),l.finished=t("./lib/internal/streams/end-of-stream.js"),l.pipeline=t("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":478,"./lib/_stream_passthrough.js":479,"./lib/_stream_readable.js":480,"./lib/_stream_transform.js":481,"./lib/_stream_writable.js":482,"./lib/internal/streams/end-of-stream.js":486,"./lib/internal/streams/pipeline.js":488}],492:[function(t,r,l){var i=function(s){var a=Object.prototype,o=a.hasOwnProperty,n=Object.defineProperty||function(x,S,T){x[S]=T.value},c=typeof Symbol=="function"?Symbol:{},d=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",h=c.toStringTag||"@@toStringTag";function p(x,S,T){return Object.defineProperty(x,S,{value:T,enumerable:!0,configurable:!0,writable:!0}),x[S]}try{p({},"")}catch{p=function(S,T,L){return S[T]=L}}function m(x,S,T,L){var j=S&&S.prototype instanceof y?S:y,U=Object.create(j.prototype),W=new k(L||[]);return n(U,"_invoke",{value:H(x,T,W)}),U}function f(x,S,T){try{return{type:"normal",arg:x.call(S,T)}}catch(L){return{type:"throw",arg:L}}}s.wrap=m;var b={};function y(){}function _(){}function E(){}var M={};p(M,d,function(){return this});var D=Object.getPrototypeOf,z=D&&D(D(v([])));z&&z!==a&&o.call(z,d)&&(M=z);var O=E.prototype=y.prototype=Object.create(M);function N(x){["next","throw","return"].forEach(function(S){p(x,S,function(T){return this._invoke(S,T)})})}function B(x,S){var T;n(this,"_invoke",{value:function(L,j){function U(){return new S(function(W,Y){(function F(X,P,I,V){var Q=f(x[X],x,P);if(Q.type!=="throw"){var G=Q.arg,q=G.value;return q&&typeof q=="object"&&o.call(q,"__await")?S.resolve(q.__await).then(function(J){F("next",J,I,V)},function(J){F("throw",J,I,V)}):S.resolve(q).then(function(J){G.value=J,I(G)},function(J){return F("throw",J,I,V)})}V(Q.arg)})(L,j,W,Y)})}return T=T?T.then(U,U):U()}})}function H(x,S,T){var L="suspendedStart";return function(j,U){if(L==="executing")throw new Error("Generator is already running");if(L==="completed"){if(j==="throw")throw U;return w()}for(T.method=j,T.arg=U;;){var W=T.delegate;if(W){var Y=$(W,T);if(Y){if(Y===b)continue;return Y}}if(T.method==="next")T.sent=T._sent=T.arg;else if(T.method==="throw"){if(L==="suspendedStart")throw L="completed",T.arg;T.dispatchException(T.arg)}else T.method==="return"&&T.abrupt("return",T.arg);L="executing";var F=f(x,S,T);if(F.type==="normal"){if(L=T.done?"completed":"suspendedYield",F.arg===b)continue;return{value:F.arg,done:T.done}}F.type==="throw"&&(L="completed",T.method="throw",T.arg=F.arg)}}}function $(x,S){var T=S.method,L=x.iterator[T];if(L===void 0)return S.delegate=null,T==="throw"&&x.iterator.return&&(S.method="return",S.arg=void 0,$(x,S),S.method==="throw")||T!=="return"&&(S.method="throw",S.arg=new TypeError("The iterator does not provide a '"+T+"' method")),b;var j=f(L,x.iterator,S.arg);if(j.type==="throw")return S.method="throw",S.arg=j.arg,S.delegate=null,b;var U=j.arg;return U?U.done?(S[x.resultName]=U.value,S.next=x.nextLoc,S.method!=="return"&&(S.method="next",S.arg=void 0),S.delegate=null,b):U:(S.method="throw",S.arg=new TypeError("iterator result is not an object"),S.delegate=null,b)}function C(x){var S={tryLoc:x[0]};1 in x&&(S.catchLoc=x[1]),2 in x&&(S.finallyLoc=x[2],S.afterLoc=x[3]),this.tryEntries.push(S)}function R(x){var S=x.completion||{};S.type="normal",delete S.arg,x.completion=S}function k(x){this.tryEntries=[{tryLoc:"root"}],x.forEach(C,this),this.reset(!0)}function v(x){if(x){var S=x[d];if(S)return S.call(x);if(typeof x.next=="function")return x;if(!isNaN(x.length)){var T=-1,L=function j(){for(;++T<x.length;)if(o.call(x,T))return j.value=x[T],j.done=!1,j;return j.value=void 0,j.done=!0,j};return L.next=L}}return{next:w}}function w(){return{value:void 0,done:!0}}return _.prototype=E,n(O,"constructor",{value:E,configurable:!0}),n(E,"constructor",{value:_,configurable:!0}),_.displayName=p(E,h,"GeneratorFunction"),s.isGeneratorFunction=function(x){var S=typeof x=="function"&&x.constructor;return!!S&&(S===_||(S.displayName||S.name)==="GeneratorFunction")},s.mark=function(x){return Object.setPrototypeOf?Object.setPrototypeOf(x,E):(x.__proto__=E,p(x,h,"GeneratorFunction")),x.prototype=Object.create(O),x},s.awrap=function(x){return{__await:x}},N(B.prototype),p(B.prototype,u,function(){return this}),s.AsyncIterator=B,s.async=function(x,S,T,L,j){j===void 0&&(j=Promise);var U=new B(m(x,S,T,L),j);return s.isGeneratorFunction(S)?U:U.next().then(function(W){return W.done?W.value:U.next()})},N(O),p(O,h,"Generator"),p(O,d,function(){return this}),p(O,"toString",function(){return"[object Generator]"}),s.keys=function(x){var S=Object(x),T=[];for(var L in S)T.push(L);return T.reverse(),function j(){for(;T.length;){var U=T.pop();if(U in S)return j.value=U,j.done=!1,j}return j.done=!0,j}},s.values=v,k.prototype={constructor:k,reset:function(x){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!x)for(var S in this)S.charAt(0)==="t"&&o.call(this,S)&&!isNaN(+S.slice(1))&&(this[S]=void 0)},stop:function(){this.done=!0;var x=this.tryEntries[0].completion;if(x.type==="throw")throw x.arg;return this.rval},dispatchException:function(x){if(this.done)throw x;var S=this;function T(F,X){return U.type="throw",U.arg=x,S.next=F,X&&(S.method="next",S.arg=void 0),!!X}for(var L=this.tryEntries.length-1;L>=0;--L){var j=this.tryEntries[L],U=j.completion;if(j.tryLoc==="root")return T("end");if(j.tryLoc<=this.prev){var W=o.call(j,"catchLoc"),Y=o.call(j,"finallyLoc");if(W&&Y){if(this.prev<j.catchLoc)return T(j.catchLoc,!0);if(this.prev<j.finallyLoc)return T(j.finallyLoc)}else if(W){if(this.prev<j.catchLoc)return T(j.catchLoc,!0)}else{if(!Y)throw new Error("try statement without catch or finally");if(this.prev<j.finallyLoc)return T(j.finallyLoc)}}}},abrupt:function(x,S){for(var T=this.tryEntries.length-1;T>=0;--T){var L=this.tryEntries[T];if(L.tryLoc<=this.prev&&o.call(L,"finallyLoc")&&this.prev<L.finallyLoc){var j=L;break}}j&&(x==="break"||x==="continue")&&j.tryLoc<=S&&S<=j.finallyLoc&&(j=null);var U=j?j.completion:{};return U.type=x,U.arg=S,j?(this.method="next",this.next=j.finallyLoc,b):this.complete(U)},complete:function(x,S){if(x.type==="throw")throw x.arg;return x.type==="break"||x.type==="continue"?this.next=x.arg:x.type==="return"?(this.rval=this.arg=x.arg,this.method="return",this.next="end"):x.type==="normal"&&S&&(this.next=S),b},finish:function(x){for(var S=this.tryEntries.length-1;S>=0;--S){var T=this.tryEntries[S];if(T.finallyLoc===x)return this.complete(T.completion,T.afterLoc),R(T),b}},catch:function(x){for(var S=this.tryEntries.length-1;S>=0;--S){var T=this.tryEntries[S];if(T.tryLoc===x){var L=T.completion;if(L.type==="throw"){var j=L.arg;R(T)}return j}}throw new Error("illegal catch attempt")},delegateYield:function(x,S,T){return this.delegate={iterator:v(x),resultName:S,nextLoc:T},this.method==="next"&&(this.arg=void 0),b}},s}(typeof r=="object"?r.exports:{});try{regeneratorRuntime=i}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}},{}],493:[function(t,r,l){var i=t("buffer").Buffer,s=t("inherits"),a=t("hash-base"),o=new Array(16),n=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],c=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],d=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],u=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],h=[0,1518500249,1859775393,2400959708,2840853838],p=[1352829926,1548603684,1836072691,2053994217,0];function m(){a.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function f(D,z){return D<<z|D>>>32-z}function b(D,z,O,N,B,H,$,C){return f(D+(z^O^N)+H+$|0,C)+B|0}function y(D,z,O,N,B,H,$,C){return f(D+(z&O|~z&N)+H+$|0,C)+B|0}function _(D,z,O,N,B,H,$,C){return f(D+((z|~O)^N)+H+$|0,C)+B|0}function E(D,z,O,N,B,H,$,C){return f(D+(z&N|O&~N)+H+$|0,C)+B|0}function M(D,z,O,N,B,H,$,C){return f(D+(z^(O|~N))+H+$|0,C)+B|0}s(m,a),m.prototype._update=function(){for(var D=o,z=0;z<16;++z)D[z]=this._block.readInt32LE(4*z);for(var O=0|this._a,N=0|this._b,B=0|this._c,H=0|this._d,$=0|this._e,C=0|this._a,R=0|this._b,k=0|this._c,v=0|this._d,w=0|this._e,x=0;x<80;x+=1){var S,T;x<16?(S=b(O,N,B,H,$,D[n[x]],h[0],d[x]),T=M(C,R,k,v,w,D[c[x]],p[0],u[x])):x<32?(S=y(O,N,B,H,$,D[n[x]],h[1],d[x]),T=E(C,R,k,v,w,D[c[x]],p[1],u[x])):x<48?(S=_(O,N,B,H,$,D[n[x]],h[2],d[x]),T=_(C,R,k,v,w,D[c[x]],p[2],u[x])):x<64?(S=E(O,N,B,H,$,D[n[x]],h[3],d[x]),T=y(C,R,k,v,w,D[c[x]],p[3],u[x])):(S=M(O,N,B,H,$,D[n[x]],h[4],d[x]),T=b(C,R,k,v,w,D[c[x]],p[4],u[x])),O=$,$=H,H=f(B,10),B=N,N=S,C=w,w=v,v=f(k,10),k=R,R=T}var L=this._b+B+v|0;this._b=this._c+H+w|0,this._c=this._d+$+C|0,this._d=this._e+O+R|0,this._e=this._a+N+k|0,this._a=L},m.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var D=i.alloc?i.alloc(20):new i(20);return D.writeInt32LE(this._a,0),D.writeInt32LE(this._b,4),D.writeInt32LE(this._c,8),D.writeInt32LE(this._d,12),D.writeInt32LE(this._e,16),D},r.exports=m},{buffer:220,"hash-base":425,inherits:440}],494:[function(t,r,l){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var i=t("buffer"),s=i.Buffer;function a(n,c){for(var d in n)c[d]=n[d]}function o(n,c,d){return s(n,c,d)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?r.exports=i:(a(i,l),l.Buffer=o),o.prototype=Object.create(s.prototype),a(s,o),o.from=function(n,c,d){if(typeof n=="number")throw new TypeError("Argument must not be a number");return s(n,c,d)},o.alloc=function(n,c,d){if(typeof n!="number")throw new TypeError("Argument must be a number");var u=s(n);return c!==void 0?typeof d=="string"?u.fill(c,d):u.fill(c):u.fill(0),u},o.allocUnsafe=function(n){if(typeof n!="number")throw new TypeError("Argument must be a number");return s(n)},o.allocUnsafeSlow=function(n){if(typeof n!="number")throw new TypeError("Argument must be a number");return i.SlowBuffer(n)}},{buffer:220}],495:[function(t,r,l){(function(i){(function(){var s,a=t("buffer"),o=a.Buffer,n={};for(s in a)a.hasOwnProperty(s)&&s!=="SlowBuffer"&&s!=="Buffer"&&(n[s]=a[s]);var c=n.Buffer={};for(s in o)o.hasOwnProperty(s)&&s!=="allocUnsafe"&&s!=="allocUnsafeSlow"&&(c[s]=o[s]);if(n.Buffer.prototype=o.prototype,c.from&&c.from!==Uint8Array.from||(c.from=function(d,u,h){if(typeof d=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof d);if(d&&d.length===void 0)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d);return o(d,u,h)}),c.alloc||(c.alloc=function(d,u,h){if(typeof d!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof d);if(d<0||d>=2*(1<<30))throw new RangeError('The value "'+d+'" is invalid for option "size"');var p=o(d);return u&&u.length!==0?typeof h=="string"?p.fill(u,h):p.fill(u):p.fill(0),p}),!n.kStringMaxLength)try{n.kStringMaxLength=i.binding("buffer").kStringMaxLength}catch{}n.constants||(n.constants={MAX_LENGTH:n.kMaxLength},n.kStringMaxLength&&(n.constants.MAX_STRING_LENGTH=n.kStringMaxLength)),r.exports=n}).call(this)}).call(this,t("_process"))},{_process:467,buffer:220}],496:[function(t,r,l){Object.defineProperty(l,"__esModule",{value:!0});const i=t("xmlchars/xml/1.0/ed5"),s=t("xmlchars/xml/1.1/ed2"),a=t("xmlchars/xmlns/1.0/ed3");var o=i.isS,n=i.isChar,c=i.isNameStartChar,d=i.isNameChar,u=i.S_LIST,h=i.NAME_RE,p=s.isChar,m=a.isNCNameStartChar,f=a.isNCNameChar,b=a.NC_NAME_RE;const y="http://www.w3.org/XML/1998/namespace",_="http://www.w3.org/2000/xmlns/",E={__proto__:null,xml:y,xmlns:_},M={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},D=v=>v===34||v===39,z=[34,39],O=[...z,91,62],N=[...z,60,93],B=[61,63,...u],H=[...u,62,38,60];function $(v,w,x){switch(w){case"xml":x!==y&&v.fail(`xml prefix must be bound to ${y}.`);break;case"xmlns":x!==_&&v.fail(`xmlns prefix must be bound to ${_}.`)}switch(x){case _:v.fail(w===""?`the default namespace may not be set to ${x}.`:`may not assign a prefix (even "xmlns") to the URI ${_}.`);break;case y:switch(w){case"xml":break;case"":v.fail(`the default namespace may not be set to ${x}.`);break;default:v.fail("may not assign the xml namespace to another prefix.")}}}const C=v=>b.test(v),R=v=>h.test(v);l.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];const k={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};l.SaxesParser=class{constructor(v){this.opt=v??{},this.fragmentOpt=!!this.opt.fragment;const w=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=this.opt.position!==!1,this.fileName=this.opt.fileName,w){this.nameStartCheck=m,this.nameCheck=f,this.isName=C,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},E);const x=this.opt.additionalNamespaces;x!=null&&(function(S,T){for(const L of Object.keys(T))$(S,L,T[L])}(this,x),Object.assign(this.ns,x))}else this.nameStartCheck=c,this.nameCheck=d,this.isName=R,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}get closed(){return this._closed}_init(){var v;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=0,this.attribList=[];const{fragmentOpt:w}=this;this.state=w?13:0,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=w,this.xmlDeclPossible=!w,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:x}=this.opt;if(x===void 0){if(this.opt.forceXMLVersion===!0)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");x="1.0"}this.setXMLVersion(x),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(M),(v=this.readyHandler)===null||v===void 0||v.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(v,w){this[k[v]]=w}off(v){this[k[v]]=void 0}makeError(v){var w;let x=(w=this.fileName)!==null&&w!==void 0?w:"";return this.trackPosition&&(x.length>0&&(x+=":"),x+=`${this.line}:${this.column}`),x.length>0&&(x+=": "),new Error(x+v)}fail(v){const w=this.makeError(v),x=this.errorHandler;if(x===void 0)throw w;return x(w),this}write(v){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let w=!1;v===null?(w=!0,v=""):typeof v=="object"&&(v=v.toString()),this.carriedFromPrevious!==void 0&&(v=`${this.carriedFromPrevious}${v}`,this.carriedFromPrevious=void 0);let x=v.length;const S=v.charCodeAt(x-1);!w&&(S===13||S>=55296&&S<=56319)&&(this.carriedFromPrevious=v[x-1],x--,v=v.slice(0,x));const{stateTable:T}=this;for(this.chunk=v,this.i=0;this.i<x;)T[this.state].call(this);return this.chunkPosition+=x,w?this.end():this}close(){return this.write(null)}getCode10(){const{chunk:v,i:w}=this;if(this.prevI=w,this.i=w+1,w>=v.length)return-1;const x=v.charCodeAt(w);if(this.column++,x<55296){if(x>=32||x===9)return x;switch(x){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:return v.charCodeAt(w+1)===10&&(this.i=w+2),this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),x}}if(x>56319)return x>=57344&&x<=65533||this.fail("disallowed character."),x;const S=65536+1024*(x-55296)+(v.charCodeAt(w+1)-56320);return this.i=w+2,S>1114111&&this.fail("disallowed character."),S}getCode11(){const{chunk:v,i:w}=this;if(this.prevI=w,this.i=w+1,w>=v.length)return-1;const x=v.charCodeAt(w);if(this.column++,x<55296){if(x>31&&x<127||x>159&&x!==8232||x===9)return x;switch(x){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:{const T=v.charCodeAt(w+1);T!==10&&T!==133||(this.i=w+2)}case 133:case 8232:return this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),x}}if(x>56319)return x>=57344&&x<=65533||this.fail("disallowed character."),x;const S=65536+1024*(x-55296)+(v.charCodeAt(w+1)-56320);return this.i=w+2,S>1114111&&this.fail("disallowed character."),S}getCodeNorm(){const v=this.getCode();return v===-2?10:v}unget(){this.i=this.prevI,this.column--}captureTo(v){let{i:w}=this;const{chunk:x}=this;for(;;){const S=this.getCode(),T=S===-2,L=T?10:S;if(L===-1||v.includes(L))return this.text+=x.slice(w,this.prevI),L;T&&(this.text+=x.slice(w,this.prevI)+`
`,w=this.i)}}captureToChar(v){let{i:w}=this;const{chunk:x}=this;for(;;){let S=this.getCode();switch(S){case-2:this.text+=x.slice(w,this.prevI)+`
`,w=this.i,S=10;break;case-1:return this.text+=x.slice(w),!1}if(S===v)return this.text+=x.slice(w,this.prevI),!0}}captureNameChars(){const{chunk:v,i:w}=this;for(;;){const x=this.getCode();if(x===-1)return this.name+=v.slice(w),-1;if(!d(x))return this.name+=v.slice(w,this.prevI),x===-2?10:x}}skipSpaces(){for(;;){const v=this.getCodeNorm();if(v===-1||!o(v))return v}}setXMLVersion(v){this.currentXMLVersion=v,v==="1.0"?(this.isChar=n,this.getCode=this.getCode10):(this.isChar=p,this.getCode=this.getCode11)}sBegin(){this.chunk.charCodeAt(0)===65279&&(this.i++,this.column++),this.state=1}sBeginWhitespace(){const v=this.i,w=this.skipSpaces();switch(this.prevI!==v&&(this.xmlDeclPossible=!1),w){case 60:if(this.state=15,this.text.length!==0)throw new Error("no-empty text at start");break;case-1:break;default:this.unget(),this.state=13,this.xmlDeclPossible=!1}}sDoctype(){var v;const w=this.captureTo(O);switch(w){case 62:(v=this.doctypeHandler)===null||v===void 0||v.call(this,this.text),this.text="",this.state=13,this.doctype=!0;break;case-1:break;default:this.text+=String.fromCodePoint(w),w===91?this.state=4:D(w)&&(this.state=3,this.q=w)}}sDoctypeQuote(){const v=this.q;this.captureToChar(v)&&(this.text+=String.fromCodePoint(v),this.q=null,this.state=2)}sDTD(){const v=this.captureTo(N);v!==-1&&(this.text+=String.fromCodePoint(v),v===93?this.state=2:v===60?this.state=6:D(v)&&(this.state=5,this.q=v))}sDTDQuoted(){const v=this.q;this.captureToChar(v)&&(this.text+=String.fromCodePoint(v),this.state=4,this.q=null)}sDTDOpenWaka(){const v=this.getCodeNorm();switch(this.text+=String.fromCodePoint(v),v){case 33:this.state=7,this.openWakaBang="";break;case 63:this.state=11;break;default:this.state=4}}sDTDOpenWakaBang(){const v=String.fromCodePoint(this.getCodeNorm()),w=this.openWakaBang+=v;this.text+=v,w!=="-"&&(this.state=w==="--"?8:4,this.openWakaBang="")}sDTDComment(){this.captureToChar(45)&&(this.text+="-",this.state=9)}sDTDCommentEnding(){const v=this.getCodeNorm();this.text+=String.fromCodePoint(v),this.state=v===45?10:8}sDTDCommentEnded(){const v=this.getCodeNorm();this.text+=String.fromCodePoint(v),v===62?this.state=4:(this.fail("malformed comment."),this.state=8)}sDTDPI(){this.captureToChar(63)&&(this.text+="?",this.state=12)}sDTDPIEnding(){const v=this.getCodeNorm();this.text+=String.fromCodePoint(v),v===62&&(this.state=4)}sText(){this.tags.length!==0?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:v}=this;const{chunk:w}=this;t:for(;;)switch(this.getCode()){case-2:this.entity+=w.slice(v,this.prevI)+`
`,v=this.i;break;case 59:{const{entityReturnState:x}=this,S=this.entity+w.slice(v,this.prevI);let T;this.state=x,S===""?(this.fail("empty entity name."),T="&;"):(T=this.parseEntity(S),this.entity=""),x===13&&this.textHandler===void 0||(this.text+=T);break t}case-1:this.entity+=w.slice(v);break t}}sOpenWaka(){const v=this.getCode();if(c(v))this.state=34,this.unget(),this.xmlDeclPossible=!1;else switch(v){case 47:this.state=43,this.xmlDeclPossible=!1;break;case 33:this.state=16,this.openWakaBang="",this.xmlDeclPossible=!1;break;case 63:this.state=23;break;default:this.fail("disallowed character in tag name"),this.state=13,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=20,this.openWakaBang="";break;case"--":this.state=17,this.openWakaBang="";break;case"DOCTYPE":this.state=2,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(45)&&(this.state=18)}sCommentEnding(){var v;const w=this.getCodeNorm();w===45?(this.state=19,(v=this.commentHandler)===null||v===void 0||v.call(this,this.text),this.text=""):(this.text+="-"+String.fromCodePoint(w),this.state=17)}sCommentEnded(){const v=this.getCodeNorm();v!==62?(this.fail("malformed comment."),this.text+="--"+String.fromCodePoint(v),this.state=17):this.state=13}sCData(){this.captureToChar(93)&&(this.state=21)}sCDataEnding(){const v=this.getCodeNorm();v===93?this.state=22:(this.text+="]"+String.fromCodePoint(v),this.state=20)}sCDataEnding2(){var v;const w=this.getCodeNorm();switch(w){case 62:(v=this.cdataHandler)===null||v===void 0||v.call(this,this.text),this.text="",this.state=13;break;case 93:this.text+="]";break;default:this.text+="]]"+String.fromCodePoint(w),this.state=20}}sPIFirstChar(){const v=this.getCodeNorm();this.nameStartCheck(v)?(this.piTarget+=String.fromCodePoint(v),this.state=24):v===63||o(v)?(this.fail("processing instruction without a target."),this.state=v===63?26:25):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(v),this.state=24)}sPIRest(){const{chunk:v,i:w}=this;for(;;){const x=this.getCodeNorm();if(x===-1)return void(this.piTarget+=v.slice(w));if(!this.nameCheck(x)){this.piTarget+=v.slice(w,this.prevI);const S=x===63;S||o(x)?this.piTarget==="xml"?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=S?33:27):this.state=S?26:25:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(x));break}}}sPIBody(){if(this.text.length===0){const v=this.getCodeNorm();v===63?this.state=26:o(v)||(this.text=String.fromCodePoint(v))}else this.captureToChar(63)&&(this.state=26)}sPIEnding(){var v;const w=this.getCodeNorm();if(w===62){const{piTarget:x}=this;x.toLowerCase()==="xml"&&this.fail("the XML declaration must appear at the start of the document."),(v=this.piHandler)===null||v===void 0||v.call(this,{target:x,body:this.text}),this.piTarget=this.text="",this.state=13}else w===63?this.text+="?":(this.text+="?"+String.fromCodePoint(w),this.state=25);this.xmlDeclPossible=!1}sXMLDeclNameStart(){const v=this.skipSpaces();v!==63?v!==-1&&(this.state=28,this.name=String.fromCodePoint(v)):this.state=33}sXMLDeclName(){const v=this.captureTo(B);if(v===63)return this.state=33,this.name+=this.text,this.text="",void this.fail("XML declaration is incomplete.");if(o(v)||v===61){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);break;default:this.fail("expected one of "+this.xmlDeclExpects.join(", "))}this.state=v===61?30:29}}sXMLDeclEq(){const v=this.getCodeNorm();if(v===63)return this.state=33,void this.fail("XML declaration is incomplete.");o(v)||(v!==61&&this.fail("value required."),this.state=30)}sXMLDeclValueStart(){const v=this.getCodeNorm();if(v===63)return this.state=33,void this.fail("XML declaration is incomplete.");o(v)||(D(v)?this.q=v:(this.fail("value must be quoted."),this.q=32),this.state=31)}sXMLDeclValue(){const v=this.captureTo([this.q,63]);if(v===63)return this.state=33,this.text="",void this.fail("XML declaration is incomplete.");if(v===-1)return;const w=this.text;switch(this.text="",this.name){case"version":{this.xmlDeclExpects=["encoding","standalone"];const x=w;this.xmlDecl.version=x,/^1\.[0-9]+$/.test(x)?this.opt.forceXMLVersion||this.setXMLVersion(x):this.fail("version number must match /^1\\.[0-9]+$/.");break}case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(w)||this.fail("encoding value must match /^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=w;break;case"standalone":w!=="yes"&&w!=="no"&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=w}this.name="",this.state=32}sXMLDeclSeparator(){const v=this.getCodeNorm();v!==63?(o(v)||(this.fail("whitespace required."),this.unget()),this.state=27):this.state=33}sXMLDeclEnding(){var v;this.getCodeNorm()===62?(this.piTarget!=="xml"?this.fail("processing instructions are not allowed before root."):this.name!=="version"&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),(v=this.xmldeclHandler)===null||v===void 0||v.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=13):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var v;const w=this.captureNameChars();if(w===-1)return;const x=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=x.ns=Object.create(null)),(v=this.openTagStartHandler)===null||v===void 0||v.call(this,x),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),w){case 62:this.openTag();break;case 47:this.state=35;break;default:o(w)||this.fail("disallowed character in tag name."),this.state=36}}sOpenTagSlash(){this.getCode()===62?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=36)}sAttrib(){const v=this.skipSpaces();v!==-1&&(c(v)?(this.unget(),this.state=37):v===62?this.openTag():v===47?this.state=35:this.fail("disallowed character in attribute name."))}sAttribName(){const v=this.captureNameChars();v===61?this.state=39:o(v)?this.state=38:v===62?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):v!==-1&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){const v=this.skipSpaces();switch(v){case-1:return;case 61:this.state=39;break;default:this.fail("attribute without value."),this.text="",this.name="",v===62?this.openTag():c(v)?(this.unget(),this.state=37):(this.fail("disallowed character in attribute name."),this.state=36)}}sAttribValue(){const v=this.getCodeNorm();D(v)?(this.q=v,this.state=40):o(v)||(this.fail("unquoted attribute value."),this.state=42,this.unget())}sAttribValueQuoted(){const{q:v,chunk:w}=this;let{i:x}=this;for(;;)switch(this.getCode()){case v:return this.pushAttrib(this.name,this.text+w.slice(x,this.prevI)),this.name=this.text="",this.q=null,void(this.state=41);case 38:return this.text+=w.slice(x,this.prevI),this.state=14,void(this.entityReturnState=40);case 10:case-2:case 9:this.text+=w.slice(x,this.prevI)+" ",x=this.i;break;case 60:return this.text+=w.slice(x,this.prevI),void this.fail("disallowed character.");case-1:return void(this.text+=w.slice(x))}}sAttribValueClosed(){const v=this.getCodeNorm();o(v)?this.state=36:v===62?this.openTag():v===47?this.state=35:c(v)?(this.fail("no whitespace between attributes."),this.unget(),this.state=37):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){const v=this.captureTo(H);switch(v){case 38:this.state=14,this.entityReturnState=42;break;case 60:this.fail("disallowed character.");break;case-1:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",v===62?this.openTag():this.state=36}}sCloseTag(){const v=this.captureNameChars();v===62?this.closeTag():o(v)?this.state=44:v!==-1&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case 62:this.closeTag();break;case-1:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:v,forbiddenState:w}=this;const{chunk:x,textHandler:S}=this;t:for(;;)switch(this.getCode()){case 60:if(this.state=15,S!==void 0){const{text:T}=this,L=x.slice(v,this.prevI);T.length!==0?(S(T+L),this.text=""):L.length!==0&&S(L)}w=0;break t;case 38:this.state=14,this.entityReturnState=13,S!==void 0&&(this.text+=x.slice(v,this.prevI)),w=0;break t;case 93:switch(w){case 0:w=1;break;case 1:w=2;break;case 2:break;default:throw new Error("impossible state")}break;case 62:w===2&&this.fail('the string "]]>" is disallowed in char data.'),w=0;break;case-2:S!==void 0&&(this.text+=x.slice(v,this.prevI)+`
`),v=this.i,w=0;break;case-1:S!==void 0&&(this.text+=x.slice(v));break t;default:w=0}this.forbiddenState=w}handleTextOutsideRoot(){let{i:v}=this;const{chunk:w,textHandler:x}=this;let S=!1;t:for(;;){const T=this.getCode();switch(T){case 60:if(this.state=15,x!==void 0){const{text:L}=this,j=w.slice(v,this.prevI);L.length!==0?(x(L+j),this.text=""):j.length!==0&&x(j)}break t;case 38:this.state=14,this.entityReturnState=13,x!==void 0&&(this.text+=w.slice(v,this.prevI)),S=!0;break t;case-2:x!==void 0&&(this.text+=w.slice(v,this.prevI)+`
`),v=this.i;break;case-1:x!==void 0&&(this.text+=w.slice(v));break t;default:o(T)||(S=!0)}}S&&(this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(v,w){var x;const{prefix:S,local:T}=this.qname(v),L={name:v,prefix:S,local:T,value:w};if(this.attribList.push(L),(x=this.attributeHandler)===null||x===void 0||x.call(this,L),S==="xmlns"){const j=w.trim();this.currentXMLVersion==="1.0"&&j===""&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[T]=j,$(this,T,j)}else if(v==="xmlns"){const j=w.trim();this.topNS[""]=j,$(this,"",j)}}pushAttribPlain(v,w){var x;const S={name:v,value:w};this.attribList.push(S),(x=this.attributeHandler)===null||x===void 0||x.call(this,S)}end(){var v,w;this.sawRoot||this.fail("document must contain a root element.");const{tags:x}=this;for(;x.length>0;){const T=x.pop();this.fail("unclosed tag: "+T.name)}this.state!==0&&this.state!==13&&this.fail("unexpected end.");const{text:S}=this;return S.length!==0&&((v=this.textHandler)===null||v===void 0||v.call(this,S),this.text=""),this._closed=!0,(w=this.endHandler)===null||w===void 0||w.call(this),this._init(),this}resolve(v){var w,x;let S=this.topNS[v];if(S!==void 0)return S;const{tags:T}=this;for(let L=T.length-1;L>=0;L--)if(S=T[L].ns[v],S!==void 0)return S;return S=this.ns[v],S!==void 0?S:(x=(w=this.opt).resolvePrefix)===null||x===void 0?void 0:x.call(w,v)}qname(v){const w=v.indexOf(":");if(w===-1)return{prefix:"",local:v};const x=v.slice(w+1),S=v.slice(0,w);return(S===""||x===""||x.includes(":"))&&this.fail(`malformed name: ${v}.`),{prefix:S,local:x}}processAttribsNS(){var v;const{attribList:w}=this,x=this.tag;{const{prefix:L,local:j}=this.qname(x.name);x.prefix=L,x.local=j;const U=x.uri=(v=this.resolve(L))!==null&&v!==void 0?v:"";L!==""&&(L==="xmlns"&&this.fail('tags may not have "xmlns" as prefix.'),U===""&&(this.fail(`unbound namespace prefix: ${JSON.stringify(L)}.`),x.uri=L))}if(w.length===0)return;const{attributes:S}=x,T=new Set;for(const L of w){const{name:j,prefix:U,local:W}=L;let Y,F;U===""?(Y=j==="xmlns"?_:"",F=j):(Y=this.resolve(U),Y===void 0&&(this.fail(`unbound namespace prefix: ${JSON.stringify(U)}.`),Y=U),F=`{${Y}}${W}`),T.has(F)&&this.fail(`duplicate attribute: ${F}.`),T.add(F),L.uri=Y,S[j]=L}this.attribList=[]}processAttribsPlain(){const{attribList:v}=this,w=this.tag.attributes;for(const{name:x,value:S}of v)w[x]!==void 0&&this.fail(`duplicate attribute: ${x}.`),w[x]=S;this.attribList=[]}openTag(){var v;this.processAttribs();const{tags:w}=this,x=this.tag;x.isSelfClosing=!1,(v=this.openTagHandler)===null||v===void 0||v.call(this,x),w.push(x),this.state=13,this.name=""}openSelfClosingTag(){var v,w,x;this.processAttribs();const{tags:S}=this,T=this.tag;T.isSelfClosing=!0,(v=this.openTagHandler)===null||v===void 0||v.call(this,T),(w=this.closeTagHandler)===null||w===void 0||w.call(this,T),(this.tag=(x=S[S.length-1])!==null&&x!==void 0?x:null)===null&&(this.closedRoot=!0),this.state=13,this.name=""}closeTag(){const{tags:v,name:w}=this;if(this.state=13,this.name="",w==="")return this.fail("weird empty close tag."),void(this.text+="</>");const x=this.closeTagHandler;let S=v.length;for(;S-- >0;){const T=this.tag=v.pop();if(this.topNS=T.ns,x==null||x(T),T.name===w)break;this.fail("unexpected close tag.")}S===0?this.closedRoot=!0:S<0&&(this.fail(`unmatched closing tag: ${w}.`),this.text+=`</${w}>`)}parseEntity(v){if(v[0]!=="#"){const x=this.ENTITIES[v];return x!==void 0?x:(this.fail(this.isName(v)?"undefined entity.":"disallowed character in entity name."),`&${v};`)}let w=NaN;return v[1]==="x"&&/^#x[0-9a-f]+$/i.test(v)?w=parseInt(v.slice(2),16):/^#[0-9]+$/.test(v)&&(w=parseInt(v.slice(1),10)),this.isChar(w)?String.fromCodePoint(w):(this.fail("malformed character entity."),`&${v};`)}}},{"xmlchars/xml/1.0/ed5":543,"xmlchars/xml/1.1/ed2":544,"xmlchars/xmlns/1.0/ed3":545}],497:[function(t,r,l){var i=t("safe-buffer").Buffer;function s(a,o){this._block=i.alloc(a),this._finalSize=o,this._blockSize=a,this._len=0}s.prototype.update=function(a,o){typeof a=="string"&&(o=o||"utf8",a=i.from(a,o));for(var n=this._block,c=this._blockSize,d=a.length,u=this._len,h=0;h<d;){for(var p=u%c,m=Math.min(d-h,c-p),f=0;f<m;f++)n[p+f]=a[h+f];h+=m,(u+=m)%c==0&&this._update(n)}return this._len+=d,this},s.prototype.digest=function(a){var o=this._len%this._blockSize;this._block[o]=128,this._block.fill(0,o+1),o>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=8*this._len;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var c=(4294967295&n)>>>0,d=(n-c)/4294967296;this._block.writeUInt32BE(d,this._blockSize-8),this._block.writeUInt32BE(c,this._blockSize-4)}this._update(this._block);var u=this._hash();return a?u.toString(a):u},s.prototype._update=function(){throw new Error("_update must be implemented by subclass")},r.exports=s},{"safe-buffer":494}],498:[function(t,r,l){var i=r.exports=function(s){s=s.toLowerCase();var a=i[s];if(!a)throw new Error(s+" is not supported (we accept pull requests)");return new a};i.sha=t("./sha"),i.sha1=t("./sha1"),i.sha224=t("./sha224"),i.sha256=t("./sha256"),i.sha384=t("./sha384"),i.sha512=t("./sha512")},{"./sha":499,"./sha1":500,"./sha224":501,"./sha256":502,"./sha384":503,"./sha512":504}],499:[function(t,r,l){var i=t("inherits"),s=t("./hash"),a=t("safe-buffer").Buffer,o=[1518500249,1859775393,-1894007588,-899497514],n=new Array(80);function c(){this.init(),this._w=n,s.call(this,64,56)}function d(h){return h<<30|h>>>2}function u(h,p,m,f){return h===0?p&m|~p&f:h===2?p&m|p&f|m&f:p^m^f}i(c,s),c.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},c.prototype._update=function(h){for(var p,m=this._w,f=0|this._a,b=0|this._b,y=0|this._c,_=0|this._d,E=0|this._e,M=0;M<16;++M)m[M]=h.readInt32BE(4*M);for(;M<80;++M)m[M]=m[M-3]^m[M-8]^m[M-14]^m[M-16];for(var D=0;D<80;++D){var z=~~(D/20),O=0|((p=f)<<5|p>>>27)+u(z,b,y,_)+E+m[D]+o[z];E=_,_=y,y=d(b),b=f,f=O}this._a=f+this._a|0,this._b=b+this._b|0,this._c=y+this._c|0,this._d=_+this._d|0,this._e=E+this._e|0},c.prototype._hash=function(){var h=a.allocUnsafe(20);return h.writeInt32BE(0|this._a,0),h.writeInt32BE(0|this._b,4),h.writeInt32BE(0|this._c,8),h.writeInt32BE(0|this._d,12),h.writeInt32BE(0|this._e,16),h},r.exports=c},{"./hash":497,inherits:440,"safe-buffer":494}],500:[function(t,r,l){var i=t("inherits"),s=t("./hash"),a=t("safe-buffer").Buffer,o=[1518500249,1859775393,-1894007588,-899497514],n=new Array(80);function c(){this.init(),this._w=n,s.call(this,64,56)}function d(p){return p<<5|p>>>27}function u(p){return p<<30|p>>>2}function h(p,m,f,b){return p===0?m&f|~m&b:p===2?m&f|m&b|f&b:m^f^b}i(c,s),c.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},c.prototype._update=function(p){for(var m,f=this._w,b=0|this._a,y=0|this._b,_=0|this._c,E=0|this._d,M=0|this._e,D=0;D<16;++D)f[D]=p.readInt32BE(4*D);for(;D<80;++D)f[D]=(m=f[D-3]^f[D-8]^f[D-14]^f[D-16])<<1|m>>>31;for(var z=0;z<80;++z){var O=~~(z/20),N=d(b)+h(O,y,_,E)+M+f[z]+o[O]|0;M=E,E=_,_=u(y),y=b,b=N}this._a=b+this._a|0,this._b=y+this._b|0,this._c=_+this._c|0,this._d=E+this._d|0,this._e=M+this._e|0},c.prototype._hash=function(){var p=a.allocUnsafe(20);return p.writeInt32BE(0|this._a,0),p.writeInt32BE(0|this._b,4),p.writeInt32BE(0|this._c,8),p.writeInt32BE(0|this._d,12),p.writeInt32BE(0|this._e,16),p},r.exports=c},{"./hash":497,inherits:440,"safe-buffer":494}],501:[function(t,r,l){var i=t("inherits"),s=t("./sha256"),a=t("./hash"),o=t("safe-buffer").Buffer,n=new Array(64);function c(){this.init(),this._w=n,a.call(this,64,56)}i(c,s),c.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},c.prototype._hash=function(){var d=o.allocUnsafe(28);return d.writeInt32BE(this._a,0),d.writeInt32BE(this._b,4),d.writeInt32BE(this._c,8),d.writeInt32BE(this._d,12),d.writeInt32BE(this._e,16),d.writeInt32BE(this._f,20),d.writeInt32BE(this._g,24),d},r.exports=c},{"./hash":497,"./sha256":502,inherits:440,"safe-buffer":494}],502:[function(t,r,l){var i=t("inherits"),s=t("./hash"),a=t("safe-buffer").Buffer,o=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],n=new Array(64);function c(){this.init(),this._w=n,s.call(this,64,56)}function d(f,b,y){return y^f&(b^y)}function u(f,b,y){return f&b|y&(f|b)}function h(f){return(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10)}function p(f){return(f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7)}function m(f){return(f>>>7|f<<25)^(f>>>18|f<<14)^f>>>3}i(c,s),c.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},c.prototype._update=function(f){for(var b,y=this._w,_=0|this._a,E=0|this._b,M=0|this._c,D=0|this._d,z=0|this._e,O=0|this._f,N=0|this._g,B=0|this._h,H=0;H<16;++H)y[H]=f.readInt32BE(4*H);for(;H<64;++H)y[H]=0|(((b=y[H-2])>>>17|b<<15)^(b>>>19|b<<13)^b>>>10)+y[H-7]+m(y[H-15])+y[H-16];for(var $=0;$<64;++$){var C=B+p(z)+d(z,O,N)+o[$]+y[$]|0,R=h(_)+u(_,E,M)|0;B=N,N=O,O=z,z=D+C|0,D=M,M=E,E=_,_=C+R|0}this._a=_+this._a|0,this._b=E+this._b|0,this._c=M+this._c|0,this._d=D+this._d|0,this._e=z+this._e|0,this._f=O+this._f|0,this._g=N+this._g|0,this._h=B+this._h|0},c.prototype._hash=function(){var f=a.allocUnsafe(32);return f.writeInt32BE(this._a,0),f.writeInt32BE(this._b,4),f.writeInt32BE(this._c,8),f.writeInt32BE(this._d,12),f.writeInt32BE(this._e,16),f.writeInt32BE(this._f,20),f.writeInt32BE(this._g,24),f.writeInt32BE(this._h,28),f},r.exports=c},{"./hash":497,inherits:440,"safe-buffer":494}],503:[function(t,r,l){var i=t("inherits"),s=t("./sha512"),a=t("./hash"),o=t("safe-buffer").Buffer,n=new Array(160);function c(){this.init(),this._w=n,a.call(this,128,112)}i(c,s),c.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},c.prototype._hash=function(){var d=o.allocUnsafe(48);function u(h,p,m){d.writeInt32BE(h,m),d.writeInt32BE(p,m+4)}return u(this._ah,this._al,0),u(this._bh,this._bl,8),u(this._ch,this._cl,16),u(this._dh,this._dl,24),u(this._eh,this._el,32),u(this._fh,this._fl,40),d},r.exports=c},{"./hash":497,"./sha512":504,inherits:440,"safe-buffer":494}],504:[function(t,r,l){var i=t("inherits"),s=t("./hash"),a=t("safe-buffer").Buffer,o=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],n=new Array(160);function c(){this.init(),this._w=n,s.call(this,128,112)}function d(E,M,D){return D^E&(M^D)}function u(E,M,D){return E&M|D&(E|M)}function h(E,M){return(E>>>28|M<<4)^(M>>>2|E<<30)^(M>>>7|E<<25)}function p(E,M){return(E>>>14|M<<18)^(E>>>18|M<<14)^(M>>>9|E<<23)}function m(E,M){return(E>>>1|M<<31)^(E>>>8|M<<24)^E>>>7}function f(E,M){return(E>>>1|M<<31)^(E>>>8|M<<24)^(E>>>7|M<<25)}function b(E,M){return(E>>>19|M<<13)^(M>>>29|E<<3)^E>>>6}function y(E,M){return(E>>>19|M<<13)^(M>>>29|E<<3)^(E>>>6|M<<26)}function _(E,M){return E>>>0<M>>>0?1:0}i(c,s),c.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},c.prototype._update=function(E){for(var M=this._w,D=0|this._ah,z=0|this._bh,O=0|this._ch,N=0|this._dh,B=0|this._eh,H=0|this._fh,$=0|this._gh,C=0|this._hh,R=0|this._al,k=0|this._bl,v=0|this._cl,w=0|this._dl,x=0|this._el,S=0|this._fl,T=0|this._gl,L=0|this._hl,j=0;j<32;j+=2)M[j]=E.readInt32BE(4*j),M[j+1]=E.readInt32BE(4*j+4);for(;j<160;j+=2){var U=M[j-30],W=M[j-30+1],Y=m(U,W),F=f(W,U),X=b(U=M[j-4],W=M[j-4+1]),P=y(W,U),I=M[j-14],V=M[j-14+1],Q=M[j-32],G=M[j-32+1],q=F+V|0,J=Y+I+_(q,F)|0;J=(J=J+X+_(q=q+P|0,P)|0)+Q+_(q=q+G|0,G)|0,M[j]=J,M[j+1]=q}for(var it=0;it<160;it+=2){J=M[it],q=M[it+1];var nt=u(D,z,O),Z=u(R,k,v),st=h(D,R),rt=h(R,D),lt=p(B,x),at=p(x,B),ct=o[it],ut=o[it+1],dt=d(B,H,$),gt=d(x,S,T),vt=L+at|0,_t=C+lt+_(vt,L)|0;_t=(_t=(_t=_t+dt+_(vt=vt+gt|0,gt)|0)+ct+_(vt=vt+ut|0,ut)|0)+J+_(vt=vt+q|0,q)|0;var wt=rt+Z|0,Ot=st+nt+_(wt,rt)|0;C=$,L=T,$=H,T=S,H=B,S=x,B=N+_t+_(x=w+vt|0,w)|0,N=O,w=v,O=z,v=k,z=D,k=R,D=_t+Ot+_(R=vt+wt|0,vt)|0}this._al=this._al+R|0,this._bl=this._bl+k|0,this._cl=this._cl+v|0,this._dl=this._dl+w|0,this._el=this._el+x|0,this._fl=this._fl+S|0,this._gl=this._gl+T|0,this._hl=this._hl+L|0,this._ah=this._ah+D+_(this._al,R)|0,this._bh=this._bh+z+_(this._bl,k)|0,this._ch=this._ch+O+_(this._cl,v)|0,this._dh=this._dh+N+_(this._dl,w)|0,this._eh=this._eh+B+_(this._el,x)|0,this._fh=this._fh+H+_(this._fl,S)|0,this._gh=this._gh+$+_(this._gl,T)|0,this._hh=this._hh+C+_(this._hl,L)|0},c.prototype._hash=function(){var E=a.allocUnsafe(64);function M(D,z,O){E.writeInt32BE(D,O),E.writeInt32BE(z,O+4)}return M(this._ah,this._al,0),M(this._bh,this._bl,8),M(this._ch,this._cl,16),M(this._dh,this._dl,24),M(this._eh,this._el,32),M(this._fh,this._fl,40),M(this._gh,this._gl,48),M(this._hh,this._hl,56),E},r.exports=c},{"./hash":497,inherits:440,"safe-buffer":494}],505:[function(t,r,l){r.exports=s;var i=t("events").EventEmitter;function s(){i.call(this)}t("inherits")(s,i),s.Readable=t("readable-stream/readable.js"),s.Writable=t("readable-stream/writable.js"),s.Duplex=t("readable-stream/duplex.js"),s.Transform=t("readable-stream/transform.js"),s.PassThrough=t("readable-stream/passthrough.js"),s.Stream=s,s.prototype.pipe=function(a,o){var n=this;function c(b){a.writable&&a.write(b)===!1&&n.pause&&n.pause()}function d(){n.readable&&n.resume&&n.resume()}n.on("data",c),a.on("drain",d),a._isStdio||o&&o.end===!1||(n.on("end",h),n.on("close",p));var u=!1;function h(){u||(u=!0,a.end())}function p(){u||(u=!0,typeof a.destroy=="function"&&a.destroy())}function m(b){if(f(),i.listenerCount(this,"error")===0)throw b}function f(){n.removeListener("data",c),a.removeListener("drain",d),n.removeListener("end",h),n.removeListener("close",p),n.removeListener("error",m),a.removeListener("error",m),n.removeListener("end",f),n.removeListener("close",f),a.removeListener("close",f)}return n.on("error",m),a.on("error",m),n.on("end",f),n.on("close",f),a.on("close",f),a.emit("pipe",n),a}},{events:422,inherits:440,"readable-stream/duplex.js":507,"readable-stream/passthrough.js":516,"readable-stream/readable.js":517,"readable-stream/transform.js":518,"readable-stream/writable.js":519}],506:[function(t,r,l){var i={}.toString;r.exports=Array.isArray||function(s){return i.call(s)=="[object Array]"}},{}],507:[function(t,r,l){r.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":508}],508:[function(t,r,l){var i=t("process-nextick-args"),s=Object.keys||function(f){var b=[];for(var y in f)b.push(y);return b};r.exports=h;var a=Object.create(t("core-util-is"));a.inherits=t("inherits");var o=t("./_stream_readable"),n=t("./_stream_writable");a.inherits(h,o);for(var c=s(n.prototype),d=0;d<c.length;d++){var u=c[d];h.prototype[u]||(h.prototype[u]=n.prototype[u])}function h(f){if(!(this instanceof h))return new h(f);o.call(this,f),n.call(this,f),f&&f.readable===!1&&(this.readable=!1),f&&f.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,f&&f.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",p)}function p(){this.allowHalfOpen||this._writableState.ended||i.nextTick(m,this)}function m(f){f.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(f){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=f,this._writableState.destroyed=f)}}),h.prototype._destroy=function(f,b){this.push(null),this.end(),i.nextTick(b,f)}},{"./_stream_readable":510,"./_stream_writable":512,"core-util-is":383,inherits:440,"process-nextick-args":466}],509:[function(t,r,l){r.exports=a;var i=t("./_stream_transform"),s=Object.create(t("core-util-is"));function a(o){if(!(this instanceof a))return new a(o);i.call(this,o)}s.inherits=t("inherits"),s.inherits(a,i),a.prototype._transform=function(o,n,c){c(null,o)}},{"./_stream_transform":511,"core-util-is":383,inherits:440}],510:[function(t,r,l){(function(i,s){(function(){var a=t("process-nextick-args");r.exports=D;var o,n=t("isarray");D.ReadableState=M,t("events").EventEmitter;var c=function(L,j){return L.listeners(j).length},d=t("./internal/streams/stream"),u=t("safe-buffer").Buffer,h=(s!==void 0?s:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},p=Object.create(t("core-util-is"));p.inherits=t("inherits");var m=t("util"),f=void 0;f=m&&m.debuglog?m.debuglog("stream"):function(){};var b,y=t("./internal/streams/BufferList"),_=t("./internal/streams/destroy");p.inherits(D,d);var E=["error","close","destroy","pause","resume"];function M(L,j){L=L||{};var U=j instanceof(o=o||t("./_stream_duplex"));this.objectMode=!!L.objectMode,U&&(this.objectMode=this.objectMode||!!L.readableObjectMode);var W=L.highWaterMark,Y=L.readableHighWaterMark,F=this.objectMode?16:16384;this.highWaterMark=W||W===0?W:U&&(Y||Y===0)?Y:F,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=L.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,L.encoding&&(b||(b=t("string_decoder/").StringDecoder),this.decoder=new b(L.encoding),this.encoding=L.encoding)}function D(L){if(o=o||t("./_stream_duplex"),!(this instanceof D))return new D(L);this._readableState=new M(L,this),this.readable=!0,L&&(typeof L.read=="function"&&(this._read=L.read),typeof L.destroy=="function"&&(this._destroy=L.destroy)),d.call(this)}function z(L,j,U,W,Y){var F,X=L._readableState;return j===null?(X.reading=!1,function(P,I){if(!I.ended){if(I.decoder){var V=I.decoder.end();V&&V.length&&(I.buffer.push(V),I.length+=I.objectMode?1:V.length)}I.ended=!0,B(P)}}(L,X)):(Y||(F=function(P,I){var V;Q=I,u.isBuffer(Q)||Q instanceof h||typeof I=="string"||I===void 0||P.objectMode||(V=new TypeError("Invalid non-string/buffer chunk"));var Q;return V}(X,j)),F?L.emit("error",F):X.objectMode||j&&j.length>0?(typeof j=="string"||X.objectMode||Object.getPrototypeOf(j)===u.prototype||(j=function(P){return u.from(P)}(j)),W?X.endEmitted?L.emit("error",new Error("stream.unshift() after end event")):O(L,X,j,!0):X.ended?L.emit("error",new Error("stream.push() after EOF")):(X.reading=!1,X.decoder&&!U?(j=X.decoder.write(j),X.objectMode||j.length!==0?O(L,X,j,!1):$(L,X)):O(L,X,j,!1))):W||(X.reading=!1)),function(P){return!P.ended&&(P.needReadable||P.length<P.highWaterMark||P.length===0)}(X)}function O(L,j,U,W){j.flowing&&j.length===0&&!j.sync?(L.emit("data",U),L.read(0)):(j.length+=j.objectMode?1:U.length,W?j.buffer.unshift(U):j.buffer.push(U),j.needReadable&&B(L)),$(L,j)}Object.defineProperty(D.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(L){this._readableState&&(this._readableState.destroyed=L)}}),D.prototype.destroy=_.destroy,D.prototype._undestroy=_.undestroy,D.prototype._destroy=function(L,j){this.push(null),j(L)},D.prototype.push=function(L,j){var U,W=this._readableState;return W.objectMode?U=!0:typeof L=="string"&&((j=j||W.defaultEncoding)!==W.encoding&&(L=u.from(L,j),j=""),U=!0),z(this,L,j,!1,U)},D.prototype.unshift=function(L){return z(this,L,null,!0,!1)},D.prototype.isPaused=function(){return this._readableState.flowing===!1},D.prototype.setEncoding=function(L){return b||(b=t("string_decoder/").StringDecoder),this._readableState.decoder=new b(L),this._readableState.encoding=L,this};function N(L,j){return L<=0||j.length===0&&j.ended?0:j.objectMode?1:L!=L?j.flowing&&j.length?j.buffer.head.data.length:j.length:(L>j.highWaterMark&&(j.highWaterMark=function(U){return U>=8388608?U=8388608:(U--,U|=U>>>1,U|=U>>>2,U|=U>>>4,U|=U>>>8,U|=U>>>16,U++),U}(L)),L<=j.length?L:j.ended?j.length:(j.needReadable=!0,0))}function B(L){var j=L._readableState;j.needReadable=!1,j.emittedReadable||(f("emitReadable",j.flowing),j.emittedReadable=!0,j.sync?a.nextTick(H,L):H(L))}function H(L){f("emit readable"),L.emit("readable"),v(L)}function $(L,j){j.readingMore||(j.readingMore=!0,a.nextTick(C,L,j))}function C(L,j){for(var U=j.length;!j.reading&&!j.flowing&&!j.ended&&j.length<j.highWaterMark&&(f("maybeReadMore read 0"),L.read(0),U!==j.length);)U=j.length;j.readingMore=!1}function R(L){f("readable nexttick read 0"),L.read(0)}function k(L,j){j.reading||(f("resume read 0"),L.read(0)),j.resumeScheduled=!1,j.awaitDrain=0,L.emit("resume"),v(L),j.flowing&&!j.reading&&L.read(0)}function v(L){var j=L._readableState;for(f("flow",j.flowing);j.flowing&&L.read()!==null;);}function w(L,j){return j.length===0?null:(j.objectMode?U=j.buffer.shift():!L||L>=j.length?(U=j.decoder?j.buffer.join(""):j.buffer.length===1?j.buffer.head.data:j.buffer.concat(j.length),j.buffer.clear()):U=function(W,Y,F){var X;return W<Y.head.data.length?(X=Y.head.data.slice(0,W),Y.head.data=Y.head.data.slice(W)):X=W===Y.head.data.length?Y.shift():F?function(P,I){var V=I.head,Q=1,G=V.data;for(P-=G.length;V=V.next;){var q=V.data,J=P>q.length?q.length:P;if(J===q.length?G+=q:G+=q.slice(0,P),(P-=J)===0){J===q.length?(++Q,V.next?I.head=V.next:I.head=I.tail=null):(I.head=V,V.data=q.slice(J));break}++Q}return I.length-=Q,G}(W,Y):function(P,I){var V=u.allocUnsafe(P),Q=I.head,G=1;for(Q.data.copy(V),P-=Q.data.length;Q=Q.next;){var q=Q.data,J=P>q.length?q.length:P;if(q.copy(V,V.length-P,0,J),(P-=J)===0){J===q.length?(++G,Q.next?I.head=Q.next:I.head=I.tail=null):(I.head=Q,Q.data=q.slice(J));break}++G}return I.length-=G,V}(W,Y),X}(L,j.buffer,j.decoder),U);var U}function x(L){var j=L._readableState;if(j.length>0)throw new Error('"endReadable()" called on non-empty stream');j.endEmitted||(j.ended=!0,a.nextTick(S,j,L))}function S(L,j){L.endEmitted||L.length!==0||(L.endEmitted=!0,j.readable=!1,j.emit("end"))}function T(L,j){for(var U=0,W=L.length;U<W;U++)if(L[U]===j)return U;return-1}D.prototype.read=function(L){f("read",L),L=parseInt(L,10);var j=this._readableState,U=L;if(L!==0&&(j.emittedReadable=!1),L===0&&j.needReadable&&(j.length>=j.highWaterMark||j.ended))return f("read: emitReadable",j.length,j.ended),j.length===0&&j.ended?x(this):B(this),null;if((L=N(L,j))===0&&j.ended)return j.length===0&&x(this),null;var W,Y=j.needReadable;return f("need readable",Y),(j.length===0||j.length-L<j.highWaterMark)&&f("length less than watermark",Y=!0),j.ended||j.reading?f("reading or ended",Y=!1):Y&&(f("do read"),j.reading=!0,j.sync=!0,j.length===0&&(j.needReadable=!0),this._read(j.highWaterMark),j.sync=!1,j.reading||(L=N(U,j))),(W=L>0?w(L,j):null)===null?(j.needReadable=!0,L=0):j.length-=L,j.length===0&&(j.ended||(j.needReadable=!0),U!==L&&j.ended&&x(this)),W!==null&&this.emit("data",W),W},D.prototype._read=function(L){this.emit("error",new Error("_read() is not implemented"))},D.prototype.pipe=function(L,j){var U=this,W=this._readableState;switch(W.pipesCount){case 0:W.pipes=L;break;case 1:W.pipes=[W.pipes,L];break;default:W.pipes.push(L)}W.pipesCount+=1,f("pipe count=%d opts=%j",W.pipesCount,j);var Y=(!j||j.end!==!1)&&L!==i.stdout&&L!==i.stderr?X:it;function F(nt,Z){f("onunpipe"),nt===U&&Z&&Z.hasUnpiped===!1&&(Z.hasUnpiped=!0,f("cleanup"),L.removeListener("close",q),L.removeListener("finish",J),L.removeListener("drain",P),L.removeListener("error",G),L.removeListener("unpipe",F),U.removeListener("end",X),U.removeListener("end",it),U.removeListener("data",Q),I=!0,!W.awaitDrain||L._writableState&&!L._writableState.needDrain||P())}function X(){f("onend"),L.end()}W.endEmitted?a.nextTick(Y):U.once("end",Y),L.on("unpipe",F);var P=function(nt){return function(){var Z=nt._readableState;f("pipeOnDrain",Z.awaitDrain),Z.awaitDrain&&Z.awaitDrain--,Z.awaitDrain===0&&c(nt,"data")&&(Z.flowing=!0,v(nt))}}(U);L.on("drain",P);var I=!1,V=!1;function Q(nt){f("ondata"),V=!1,L.write(nt)!==!1||V||((W.pipesCount===1&&W.pipes===L||W.pipesCount>1&&T(W.pipes,L)!==-1)&&!I&&(f("false write response, pause",W.awaitDrain),W.awaitDrain++,V=!0),U.pause())}function G(nt){f("onerror",nt),it(),L.removeListener("error",G),c(L,"error")===0&&L.emit("error",nt)}function q(){L.removeListener("finish",J),it()}function J(){f("onfinish"),L.removeListener("close",q),it()}function it(){f("unpipe"),U.unpipe(L)}return U.on("data",Q),function(nt,Z,st){if(typeof nt.prependListener=="function")return nt.prependListener(Z,st);nt._events&&nt._events[Z]?n(nt._events[Z])?nt._events[Z].unshift(st):nt._events[Z]=[st,nt._events[Z]]:nt.on(Z,st)}(L,"error",G),L.once("close",q),L.once("finish",J),L.emit("pipe",U),W.flowing||(f("pipe resume"),U.resume()),L},D.prototype.unpipe=function(L){var j=this._readableState,U={hasUnpiped:!1};if(j.pipesCount===0)return this;if(j.pipesCount===1)return L&&L!==j.pipes||(L||(L=j.pipes),j.pipes=null,j.pipesCount=0,j.flowing=!1,L&&L.emit("unpipe",this,U)),this;if(!L){var W=j.pipes,Y=j.pipesCount;j.pipes=null,j.pipesCount=0,j.flowing=!1;for(var F=0;F<Y;F++)W[F].emit("unpipe",this,{hasUnpiped:!1});return this}var X=T(j.pipes,L);return X===-1||(j.pipes.splice(X,1),j.pipesCount-=1,j.pipesCount===1&&(j.pipes=j.pipes[0]),L.emit("unpipe",this,U)),this},D.prototype.on=function(L,j){var U=d.prototype.on.call(this,L,j);if(L==="data")this._readableState.flowing!==!1&&this.resume();else if(L==="readable"){var W=this._readableState;W.endEmitted||W.readableListening||(W.readableListening=W.needReadable=!0,W.emittedReadable=!1,W.reading?W.length&&B(this):a.nextTick(R,this))}return U},D.prototype.addListener=D.prototype.on,D.prototype.resume=function(){var L=this._readableState;return L.flowing||(f("resume"),L.flowing=!0,function(j,U){U.resumeScheduled||(U.resumeScheduled=!0,a.nextTick(k,j,U))}(this,L)),this},D.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},D.prototype.wrap=function(L){var j=this,U=this._readableState,W=!1;for(var Y in L.on("end",function(){if(f("wrapped end"),U.decoder&&!U.ended){var X=U.decoder.end();X&&X.length&&j.push(X)}j.push(null)}),L.on("data",function(X){f("wrapped data"),U.decoder&&(X=U.decoder.write(X)),U.objectMode&&X==null||(U.objectMode||X&&X.length)&&(j.push(X)||(W=!0,L.pause()))}),L)this[Y]===void 0&&typeof L[Y]=="function"&&(this[Y]=function(X){return function(){return L[X].apply(L,arguments)}}(Y));for(var F=0;F<E.length;F++)L.on(E[F],this.emit.bind(this,E[F]));return this._read=function(X){f("wrapped _read",X),W&&(W=!1,L.resume())},this},Object.defineProperty(D.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),D._fromList=w}).call(this)}).call(this,t("_process"),typeof ve<"u"?ve:typeof self<"u"?self:typeof window<"u"?window:{})},{"./_stream_duplex":508,"./internal/streams/BufferList":513,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,events:422,inherits:440,isarray:506,"process-nextick-args":466,"safe-buffer":520,"string_decoder/":521,util:188}],511:[function(t,r,l){r.exports=o;var i=t("./_stream_duplex"),s=Object.create(t("core-util-is"));function a(d,u){var h=this._transformState;h.transforming=!1;var p=h.writecb;if(!p)return this.emit("error",new Error("write callback called multiple times"));h.writechunk=null,h.writecb=null,u!=null&&this.push(u),p(d);var m=this._readableState;m.reading=!1,(m.needReadable||m.length<m.highWaterMark)&&this._read(m.highWaterMark)}function o(d){if(!(this instanceof o))return new o(d);i.call(this,d),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,d&&(typeof d.transform=="function"&&(this._transform=d.transform),typeof d.flush=="function"&&(this._flush=d.flush)),this.on("prefinish",n)}function n(){var d=this;typeof this._flush=="function"?this._flush(function(u,h){c(d,u,h)}):c(this,null,null)}function c(d,u,h){if(u)return d.emit("error",u);if(h!=null&&d.push(h),d._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(d._transformState.transforming)throw new Error("Calling transform done when still transforming");return d.push(null)}s.inherits=t("inherits"),s.inherits(o,i),o.prototype.push=function(d,u){return this._transformState.needTransform=!1,i.prototype.push.call(this,d,u)},o.prototype._transform=function(d,u,h){throw new Error("_transform() is not implemented")},o.prototype._write=function(d,u,h){var p=this._transformState;if(p.writecb=h,p.writechunk=d,p.writeencoding=u,!p.transforming){var m=this._readableState;(p.needTransform||m.needReadable||m.length<m.highWaterMark)&&this._read(m.highWaterMark)}},o.prototype._read=function(d){var u=this._transformState;u.writechunk!==null&&u.writecb&&!u.transforming?(u.transforming=!0,this._transform(u.writechunk,u.writeencoding,u.afterTransform)):u.needTransform=!0},o.prototype._destroy=function(d,u){var h=this;i.prototype._destroy.call(this,d,function(p){u(p),h.emit("close")})}},{"./_stream_duplex":508,"core-util-is":383,inherits:440}],512:[function(t,r,l){(function(i,s,a){(function(){var o=t("process-nextick-args");function n($){var C=this;this.next=null,this.entry=null,this.finish=function(){(function(R,k,v){var w=R.entry;for(R.entry=null;w;){var x=w.callback;k.pendingcb--,x(v),w=w.next}k.corkedRequestsFree.next=R})(C,$)}}r.exports=M;var c,d=!i.browser&&["v0.10","v0.9."].indexOf(i.version.slice(0,5))>-1?a:o.nextTick;M.WritableState=E;var u=Object.create(t("core-util-is"));u.inherits=t("inherits");var h={deprecate:t("util-deprecate")},p=t("./internal/streams/stream"),m=t("safe-buffer").Buffer,f=(s!==void 0?s:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},b,y=t("./internal/streams/destroy");function _(){}function E($,C){c=c||t("./_stream_duplex"),$=$||{};var R=C instanceof c;this.objectMode=!!$.objectMode,R&&(this.objectMode=this.objectMode||!!$.writableObjectMode);var k=$.highWaterMark,v=$.writableHighWaterMark,w=this.objectMode?16:16384;this.highWaterMark=k||k===0?k:R&&(v||v===0)?v:w,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var x=$.decodeStrings===!1;this.decodeStrings=!x,this.defaultEncoding=$.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(S){(function(T,L){var j=T._writableState,U=j.sync,W=j.writecb;if(function(F){F.writing=!1,F.writecb=null,F.length-=F.writelen,F.writelen=0}(j),L)(function(F,X,P,I,V){--X.pendingcb,P?(o.nextTick(V,I),o.nextTick(H,F,X),F._writableState.errorEmitted=!0,F.emit("error",I)):(V(I),F._writableState.errorEmitted=!0,F.emit("error",I),H(F,X))})(T,j,U,L,W);else{var Y=N(j);Y||j.corked||j.bufferProcessing||!j.bufferedRequest||O(T,j),U?d(z,T,j,Y,W):z(T,j,Y,W)}})(C,S)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function M($){if(c=c||t("./_stream_duplex"),!(b.call(M,this)||this instanceof c))return new M($);this._writableState=new E($,this),this.writable=!0,$&&(typeof $.write=="function"&&(this._write=$.write),typeof $.writev=="function"&&(this._writev=$.writev),typeof $.destroy=="function"&&(this._destroy=$.destroy),typeof $.final=="function"&&(this._final=$.final)),p.call(this)}function D($,C,R,k,v,w,x){C.writelen=k,C.writecb=x,C.writing=!0,C.sync=!0,R?$._writev(v,C.onwrite):$._write(v,w,C.onwrite),C.sync=!1}function z($,C,R,k){R||function(v,w){w.length===0&&w.needDrain&&(w.needDrain=!1,v.emit("drain"))}($,C),C.pendingcb--,k(),H($,C)}function O($,C){C.bufferProcessing=!0;var R=C.bufferedRequest;if($._writev&&R&&R.next){var k=C.bufferedRequestCount,v=new Array(k),w=C.corkedRequestsFree;w.entry=R;for(var x=0,S=!0;R;)v[x]=R,R.isBuf||(S=!1),R=R.next,x+=1;v.allBuffers=S,D($,C,!0,C.length,v,"",w.finish),C.pendingcb++,C.lastBufferedRequest=null,w.next?(C.corkedRequestsFree=w.next,w.next=null):C.corkedRequestsFree=new n(C),C.bufferedRequestCount=0}else{for(;R;){var T=R.chunk,L=R.encoding,j=R.callback;if(D($,C,!1,C.objectMode?1:T.length,T,L,j),R=R.next,C.bufferedRequestCount--,C.writing)break}R===null&&(C.lastBufferedRequest=null)}C.bufferedRequest=R,C.bufferProcessing=!1}function N($){return $.ending&&$.length===0&&$.bufferedRequest===null&&!$.finished&&!$.writing}function B($,C){$._final(function(R){C.pendingcb--,R&&$.emit("error",R),C.prefinished=!0,$.emit("prefinish"),H($,C)})}function H($,C){var R=N(C);return R&&(function(k,v){v.prefinished||v.finalCalled||(typeof k._final=="function"?(v.pendingcb++,v.finalCalled=!0,o.nextTick(B,k,v)):(v.prefinished=!0,k.emit("prefinish")))}($,C),C.pendingcb===0&&(C.finished=!0,$.emit("finish"))),R}u.inherits(M,p),E.prototype.getBuffer=function(){for(var $=this.bufferedRequest,C=[];$;)C.push($),$=$.next;return C},function(){try{Object.defineProperty(E.prototype,"buffer",{get:h.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(b=Function.prototype[Symbol.hasInstance],Object.defineProperty(M,Symbol.hasInstance,{value:function($){return!!b.call(this,$)||this===M&&$&&$._writableState instanceof E}})):b=function($){return $ instanceof this},M.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},M.prototype.write=function($,C,R){var k,v=this._writableState,w=!1,x=!v.objectMode&&(k=$,m.isBuffer(k)||k instanceof f);return x&&!m.isBuffer($)&&($=function(S){return m.from(S)}($)),typeof C=="function"&&(R=C,C=null),x?C="buffer":C||(C=v.defaultEncoding),typeof R!="function"&&(R=_),v.ended?function(S,T){var L=new Error("write after end");S.emit("error",L),o.nextTick(T,L)}(this,R):(x||function(S,T,L,j){var U=!0,W=!1;return L===null?W=new TypeError("May not write null values to stream"):typeof L=="string"||L===void 0||T.objectMode||(W=new TypeError("Invalid non-string/buffer chunk")),W&&(S.emit("error",W),o.nextTick(j,W),U=!1),U}(this,v,$,R))&&(v.pendingcb++,w=function(S,T,L,j,U,W){if(!L){var Y=function(I,V,Q){return I.objectMode||I.decodeStrings===!1||typeof V!="string"||(V=m.from(V,Q)),V}(T,j,U);j!==Y&&(L=!0,U="buffer",j=Y)}var F=T.objectMode?1:j.length;T.length+=F;var X=T.length<T.highWaterMark;if(X||(T.needDrain=!0),T.writing||T.corked){var P=T.lastBufferedRequest;T.lastBufferedRequest={chunk:j,encoding:U,isBuf:L,callback:W,next:null},P?P.next=T.lastBufferedRequest:T.bufferedRequest=T.lastBufferedRequest,T.bufferedRequestCount+=1}else D(S,T,!1,F,j,U,W);return X}(this,v,x,$,C,R)),w},M.prototype.cork=function(){this._writableState.corked++},M.prototype.uncork=function(){var $=this._writableState;$.corked&&($.corked--,$.writing||$.corked||$.bufferProcessing||!$.bufferedRequest||O(this,$))},M.prototype.setDefaultEncoding=function($){if(typeof $=="string"&&($=$.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf(($+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+$);return this._writableState.defaultEncoding=$,this},Object.defineProperty(M.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),M.prototype._write=function($,C,R){R(new Error("_write() is not implemented"))},M.prototype._writev=null,M.prototype.end=function($,C,R){var k=this._writableState;typeof $=="function"?(R=$,$=null,C=null):typeof C=="function"&&(R=C,C=null),$!=null&&this.write($,C),k.corked&&(k.corked=1,this.uncork()),k.ending||function(v,w,x){w.ending=!0,H(v,w),x&&(w.finished?o.nextTick(x):v.once("finish",x)),w.ended=!0,v.writable=!1}(this,k,R)},Object.defineProperty(M.prototype,"destroyed",{get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function($){this._writableState&&(this._writableState.destroyed=$)}}),M.prototype.destroy=y.destroy,M.prototype._undestroy=y.undestroy,M.prototype._destroy=function($,C){this.end(),C($)}}).call(this)}).call(this,t("_process"),typeof ve<"u"?ve:typeof self<"u"?self:typeof window<"u"?window:{},t("timers").setImmediate)},{"./_stream_duplex":508,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,inherits:440,"process-nextick-args":466,"safe-buffer":520,timers:523,"util-deprecate":524}],513:[function(t,r,l){var i=t("safe-buffer").Buffer,s=t("util");r.exports=function(){function a(){(function(o,n){if(!(o instanceof n))throw new TypeError("Cannot call a class as a function")})(this,a),this.head=null,this.tail=null,this.length=0}return a.prototype.push=function(o){var n={data:o,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},a.prototype.unshift=function(o){var n={data:o,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},a.prototype.shift=function(){if(this.length!==0){var o=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,o}},a.prototype.clear=function(){this.head=this.tail=null,this.length=0},a.prototype.join=function(o){if(this.length===0)return"";for(var n=this.head,c=""+n.data;n=n.next;)c+=o+n.data;return c},a.prototype.concat=function(o){if(this.length===0)return i.alloc(0);for(var n,c,d,u=i.allocUnsafe(o>>>0),h=this.head,p=0;h;)n=h.data,c=u,d=p,n.copy(c,d),p+=h.data.length,h=h.next;return u},a}(),s&&s.inspect&&s.inspect.custom&&(r.exports.prototype[s.inspect.custom]=function(){var a=s.inspect({length:this.length});return this.constructor.name+" "+a})},{"safe-buffer":520,util:188}],514:[function(t,r,l){var i=t("process-nextick-args");function s(a,o){a.emit("error",o)}r.exports={destroy:function(a,o){var n=this,c=this._readableState&&this._readableState.destroyed,d=this._writableState&&this._writableState.destroyed;return c||d?(o?o(a):a&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,i.nextTick(s,this,a)):i.nextTick(s,this,a)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(a||null,function(u){!o&&u?n._writableState?n._writableState.errorEmitted||(n._writableState.errorEmitted=!0,i.nextTick(s,n,u)):i.nextTick(s,n,u):o&&o(u)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":466}],515:[function(t,r,l){arguments[4][490][0].apply(l,arguments)},{dup:490,events:422}],516:[function(t,r,l){r.exports=t("./readable").PassThrough},{"./readable":517}],517:[function(t,r,l){(l=r.exports=t("./lib/_stream_readable.js")).Stream=l,l.Readable=l,l.Writable=t("./lib/_stream_writable.js"),l.Duplex=t("./lib/_stream_duplex.js"),l.Transform=t("./lib/_stream_transform.js"),l.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":508,"./lib/_stream_passthrough.js":509,"./lib/_stream_readable.js":510,"./lib/_stream_transform.js":511,"./lib/_stream_writable.js":512}],518:[function(t,r,l){r.exports=t("./readable").Transform},{"./readable":517}],519:[function(t,r,l){r.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":512}],520:[function(t,r,l){arguments[4][217][0].apply(l,arguments)},{buffer:220,dup:217}],521:[function(t,r,l){arguments[4][218][0].apply(l,arguments)},{dup:218,"safe-buffer":520}],522:[function(t,r,l){arguments[4][218][0].apply(l,arguments)},{dup:218,"safe-buffer":494}],523:[function(t,r,l){(function(i,s){(function(){var a=t("process/browser.js").nextTick,o=Function.prototype.apply,n=Array.prototype.slice,c={},d=0;function u(h,p){this._id=h,this._clearFn=p}l.setTimeout=function(){return new u(o.call(setTimeout,window,arguments),clearTimeout)},l.setInterval=function(){return new u(o.call(setInterval,window,arguments),clearInterval)},l.clearTimeout=l.clearInterval=function(h){h.close()},u.prototype.unref=u.prototype.ref=function(){},u.prototype.close=function(){this._clearFn.call(window,this._id)},l.enroll=function(h,p){clearTimeout(h._idleTimeoutId),h._idleTimeout=p},l.unenroll=function(h){clearTimeout(h._idleTimeoutId),h._idleTimeout=-1},l._unrefActive=l.active=function(h){clearTimeout(h._idleTimeoutId);var p=h._idleTimeout;p>=0&&(h._idleTimeoutId=setTimeout(function(){h._onTimeout&&h._onTimeout()},p))},l.setImmediate=typeof i=="function"?i:function(h){var p=d++,m=!(arguments.length<2)&&n.call(arguments,1);return c[p]=!0,a(function(){c[p]&&(m?h.apply(null,m):h.call(null),l.clearImmediate(p))}),p},l.clearImmediate=typeof s=="function"?s:function(h){delete c[h]}}).call(this)}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":467,timers:523}],524:[function(t,r,l){(function(i){(function(){function s(a){try{if(!i.localStorage)return!1}catch{return!1}var o=i.localStorage[a];return o!=null&&String(o).toLowerCase()==="true"}r.exports=function(a,o){if(s("noDeprecation"))return a;var n=!1;return function(){if(!n){if(s("throwDeprecation"))throw new Error(o);s("traceDeprecation")?console.trace(o):console.warn(o),n=!0}return a.apply(this,arguments)}}}).call(this)}).call(this,typeof ve<"u"?ve:typeof self<"u"?self:typeof window<"u"?window:{})},{}],525:[function(t,r,l){typeof Object.create=="function"?r.exports=function(i,s){i.super_=s,i.prototype=Object.create(s.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}})}:r.exports=function(i,s){i.super_=s;var a=function(){};a.prototype=s.prototype,i.prototype=new a,i.prototype.constructor=i}},{}],526:[function(t,r,l){r.exports=function(i){return i&&typeof i=="object"&&typeof i.copy=="function"&&typeof i.fill=="function"&&typeof i.readUInt8=="function"}},{}],527:[function(t,r,l){(function(i,s){(function(){var a=/%[sdj%]/g;l.format=function(v){if(!E(v)){for(var w=[],x=0;x<arguments.length;x++)w.push(c(arguments[x]));return w.join(" ")}x=1;for(var S=arguments,T=S.length,L=String(v).replace(a,function(U){if(U==="%%")return"%";if(x>=T)return U;switch(U){case"%s":return String(S[x++]);case"%d":return Number(S[x++]);case"%j":try{return JSON.stringify(S[x++])}catch{return"[Circular]"}default:return U}}),j=S[x];x<T;j=S[++x])y(j)||!z(j)?L+=" "+j:L+=" "+c(j);return L},l.deprecate=function(v,w){if(M(s.process))return function(){return l.deprecate(v,w).apply(this,arguments)};if(i.noDeprecation===!0)return v;var x=!1;return function(){if(!x){if(i.throwDeprecation)throw new Error(w);i.traceDeprecation?console.trace(w):console.error(w),x=!0}return v.apply(this,arguments)}};var o,n={};function c(v,w){var x={seen:[],stylize:u};return arguments.length>=3&&(x.depth=arguments[2]),arguments.length>=4&&(x.colors=arguments[3]),b(w)?x.showHidden=w:w&&l._extend(x,w),M(x.showHidden)&&(x.showHidden=!1),M(x.depth)&&(x.depth=2),M(x.colors)&&(x.colors=!1),M(x.customInspect)&&(x.customInspect=!0),x.colors&&(x.stylize=d),h(x,v,x.depth)}function d(v,w){var x=c.styles[w];return x?"\x1B["+c.colors[x][0]+"m"+v+"\x1B["+c.colors[x][1]+"m":v}function u(v,w){return v}function h(v,w,x){if(v.customInspect&&w&&B(w.inspect)&&w.inspect!==l.inspect&&(!w.constructor||w.constructor.prototype!==w)){var S=w.inspect(x,v);return E(S)||(S=h(v,S,x)),S}var T=function(P,I){if(M(I))return P.stylize("undefined","undefined");if(E(I)){var V="'"+JSON.stringify(I).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return P.stylize(V,"string")}if(_(I))return P.stylize(""+I,"number");if(b(I))return P.stylize(""+I,"boolean");if(y(I))return P.stylize("null","null")}(v,w);if(T)return T;var L=Object.keys(w),j=function(P){var I={};return P.forEach(function(V,Q){I[V]=!0}),I}(L);if(v.showHidden&&(L=Object.getOwnPropertyNames(w)),N(w)&&(L.indexOf("message")>=0||L.indexOf("description")>=0))return p(w);if(L.length===0){if(B(w)){var U=w.name?": "+w.name:"";return v.stylize("[Function"+U+"]","special")}if(D(w))return v.stylize(RegExp.prototype.toString.call(w),"regexp");if(O(w))return v.stylize(Date.prototype.toString.call(w),"date");if(N(w))return p(w)}var W,Y="",F=!1,X=["{","}"];return f(w)&&(F=!0,X=["[","]"]),B(w)&&(Y=" [Function"+(w.name?": "+w.name:"")+"]"),D(w)&&(Y=" "+RegExp.prototype.toString.call(w)),O(w)&&(Y=" "+Date.prototype.toUTCString.call(w)),N(w)&&(Y=" "+p(w)),L.length!==0||F&&w.length!=0?x<0?D(w)?v.stylize(RegExp.prototype.toString.call(w),"regexp"):v.stylize("[Object]","special"):(v.seen.push(w),W=F?function(P,I,V,Q,G){for(var q=[],J=0,it=I.length;J<it;++J)k(I,String(J))?q.push(m(P,I,V,Q,String(J),!0)):q.push("");return G.forEach(function(nt){nt.match(/^\d+$/)||q.push(m(P,I,V,Q,nt,!0))}),q}(v,w,x,j,L):L.map(function(P){return m(v,w,x,j,P,F)}),v.seen.pop(),function(P,I,V){return P.reduce(function(Q,G){return G.indexOf(`
`)>=0,Q+G.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?V[0]+(I===""?"":I+`
 `)+" "+P.join(`,
  `)+" "+V[1]:V[0]+I+" "+P.join(", ")+" "+V[1]}(W,Y,X)):X[0]+Y+X[1]}function p(v){return"["+Error.prototype.toString.call(v)+"]"}function m(v,w,x,S,T,L){var j,U,W;if((W=Object.getOwnPropertyDescriptor(w,T)||{value:w[T]}).get?U=W.set?v.stylize("[Getter/Setter]","special"):v.stylize("[Getter]","special"):W.set&&(U=v.stylize("[Setter]","special")),k(S,T)||(j="["+T+"]"),U||(v.seen.indexOf(W.value)<0?(U=y(x)?h(v,W.value,null):h(v,W.value,x-1)).indexOf(`
`)>-1&&(U=L?U.split(`
`).map(function(Y){return"  "+Y}).join(`
`).substr(2):`
`+U.split(`
`).map(function(Y){return"   "+Y}).join(`
`)):U=v.stylize("[Circular]","special")),M(j)){if(L&&T.match(/^\d+$/))return U;(j=JSON.stringify(""+T)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(j=j.substr(1,j.length-2),j=v.stylize(j,"name")):(j=j.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),j=v.stylize(j,"string"))}return j+": "+U}function f(v){return Array.isArray(v)}function b(v){return typeof v=="boolean"}function y(v){return v===null}function _(v){return typeof v=="number"}function E(v){return typeof v=="string"}function M(v){return v===void 0}function D(v){return z(v)&&H(v)==="[object RegExp]"}function z(v){return typeof v=="object"&&v!==null}function O(v){return z(v)&&H(v)==="[object Date]"}function N(v){return z(v)&&(H(v)==="[object Error]"||v instanceof Error)}function B(v){return typeof v=="function"}function H(v){return Object.prototype.toString.call(v)}function $(v){return v<10?"0"+v.toString(10):v.toString(10)}l.debuglog=function(v){if(M(o)&&(o=i.env.NODE_DEBUG||""),v=v.toUpperCase(),!n[v])if(new RegExp("\\b"+v+"\\b","i").test(o)){var w=i.pid;n[v]=function(){var x=l.format.apply(l,arguments);console.error("%s %d: %s",v,w,x)}}else n[v]=function(){};return n[v]},l.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},l.isArray=f,l.isBoolean=b,l.isNull=y,l.isNullOrUndefined=function(v){return v==null},l.isNumber=_,l.isString=E,l.isSymbol=function(v){return typeof v=="symbol"},l.isUndefined=M,l.isRegExp=D,l.isObject=z,l.isDate=O,l.isError=N,l.isFunction=B,l.isPrimitive=function(v){return v===null||typeof v=="boolean"||typeof v=="number"||typeof v=="string"||typeof v=="symbol"||v===void 0},l.isBuffer=t("./support/isBuffer");var C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function R(){var v=new Date,w=[$(v.getHours()),$(v.getMinutes()),$(v.getSeconds())].join(":");return[v.getDate(),C[v.getMonth()],w].join(" ")}function k(v,w){return Object.prototype.hasOwnProperty.call(v,w)}l.log=function(){console.log("%s - %s",R(),l.format.apply(l,arguments))},l.inherits=t("inherits"),l._extend=function(v,w){if(!w||!z(w))return v;for(var x=Object.keys(w),S=x.length;S--;)v[x[S]]=w[x[S]];return v}}).call(this)}).call(this,t("_process"),typeof ve<"u"?ve:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":526,_process:467,inherits:525}],528:[function(t,r,l){Object.defineProperty(l,"__esModule",{value:!0}),Object.defineProperty(l,"v1",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(l,"v3",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(l,"v4",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(l,"v5",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(l,"NIL",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(l,"version",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(l,"validate",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(l,"stringify",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(l,"parse",{enumerable:!0,get:function(){return h.default}});var i=p(t("./v1.js")),s=p(t("./v3.js")),a=p(t("./v4.js")),o=p(t("./v5.js")),n=p(t("./nil.js")),c=p(t("./version.js")),d=p(t("./validate.js")),u=p(t("./stringify.js")),h=p(t("./parse.js"));function p(m){return m&&m.__esModule?m:{default:m}}},{"./nil.js":530,"./parse.js":531,"./stringify.js":535,"./v1.js":536,"./v3.js":537,"./v4.js":539,"./v5.js":540,"./validate.js":541,"./version.js":542}],529:[function(t,r,l){function i(h){return 14+(h+64>>>9<<4)+1}function s(h,p){const m=(65535&h)+(65535&p);return(h>>16)+(p>>16)+(m>>16)<<16|65535&m}function a(h,p,m,f,b,y){return s((_=s(s(p,h),s(f,y)))<<(E=b)|_>>>32-E,m);var _,E}function o(h,p,m,f,b,y,_){return a(p&m|~p&f,h,p,b,y,_)}function n(h,p,m,f,b,y,_){return a(p&f|m&~f,h,p,b,y,_)}function c(h,p,m,f,b,y,_){return a(p^m^f,h,p,b,y,_)}function d(h,p,m,f,b,y,_){return a(m^(p|~f),h,p,b,y,_)}Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var u=function(h){if(typeof h=="string"){const p=unescape(encodeURIComponent(h));h=new Uint8Array(p.length);for(let m=0;m<p.length;++m)h[m]=p.charCodeAt(m)}return function(p){const m=[],f=32*p.length;for(let b=0;b<f;b+=8){const y=p[b>>5]>>>b%32&255,_=parseInt("0123456789abcdef".charAt(y>>>4&15)+"0123456789abcdef".charAt(15&y),16);m.push(_)}return m}(function(p,m){p[m>>5]|=128<<m%32,p[i(m)-1]=m;let f=1732584193,b=-271733879,y=-1732584194,_=271733878;for(let E=0;E<p.length;E+=16){const M=f,D=b,z=y,O=_;f=o(f,b,y,_,p[E],7,-680876936),_=o(_,f,b,y,p[E+1],12,-389564586),y=o(y,_,f,b,p[E+2],17,606105819),b=o(b,y,_,f,p[E+3],22,-1044525330),f=o(f,b,y,_,p[E+4],7,-176418897),_=o(_,f,b,y,p[E+5],12,1200080426),y=o(y,_,f,b,p[E+6],17,-1473231341),b=o(b,y,_,f,p[E+7],22,-45705983),f=o(f,b,y,_,p[E+8],7,1770035416),_=o(_,f,b,y,p[E+9],12,-1958414417),y=o(y,_,f,b,p[E+10],17,-42063),b=o(b,y,_,f,p[E+11],22,-1990404162),f=o(f,b,y,_,p[E+12],7,1804603682),_=o(_,f,b,y,p[E+13],12,-40341101),y=o(y,_,f,b,p[E+14],17,-1502002290),b=o(b,y,_,f,p[E+15],22,1236535329),f=n(f,b,y,_,p[E+1],5,-165796510),_=n(_,f,b,y,p[E+6],9,-1069501632),y=n(y,_,f,b,p[E+11],14,643717713),b=n(b,y,_,f,p[E],20,-373897302),f=n(f,b,y,_,p[E+5],5,-701558691),_=n(_,f,b,y,p[E+10],9,38016083),y=n(y,_,f,b,p[E+15],14,-660478335),b=n(b,y,_,f,p[E+4],20,-405537848),f=n(f,b,y,_,p[E+9],5,568446438),_=n(_,f,b,y,p[E+14],9,-1019803690),y=n(y,_,f,b,p[E+3],14,-187363961),b=n(b,y,_,f,p[E+8],20,1163531501),f=n(f,b,y,_,p[E+13],5,-1444681467),_=n(_,f,b,y,p[E+2],9,-51403784),y=n(y,_,f,b,p[E+7],14,1735328473),b=n(b,y,_,f,p[E+12],20,-1926607734),f=c(f,b,y,_,p[E+5],4,-378558),_=c(_,f,b,y,p[E+8],11,-2022574463),y=c(y,_,f,b,p[E+11],16,1839030562),b=c(b,y,_,f,p[E+14],23,-35309556),f=c(f,b,y,_,p[E+1],4,-1530992060),_=c(_,f,b,y,p[E+4],11,1272893353),y=c(y,_,f,b,p[E+7],16,-155497632),b=c(b,y,_,f,p[E+10],23,-1094730640),f=c(f,b,y,_,p[E+13],4,681279174),_=c(_,f,b,y,p[E],11,-358537222),y=c(y,_,f,b,p[E+3],16,-722521979),b=c(b,y,_,f,p[E+6],23,76029189),f=c(f,b,y,_,p[E+9],4,-640364487),_=c(_,f,b,y,p[E+12],11,-421815835),y=c(y,_,f,b,p[E+15],16,530742520),b=c(b,y,_,f,p[E+2],23,-995338651),f=d(f,b,y,_,p[E],6,-198630844),_=d(_,f,b,y,p[E+7],10,1126891415),y=d(y,_,f,b,p[E+14],15,-1416354905),b=d(b,y,_,f,p[E+5],21,-57434055),f=d(f,b,y,_,p[E+12],6,1700485571),_=d(_,f,b,y,p[E+3],10,-1894986606),y=d(y,_,f,b,p[E+10],15,-1051523),b=d(b,y,_,f,p[E+1],21,-2054922799),f=d(f,b,y,_,p[E+8],6,1873313359),_=d(_,f,b,y,p[E+15],10,-30611744),y=d(y,_,f,b,p[E+6],15,-1560198380),b=d(b,y,_,f,p[E+13],21,1309151649),f=d(f,b,y,_,p[E+4],6,-145523070),_=d(_,f,b,y,p[E+11],10,-1120210379),y=d(y,_,f,b,p[E+2],15,718787259),b=d(b,y,_,f,p[E+9],21,-343485551),f=s(f,M),b=s(b,D),y=s(y,z),_=s(_,O)}return[f,b,y,_]}(function(p){if(p.length===0)return[];const m=8*p.length,f=new Uint32Array(i(m));for(let b=0;b<m;b+=8)f[b>>5]|=(255&p[b/8])<<b%32;return f}(h),8*h.length))};l.default=u},{}],530:[function(t,r,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,l.default="00000000-0000-0000-0000-000000000000"},{}],531:[function(t,r,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i,s=(i=t("./validate.js"))&&i.__esModule?i:{default:i},a=function(o){if(!(0,s.default)(o))throw TypeError("Invalid UUID");let n;const c=new Uint8Array(16);return c[0]=(n=parseInt(o.slice(0,8),16))>>>24,c[1]=n>>>16&255,c[2]=n>>>8&255,c[3]=255&n,c[4]=(n=parseInt(o.slice(9,13),16))>>>8,c[5]=255&n,c[6]=(n=parseInt(o.slice(14,18),16))>>>8,c[7]=255&n,c[8]=(n=parseInt(o.slice(19,23),16))>>>8,c[9]=255&n,c[10]=(n=parseInt(o.slice(24,36),16))/1099511627776&255,c[11]=n/4294967296&255,c[12]=n>>>24&255,c[13]=n>>>16&255,c[14]=n>>>8&255,c[15]=255&n,c};l.default=a},{"./validate.js":541}],532:[function(t,r,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,l.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},{}],533:[function(t,r,l){let i;Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(){if(!i&&(i=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!i))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(s)};const s=new Uint8Array(16)},{}],534:[function(t,r,l){function i(o,n,c,d){switch(o){case 0:return n&c^~n&d;case 1:return n^c^d;case 2:return n&c^n&d^c&d;case 3:return n^c^d}}function s(o,n){return o<<n|o>>>32-n}Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var a=function(o){const n=[1518500249,1859775393,2400959708,3395469782],c=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof o=="string"){const p=unescape(encodeURIComponent(o));o=[];for(let m=0;m<p.length;++m)o.push(p.charCodeAt(m))}else Array.isArray(o)||(o=Array.prototype.slice.call(o));o.push(128);const d=o.length/4+2,u=Math.ceil(d/16),h=new Array(u);for(let p=0;p<u;++p){const m=new Uint32Array(16);for(let f=0;f<16;++f)m[f]=o[64*p+4*f]<<24|o[64*p+4*f+1]<<16|o[64*p+4*f+2]<<8|o[64*p+4*f+3];h[p]=m}h[u-1][14]=8*(o.length-1)/Math.pow(2,32),h[u-1][14]=Math.floor(h[u-1][14]),h[u-1][15]=8*(o.length-1)&4294967295;for(let p=0;p<u;++p){const m=new Uint32Array(80);for(let M=0;M<16;++M)m[M]=h[p][M];for(let M=16;M<80;++M)m[M]=s(m[M-3]^m[M-8]^m[M-14]^m[M-16],1);let f=c[0],b=c[1],y=c[2],_=c[3],E=c[4];for(let M=0;M<80;++M){const D=Math.floor(M/20),z=s(f,5)+i(D,b,y,_)+E+n[D]+m[M]>>>0;E=_,_=y,y=s(b,30)>>>0,b=f,f=z}c[0]=c[0]+f>>>0,c[1]=c[1]+b>>>0,c[2]=c[2]+y>>>0,c[3]=c[3]+_>>>0,c[4]=c[4]+E>>>0}return[c[0]>>24&255,c[0]>>16&255,c[0]>>8&255,255&c[0],c[1]>>24&255,c[1]>>16&255,c[1]>>8&255,255&c[1],c[2]>>24&255,c[2]>>16&255,c[2]>>8&255,255&c[2],c[3]>>24&255,c[3]>>16&255,c[3]>>8&255,255&c[3],c[4]>>24&255,c[4]>>16&255,c[4]>>8&255,255&c[4]]};l.default=a},{}],535:[function(t,r,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i,s=(i=t("./validate.js"))&&i.__esModule?i:{default:i};const a=[];for(let n=0;n<256;++n)a.push((n+256).toString(16).substr(1));var o=function(n){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const d=(a[n[c+0]]+a[n[c+1]]+a[n[c+2]]+a[n[c+3]]+"-"+a[n[c+4]]+a[n[c+5]]+"-"+a[n[c+6]]+a[n[c+7]]+"-"+a[n[c+8]]+a[n[c+9]]+"-"+a[n[c+10]]+a[n[c+11]]+a[n[c+12]]+a[n[c+13]]+a[n[c+14]]+a[n[c+15]]).toLowerCase();if(!(0,s.default)(d))throw TypeError("Stringified UUID is invalid");return d};l.default=o},{"./validate.js":541}],536:[function(t,r,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=a(t("./rng.js")),s=a(t("./stringify.js"));function a(h){return h&&h.__esModule?h:{default:h}}let o,n,c=0,d=0;var u=function(h,p,m){let f=p&&m||0;const b=p||new Array(16);let y=(h=h||{}).node||o,_=h.clockseq!==void 0?h.clockseq:n;if(y==null||_==null){const N=h.random||(h.rng||i.default)();y==null&&(y=o=[1|N[0],N[1],N[2],N[3],N[4],N[5]]),_==null&&(_=n=16383&(N[6]<<8|N[7]))}let E=h.msecs!==void 0?h.msecs:Date.now(),M=h.nsecs!==void 0?h.nsecs:d+1;const D=E-c+(M-d)/1e4;if(D<0&&h.clockseq===void 0&&(_=_+1&16383),(D<0||E>c)&&h.nsecs===void 0&&(M=0),M>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=E,d=M,n=_,E+=122192928e5;const z=(1e4*(268435455&E)+M)%4294967296;b[f++]=z>>>24&255,b[f++]=z>>>16&255,b[f++]=z>>>8&255,b[f++]=255&z;const O=E/4294967296*1e4&268435455;b[f++]=O>>>8&255,b[f++]=255&O,b[f++]=O>>>24&15|16,b[f++]=O>>>16&255,b[f++]=_>>>8|128,b[f++]=255&_;for(let N=0;N<6;++N)b[f+N]=y[N];return p||(0,s.default)(b)};l.default=u},{"./rng.js":533,"./stringify.js":535}],537:[function(t,r,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=a(t("./v35.js")),s=a(t("./md5.js"));function a(n){return n&&n.__esModule?n:{default:n}}var o=(0,i.default)("v3",48,s.default);l.default=o},{"./md5.js":529,"./v35.js":538}],538:[function(t,r,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(c,d,u){function h(p,m,f,b){if(typeof p=="string"&&(p=function(_){_=unescape(encodeURIComponent(_));const E=[];for(let M=0;M<_.length;++M)E.push(_.charCodeAt(M));return E}(p)),typeof m=="string"&&(m=(0,s.default)(m)),m.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let y=new Uint8Array(16+p.length);if(y.set(m),y.set(p,m.length),y=u(y),y[6]=15&y[6]|d,y[8]=63&y[8]|128,f){b=b||0;for(let _=0;_<16;++_)f[b+_]=y[_];return f}return(0,i.default)(y)}try{h.name=c}catch{}return h.DNS=o,h.URL=n,h},l.URL=l.DNS=void 0;var i=a(t("./stringify.js")),s=a(t("./parse.js"));function a(c){return c&&c.__esModule?c:{default:c}}const o="6ba7b810-9dad-11d1-80b4-00c04fd430c8";l.DNS=o;const n="6ba7b811-9dad-11d1-80b4-00c04fd430c8";l.URL=n},{"./parse.js":531,"./stringify.js":535}],539:[function(t,r,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=a(t("./rng.js")),s=a(t("./stringify.js"));function a(n){return n&&n.__esModule?n:{default:n}}var o=function(n,c,d){const u=(n=n||{}).random||(n.rng||i.default)();if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,c){d=d||0;for(let h=0;h<16;++h)c[d+h]=u[h];return c}return(0,s.default)(u)};l.default=o},{"./rng.js":533,"./stringify.js":535}],540:[function(t,r,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=a(t("./v35.js")),s=a(t("./sha1.js"));function a(n){return n&&n.__esModule?n:{default:n}}var o=(0,i.default)("v5",80,s.default);l.default=o},{"./sha1.js":534,"./v35.js":538}],541:[function(t,r,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i,s=(i=t("./regex.js"))&&i.__esModule?i:{default:i},a=function(o){return typeof o=="string"&&s.default.test(o)};l.default=a},{"./regex.js":532}],542:[function(t,r,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i,s=(i=t("./validate.js"))&&i.__esModule?i:{default:i},a=function(o){if(!(0,s.default)(o))throw TypeError("Invalid UUID");return parseInt(o.substr(14,1),16)};l.default=a},{"./validate.js":541}],543:[function(t,r,l){/**
* Character classes and associated utilities for the 5th edition of XML 1.0.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/Object.defineProperty(l,"__esModule",{value:!0}),l.CHAR=`	
\r -퟿-�𐀀-􏿿`,l.S=` 	\r
`,l.NAME_START_CHAR=":A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�𐀀-󯿿",l.NAME_CHAR="-"+l.NAME_START_CHAR+".0-9·̀-ͯ‿-⁀",l.CHAR_RE=new RegExp("^["+l.CHAR+"]$","u"),l.S_RE=new RegExp("^["+l.S+"]+$","u"),l.NAME_START_CHAR_RE=new RegExp("^["+l.NAME_START_CHAR+"]$","u"),l.NAME_CHAR_RE=new RegExp("^["+l.NAME_CHAR+"]$","u"),l.NAME_RE=new RegExp("^["+l.NAME_START_CHAR+"]["+l.NAME_CHAR+"]*$","u"),l.NMTOKEN_RE=new RegExp("^["+l.NAME_CHAR+"]+$","u");function i(s){return s>=65&&s<=90||s>=97&&s<=122||s===58||s===95||s===8204||s===8205||s>=192&&s<=214||s>=216&&s<=246||s>=248&&s<=767||s>=880&&s<=893||s>=895&&s<=8191||s>=8304&&s<=8591||s>=11264&&s<=12271||s>=12289&&s<=55295||s>=63744&&s<=64975||s>=65008&&s<=65533||s>=65536&&s<=983039}l.S_LIST=[32,10,13,9],l.isChar=function(s){return s>=32&&s<=55295||s===10||s===13||s===9||s>=57344&&s<=65533||s>=65536&&s<=1114111},l.isS=function(s){return s===32||s===10||s===13||s===9},l.isNameStartChar=i,l.isNameChar=function(s){return i(s)||s>=48&&s<=57||s===45||s===46||s===183||s>=768&&s<=879||s>=8255&&s<=8256}},{}],544:[function(t,r,l){/**
* Character classes and associated utilities for the 2nd edition of XML 1.1.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/Object.defineProperty(l,"__esModule",{value:!0}),l.CHAR="-퟿-�𐀀-􏿿",l.RESTRICTED_CHAR="-\b\v\f---",l.S=` 	\r
`,l.NAME_START_CHAR=":A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�𐀀-󯿿",l.NAME_CHAR="-"+l.NAME_START_CHAR+".0-9·̀-ͯ‿-⁀",l.CHAR_RE=new RegExp("^["+l.CHAR+"]$","u"),l.RESTRICTED_CHAR_RE=new RegExp("^["+l.RESTRICTED_CHAR+"]$","u"),l.S_RE=new RegExp("^["+l.S+"]+$","u"),l.NAME_START_CHAR_RE=new RegExp("^["+l.NAME_START_CHAR+"]$","u"),l.NAME_CHAR_RE=new RegExp("^["+l.NAME_CHAR+"]$","u"),l.NAME_RE=new RegExp("^["+l.NAME_START_CHAR+"]["+l.NAME_CHAR+"]*$","u"),l.NMTOKEN_RE=new RegExp("^["+l.NAME_CHAR+"]+$","u");function i(s){return s>=65&&s<=90||s>=97&&s<=122||s===58||s===95||s===8204||s===8205||s>=192&&s<=214||s>=216&&s<=246||s>=248&&s<=767||s>=880&&s<=893||s>=895&&s<=8191||s>=8304&&s<=8591||s>=11264&&s<=12271||s>=12289&&s<=55295||s>=63744&&s<=64975||s>=65008&&s<=65533||s>=65536&&s<=983039}l.S_LIST=[32,10,13,9],l.isChar=function(s){return s>=1&&s<=55295||s>=57344&&s<=65533||s>=65536&&s<=1114111},l.isRestrictedChar=function(s){return s>=1&&s<=8||s===11||s===12||s>=14&&s<=31||s>=127&&s<=132||s>=134&&s<=159},l.isCharAndNotRestricted=function(s){return s===9||s===10||s===13||s>31&&s<127||s===133||s>159&&s<=55295||s>=57344&&s<=65533||s>=65536&&s<=1114111},l.isS=function(s){return s===32||s===10||s===13||s===9},l.isNameStartChar=i,l.isNameChar=function(s){return i(s)||s>=48&&s<=57||s===45||s===46||s===183||s>=768&&s<=879||s>=8255&&s<=8256}},{}],545:[function(t,r,l){/**
* Character class utilities for XML NS 1.0 edition 3.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/function i(s){return s>=65&&s<=90||s===95||s>=97&&s<=122||s>=192&&s<=214||s>=216&&s<=246||s>=248&&s<=767||s>=880&&s<=893||s>=895&&s<=8191||s>=8204&&s<=8205||s>=8304&&s<=8591||s>=11264&&s<=12271||s>=12289&&s<=55295||s>=63744&&s<=64975||s>=65008&&s<=65533||s>=65536&&s<=983039}Object.defineProperty(l,"__esModule",{value:!0}),l.NC_NAME_START_CHAR="A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�𐀀-󯿿",l.NC_NAME_CHAR="-"+l.NC_NAME_START_CHAR+".0-9·̀-ͯ‿-⁀",l.NC_NAME_START_CHAR_RE=new RegExp("^["+l.NC_NAME_START_CHAR+"]$","u"),l.NC_NAME_CHAR_RE=new RegExp("^["+l.NC_NAME_CHAR+"]$","u"),l.NC_NAME_RE=new RegExp("^["+l.NC_NAME_START_CHAR+"]["+l.NC_NAME_CHAR+"]*$","u"),l.isNCNameStartChar=i,l.isNCNameChar=function(s){return i(s)||s===45||s===46||s>=48&&s<=57||s===183||s>=768&&s<=879||s>=8255&&s<=8256}},{}]},{},[15])(15)})}(qp)),qp.exports}var b3=g3();const y3=m3(b3);class v3{constructor(){this.supportedBanks={sberbank:{name:"Сбербанк",patterns:[{date:"A",time:"B",amount:"C",description:"D",balance:"E"},{date:"A",description:"B",amount:"C",balance:"D"}]},tinkoff:{name:"Тинькофф",patterns:[{date:"A",description:"B",amount:"C",category:"D"},{date:"A",time:"B",description:"C",amount:"D",category:"E"}]},alfa:{name:"Альфа-Банк",patterns:[{date:"A",description:"B",income:"C",expense:"D",balance:"E"},{date:"A",description:"B",amount:"C",balance:"D"},{date:"B",description:"L",amount:"N",category:"F"}]}}}detectBankFormat(e){for(let t=1;t<=Math.min(20,e.rowCount);t++){const r=e.getRow(t),l=[];if(r.eachCell((s,a)=>{var o;l[a]=((o=s.value)==null?void 0:o.toString().toLowerCase())||""}),l.some(s=>s.includes("дата")||s.includes("описание")||s.includes("сумма")||s.includes("приход")||s.includes("расход"))){for(const[s,a]of Object.entries(this.supportedBanks))for(const o of a.patterns)if(this.matchesPattern(l,o))return{bankKey:s,pattern:o,bankName:a.name,headerRow:t}}}return null}matchesPattern(e,t){return Object.keys(t).filter(l=>l!=="time"&&l!=="category"&&l!=="balance").every(l=>{const i=this.getColumnIndex(t[l]),s=e[i],a=this.isRelevantHeader(s,l);return s&&a})}isRelevantHeader(e,t){const r=e.toLowerCase();switch(t){case"date":return r.includes("дата")||r.includes("date");case"description":return r.includes("описание")||r.includes("операция")||r.includes("description")||r.includes("transaction");case"amount":return r.includes("сумма")||r.includes("amount")||r.includes("сумма операции")||r.includes("сумма в валюте счета");case"category":return r.includes("категория")||r.includes("category");case"income":return r.includes("приход")||r.includes("доход")||r.includes("income");case"expense":return r.includes("расход")||r.includes("expense");default:return!0}}getColumnIndex(e){let t=0;for(let r=0;r<e.length;r++)t=t*26+(e.charCodeAt(r)-64);return t}async parseExcelFile(e){try{const t=new y3.Workbook;await t.xlsx.load(await e.arrayBuffer());const r=t.getWorksheet(1);if(!r)throw new Error("Файл не содержит данных");const l=this.detectBankFormat(r);if(!l)throw new Error("Не удалось определить формат банковской выписки");const i=this.extractTransactions(r,l),s=this.detectBankFromContent(r);return s?i.forEach(a=>{a.bank=s}):i.forEach(a=>{a.bank=l.bankName}),{bankName:l.bankName,totalTransactions:i.length,transactions:i,rawData:this.getRawData(r)}}catch(t){throw console.error("Ошибка при парсинге Excel файла:",t),new Error(`Ошибка при обработке файла: ${t.message}`)}}extractTransactions(e,t){const r=[],l=t.pattern,i=t.headerRow||1;for(let s=i+1;s<=e.rowCount;s++){const a=e.getRow(s),o=this.parseRow(a,l);o&&this.isValidTransaction(o)&&r.push(o)}return r}parseRow(e,t){const r={};for(const[l,i]of Object.entries(t)){const s=this.getColumnIndex(i),a=e.getCell(s);a.value!==null&&a.value!==void 0&&(r[l]=this.parseCellValue(a,l))}return r.income&&r.expense&&(r.amount=r.income||-r.expense,delete r.income,delete r.expense),r}parseCellValue(e,t){const r=e.value;switch(t){case"date":return this.parseDate(r);case"amount":case"income":case"expense":return this.parseAmount(r);case"description":return String(r).trim();case"category":return String(r).trim();case"balance":return this.parseAmount(r);default:return r}}parseDate(e){if(e instanceof Date)return e;if(typeof e=="string"){if(/^\d{2}\.\d{2}\.\d{4}$/.test(e)){const[r,l,i]=e.split(".");return new Date(parseInt(i),parseInt(l)-1,parseInt(r))}const t=new Date(e);if(!isNaN(t.getTime()))return t}return typeof e=="number"?new Date((e-25569)*86400*1e3):null}parseAmount(e){if(typeof e=="number")return e;if(typeof e=="string"){const r=e.replace(/[₽$€]/g,"").match(/[+-]?(\d{1,3}(?:\s\d{3})*(?:,\d{2})?|\d+(?:,\d{2})?)/);if(!r)return console.warn("ExcelParser.parseAmount: не удалось найти число в строке:",e),0;let l=r[0].replace(/\s/g,"").replace(",",".");const i=parseFloat(l);return isNaN(i)?(console.warn("ExcelParser.parseAmount: не удалось распарсить число:",e),0):i}return console.warn("ExcelParser.parseAmount: неизвестный тип значения:",typeof e),0}isValidTransaction(e){return e.date&&e.description&&e.amount!==void 0&&e.amount!==0}detectBankFromContent(e){const t={"АЛЬФА-БАНК":"Альфа-Банк","АЛЬФА БАНК":"Альфа-Банк",АЛЬФАБАНК:"Альфа-Банк",СБЕРБАНК:"Сбербанк","СБЕР БАНК":"Сбербанк",ТИНЬКОФФ:"Тинькофф","ТИНЬКОФФ БАНК":"Тинькофф"};for(let r=1;r<=e.rowCount;r++)e.getRow(r).eachCell((i,s)=>{if(i.value&&typeof i.value=="string"){const a=i.value.toUpperCase();for(const[o,n]of Object.entries(t))if(a.includes(o))return n}});return null}getRawData(e){const t=[];for(let r=1;r<=Math.min(25,e.rowCount);r++){const l=e.getRow(r),i=[];l.eachCell((s,a)=>{i[a]=s.value}),t.push(i)}return t}}const w3=new v3,cs=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),mm=[.001,0,0,.001,0,0],Xp=1.35,$s={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ea={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},x1="pdfjs_internal_editor_",oe={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},xe={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},_3={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Xr={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Yd={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},pr={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Cl={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},kp={ERRORS:0,WARNINGS:1,INFOS:5},Bf={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},jd={moveTo:0,lineTo:1,curveTo:2,closePath:3},x3={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Ep=kp.WARNINGS;function S3(g){Number.isInteger(g)&&(Ep=g)}function A3(){return Ep}function Cp(g){Ep>=kp.INFOS&&console.log(`Info: ${g}`)}function le(g){Ep>=kp.WARNINGS&&console.log(`Warning: ${g}`)}function We(g){throw new Error(g)}function br(g,e){g||We(e)}function k3(g){switch(g==null?void 0:g.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function S1(g,e=null,t=null){if(!g)return null;if(t&&typeof g=="string"){if(t.addDefaultProtocol&&g.startsWith("www.")){const l=g.match(/\./g);(l==null?void 0:l.length)>=2&&(g=`http://${g}`)}if(t.tryConvertEncoding)try{g=R3(g)}catch{}}const r=e?URL.parse(g,e):URL.parse(g);return k3(r)?r:null}function A1(g,e,t=!1){const r=URL.parse(g);return r?(r.hash=e,r.href):t&&S1(g,"http://example.com")?g.split("#",1)[0]+`${e?`#${e}`:""}`:""}function we(g,e,t,r=!1){return Object.defineProperty(g,e,{value:t,enumerable:!r,configurable:!0,writable:!1}),t}const vl=function(){function e(t,r){this.message=t,this.name=r}return e.prototype=new Error,e.constructor=e,e}();class Qg extends vl{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Gp extends vl{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class gm extends vl{constructor(e){super(e,"InvalidPDFException")}}class zf extends vl{constructor(e,t,r){super(e,"ResponseException"),this.status=t,this.missing=r}}class E3 extends vl{constructor(e){super(e,"FormatError")}}class Ha extends vl{constructor(e){super(e,"AbortException")}}function k1(g){(typeof g!="object"||(g==null?void 0:g.length)===void 0)&&We("Invalid argument for bytesToString");const e=g.length,t=8192;if(e<t)return String.fromCharCode.apply(null,g);const r=[];for(let l=0;l<e;l+=t){const i=Math.min(l+t,e),s=g.subarray(l,i);r.push(String.fromCharCode.apply(null,s))}return r.join("")}function _d(g){typeof g!="string"&&We("Invalid argument for stringToBytes");const e=g.length,t=new Uint8Array(e);for(let r=0;r<e;++r)t[r]=g.charCodeAt(r)&255;return t}function C3(g){return String.fromCharCode(g>>24&255,g>>16&255,g>>8&255,g&255)}function T3(){const g=new Uint8Array(4);return g[0]=1,new Uint32Array(g.buffer,0,1)[0]===1}function M3(){try{return new Function(""),!0}catch{return!1}}class qr{static get isLittleEndian(){return we(this,"isLittleEndian",T3())}static get isEvalSupported(){return we(this,"isEvalSupported",M3())}static get isOffscreenCanvasSupported(){return we(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return we(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return we(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return we(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const Kp=Array.from(Array(256).keys(),g=>g.toString(16).padStart(2,"0"));var $i,Zd,bm;class Wt{static makeHexColor(e,t,r){return`#${Kp[e]}${Kp[t]}${Kp[r]}`}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[1],t[1]=r,r=t[2],t[2]=t[3],t[3]=r,e[1]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t,r=0){const l=e[r],i=e[r+1];e[r]=l*t[0]+i*t[2]+t[4],e[r+1]=l*t[1]+i*t[3]+t[5]}static applyTransformToBezier(e,t,r=0){const l=t[0],i=t[1],s=t[2],a=t[3],o=t[4],n=t[5];for(let c=0;c<6;c+=2){const d=e[r+c],u=e[r+c+1];e[r+c]=d*l+u*s+o,e[r+c+1]=d*i+u*a+n}}static applyInverseTransform(e,t){const r=e[0],l=e[1],i=t[0]*t[3]-t[1]*t[2];e[0]=(r*t[3]-l*t[2]+t[2]*t[5]-t[4]*t[3])/i,e[1]=(-r*t[1]+l*t[0]+t[4]*t[1]-t[5]*t[0])/i}static axialAlignedBoundingBox(e,t,r){const l=t[0],i=t[1],s=t[2],a=t[3],o=t[4],n=t[5],c=e[0],d=e[1],u=e[2],h=e[3];let p=l*c+o,m=p,f=l*u+o,b=f,y=a*d+n,_=y,E=a*h+n,M=E;if(i!==0||s!==0){const D=i*c,z=i*u,O=s*d,N=s*h;p+=O,b+=O,f+=N,m+=N,y+=D,M+=D,E+=z,_+=z}r[0]=Math.min(r[0],p,f,m,b),r[1]=Math.min(r[1],y,E,_,M),r[2]=Math.max(r[2],p,f,m,b),r[3]=Math.max(r[3],y,E,_,M)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const r=e[0],l=e[1],i=e[2],s=e[3],a=r**2+l**2,o=r*i+l*s,n=i**2+s**2,c=(a+n)/2,d=Math.sqrt(c**2-(a*n-o**2));t[0]=Math.sqrt(c+d||1),t[1]=Math.sqrt(c-d||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const r=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),l=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(r>l)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),s=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>s?null:[r,i,l,s]}static pointBoundingBox(e,t,r){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],t),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],t)}static rectBoundingBox(e,t,r,l,i){i[0]=Math.min(i[0],e,r),i[1]=Math.min(i[1],t,l),i[2]=Math.max(i[2],e,r),i[3]=Math.max(i[3],t,l)}static bezierBoundingBox(e,t,r,l,i,s,a,o,n){n[0]=Math.min(n[0],e,a),n[1]=Math.min(n[1],t,o),n[2]=Math.max(n[2],e,a),n[3]=Math.max(n[3],t,o),et(this,$i,bm).call(this,e,r,i,a,t,l,s,o,3*(-e+3*(r-i)+a),6*(e-2*r+i),3*(r-e),n),et(this,$i,bm).call(this,e,r,i,a,t,l,s,o,3*(-t+3*(l-s)+o),6*(t-2*l+s),3*(l-t),n)}}$i=new WeakSet,Zd=function(e,t,r,l,i,s,a,o,n,c){if(n<=0||n>=1)return;const d=1-n,u=n*n,h=u*n,p=d*(d*(d*e+3*n*t)+3*u*r)+h*l,m=d*(d*(d*i+3*n*s)+3*u*a)+h*o;c[0]=Math.min(c[0],p),c[1]=Math.min(c[1],m),c[2]=Math.max(c[2],p),c[3]=Math.max(c[3],m)},bm=function(e,t,r,l,i,s,a,o,n,c,d,u){if(Math.abs(n)<1e-12){Math.abs(c)>=1e-12&&et(this,$i,Zd).call(this,e,t,r,l,i,s,a,o,-d/c,u);return}const h=c**2-4*d*n;if(h<0)return;const p=Math.sqrt(h),m=2*n;et(this,$i,Zd).call(this,e,t,r,l,i,s,a,o,(-c+p)/m,u),et(this,$i,Zd).call(this,e,t,r,l,i,s,a,o,(-c-p)/m,u)},tt(Wt,$i);function R3(g){return decodeURIComponent(escape(g))}let Yp=null,tb=null;function I3(g){return Yp||(Yp=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,tb=new Map([["ﬅ","ſt"]])),g.replaceAll(Yp,(e,t,r)=>t?t.normalize("NFKC"):tb.get(r))}function E1(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const g=new Uint8Array(32);return crypto.getRandomValues(g),k1(g)}const Q0="pdfjs_internal_id_";function P3(g,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[r,l,...i]=t;if(!g(r)&&!Number.isInteger(r)||!e(l))return!1;const s=i.length;let a=!0;switch(l.name){case"XYZ":if(s<2||s>3)return!1;break;case"Fit":case"FitB":return s===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(s>1)return!1;break;case"FitR":if(s!==4)return!1;a=!1;break;default:return!1}for(const o of i)if(!(typeof o=="number"||a&&o===null))return!1;return!0}function us(g,e,t){return Math.min(Math.max(g,e),t)}function C1(g){return Uint8Array.prototype.toBase64?g.toBase64():btoa(k1(g))}function O3(g){return Uint8Array.fromBase64?Uint8Array.fromBase64(g):_d(atob(g))}typeof Promise.try!="function"&&(Promise.try=function(g,...e){return new Promise(t=>{t(g(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(g){return g.reduce((e,t)=>e+t,0)});const ri="http://www.w3.org/2000/svg",so=class so{};At(so,"CSS",96),At(so,"PDF",72),At(so,"PDF_TO_CSS_UNITS",so.CSS/so.PDF);let Ua=so;async function xd(g,e="text"){if(lu(g,document.baseURI)){const t=await fetch(g);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,r)=>{const l=new XMLHttpRequest;l.open("GET",g,!0),l.responseType=e,l.onreadystatechange=()=>{if(l.readyState===XMLHttpRequest.DONE){if(l.status===200||l.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(l.response);return}t(l.responseText);return}r(new Error(l.statusText))}},l.send(null)})}class Sd{constructor({viewBox:e,userUnit:t,scale:r,rotation:l,offsetX:i=0,offsetY:s=0,dontFlip:a=!1}){this.viewBox=e,this.userUnit=t,this.scale=r,this.rotation=l,this.offsetX=i,this.offsetY=s,r*=t;const o=(e[2]+e[0])/2,n=(e[3]+e[1])/2;let c,d,u,h;switch(l%=360,l<0&&(l+=360),l){case 180:c=-1,d=0,u=0,h=1;break;case 90:c=0,d=1,u=1,h=0;break;case 270:c=0,d=-1,u=-1,h=0;break;case 0:c=1,d=0,u=0,h=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(u=-u,h=-h);let p,m,f,b;c===0?(p=Math.abs(n-e[1])*r+i,m=Math.abs(o-e[0])*r+s,f=(e[3]-e[1])*r,b=(e[2]-e[0])*r):(p=Math.abs(o-e[0])*r+i,m=Math.abs(n-e[1])*r+s,f=(e[2]-e[0])*r,b=(e[3]-e[1])*r),this.transform=[c*r,d*r,u*r,h*r,p-c*r*o-u*r*n,m-d*r*o-h*r*n],this.width=f,this.height=b}get rawDims(){const e=this.viewBox;return we(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:l=this.offsetY,dontFlip:i=!1}={}){return new Sd({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:l,dontFlip:i})}convertToViewportPoint(e,t){const r=[e,t];return Wt.applyTransform(r,this.transform),r}convertToViewportRectangle(e){const t=[e[0],e[1]];Wt.applyTransform(t,this.transform);const r=[e[2],e[3]];return Wt.applyTransform(r,this.transform),[t[0],t[1],r[0],r[1]]}convertToPdfPoint(e,t){const r=[e,t];return Wt.applyInverseTransform(r,this.transform),r}}class tg extends vl{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Tp(g){const e=g.length;let t=0;for(;t<e&&g[t].trim()==="";)t++;return g.substring(t,t+5).toLowerCase()==="data:"}function eg(g){return typeof g=="string"&&/\.pdf$/i.test(g)}function N3(g){return[g]=g.split(/[#?]/,1),g.substring(g.lastIndexOf("/")+1)}function D3(g,e="document.pdf"){if(typeof g!="string")return e;if(Tp(g))return le('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const r=(a=>{try{return new URL(a)}catch{try{return new URL(decodeURIComponent(a))}catch{try{return new URL(a,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(a),"https://foo.bar")}catch{return null}}}}})(g);if(!r)return e;const l=a=>{try{let o=decodeURIComponent(a);return o.includes("/")?(o=o.split("/").at(-1),o.test(/^\.pdf$/i)?o:a):o}catch{return a}},i=/\.pdf$/i,s=r.pathname.split("/").at(-1);if(i.test(s))return l(s);if(r.searchParams.size>0){const a=Array.from(r.searchParams.values()).reverse();for(const n of a)if(i.test(n))return l(n);const o=Array.from(r.searchParams.keys()).reverse();for(const n of o)if(i.test(n))return l(n)}if(r.hash){const o=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(r.hash);if(o)return l(o[0])}return e}class eb{constructor(){At(this,"started",Object.create(null));At(this,"times",[])}time(e){e in this.started&&le(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||le(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:r}of this.times)t=Math.max(r.length,t);for(const{name:r,start:l,end:i}of this.times)e.push(`${r.padEnd(t)} ${i-l}ms
`);return e.join("")}}function lu(g,e){const t=e?URL.parse(g,e):URL.parse(g);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function An(g){g.preventDefault()}function gr(g){g.preventDefault(),g.stopPropagation()}function L3(g){console.log("Deprecated API usage: "+g)}var Uu;class rg{static toDateObject(e){if(!e||typeof e!="string")return null;A(this,Uu)||K(this,Uu,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=A(this,Uu).exec(e);if(!t)return null;const r=parseInt(t[1],10);let l=parseInt(t[2],10);l=l>=1&&l<=12?l-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let s=parseInt(t[4],10);s=s>=0&&s<=23?s:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let o=parseInt(t[6],10);o=o>=0&&o<=59?o:0;const n=t[7]||"Z";let c=parseInt(t[8],10);c=c>=0&&c<=23?c:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,n==="-"?(s+=c,a+=d):n==="+"&&(s-=c,a-=d),new Date(Date.UTC(r,l,i,s,a,o))}}Uu=new WeakMap,tt(rg,Uu);function F3(g,{scale:e=1,rotation:t=0}){const{width:r,height:l}=g.attributes.style,i=[0,0,parseInt(r),parseInt(l)];return new Sd({viewBox:i,userUnit:1,scale:e,rotation:t})}function sg(g){if(g.startsWith("#")){const e=parseInt(g.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return g.startsWith("rgb(")?g.slice(4,-1).split(",").map(e=>parseInt(e)):g.startsWith("rgba(")?g.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(le(`Not a valid color format: "${g}"`),[0,0,0])}function j3(g){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of g.keys()){e.style.color=t;const r=window.getComputedStyle(e).color;g.set(t,sg(r))}e.remove()}function ar(g){const{a:e,b:t,c:r,d:l,e:i,f:s}=g.getTransform();return[e,t,r,l,i,s]}function Cn(g){const{a:e,b:t,c:r,d:l,e:i,f:s}=g.getTransform().invertSelf();return[e,t,r,l,i,s]}function gl(g,e,t=!1,r=!0){if(e instanceof Sd){const{pageWidth:l,pageHeight:i}=e.rawDims,{style:s}=g,a=qr.isCSSRoundSupported,o=`var(--total-scale-factor) * ${l}px`,n=`var(--total-scale-factor) * ${i}px`,c=a?`round(down, ${o}, var(--scale-round-x))`:`calc(${o})`,d=a?`round(down, ${n}, var(--scale-round-y))`:`calc(${n})`;!t||e.rotation%180===0?(s.width=c,s.height=d):(s.width=d,s.height=c)}r&&g.setAttribute("data-main-rotation",e.rotation)}class Jn{constructor(){const{pixelRatio:e}=Jn;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,r,l,i=-1){let s=1/0,a=1/0,o=1/0;r=Jn.capPixels(r,i),r>0&&(s=Math.sqrt(r/(e*t))),l!==-1&&(a=l/e,o=l/t);const n=Math.min(s,a,o);return this.sx>n||this.sy>n?(this.sx=n,this.sy=n,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const r=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,r):r}return e}}const ym=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var ra,ao,Xs,sa,Vu,ql,Wu,Gf,T1,ds,M1,R1,cu,Jd;const ai=class ai{constructor(e){tt(this,ds);tt(this,ra,null);tt(this,ao,null);tt(this,Xs);tt(this,sa,null);tt(this,Vu,null);tt(this,ql,null);K(this,Xs,e),A(ai,Wu)||K(ai,Wu,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=K(this,ra,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=A(this,Xs)._uiManager._signal;e.addEventListener("contextmenu",An,{signal:t}),e.addEventListener("pointerdown",et(ai,Gf,T1),{signal:t});const r=K(this,sa,document.createElement("div"));r.className="buttons",e.append(r);const l=A(this,Xs).toolbarPosition;if(l){const{style:i}=e,s=A(this,Xs)._uiManager.direction==="ltr"?1-l[0]:l[0];i.insetInlineEnd=`${100*s}%`,i.top=`calc(${100*l[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return A(this,ra)}hide(){var e;A(this,ra).classList.add("hidden"),(e=A(this,ao))==null||e.hideDropdown()}show(){var e;A(this,ra).classList.remove("hidden"),(e=A(this,Vu))==null||e.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=A(this,Xs),r=document.createElement("button");r.className="delete",r.tabIndex=0,r.setAttribute("data-l10n-id",A(ai,Wu)[e]),et(this,ds,cu).call(this,r),r.addEventListener("click",l=>{t.delete()},{signal:t._signal}),A(this,sa).append(r)}async addAltText(e){const t=await e.render();et(this,ds,cu).call(this,t),A(this,sa).append(t,A(this,ds,Jd)),K(this,Vu,e)}addColorPicker(e){K(this,ao,e);const t=e.renderButton();et(this,ds,cu).call(this,t),A(this,sa).append(t,A(this,ds,Jd))}async addEditSignatureButton(e){const t=K(this,ql,await e.renderEditButton(A(this,Xs)));et(this,ds,cu).call(this,t),A(this,sa).append(t,A(this,ds,Jd))}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break}}updateEditSignatureButton(e){A(this,ql)&&(A(this,ql).title=e)}remove(){var e;A(this,ra).remove(),(e=A(this,ao))==null||e.destroy(),K(this,ao,null)}};ra=new WeakMap,ao=new WeakMap,Xs=new WeakMap,sa=new WeakMap,Vu=new WeakMap,ql=new WeakMap,Wu=new WeakMap,Gf=new WeakSet,T1=function(e){e.stopPropagation()},ds=new WeakSet,M1=function(e){A(this,Xs)._focusEventsAllowed=!1,gr(e)},R1=function(e){A(this,Xs)._focusEventsAllowed=!0,gr(e)},cu=function(e){const t=A(this,Xs)._uiManager._signal;e.addEventListener("focusin",et(this,ds,M1).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",et(this,ds,R1).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",An,{signal:t})},Jd=function(){const e=document.createElement("div");return e.className="divider",e},tt(ai,Gf),tt(ai,Wu,null);let vm=ai;var qu,oo,lo,Va,I1,P1,O1;class B3{constructor(e){tt(this,Va);tt(this,qu,null);tt(this,oo,null);tt(this,lo);K(this,lo,e)}show(e,t,r){const[l,i]=et(this,Va,P1).call(this,t,r),{style:s}=A(this,oo)||K(this,oo,et(this,Va,I1).call(this));e.append(A(this,oo)),s.insetInlineEnd=`${100*l}%`,s.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){A(this,oo).remove()}}qu=new WeakMap,oo=new WeakMap,lo=new WeakMap,Va=new WeakSet,I1=function(){const e=K(this,oo,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",An,{signal:A(this,lo)._signal});const t=K(this,qu,document.createElement("div"));return t.className="buttons",e.append(t),et(this,Va,O1).call(this),e},P1=function(e,t){let r=0,l=0;for(const i of e){const s=i.y+i.height;if(s<r)continue;const a=i.x+(t?i.width:0);if(s>r){l=a,r=s;continue}t?a>l&&(l=a):a<l&&(l=a)}return[t?1-l:l,r]},O1=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const r=A(this,lo)._signal;e.addEventListener("contextmenu",An,{signal:r}),e.addEventListener("click",()=>{A(this,lo).highlightSelection("floating_button")},{signal:r}),A(this,qu).append(e)};function N1(g,e,t){for(const r of t)e.addEventListener(r,g[r].bind(g))}var Kf;class z3{constructor(){tt(this,Kf,0)}get id(){return`${x1}${rs(this,Kf)._++}`}}Kf=new WeakMap;var Xl,Xu,Kr,Gl,Qd;const fg=class fg{constructor(){tt(this,Gl);tt(this,Xl,E1());tt(this,Xu,0);tt(this,Kr,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),l=new Image;l.src=e;const i=l.decode().then(()=>(r.drawImage(l,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return we(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:r,size:l,type:i}=e;return et(this,Gl,Qd).call(this,`${t}_${r}_${l}_${i}`,e)}async getFromUrl(e){return et(this,Gl,Qd).call(this,e,e)}async getFromBlob(e,t){const r=await t;return et(this,Gl,Qd).call(this,e,r)}async getFromId(e){A(this,Kr)||K(this,Kr,new Map);const t=A(this,Kr).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:r}=t;return delete t.blobPromise,this.getFromBlob(t.id,r)}return this.getFromUrl(t.url)}getFromCanvas(e,t){A(this,Kr)||K(this,Kr,new Map);let r=A(this,Kr).get(e);if(r!=null&&r.bitmap)return r.refCounter+=1,r;const l=new OffscreenCanvas(t.width,t.height);return l.getContext("2d").drawImage(t,0,0),r={bitmap:l.transferToImageBitmap(),id:`image_${A(this,Xl)}_${rs(this,Xu)._++}`,refCounter:1,isSvg:!1},A(this,Kr).set(e,r),A(this,Kr).set(r.id,r),r}getSvgUrl(e){const t=A(this,Kr).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var l;A(this,Kr)||K(this,Kr,new Map);const t=A(this,Kr).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:r}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(r.width,r.height);i.getContext("bitmaprenderer").transferFromImageBitmap(r),t.blobPromise=i.convertToBlob()}(l=r.close)==null||l.call(r),t.bitmap=null}isValidId(e){return e.startsWith(`image_${A(this,Xl)}_`)}};Xl=new WeakMap,Xu=new WeakMap,Kr=new WeakMap,Gl=new WeakSet,Qd=async function(e,t){A(this,Kr)||K(this,Kr,new Map);let r=A(this,Kr).get(e);if(r===null)return null;if(r!=null&&r.bitmap)return r.refCounter+=1,r;try{r||(r={bitmap:null,id:`image_${A(this,Xl)}_${rs(this,Xu)._++}`,refCounter:0,isSvg:!1});let l;if(typeof t=="string"?(r.url=t,l=await xd(t,"blob")):t instanceof File?l=r.file=t:t instanceof Blob&&(l=t),l.type==="image/svg+xml"){const i=fg._isSVGFittingCanvas,s=new FileReader,a=new Image,o=new Promise((n,c)=>{a.onload=()=>{r.bitmap=a,r.isSvg=!0,n()},s.onload=async()=>{const d=r.svgUrl=s.result;a.src=await i?`${d}#svgView(preserveAspectRatio(none))`:d},a.onerror=s.onerror=c});s.readAsDataURL(l),await o}else r.bitmap=await createImageBitmap(l);r.refCounter=1}catch(l){le(l),r=null}return A(this,Kr).set(e,r),r&&A(this,Kr).set(r.id,r),r};let wm=fg;var cr,na,Gu,ir;class $3{constructor(e=128){tt(this,cr,[]);tt(this,na,!1);tt(this,Gu);tt(this,ir,-1);K(this,Gu,e)}add({cmd:e,undo:t,post:r,mustExec:l,type:i=NaN,overwriteIfSameType:s=!1,keepUndo:a=!1}){if(l&&e(),A(this,na))return;const o={cmd:e,undo:t,post:r,type:i};if(A(this,ir)===-1){A(this,cr).length>0&&(A(this,cr).length=0),K(this,ir,0),A(this,cr).push(o);return}if(s&&A(this,cr)[A(this,ir)].type===i){a&&(o.undo=A(this,cr)[A(this,ir)].undo),A(this,cr)[A(this,ir)]=o;return}const n=A(this,ir)+1;n===A(this,Gu)?A(this,cr).splice(0,1):(K(this,ir,n),n<A(this,cr).length&&A(this,cr).splice(n)),A(this,cr).push(o)}undo(){if(A(this,ir)===-1)return;K(this,na,!0);const{undo:e,post:t}=A(this,cr)[A(this,ir)];e(),t==null||t(),K(this,na,!1),K(this,ir,A(this,ir)-1)}redo(){if(A(this,ir)<A(this,cr).length-1){K(this,ir,A(this,ir)+1),K(this,na,!0);const{cmd:e,post:t}=A(this,cr)[A(this,ir)];e(),t==null||t(),K(this,na,!1)}}hasSomethingToUndo(){return A(this,ir)!==-1}hasSomethingToRedo(){return A(this,ir)<A(this,cr).length-1}cleanType(e){if(A(this,ir)!==-1){for(let t=A(this,ir);t>=0;t--)if(A(this,cr)[t].type!==e){A(this,cr).splice(t+1,A(this,ir)-t),K(this,ir,t);return}A(this,cr).length=0,K(this,ir,-1)}}destroy(){K(this,cr,null)}}cr=new WeakMap,na=new WeakMap,Gu=new WeakMap,ir=new WeakMap;var Yf,D1;class Ad{constructor(e){tt(this,Yf);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=qr.platform;for(const[r,l,i={}]of e)for(const s of r){const a=s.startsWith("mac+");t&&a?(this.callbacks.set(s.slice(4),{callback:l,options:i}),this.allKeys.add(s.split("+").at(-1))):!t&&!a&&(this.callbacks.set(s,{callback:l,options:i}),this.allKeys.add(s.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const r=this.callbacks.get(et(this,Yf,D1).call(this,t));if(!r)return;const{callback:l,options:{bubbles:i=!1,args:s=[],checker:a=null}}=r;a&&!a(e,t)||(l.bind(e,...s,t)(),i||gr(t))}}Yf=new WeakSet,D1=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Zf=class Zf{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return j3(e),we(this,"_colors",e)}convert(e){const t=sg(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[r,l]of this._colors)if(l.every((i,s)=>i===t[s]))return Zf._colorsMapping.get(r);return t}getHexCode(e){const t=this._colors.get(e);return t?Wt.makeHexColor(...t):e}};At(Zf,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let _m=Zf;var Kl,Cs,Ar,Lr,Yl,li,Zl,Gs,ia,aa,Jl,co,In,ln,uo,Ku,Yu,Ql,Zu,Pn,oa,tc,la,On,Jf,ca,Ju,ua,ho,fo,ha,Qu,Mr,$e,ci,da,po,th,eh,fa,Nn,ui,rh,sh,Ks,It,tf,xm,L1,F1,ef,j1,B1,z1,Sm,$1,Am,km,H1,ns,si,U1,V1,Em,W1,uu,Cm;const Dl=class Dl{constructor(e,t,r,l,i,s,a,o,n,c,d,u,h,p,m){tt(this,It);tt(this,Kl,new AbortController);tt(this,Cs,null);tt(this,Ar,new Map);tt(this,Lr,new Map);tt(this,Yl,null);tt(this,li,null);tt(this,Zl,null);tt(this,Gs,new $3);tt(this,ia,null);tt(this,aa,null);tt(this,Jl,0);tt(this,co,new Set);tt(this,In,null);tt(this,ln,null);tt(this,uo,new Set);At(this,"_editorUndoBar",null);tt(this,Ku,!1);tt(this,Yu,!1);tt(this,Ql,!1);tt(this,Zu,null);tt(this,Pn,null);tt(this,oa,null);tt(this,tc,null);tt(this,la,!1);tt(this,On,null);tt(this,Jf,new z3);tt(this,ca,!1);tt(this,Ju,!1);tt(this,ua,null);tt(this,ho,null);tt(this,fo,null);tt(this,ha,null);tt(this,Qu,null);tt(this,Mr,oe.NONE);tt(this,$e,new Set);tt(this,ci,null);tt(this,da,null);tt(this,po,null);tt(this,th,null);tt(this,eh,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});tt(this,fa,[0,0]);tt(this,Nn,null);tt(this,ui,null);tt(this,rh,null);tt(this,sh,null);tt(this,Ks,null);const f=this._signal=A(this,Kl).signal;K(this,ui,e),K(this,rh,t),K(this,sh,r),K(this,Yl,l),K(this,da,i),this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:f}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:f}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:f}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:f}),s._on("setpreference",this.onSetPreference.bind(this),{signal:f}),s._on("switchannotationeditorparams",b=>this.updateParams(b.type,b.value),{signal:f}),et(this,It,j1).call(this),et(this,It,H1).call(this),et(this,It,Sm).call(this),K(this,li,a.annotationStorage),K(this,Zu,a.filterFactory),K(this,po,o),K(this,tc,n||null),K(this,Ku,c),K(this,Yu,d),K(this,Ql,u),K(this,Qu,h||null),this.viewParameters={realScale:Ua.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=p||null,this._supportsPinchToZoom=m!==!1}static get _keyboardManager(){const e=Dl.prototype,t=s=>A(s,ui).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&s.hasSomethingToControl(),r=(s,{target:a})=>{if(a instanceof HTMLInputElement){const{type:o}=a;return o!=="text"&&o!=="number"}return!0},l=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return we(this,"_keyboardManager",new Ad([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(s,{target:a})=>!(a instanceof HTMLButtonElement)&&A(s,ui).contains(a)&&!s.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(s,{target:a})=>!(a instanceof HTMLButtonElement)&&A(s,ui).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-l,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[l,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-l],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,l],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,r,l,i,s,a,o;(e=A(this,Ks))==null||e.resolve(),K(this,Ks,null),(t=A(this,Kl))==null||t.abort(),K(this,Kl,null),this._signal=null;for(const n of A(this,Lr).values())n.destroy();A(this,Lr).clear(),A(this,Ar).clear(),A(this,uo).clear(),(r=A(this,ha))==null||r.clear(),K(this,Cs,null),A(this,$e).clear(),A(this,Gs).destroy(),(l=A(this,Yl))==null||l.destroy(),(i=A(this,da))==null||i.destroy(),(s=A(this,On))==null||s.hide(),K(this,On,null),(a=A(this,fo))==null||a.destroy(),K(this,fo,null),A(this,Pn)&&(clearTimeout(A(this,Pn)),K(this,Pn,null)),A(this,Nn)&&(clearTimeout(A(this,Nn)),K(this,Nn,null)),(o=this._editorUndoBar)==null||o.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return A(this,Qu)}get useNewAltTextFlow(){return A(this,Yu)}get useNewAltTextWhenAddingImage(){return A(this,Ql)}get hcmFilter(){return we(this,"hcmFilter",A(this,po)?A(this,Zu).addHCMFilter(A(this,po).foreground,A(this,po).background):"none")}get direction(){return we(this,"direction",getComputedStyle(A(this,ui)).direction)}get highlightColors(){return we(this,"highlightColors",A(this,tc)?new Map(A(this,tc).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColorNames(){return we(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),K(this,aa,e)}setMainHighlightColorPicker(e){K(this,fo,e)}editAltText(e,t=!1){var r;(r=A(this,Yl))==null||r.editAltText(this,e,t)}getSignature(e){var t;(t=A(this,da))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return A(this,da)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":K(this,Ql,t);break}}onPageChanging({pageNumber:e}){K(this,Jl,e-1)}focusMainContainer(){A(this,ui).focus()}findParent(e,t){for(const r of A(this,Lr).values()){const{x:l,y:i,width:s,height:a}=r.div.getBoundingClientRect();if(e>=l&&e<=l+s&&t>=i&&t<=i+a)return r}return null}disableUserSelect(e=!1){A(this,rh).classList.toggle("noUserSelect",e)}addShouldRescale(e){A(this,uo).add(e)}removeShouldRescale(e){A(this,uo).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Ua.PDF_TO_CSS_UNITS;for(const r of A(this,uo))r.onScaleChanging();(t=A(this,aa))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:r,anchorOffset:l,focusNode:i,focusOffset:s}=t,a=t.toString(),n=et(this,It,tf).call(this,t).closest(".textLayer"),c=this.getSelectionBoxes(n);if(!c)return;t.empty();const d=et(this,It,xm).call(this,n),u=A(this,Mr)===oe.NONE,h=()=>{d==null||d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:c,anchorNode:r,anchorOffset:l,focusNode:i,focusOffset:s,text:a}),u&&this.showAllEditors("highlight",!0,!0)};if(u){this.switchToMode(oe.HIGHLIGHT,h);return}h()}addToAnnotationStorage(e){!e.isEmpty()&&A(this,li)&&!A(this,li).has(e.id)&&A(this,li).setValue(e.id,e)}a11yAlert(e,t=null){const r=A(this,sh);r&&(r.setAttribute("data-l10n-id",e),t?r.setAttribute("data-l10n-args",JSON.stringify(t)):r.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,A(this,la)&&(K(this,la,!1),et(this,It,ef).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of A(this,$e))if(t.div.contains(e)){K(this,ho,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!A(this,ho))return;const[e,t]=A(this,ho);K(this,ho,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){et(this,It,Sm).call(this),et(this,It,Am).call(this)}removeEditListeners(){et(this,It,$1).call(this),et(this,It,km).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const r of A(this,ln))if(r.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const r of A(this,ln))if(r.isHandlingMimeForPasting(t.type)){r.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var r;if(e.preventDefault(),(r=A(this,Cs))==null||r.commitOrRemove(),!this.hasSelection)return;const t=[];for(const l of A(this,$e)){const i=l.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const s of A(this,ln))if(s.isHandlingMimeForPasting(i.type)){s.paste(i,this.currentLayer);return}let r=t.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(i){le(`paste: "${i.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const l=this.currentLayer;try{const i=[];for(const o of r){const n=await l.deserialize(o);if(!n)return;i.push(n)}const s=()=>{for(const o of i)et(this,It,Em).call(this,o);et(this,It,Cm).call(this,i)},a=()=>{for(const o of i)o.remove()};this.addCommands({cmd:s,undo:a,mustExec:!0})}catch(i){le(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),A(this,Mr)!==oe.NONE&&!this.isEditorHandlingKeyboard&&Dl._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,A(this,la)&&(K(this,la,!1),et(this,It,ef).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(et(this,It,B1).call(this),et(this,It,Am).call(this),et(this,It,ns).call(this,{isEditing:A(this,Mr)!==oe.NONE,isEmpty:et(this,It,uu).call(this),hasSomethingToUndo:A(this,Gs).hasSomethingToUndo(),hasSomethingToRedo:A(this,Gs).hasSomethingToRedo(),hasSelectedEditor:!1})):(et(this,It,z1).call(this),et(this,It,km).call(this),et(this,It,ns).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!A(this,ln)){K(this,ln,e);for(const t of A(this,ln))et(this,It,si).call(this,t.defaultPropertiesToUpdate)}}getId(){return A(this,Jf).id}get currentLayer(){return A(this,Lr).get(A(this,Jl))}getLayer(e){return A(this,Lr).get(e)}get currentPageIndex(){return A(this,Jl)}addLayer(e){A(this,Lr).set(e.pageIndex,e),A(this,ca)?e.enable():e.disable()}removeLayer(e){A(this,Lr).delete(e.pageIndex)}async updateMode(e,t=null,r=!1,l=!1){var i,s,a;if(A(this,Mr)!==e&&!(A(this,Ks)&&(await A(this,Ks).promise,!A(this,Ks)))){if(K(this,Ks,Promise.withResolvers()),(i=A(this,aa))==null||i.commitOrRemove(),K(this,Mr,e),e===oe.NONE){this.setEditingState(!1),et(this,It,V1).call(this),(s=this._editorUndoBar)==null||s.hide(),A(this,Ks).resolve();return}e===oe.SIGNATURE&&await((a=A(this,da))==null?void 0:a.loadSignatures()),this.setEditingState(!0),await et(this,It,U1).call(this),this.unselectAll();for(const o of A(this,Lr).values())o.updateMode(e);if(!t){r&&this.addNewEditorFromKeyboard(),A(this,Ks).resolve();return}for(const o of A(this,Ar).values())o.annotationElementId===t||o.id===t?(this.setSelected(o),l&&o.enterInEditMode()):o.unselect();A(this,Ks).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==A(this,Mr)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){var r;if(A(this,ln)){switch(e){case xe.CREATE:this.currentLayer.addNewEditor(t);return;case xe.HIGHLIGHT_DEFAULT_COLOR:(r=A(this,fo))==null||r.updateColor(t);break;case xe.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(A(this,th)||K(this,th,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const l of A(this,$e))l.updateParams(e,t);for(const l of A(this,ln))l.updateDefaultParams(e,t)}}showAllEditors(e,t,r=!1){var i;for(const s of A(this,Ar).values())s.editorType===e&&s.show(t);(((i=A(this,th))==null?void 0:i.get(xe.HIGHLIGHT_SHOW_ALL))??!0)!==t&&et(this,It,si).call(this,[[xe.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(A(this,Ju)!==e){K(this,Ju,e);for(const t of A(this,Lr).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const r of A(this,Ar).values())r.pageIndex===e&&t.push(r);return t}getEditor(e){return A(this,Ar).get(e)}addEditor(e){A(this,Ar).set(e.id,e)}removeEditor(e){var t,r;e.div.contains(document.activeElement)&&(A(this,Pn)&&clearTimeout(A(this,Pn)),K(this,Pn,setTimeout(()=>{this.focusMainContainer(),K(this,Pn,null)},0))),A(this,Ar).delete(e.id),e.annotationElementId&&((t=A(this,ha))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!A(this,co).has(e.annotationElementId))&&((r=A(this,li))==null||r.remove(e.id))}addDeletedAnnotationElement(e){A(this,co).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return A(this,co).has(e)}removeDeletedAnnotationElement(e){A(this,co).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){A(this,Cs)!==e&&(K(this,Cs,e),e&&et(this,It,si).call(this,e.propertiesToUpdate))}updateUI(e){A(this,It,W1)===e&&et(this,It,si).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){et(this,It,si).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(A(this,$e).has(e)){A(this,$e).delete(e),e.unselect(),et(this,It,ns).call(this,{hasSelectedEditor:this.hasSelection});return}A(this,$e).add(e),e.select(),et(this,It,si).call(this,e.propertiesToUpdate),et(this,It,ns).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=A(this,aa))==null||t.commitOrRemove();for(const r of A(this,$e))r!==e&&r.unselect();A(this,$e).clear(),A(this,$e).add(e),e.select(),et(this,It,si).call(this,e.propertiesToUpdate),et(this,It,ns).call(this,{hasSelectedEditor:!0})}isSelected(e){return A(this,$e).has(e)}get firstSelectedEditor(){return A(this,$e).values().next().value}unselect(e){e.unselect(),A(this,$e).delete(e),et(this,It,ns).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return A(this,$e).size!==0}get isEnterHandled(){return A(this,$e).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;A(this,Gs).undo(),et(this,It,ns).call(this,{hasSomethingToUndo:A(this,Gs).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:et(this,It,uu).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){A(this,Gs).redo(),et(this,It,ns).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:A(this,Gs).hasSomethingToRedo(),isEmpty:et(this,It,uu).call(this)})}addCommands(e){A(this,Gs).add(e),et(this,It,ns).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:et(this,It,uu).call(this)})}cleanUndoStack(e){A(this,Gs).cleanType(e)}delete(){var i;this.commitOrRemove();const e=(i=this.currentLayer)==null?void 0:i.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...A(this,$e)],r=()=>{var s;(s=this._editorUndoBar)==null||s.show(l,t.length===1?t[0].editorType:t.length);for(const a of t)a.remove()},l=()=>{for(const s of t)et(this,It,Em).call(this,s)};this.addCommands({cmd:r,undo:l,mustExec:!0})}commitOrRemove(){var e;(e=A(this,Cs))==null||e.commitOrRemove()}hasSomethingToControl(){return A(this,Cs)||this.hasSelection}selectAll(){for(const e of A(this,$e))e.commit();et(this,It,Cm).call(this,A(this,Ar).values())}unselectAll(){var e;if(!(A(this,Cs)&&(A(this,Cs).commitOrRemove(),A(this,Mr)!==oe.NONE))&&!((e=A(this,aa))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of A(this,$e))t.unselect();A(this,$e).clear(),et(this,It,ns).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;A(this,fa)[0]+=e,A(this,fa)[1]+=t;const[l,i]=A(this,fa),s=[...A(this,$e)],a=1e3;A(this,Nn)&&clearTimeout(A(this,Nn)),K(this,Nn,setTimeout(()=>{K(this,Nn,null),A(this,fa)[0]=A(this,fa)[1]=0,this.addCommands({cmd:()=>{for(const o of s)A(this,Ar).has(o.id)&&(o.translateInPage(l,i),o.translationDone())},undo:()=>{for(const o of s)A(this,Ar).has(o.id)&&(o.translateInPage(-l,-i),o.translationDone())},mustExec:!1})},a));for(const o of s)o.translateInPage(e,t),o.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),K(this,In,new Map);for(const e of A(this,$e))A(this,In).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!A(this,In))return!1;this.disableUserSelect(!1);const e=A(this,In);K(this,In,null);let t=!1;for(const[{x:l,y:i,pageIndex:s},a]of e)a.newX=l,a.newY=i,a.newPageIndex=s,t||(t=l!==a.savedX||i!==a.savedY||s!==a.savedPageIndex);if(!t)return!1;const r=(l,i,s,a)=>{if(A(this,Ar).has(l.id)){const o=A(this,Lr).get(a);o?l._setParentAndPosition(o,i,s):(l.pageIndex=a,l.x=i,l.y=s)}};return this.addCommands({cmd:()=>{for(const[l,{newX:i,newY:s,newPageIndex:a}]of e)r(l,i,s,a)},undo:()=>{for(const[l,{savedX:i,savedY:s,savedPageIndex:a}]of e)r(l,i,s,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(A(this,In))for(const r of A(this,In).keys())r.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||A(this,$e).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return A(this,Cs)===e}getActive(){return A(this,Cs)}getMode(){return A(this,Mr)}get imageManager(){return we(this,"imageManager",new wm)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let n=0,c=t.rangeCount;n<c;n++)if(!e.contains(t.getRangeAt(n).commonAncestorContainer))return null;const{x:r,y:l,width:i,height:s}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(n,c,d,u)=>({x:(c-l)/s,y:1-(n+d-r)/i,width:u/s,height:d/i});break;case"180":a=(n,c,d,u)=>({x:1-(n+d-r)/i,y:1-(c+u-l)/s,width:d/i,height:u/s});break;case"270":a=(n,c,d,u)=>({x:1-(c+u-l)/s,y:(n-r)/i,width:u/s,height:d/i});break;default:a=(n,c,d,u)=>({x:(n-r)/i,y:(c-l)/s,width:d/i,height:u/s});break}const o=[];for(let n=0,c=t.rangeCount;n<c;n++){const d=t.getRangeAt(n);if(!d.collapsed)for(const{x:u,y:h,width:p,height:m}of d.getClientRects())p===0||m===0||o.push(a(u,h,p,m))}return o.length===0?null:o}addChangedExistingAnnotation({annotationElementId:e,id:t}){(A(this,Zl)||K(this,Zl,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=A(this,Zl))==null||t.delete(e)}renderAnnotationElement(e){var l;const t=(l=A(this,Zl))==null?void 0:l.get(e.data.id);if(!t)return;const r=A(this,li).getRawValue(t);r&&(A(this,Mr)===oe.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}setMissingCanvas(e,t,r){var i;const l=(i=A(this,ha))==null?void 0:i.get(e);l&&(l.setCanvas(t,r),A(this,ha).delete(e))}addMissingCanvas(e,t){(A(this,ha)||K(this,ha,new Map)).set(e,t)}};Kl=new WeakMap,Cs=new WeakMap,Ar=new WeakMap,Lr=new WeakMap,Yl=new WeakMap,li=new WeakMap,Zl=new WeakMap,Gs=new WeakMap,ia=new WeakMap,aa=new WeakMap,Jl=new WeakMap,co=new WeakMap,In=new WeakMap,ln=new WeakMap,uo=new WeakMap,Ku=new WeakMap,Yu=new WeakMap,Ql=new WeakMap,Zu=new WeakMap,Pn=new WeakMap,oa=new WeakMap,tc=new WeakMap,la=new WeakMap,On=new WeakMap,Jf=new WeakMap,ca=new WeakMap,Ju=new WeakMap,ua=new WeakMap,ho=new WeakMap,fo=new WeakMap,ha=new WeakMap,Qu=new WeakMap,Mr=new WeakMap,$e=new WeakMap,ci=new WeakMap,da=new WeakMap,po=new WeakMap,th=new WeakMap,eh=new WeakMap,fa=new WeakMap,Nn=new WeakMap,ui=new WeakMap,rh=new WeakMap,sh=new WeakMap,Ks=new WeakMap,It=new WeakSet,tf=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},xm=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const r of A(this,Lr).values())if(r.hasTextLayer(e))return r;return null},L1=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=et(this,It,tf).call(this,e).closest(".textLayer"),l=this.getSelectionBoxes(r);l&&(A(this,On)||K(this,On,new B3(this)),A(this,On).show(r,l,this.direction==="ltr"))},F1=function(){var i,s,a;const e=document.getSelection();if(!e||e.isCollapsed){A(this,ci)&&((i=A(this,On))==null||i.hide(),K(this,ci,null),et(this,It,ns).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===A(this,ci))return;const l=et(this,It,tf).call(this,e).closest(".textLayer");if(!l){A(this,ci)&&((s=A(this,On))==null||s.hide(),K(this,ci,null),et(this,It,ns).call(this,{hasSelectedText:!1}));return}if((a=A(this,On))==null||a.hide(),K(this,ci,t),et(this,It,ns).call(this,{hasSelectedText:!0}),!(A(this,Mr)!==oe.HIGHLIGHT&&A(this,Mr)!==oe.NONE)&&(A(this,Mr)===oe.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),K(this,la,this.isShiftKeyDown),!this.isShiftKeyDown)){const o=A(this,Mr)===oe.HIGHLIGHT?et(this,It,xm).call(this,l):null;o==null||o.toggleDrawing();const n=new AbortController,c=this.combinedSignal(n),d=u=>{u.type==="pointerup"&&u.button!==0||(n.abort(),o==null||o.toggleDrawing(!0),u.type==="pointerup"&&et(this,It,ef).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:c}),window.addEventListener("blur",d,{signal:c})}},ef=function(e=""){A(this,Mr)===oe.HIGHLIGHT?this.highlightSelection(e):A(this,Ku)&&et(this,It,L1).call(this)},j1=function(){document.addEventListener("selectionchange",et(this,It,F1).bind(this),{signal:this._signal})},B1=function(){if(A(this,oa))return;K(this,oa,new AbortController);const e=this.combinedSignal(A(this,oa));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},z1=function(){var e;(e=A(this,oa))==null||e.abort(),K(this,oa,null)},Sm=function(){if(A(this,ua))return;K(this,ua,new AbortController);const e=this.combinedSignal(A(this,ua));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},$1=function(){var e;(e=A(this,ua))==null||e.abort(),K(this,ua,null)},Am=function(){if(A(this,ia))return;K(this,ia,new AbortController);const e=this.combinedSignal(A(this,ia));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},km=function(){var e;(e=A(this,ia))==null||e.abort(),K(this,ia,null)},H1=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},ns=function(e){Object.entries(e).some(([r,l])=>A(this,eh)[r]!==l)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(A(this,eh),e)}),A(this,Mr)===oe.HIGHLIGHT&&e.hasSelectedEditor===!1&&et(this,It,si).call(this,[[xe.HIGHLIGHT_FREE,!0]]))},si=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},U1=async function(){if(!A(this,ca)){K(this,ca,!0);const e=[];for(const t of A(this,Lr).values())e.push(t.enable());await Promise.all(e);for(const t of A(this,Ar).values())t.enable()}},V1=function(){if(this.unselectAll(),A(this,ca)){K(this,ca,!1);for(const e of A(this,Lr).values())e.disable();for(const e of A(this,Ar).values())e.disable()}},Em=function(e){const t=A(this,Lr).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},W1=function(){let e=null;for(e of A(this,$e));return e},uu=function(){if(A(this,Ar).size===0)return!0;if(A(this,Ar).size===1)for(const e of A(this,Ar).values())return e.isEmpty();return!1},Cm=function(e){for(const t of A(this,$e))t.unselect();A(this,$e).clear();for(const t of e)t.isEmpty()||(A(this,$e).add(t),t.select());et(this,It,ns).call(this,{hasSelectedEditor:this.hasSelection})},At(Dl,"TRANSLATE_SMALL",1),At(Dl,"TRANSLATE_BIG",10);let bl=Dl;var Rr,Dn,cn,ec,Ln,Ts,rc,Fn,vs,hi,mo,jn,pa,_n,hu,rf;const is=class is{constructor(e){tt(this,_n);tt(this,Rr,null);tt(this,Dn,!1);tt(this,cn,null);tt(this,ec,null);tt(this,Ln,null);tt(this,Ts,null);tt(this,rc,!1);tt(this,Fn,null);tt(this,vs,null);tt(this,hi,null);tt(this,mo,null);tt(this,jn,!1);K(this,vs,e),K(this,jn,e._uiManager.useNewAltTextFlow),A(is,pa)||K(is,pa,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){is._l10n??(is._l10n=e)}async render(){const e=K(this,cn,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=K(this,ec,document.createElement("span"));e.append(t),A(this,jn)?(e.classList.add("new"),e.setAttribute("data-l10n-id",A(is,pa).missing),t.setAttribute("data-l10n-id",A(is,pa)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=A(this,vs)._uiManager._signal;e.addEventListener("contextmenu",An,{signal:r}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:r});const l=i=>{i.preventDefault(),A(this,vs)._uiManager.editAltText(A(this,vs)),A(this,jn)&&A(this,vs)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:A(this,_n,hu)}})};return e.addEventListener("click",l,{capture:!0,signal:r}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(K(this,rc,!0),l(i))},{signal:r}),await et(this,_n,rf).call(this),e}finish(){A(this,cn)&&(A(this,cn).focus({focusVisible:A(this,rc)}),K(this,rc,!1))}isEmpty(){return A(this,jn)?A(this,Rr)===null:!A(this,Rr)&&!A(this,Dn)}hasData(){return A(this,jn)?A(this,Rr)!==null||!!A(this,hi):this.isEmpty()}get guessedText(){return A(this,hi)}async setGuessedText(e){A(this,Rr)===null&&(K(this,hi,e),K(this,mo,await is._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),et(this,_n,rf).call(this))}toggleAltTextBadge(e=!1){var t;if(!A(this,jn)||A(this,Rr)){(t=A(this,Fn))==null||t.remove(),K(this,Fn,null);return}if(!A(this,Fn)){const r=K(this,Fn,document.createElement("div"));r.className="noAltTextBadge",A(this,vs).div.append(r)}A(this,Fn).classList.toggle("hidden",!e)}serialize(e){let t=A(this,Rr);return!e&&A(this,hi)===t&&(t=A(this,mo)),{altText:t,decorative:A(this,Dn),guessedText:A(this,hi),textWithDisclaimer:A(this,mo)}}get data(){return{altText:A(this,Rr),decorative:A(this,Dn)}}set data({altText:e,decorative:t,guessedText:r,textWithDisclaimer:l,cancel:i=!1}){r&&(K(this,hi,r),K(this,mo,l)),!(A(this,Rr)===e&&A(this,Dn)===t)&&(i||(K(this,Rr,e),K(this,Dn,t)),et(this,_n,rf).call(this))}toggle(e=!1){A(this,cn)&&(!e&&A(this,Ts)&&(clearTimeout(A(this,Ts)),K(this,Ts,null)),A(this,cn).disabled=!e)}shown(){A(this,vs)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:A(this,_n,hu)}})}destroy(){var e,t;(e=A(this,cn))==null||e.remove(),K(this,cn,null),K(this,ec,null),K(this,Ln,null),(t=A(this,Fn))==null||t.remove(),K(this,Fn,null)}};Rr=new WeakMap,Dn=new WeakMap,cn=new WeakMap,ec=new WeakMap,Ln=new WeakMap,Ts=new WeakMap,rc=new WeakMap,Fn=new WeakMap,vs=new WeakMap,hi=new WeakMap,mo=new WeakMap,jn=new WeakMap,pa=new WeakMap,_n=new WeakSet,hu=function(){return A(this,Rr)&&"added"||A(this,Rr)===null&&this.guessedText&&"review"||"missing"},rf=async function(){var l,i,s;const e=A(this,cn);if(!e)return;if(A(this,jn)){if(e.classList.toggle("done",!!A(this,Rr)),e.setAttribute("data-l10n-id",A(is,pa)[A(this,_n,hu)]),(l=A(this,ec))==null||l.setAttribute("data-l10n-id",A(is,pa)[`${A(this,_n,hu)}-label`]),!A(this,Rr)){(i=A(this,Ln))==null||i.remove();return}}else{if(!A(this,Rr)&&!A(this,Dn)){e.classList.remove("done"),(s=A(this,Ln))==null||s.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=A(this,Ln);if(!t){K(this,Ln,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${A(this,vs).id}`;const a=100,o=A(this,vs)._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(A(this,Ts)),K(this,Ts,null)},{once:!0}),e.addEventListener("mouseenter",()=>{K(this,Ts,setTimeout(()=>{K(this,Ts,null),A(this,Ln).classList.add("show"),A(this,vs)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:o}),e.addEventListener("mouseleave",()=>{var n;A(this,Ts)&&(clearTimeout(A(this,Ts)),K(this,Ts,null)),(n=A(this,Ln))==null||n.classList.remove("show")},{signal:o})}A(this,Dn)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=A(this,Rr)),t.parentNode||e.append(t);const r=A(this,vs).getElementForAltText();r==null||r.setAttribute("aria-describedby",t.id)},tt(is,pa,null),At(is,"_l10n",null);let $f=is;var sc,go,nh,ih,ah,oh,lh,di,bo,fi,yo,pi,Wa,q1,X1,G1;const pg=class pg{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:r=null,onPinchStart:l=null,onPinching:i=null,onPinchEnd:s=null,signal:a}){tt(this,Wa);tt(this,sc);tt(this,go,!1);tt(this,nh,null);tt(this,ih);tt(this,ah);tt(this,oh);tt(this,lh);tt(this,di,null);tt(this,bo);tt(this,fi,null);tt(this,yo);tt(this,pi,null);K(this,sc,e),K(this,nh,r),K(this,ih,t),K(this,ah,l),K(this,oh,i),K(this,lh,s),K(this,yo,new AbortController),K(this,bo,AbortSignal.any([a,A(this,yo).signal])),e.addEventListener("touchstart",et(this,Wa,q1).bind(this),{passive:!1,signal:A(this,bo)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Jn.pixelRatio}destroy(){var e,t;(e=A(this,yo))==null||e.abort(),K(this,yo,null),(t=A(this,di))==null||t.abort(),K(this,di,null)}};sc=new WeakMap,go=new WeakMap,nh=new WeakMap,ih=new WeakMap,ah=new WeakMap,oh=new WeakMap,lh=new WeakMap,di=new WeakMap,bo=new WeakMap,fi=new WeakMap,yo=new WeakMap,pi=new WeakMap,Wa=new WeakSet,q1=function(e){var l,i,s;if((l=A(this,ih))!=null&&l.call(this))return;if(e.touches.length===1){if(A(this,di))return;const a=K(this,di,new AbortController),o=AbortSignal.any([A(this,bo),a.signal]),n=A(this,sc),c={capture:!0,signal:o,passive:!1},d=u=>{var h;u.pointerType==="touch"&&((h=A(this,di))==null||h.abort(),K(this,di,null))};n.addEventListener("pointerdown",u=>{u.pointerType==="touch"&&(gr(u),d(u))},c),n.addEventListener("pointerup",d,c),n.addEventListener("pointercancel",d,c);return}if(!A(this,pi)){K(this,pi,new AbortController);const a=AbortSignal.any([A(this,bo),A(this,pi).signal]),o=A(this,sc),n={signal:a,capture:!1,passive:!1};o.addEventListener("touchmove",et(this,Wa,X1).bind(this),n);const c=et(this,Wa,G1).bind(this);o.addEventListener("touchend",c,n),o.addEventListener("touchcancel",c,n),n.capture=!0,o.addEventListener("pointerdown",gr,n),o.addEventListener("pointermove",gr,n),o.addEventListener("pointercancel",gr,n),o.addEventListener("pointerup",gr,n),(i=A(this,ah))==null||i.call(this)}if(gr(e),e.touches.length!==2||(s=A(this,nh))!=null&&s.call(this)){K(this,fi,null);return}let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]),K(this,fi,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:r.screenX,touch1Y:r.screenY})},X1=function(e){var E;if(!A(this,fi)||e.touches.length!==2)return;gr(e);let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]);const{screenX:l,screenY:i}=t,{screenX:s,screenY:a}=r,o=A(this,fi),{touch0X:n,touch0Y:c,touch1X:d,touch1Y:u}=o,h=d-n,p=u-c,m=s-l,f=a-i,b=Math.hypot(m,f)||1,y=Math.hypot(h,p)||1;if(!A(this,go)&&Math.abs(y-b)<=pg.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(o.touch0X=l,o.touch0Y=i,o.touch1X=s,o.touch1Y=a,!A(this,go)){K(this,go,!0);return}const _=[(l+s)/2,(i+a)/2];(E=A(this,oh))==null||E.call(this,_,y,b)},G1=function(e){var t;e.touches.length>=2||(A(this,pi)&&(A(this,pi).abort(),K(this,pi,null),(t=A(this,lh))==null||t.call(this)),A(this,fi)&&(gr(e),K(this,fi,null),K(this,go,!1)))};let Hf=pg;var vo,un,er,nc,ma,ch,wo,Fr,_o,mi,ga,uh,xo,Ms,hh,So,gi,Bn,ic,ac,Ys,Ao,dh,Qf,Jt,Tm,fh,Mm,sf,K1,Y1,Rm,nf,Im,Z1,J1,Q1,Pm,ty,Om,ey,ry,sy,Nm,du;const pe=class pe{constructor(e){tt(this,Jt);tt(this,vo,null);tt(this,un,null);tt(this,er,null);tt(this,nc,!1);tt(this,ma,null);tt(this,ch,"");tt(this,wo,!1);tt(this,Fr,null);tt(this,_o,null);tt(this,mi,null);tt(this,ga,null);tt(this,uh,"");tt(this,xo,!1);tt(this,Ms,null);tt(this,hh,!1);tt(this,So,!1);tt(this,gi,!1);tt(this,Bn,null);tt(this,ic,0);tt(this,ac,0);tt(this,Ys,null);tt(this,Ao,null);At(this,"isSelected",!1);At(this,"_isCopy",!1);At(this,"_editToolbar",null);At(this,"_initialOptions",Object.create(null));At(this,"_initialData",null);At(this,"_isVisible",!0);At(this,"_uiManager",null);At(this,"_focusEventsAllowed",!0);tt(this,dh,!1);tt(this,Qf,pe._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null;const{rotation:t,rawDims:{pageWidth:r,pageHeight:l,pageX:i,pageY:s}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,l],this.pageTranslation=[i,s];const[a,o]=this.parentDimensions;this.x=e.x/a,this.y=e.y/o,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=pe.prototype._resizeWithKeyboard,t=bl.TRANSLATE_SMALL,r=bl.TRANSLATE_BIG;return we(this,"_resizerKeyboardManager",new Ad([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],pe.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return we(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new H3({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(pe._l10n??(pe._l10n=e),pe._l10nResizer||(pe._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),pe._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);pe._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){We("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return A(this,dh)}set _isDraggable(e){var t;K(this,dh,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=A(this,Qf)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):et(this,Jt,du).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(A(this,xo)?K(this,xo,!1):this.parent.setSelected(this))}focusout(e){var r;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(r=this.parent)!=null&&r.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,r,l){const[i,s]=this.parentDimensions;[r,l]=this.screenToPageTranslation(r,l),this.x=(e+r)/i,this.y=(t+l)/s,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[r,l]=this.parentDimensions;this.setAt(e*r,t*l,this.width*r,this.height*l),this._onTranslated()}translate(e,t){et(this,Jt,Tm).call(this,this.parentDimensions,e,t)}translateInPage(e,t){A(this,Ms)||K(this,Ms,[this.x,this.y,this.width,this.height]),et(this,Jt,Tm).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){A(this,Ms)||K(this,Ms,[this.x,this.y,this.width,this.height]);const{div:r,parentDimensions:[l,i]}=this;if(this.x+=e/l,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:u}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,u)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:a}=this;const[o,n]=this.getBaseTranslation();s+=o,a+=n;const{style:c}=r;c.left=`${(100*s).toFixed(2)}%`,c.top=`${(100*a).toFixed(2)}%`,this._onTranslating(s,a),r.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!A(this,Ms)&&(A(this,Ms)[0]!==this.x||A(this,Ms)[1]!==this.y)}get _hasBeenResized(){return!!A(this,Ms)&&(A(this,Ms)[2]!==this.width||A(this,Ms)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:r}=pe,l=r/e,i=r/t;switch(this.rotation){case 90:return[-l,i];case 180:return[l,i];case 270:return[l,-i];default:return[-l,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[r,l]}=this;let{x:i,y:s,width:a,height:o}=this;if(a*=r,o*=l,i*=r,s*=l,this._mustFixPosition)switch(e){case 0:i=us(i,0,r-a),s=us(s,0,l-o);break;case 90:i=us(i,0,r-o),s=us(s,a,l);break;case 180:i=us(i,a,r),s=us(s,o,l);break;case 270:i=us(i,o,r),s=us(s,0,l-a);break}this.x=i/=r,this.y=s/=l;const[n,c]=this.getBaseTranslation();i+=n,s+=c,t.left=`${(100*i).toFixed(2)}%`,t.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var r;return et(r=pe,fh,Mm).call(r,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var r;return et(r=pe,fh,Mm).call(r,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,r]}=this;return[t*e,r*e]}setDims(e,t){const[r,l]=this.parentDimensions,{style:i}=this.div;i.width=`${(100*e/r).toFixed(2)}%`,A(this,wo)||(i.height=`${(100*t/l).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:r}=e,l=r.endsWith("%"),i=!A(this,wo)&&t.endsWith("%");if(l&&i)return;const[s,a]=this.parentDimensions;l||(e.width=`${(100*parseFloat(r)/s).toFixed(2)}%`),!A(this,wo)&&!i&&(e.height=`${(100*parseFloat(t)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=A(this,er))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||A(this,So))return this._editToolbar;this._editToolbar=new vm(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,r]of e)await this._editToolbar.addButton(t,r);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=A(this,er))==null||e.destroy())}addContainer(e){var r;const t=(r=this._editToolbar)==null?void 0:r.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return A(this,er)||($f.initialize(pe._l10n),K(this,er,new $f(this)),A(this,vo)&&(A(this,er).data=A(this,vo),K(this,vo,null))),A(this,er)}get altTextData(){var e;return(e=A(this,er))==null?void 0:e.data}set altTextData(e){A(this,er)&&(A(this,er).data=e)}get guessedAltText(){var e;return(e=A(this,er))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=A(this,er))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=A(this,er))==null?void 0:t.serialize(e)}hasAltText(){return!!A(this,er)&&!A(this,er).isEmpty()}hasAltTextData(){var e;return((e=A(this,er))==null?void 0:e.hasData())??!1}render(){var s;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=A(this,nc)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),et(this,Jt,Om).call(this);const[t,r]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*r/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/r).toFixed(2)}%`);const[l,i]=this.getInitialTranslation();return this.translate(l,i),N1(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(A(this,Ao)||K(this,Ao,new Hf({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:et(this,Jt,Z1).bind(this),onPinching:et(this,Jt,J1).bind(this),onPinchEnd:et(this,Jt,Q1).bind(this),signal:this._uiManager._signal}))),(s=this._uiManager._editorUndoBar)==null||s.hide(),e}pointerdown(e){const{isMac:t}=qr.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(K(this,xo,!0),this._isDraggable){et(this,Jt,ty).call(this,e);return}et(this,Jt,Pm).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){A(this,Bn)&&clearTimeout(A(this,Bn)),K(this,Bn,setTimeout(()=>{var e;K(this,Bn,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,r){e.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,r=this.rotation){const l=this.parentScale,[i,s]=this.pageDimensions,[a,o]=this.pageTranslation,n=e/l,c=t/l,d=this.x*i,u=this.y*s,h=this.width*i,p=this.height*s;switch(r){case 0:return[d+n+a,s-u-c-p+o,d+n+h+a,s-u-c+o];case 90:return[d+c+a,s-u+n+o,d+c+p+a,s-u+n+h+o];case 180:return[d-n-h+a,s-u+c+o,d-n+a,s-u+c+p+o];case 270:return[d-c-p+a,s-u-n-h+o,d-c+a,s-u-n+o];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[r,l,i,s]=e,a=i-r,o=s-l;switch(this.rotation){case 0:return[r,t-s,a,o];case 90:return[r,t-l,o,a];case 180:return[i,t-l,a,o];case 270:return[i,t-s,o,a];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),K(this,So,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),K(this,So,!1),!0):!1}isInEditMode(){return A(this,So)}shouldGetKeyboardEvents(){return A(this,gi)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:r,right:l}=this.getClientDimensions(),{innerHeight:i,innerWidth:s}=window;return t<s&&l>0&&e<i&&r>0}rebuild(){et(this,Jt,Om).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){We("An editor must be serializable")}static async deserialize(e,t,r){const l=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r,annotationElementId:e.annotationElementId});l.rotation=e.rotation,K(l,vo,e.accessibilityData),l._isCopy=e.isCopy||!1;const[i,s]=l.pageDimensions,[a,o,n,c]=l.getRectInCurrentCoords(e.rect,s);return l.x=a/i,l.y=o/s,l.width=n/i,l.height=c/s,l}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=A(this,ga))==null||e.abort(),K(this,ga,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),A(this,Bn)&&(clearTimeout(A(this,Bn)),K(this,Bn,null)),et(this,Jt,du).call(this),this.removeEditToolbar(),A(this,Ys)){for(const r of A(this,Ys).values())clearTimeout(r);K(this,Ys,null)}this.parent=null,(t=A(this,Ao))==null||t.destroy(),K(this,Ao,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(et(this,Jt,K1).call(this),A(this,Fr).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),K(this,mi,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=A(this,Fr).children;if(!A(this,un)){K(this,un,Array.from(t));const s=et(this,Jt,ey).bind(this),a=et(this,Jt,ry).bind(this),o=this._uiManager._signal;for(const n of A(this,un)){const c=n.getAttribute("data-resizer-name");n.setAttribute("role","spinbutton"),n.addEventListener("keydown",s,{signal:o}),n.addEventListener("blur",a,{signal:o}),n.addEventListener("focus",et(this,Jt,sy).bind(this,c),{signal:o}),n.setAttribute("data-l10n-id",pe._l10nResizer[c])}}const r=A(this,un)[0];let l=0;for(const s of t){if(s===r)break;l++}const i=(360-this.rotation+this.parentRotation)%360/90*(A(this,un).length/4);if(i!==l){if(i<l)for(let a=0;a<l-i;a++)A(this,Fr).append(A(this,Fr).firstChild);else if(i>l)for(let a=0;a<i-l;a++)A(this,Fr).firstChild.before(A(this,Fr).lastChild);let s=0;for(const a of t){const n=A(this,un)[s++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",pe._l10nResizer[n])}}et(this,Jt,Nm).call(this,0),K(this,gi,!0),A(this,Fr).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){A(this,gi)&&et(this,Jt,Im).call(this,A(this,uh),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){et(this,Jt,du).call(this),this.div.focus()}select(){var e,t,r;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var l,i;(l=this.div)!=null&&l.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(t=this._editToolbar)==null||t.show(),(r=A(this,er))==null||r.toggleAltTextBadge(!1)}}unselect(){var e,t,r,l,i;this.isSelected&&(this.isSelected=!1,(e=A(this,Fr))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(r=this.div)!=null&&r.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(l=this._editToolbar)==null||l.hide(),(i=A(this,er))==null||i.toggleAltTextBadge(!0))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return A(this,hh)}set isEditing(e){K(this,hh,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){K(this,wo,!0);const r=e/t,{style:l}=this.div;l.aspectRatio=r,l.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){A(this,Ys)||K(this,Ys,new Map);const{action:r}=e;let l=A(this,Ys).get(r);l&&clearTimeout(l),l=setTimeout(()=>{this._reportTelemetry(e),A(this,Ys).delete(r),A(this,Ys).size===0&&K(this,Ys,null)},pe._telemetryTimeout),A(this,Ys).set(r,l);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),K(this,nc,!1)}disable(){this.div&&(this.div.tabIndex=-1),K(this,nc,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const r=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),r.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};vo=new WeakMap,un=new WeakMap,er=new WeakMap,nc=new WeakMap,ma=new WeakMap,ch=new WeakMap,wo=new WeakMap,Fr=new WeakMap,_o=new WeakMap,mi=new WeakMap,ga=new WeakMap,uh=new WeakMap,xo=new WeakMap,Ms=new WeakMap,hh=new WeakMap,So=new WeakMap,gi=new WeakMap,Bn=new WeakMap,ic=new WeakMap,ac=new WeakMap,Ys=new WeakMap,Ao=new WeakMap,dh=new WeakMap,Qf=new WeakMap,Jt=new WeakSet,Tm=function([e,t],r,l){[r,l]=this.screenToPageTranslation(r,l),this.x+=r/e,this.y+=l/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},fh=new WeakSet,Mm=function(e,t,r){switch(r){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},sf=function(e){switch(e){case 90:{const[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}},K1=function(){if(A(this,Fr))return;K(this,Fr,document.createElement("div")),A(this,Fr).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const r of e){const l=document.createElement("div");A(this,Fr).append(l),l.classList.add("resizer",r),l.setAttribute("data-resizer-name",r),l.addEventListener("pointerdown",et(this,Jt,Y1).bind(this,r),{signal:t}),l.addEventListener("contextmenu",An,{signal:t}),l.tabIndex=-1}this.div.prepend(A(this,Fr))},Y1=function(e,t){var c;t.preventDefault();const{isMac:r}=qr.platform;if(t.button!==0||t.ctrlKey&&r)return;(c=A(this,er))==null||c.toggle(!1);const l=this._isDraggable;this._isDraggable=!1,K(this,_o,[t.screenX,t.screenY]);const i=new AbortController,s=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",et(this,Jt,Im).bind(this,e),{passive:!0,capture:!0,signal:s}),window.addEventListener("touchmove",gr,{passive:!1,signal:s}),window.addEventListener("contextmenu",An,{signal:s}),K(this,mi,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const a=this.parent.div.style.cursor,o=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const n=()=>{var d;i.abort(),this.parent.togglePointerEvents(!0),(d=A(this,er))==null||d.toggle(!0),this._isDraggable=l,this.parent.div.style.cursor=a,this.div.style.cursor=o,et(this,Jt,nf).call(this)};window.addEventListener("pointerup",n,{signal:s}),window.addEventListener("blur",n,{signal:s})},Rm=function(e,t,r,l){this.width=r,this.height=l,this.x=e,this.y=t;const[i,s]=this.parentDimensions;this.setDims(i*r,s*l),this.fixAndSetPosition(),this._onResized()},nf=function(){if(!A(this,mi))return;const{savedX:e,savedY:t,savedWidth:r,savedHeight:l}=A(this,mi);K(this,mi,null);const i=this.x,s=this.y,a=this.width,o=this.height;i===e&&s===t&&a===r&&o===l||this.addCommands({cmd:et(this,Jt,Rm).bind(this,i,s,a,o),undo:et(this,Jt,Rm).bind(this,e,t,r,l),mustExec:!0})},Im=function(e,t){const[r,l]=this.parentDimensions,i=this.x,s=this.y,a=this.width,o=this.height,n=pe.MIN_SIZE/r,c=pe.MIN_SIZE/l,d=et(this,Jt,sf).call(this,this.rotation),u=(v,w)=>[d[0]*v+d[2]*w,d[1]*v+d[3]*w],h=et(this,Jt,sf).call(this,360-this.rotation),p=(v,w)=>[h[0]*v+h[2]*w,h[1]*v+h[3]*w];let m,f,b=!1,y=!1;switch(e){case"topLeft":b=!0,m=(v,w)=>[0,0],f=(v,w)=>[v,w];break;case"topMiddle":m=(v,w)=>[v/2,0],f=(v,w)=>[v/2,w];break;case"topRight":b=!0,m=(v,w)=>[v,0],f=(v,w)=>[0,w];break;case"middleRight":y=!0,m=(v,w)=>[v,w/2],f=(v,w)=>[0,w/2];break;case"bottomRight":b=!0,m=(v,w)=>[v,w],f=(v,w)=>[0,0];break;case"bottomMiddle":m=(v,w)=>[v/2,w],f=(v,w)=>[v/2,0];break;case"bottomLeft":b=!0,m=(v,w)=>[0,w],f=(v,w)=>[v,0];break;case"middleLeft":y=!0,m=(v,w)=>[0,w/2],f=(v,w)=>[v,w/2];break}const _=m(a,o),E=f(a,o);let M=u(...E);const D=pe._round(i+M[0]),z=pe._round(s+M[1]);let O=1,N=1,B,H;if(t.fromKeyboard)({deltaX:B,deltaY:H}=t);else{const{screenX:v,screenY:w}=t,[x,S]=A(this,_o);[B,H]=this.screenToPageTranslation(v-x,w-S),A(this,_o)[0]=v,A(this,_o)[1]=w}if([B,H]=p(B/r,H/l),b){const v=Math.hypot(a,o);O=N=Math.max(Math.min(Math.hypot(E[0]-_[0]-B,E[1]-_[1]-H)/v,1/a,1/o),n/a,c/o)}else y?O=us(Math.abs(E[0]-_[0]-B),n,1)/a:N=us(Math.abs(E[1]-_[1]-H),c,1)/o;const $=pe._round(a*O),C=pe._round(o*N);M=u(...f($,C));const R=D-M[0],k=z-M[1];A(this,Ms)||K(this,Ms,[this.x,this.y,this.width,this.height]),this.width=$,this.height=C,this.x=R,this.y=k,this.setDims(r*$,l*C),this.fixAndSetPosition(),this._onResizing()},Z1=function(){var e;K(this,mi,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=A(this,er))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},J1=function(e,t,r){let i=.7*(r/t)+1-.7;if(i===1)return;const s=et(this,Jt,sf).call(this,this.rotation),a=(D,z)=>[s[0]*D+s[2]*z,s[1]*D+s[3]*z],[o,n]=this.parentDimensions,c=this.x,d=this.y,u=this.width,h=this.height,p=pe.MIN_SIZE/o,m=pe.MIN_SIZE/n;i=Math.max(Math.min(i,1/u,1/h),p/u,m/h);const f=pe._round(u*i),b=pe._round(h*i);if(f===u&&b===h)return;A(this,Ms)||K(this,Ms,[c,d,u,h]);const y=a(u/2,h/2),_=pe._round(c+y[0]),E=pe._round(d+y[1]),M=a(f/2,b/2);this.x=_-M[0],this.y=E-M[1],this.width=f,this.height=b,this.setDims(o*f,n*b),this.fixAndSetPosition(),this._onResizing()},Q1=function(){var e;(e=A(this,er))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),et(this,Jt,nf).call(this)},Pm=function(e){const{isMac:t}=qr.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},ty=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let r=!1;const l=new AbortController,i=this._uiManager.combinedSignal(l),s={capture:!0,passive:!1,signal:i},a=n=>{l.abort(),K(this,ma,null),K(this,xo,!1),this._uiManager.endDragSession()||et(this,Jt,Pm).call(this,n),r&&this._onStopDragging()};t&&(K(this,ic,e.clientX),K(this,ac,e.clientY),K(this,ma,e.pointerId),K(this,ch,e.pointerType),window.addEventListener("pointermove",n=>{r||(r=!0,this._onStartDragging());const{clientX:c,clientY:d,pointerId:u}=n;if(u!==A(this,ma)){gr(n);return}const[h,p]=this.screenToPageTranslation(c-A(this,ic),d-A(this,ac));K(this,ic,c),K(this,ac,d),this._uiManager.dragSelectedEditors(h,p)},s),window.addEventListener("touchmove",gr,s),window.addEventListener("pointerdown",n=>{n.pointerType===A(this,ch)&&(A(this,Ao)||n.isPrimary)&&a(n),gr(n)},s));const o=n=>{if(!A(this,ma)||A(this,ma)===n.pointerId){a(n);return}gr(n)};window.addEventListener("pointerup",o,{signal:i}),window.addEventListener("blur",o,{signal:i})},Om=function(){if(A(this,ga)||!this.div)return;K(this,ga,new AbortController);const e=this._uiManager.combinedSignal(A(this,ga));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},ey=function(e){pe._resizerKeyboardManager.exec(this,e)},ry=function(e){var t;A(this,gi)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==A(this,Fr)&&et(this,Jt,du).call(this)},sy=function(e){K(this,uh,A(this,gi)?e:"")},Nm=function(e){if(A(this,un))for(const t of A(this,un))t.tabIndex=e},du=function(){K(this,gi,!1),et(this,Jt,Nm).call(this,-1),et(this,Jt,nf).call(this)},tt(pe,fh),At(pe,"_l10n",null),At(pe,"_l10nResizer",null),At(pe,"_borderLineWidth",-1),At(pe,"_colorManager",new _m),At(pe,"_zIndex",1),At(pe,"_telemetryTimeout",1e3);let Je=pe;class H3 extends Je{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const rb=3285377520,qs=4294901760,Tn=65535;class ny{constructor(e){this.h1=e?e&4294967295:rb,this.h2=e?e&4294967295:rb}update(e){let t,r;if(typeof e=="string"){t=new Uint8Array(e.length*2),r=0;for(let m=0,f=e.length;m<f;m++){const b=e.charCodeAt(m);b<=255?t[r++]=b:(t[r++]=b>>>8,t[r++]=b&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),r=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const l=r>>2,i=r-l*4,s=new Uint32Array(t.buffer,0,l);let a=0,o=0,n=this.h1,c=this.h2;const d=3432918353,u=461845907,h=d&Tn,p=u&Tn;for(let m=0;m<l;m++)m&1?(a=s[m],a=a*d&qs|a*h&Tn,a=a<<15|a>>>17,a=a*u&qs|a*p&Tn,n^=a,n=n<<13|n>>>19,n=n*5+3864292196):(o=s[m],o=o*d&qs|o*h&Tn,o=o<<15|o>>>17,o=o*u&qs|o*p&Tn,c^=o,c=c<<13|c>>>19,c=c*5+3864292196);switch(a=0,i){case 3:a^=t[l*4+2]<<16;case 2:a^=t[l*4+1]<<8;case 1:a^=t[l*4],a=a*d&qs|a*h&Tn,a=a<<15|a>>>17,a=a*u&qs|a*p&Tn,l&1?n^=a:c^=a}this.h1=n,this.h2=c}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&qs|e*36045&Tn,t=t*4283543511&qs|((t<<16|e>>>16)*2950163797&qs)>>>16,e^=t>>>1,e=e*444984403&qs|e*60499&Tn,t=t*3301882366&qs|((t<<16|e>>>16)*3120437893&qs)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Dm=Object.freeze({map:null,hash:"",transfer:void 0});var ko,Eo,jr,tp,iy;class ng{constructor(){tt(this,tp);tt(this,ko,!1);tt(this,Eo,null);tt(this,jr,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const r=A(this,jr).get(e);return r===void 0?t:Object.assign(t,r)}getRawValue(e){return A(this,jr).get(e)}remove(e){if(A(this,jr).delete(e),A(this,jr).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of A(this,jr).values())if(t instanceof Je)return;this.onAnnotationEditor(null)}}setValue(e,t){const r=A(this,jr).get(e);let l=!1;if(r!==void 0)for(const[i,s]of Object.entries(t))r[i]!==s&&(l=!0,r[i]=s);else l=!0,A(this,jr).set(e,t);l&&et(this,tp,iy).call(this),t instanceof Je&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return A(this,jr).has(e)}get size(){return A(this,jr).size}resetModified(){A(this,ko)&&(K(this,ko,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new ay(this)}get serializable(){if(A(this,jr).size===0)return Dm;const e=new Map,t=new ny,r=[],l=Object.create(null);let i=!1;for(const[s,a]of A(this,jr)){const o=a instanceof Je?a.serialize(!1,l):a;o&&(e.set(s,o),t.update(`${s}:${JSON.stringify(o)}`),i||(i=!!o.bitmap))}if(i)for(const s of e.values())s.bitmap&&r.push(s.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:r}:Dm}get editorStats(){let e=null;const t=new Map;for(const r of A(this,jr).values()){if(!(r instanceof Je))continue;const l=r.telemetryFinalData;if(!l)continue;const{type:i}=l;t.has(i)||t.set(i,Object.getPrototypeOf(r).constructor),e||(e=Object.create(null));const s=e[i]||(e[i]=new Map);for(const[a,o]of Object.entries(l)){if(a==="type")continue;let n=s.get(a);n||(n=new Map,s.set(a,n));const c=n.get(o)??0;n.set(o,c+1)}}for(const[r,l]of t)e[r]=l.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){K(this,Eo,null)}get modifiedIds(){if(A(this,Eo))return A(this,Eo);const e=[];for(const t of A(this,jr).values())!(t instanceof Je)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return K(this,Eo,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return A(this,jr).entries()}}ko=new WeakMap,Eo=new WeakMap,jr=new WeakMap,tp=new WeakSet,iy=function(){A(this,ko)||(K(this,ko,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var ph;class ay extends ng{constructor(t){super();tt(this,ph);const{map:r,hash:l,transfer:i}=t.serializable,s=structuredClone(r,i?{transfer:i}:null);K(this,ph,{map:s,hash:l,transfer:i})}get print(){We("Should not call PrintAnnotationStorage.print")}get serializable(){return A(this,ph)}get modifiedIds(){return we(this,"modifiedIds",{ids:new Set,hash:""})}}ph=new WeakMap;var oc;class U3{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){tt(this,oc,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),A(this,oc).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:r}){if(!(!e||A(this,oc).has(e.loadedName))){if(br(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:l,src:i,style:s}=e,a=new FontFace(l,i,s);this.addNativeFontFace(a);try{await a.load(),A(this,oc).add(l),r==null||r(e)}catch{le(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}We("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(l){throw le(`Failed to load font '${r.family}': '${l}'.`),e.disableFontFace=!0,l}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const l=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,l)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return we(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return we(this,"isSyncFontLoadingSupported",cs||qr.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(br(!l.done,"completeRequest() cannot be called twice."),l.done=!0;r.length>0&&r[0].done;){const i=r.shift();setTimeout(i.callback,0)}}const{loadingRequests:r}=this,l={done:!1,complete:t,callback:e};return r.push(l),l}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return we(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function r(E,M){return E.charCodeAt(M)<<24|E.charCodeAt(M+1)<<16|E.charCodeAt(M+2)<<8|E.charCodeAt(M+3)&255}function l(E,M,D,z){const O=E.substring(0,M),N=E.substring(M+D);return O+z+N}let i,s;const a=this._document.createElement("canvas");a.width=1,a.height=1;const o=a.getContext("2d");let n=0;function c(E,M){if(++n>30){le("Load test font never loaded."),M();return}if(o.font="30px "+E,o.fillText(".",0,20),o.getImageData(0,0,1,1).data[3]>0){M();return}setTimeout(c.bind(null,E,M))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let u=this._loadTestFont;u=l(u,976,d.length,d);const p=16,m=1482184792;let f=r(u,p);for(i=0,s=d.length-3;i<s;i+=4)f=f-m+r(d,i)|0;i<d.length&&(f=f-m+r(d+"XXX",i)|0),u=l(u,p,4,C3(f));const b=`url(data:font/opentype;base64,${btoa(u)});`,y=`@font-face {font-family:"${d}";src:${b}}`;this.insertRule(y);const _=this._document.createElement("div");_.style.visibility="hidden",_.style.width=_.style.height="10px",_.style.position="absolute",_.style.top=_.style.left="0px";for(const E of[e.loadedName,d]){const M=this._document.createElement("span");M.textContent="Hi",M.style.fontFamily=E,_.append(M)}this._document.body.append(_),c(d,()=>{_.remove(),t.complete()})}}oc=new WeakMap;class V3{constructor(e,t=null){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this._inspectFont=t}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const r={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(r.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,r)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var r;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${C1(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let l=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(l+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${l}src:${e}}`}return(r=this._inspectFont)==null||r.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const r=this.loadedName+"_path_"+t;let l;try{l=e.get(r)}catch(s){le(`getPathGenerator - ignoring character: "${s}".`)}const i=new Path2D(l||"");return this.fontExtraProperties||e.delete(r),this.compiledGlyphs[t]=i}}function W3(g){if(g instanceof URL)return g.href;if(typeof g=="string"){if(cs)return g;const e=URL.parse(g,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function q3(g){if(cs&&typeof Buffer<"u"&&g instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(g instanceof Uint8Array&&g.byteLength===g.buffer.byteLength)return g;if(typeof g=="string")return _d(g);if(g instanceof ArrayBuffer||ArrayBuffer.isView(g)||typeof g=="object"&&!isNaN(g==null?void 0:g.length))return new Uint8Array(g);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Bd(g){if(typeof g!="string")return null;if(g.endsWith("/"))return g;throw new Error(`Invalid factory url: "${g}" must include trailing slash.`)}const Lm=g=>typeof g=="object"&&Number.isInteger(g==null?void 0:g.num)&&g.num>=0&&Number.isInteger(g==null?void 0:g.gen)&&g.gen>=0,X3=g=>typeof g=="object"&&typeof(g==null?void 0:g.name)=="string",G3=P3.bind(null,Lm,X3);var bi,ep;class K3{constructor(){tt(this,bi,new Map);tt(this,ep,Promise.resolve())}postMessage(e,t){const r={data:structuredClone(e,t?{transfer:t}:null)};A(this,ep).then(()=>{for(const[l]of A(this,bi))l.call(this,r)})}addEventListener(e,t,r=null){let l=null;if((r==null?void 0:r.signal)instanceof AbortSignal){const{signal:i}=r;if(i.aborted){le("LoopbackPort - cannot use an `aborted` signal.");return}const s=()=>this.removeEventListener(e,t);l=()=>i.removeEventListener("abort",s),i.addEventListener("abort",s)}A(this,bi).set(t,l)}removeEventListener(e,t){const r=A(this,bi).get(t);r==null||r(),A(this,bi).delete(t)}terminate(){for(const[,e]of A(this,bi))e==null||e();A(this,bi).clear()}}bi=new WeakMap,ep=new WeakMap;const zd={DATA:1,ERROR:2},fr={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function sb(){}function bs(g){if(g instanceof Ha||g instanceof gm||g instanceof Qg||g instanceof zf||g instanceof Gp)return g;switch(g instanceof Error||typeof g=="object"&&g!==null||We('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),g.name){case"AbortException":return new Ha(g.message);case"InvalidPDFException":return new gm(g.message);case"PasswordException":return new Qg(g.message,g.code);case"ResponseException":return new zf(g.message,g.status,g.missing);case"UnknownErrorException":return new Gp(g.message,g.details)}return new Gp(g.message,g.toString())}var lc,sn,oy,ly,cy,af;class fu{constructor(e,t,r){tt(this,sn);tt(this,lc,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",et(this,sn,oy).bind(this),{signal:A(this,lc).signal})}on(e,t){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){const l=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[l]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:l,data:t},r)}catch(s){i.reject(s)}return i.promise}sendWithStream(e,t,r,l){const i=this.streamId++,s=this.sourceName,a=this.targetName,o=this.comObj;return new ReadableStream({start:n=>{const c=Promise.withResolvers();return this.streamControllers[i]={controller:n,startCall:c,pullCall:null,cancelCall:null,isClosed:!1},o.postMessage({sourceName:s,targetName:a,action:e,streamId:i,data:t,desiredSize:n.desiredSize},l),c.promise},pull:n=>{const c=Promise.withResolvers();return this.streamControllers[i].pullCall=c,o.postMessage({sourceName:s,targetName:a,stream:fr.PULL,streamId:i,desiredSize:n.desiredSize}),c.promise},cancel:n=>{br(n instanceof Error,"cancel must have a valid reason");const c=Promise.withResolvers();return this.streamControllers[i].cancelCall=c,this.streamControllers[i].isClosed=!0,o.postMessage({sourceName:s,targetName:a,stream:fr.CANCEL,streamId:i,reason:bs(n)}),c.promise}},r)}destroy(){var e;(e=A(this,lc))==null||e.abort(),K(this,lc,null)}}lc=new WeakMap,sn=new WeakSet,oy=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){et(this,sn,cy).call(this,e);return}if(e.callback){const r=e.callbackId,l=this.callbackCapabilities[r];if(!l)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===zd.DATA)l.resolve(e.data);else if(e.callback===zd.ERROR)l.reject(bs(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,l=e.sourceName,i=this.comObj;Promise.try(t,e.data).then(function(s){i.postMessage({sourceName:r,targetName:l,callback:zd.DATA,callbackId:e.callbackId,data:s})},function(s){i.postMessage({sourceName:r,targetName:l,callback:zd.ERROR,callbackId:e.callbackId,reason:bs(s)})});return}if(e.streamId){et(this,sn,ly).call(this,e);return}t(e.data)},ly=function(e){const t=e.streamId,r=this.sourceName,l=e.sourceName,i=this.comObj,s=this,a=this.actionHandler[e.action],o={enqueue(n,c=1,d){if(this.isCancelled)return;const u=this.desiredSize;this.desiredSize-=c,u>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:r,targetName:l,stream:fr.ENQUEUE,streamId:t,chunk:n},d)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:l,stream:fr.CLOSE,streamId:t}),delete s.streamSinks[t])},error(n){br(n instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:l,stream:fr.ERROR,streamId:t,reason:bs(n)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[t]=o,Promise.try(a,e.data,o).then(function(){i.postMessage({sourceName:r,targetName:l,stream:fr.START_COMPLETE,streamId:t,success:!0})},function(n){i.postMessage({sourceName:r,targetName:l,stream:fr.START_COMPLETE,streamId:t,reason:bs(n)})})},cy=function(e){const t=e.streamId,r=this.sourceName,l=e.sourceName,i=this.comObj,s=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case fr.START_COMPLETE:e.success?s.startCall.resolve():s.startCall.reject(bs(e.reason));break;case fr.PULL_COMPLETE:e.success?s.pullCall.resolve():s.pullCall.reject(bs(e.reason));break;case fr.PULL:if(!a){i.postMessage({sourceName:r,targetName:l,stream:fr.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||sb).then(function(){i.postMessage({sourceName:r,targetName:l,stream:fr.PULL_COMPLETE,streamId:t,success:!0})},function(n){i.postMessage({sourceName:r,targetName:l,stream:fr.PULL_COMPLETE,streamId:t,reason:bs(n)})});break;case fr.ENQUEUE:if(br(s,"enqueue should have stream controller"),s.isClosed)break;s.controller.enqueue(e.chunk);break;case fr.CLOSE:if(br(s,"close should have stream controller"),s.isClosed)break;s.isClosed=!0,s.controller.close(),et(this,sn,af).call(this,s,t);break;case fr.ERROR:br(s,"error should have stream controller"),s.controller.error(bs(e.reason)),et(this,sn,af).call(this,s,t);break;case fr.CANCEL_COMPLETE:e.success?s.cancelCall.resolve():s.cancelCall.reject(bs(e.reason)),et(this,sn,af).call(this,s,t);break;case fr.CANCEL:if(!a)break;const o=bs(e.reason);Promise.try(a.onCancel||sb,o).then(function(){i.postMessage({sourceName:r,targetName:l,stream:fr.CANCEL_COMPLETE,streamId:t,success:!0})},function(n){i.postMessage({sourceName:r,targetName:l,stream:fr.CANCEL_COMPLETE,streamId:t,reason:bs(n)})}),a.sinkCapability.reject(o),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},af=async function(e,t){var r,l,i;await Promise.allSettled([(r=e.startCall)==null?void 0:r.promise,(l=e.pullCall)==null?void 0:l.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var mh;class uy{constructor({enableHWA:e=!1}){tt(this,mh,!1);K(this,mh,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,t);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!A(this,mh)})}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){We("Abstract method `_createCanvas` called.")}}mh=new WeakMap;class Y3 extends uy{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const r=this._document.createElement("canvas");return r.width=e,r.height=t,r}}class hy{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){We("Abstract method `_fetch` called.")}}class nb extends hy{async _fetch(e){const t=await xd(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):_d(t)}}class dy{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,r,l,i){return"none"}destroy(e=!1){}}var Co,cc,yi,vi,Yr,To,Mo,Ft,Gr,pu,Tl,of,Ml,fy,Fm,Rl,mu,gu,jm,bu;class Z3 extends dy{constructor({docId:t,ownerDocument:r=globalThis.document}){super();tt(this,Ft);tt(this,Co);tt(this,cc);tt(this,yi);tt(this,vi);tt(this,Yr);tt(this,To);tt(this,Mo,0);K(this,vi,t),K(this,Yr,r)}addFilter(t){if(!t)return"none";let r=A(this,Ft,Gr).get(t);if(r)return r;const[l,i,s]=et(this,Ft,of).call(this,t),a=t.length===1?l:`${l}${i}${s}`;if(r=A(this,Ft,Gr).get(a),r)return A(this,Ft,Gr).set(t,r),r;const o=`g_${A(this,vi)}_transfer_map_${rs(this,Mo)._++}`,n=et(this,Ft,Ml).call(this,o);A(this,Ft,Gr).set(t,n),A(this,Ft,Gr).set(a,n);const c=et(this,Ft,Rl).call(this,o);return et(this,Ft,gu).call(this,l,i,s,c),n}addHCMFilter(t,r){var p;const l=`${t}-${r}`,i="base";let s=A(this,Ft,pu).get(i);if((s==null?void 0:s.key)===l||(s?((p=s.filter)==null||p.remove(),s.key=l,s.url="none",s.filter=null):(s={key:l,url:"none",filter:null},A(this,Ft,pu).set(i,s)),!t||!r))return s.url;const a=et(this,Ft,bu).call(this,t);t=Wt.makeHexColor(...a);const o=et(this,Ft,bu).call(this,r);if(r=Wt.makeHexColor(...o),A(this,Ft,Tl).style.color="",t==="#000000"&&r==="#ffffff"||t===r)return s.url;const n=new Array(256);for(let m=0;m<=255;m++){const f=m/255;n[m]=f<=.03928?f/12.92:((f+.055)/1.055)**2.4}const c=n.join(","),d=`g_${A(this,vi)}_hcm_filter`,u=s.filter=et(this,Ft,Rl).call(this,d);et(this,Ft,gu).call(this,c,c,c,u),et(this,Ft,Fm).call(this,u);const h=(m,f)=>{const b=a[m]/255,y=o[m]/255,_=new Array(f+1);for(let E=0;E<=f;E++)_[E]=b+E/f*(y-b);return _.join(",")};return et(this,Ft,gu).call(this,h(0,5),h(1,5),h(2,5),u),s.url=et(this,Ft,Ml).call(this,d),s.url}addAlphaFilter(t){let r=A(this,Ft,Gr).get(t);if(r)return r;const[l]=et(this,Ft,of).call(this,[t]),i=`alpha_${l}`;if(r=A(this,Ft,Gr).get(i),r)return A(this,Ft,Gr).set(t,r),r;const s=`g_${A(this,vi)}_alpha_map_${rs(this,Mo)._++}`,a=et(this,Ft,Ml).call(this,s);A(this,Ft,Gr).set(t,a),A(this,Ft,Gr).set(i,a);const o=et(this,Ft,Rl).call(this,s);return et(this,Ft,jm).call(this,l,o),a}addLuminosityFilter(t){let r=A(this,Ft,Gr).get(t||"luminosity");if(r)return r;let l,i;if(t?([l]=et(this,Ft,of).call(this,[t]),i=`luminosity_${l}`):i="luminosity",r=A(this,Ft,Gr).get(i),r)return A(this,Ft,Gr).set(t,r),r;const s=`g_${A(this,vi)}_luminosity_map_${rs(this,Mo)._++}`,a=et(this,Ft,Ml).call(this,s);A(this,Ft,Gr).set(t,a),A(this,Ft,Gr).set(i,a);const o=et(this,Ft,Rl).call(this,s);return et(this,Ft,fy).call(this,o),t&&et(this,Ft,jm).call(this,l,o),a}addHighlightHCMFilter(t,r,l,i,s){var y;const a=`${r}-${l}-${i}-${s}`;let o=A(this,Ft,pu).get(t);if((o==null?void 0:o.key)===a||(o?((y=o.filter)==null||y.remove(),o.key=a,o.url="none",o.filter=null):(o={key:a,url:"none",filter:null},A(this,Ft,pu).set(t,o)),!r||!l))return o.url;const[n,c]=[r,l].map(et(this,Ft,bu).bind(this));let d=Math.round(.2126*n[0]+.7152*n[1]+.0722*n[2]),u=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[h,p]=[i,s].map(et(this,Ft,bu).bind(this));u<d&&([d,u,h,p]=[u,d,p,h]),A(this,Ft,Tl).style.color="";const m=(_,E,M)=>{const D=new Array(256),z=(u-d)/M,O=_/255,N=(E-_)/(255*M);let B=0;for(let H=0;H<=M;H++){const $=Math.round(d+H*z),C=O+H*N;for(let R=B;R<=$;R++)D[R]=C;B=$+1}for(let H=B;H<256;H++)D[H]=D[B-1];return D.join(",")},f=`g_${A(this,vi)}_hcm_${t}_filter`,b=o.filter=et(this,Ft,Rl).call(this,f);return et(this,Ft,Fm).call(this,b),et(this,Ft,gu).call(this,m(h[0],p[0],5),m(h[1],p[1],5),m(h[2],p[2],5),b),o.url=et(this,Ft,Ml).call(this,f),o.url}destroy(t=!1){var r,l,i,s;t&&((r=A(this,To))!=null&&r.size)||((l=A(this,yi))==null||l.parentNode.parentNode.remove(),K(this,yi,null),(i=A(this,cc))==null||i.clear(),K(this,cc,null),(s=A(this,To))==null||s.clear(),K(this,To,null),K(this,Mo,0))}}Co=new WeakMap,cc=new WeakMap,yi=new WeakMap,vi=new WeakMap,Yr=new WeakMap,To=new WeakMap,Mo=new WeakMap,Ft=new WeakSet,Gr=function(){return A(this,cc)||K(this,cc,new Map)},pu=function(){return A(this,To)||K(this,To,new Map)},Tl=function(){if(!A(this,yi)){const t=A(this,Yr).createElement("div"),{style:r}=t;r.visibility="hidden",r.contain="strict",r.width=r.height=0,r.position="absolute",r.top=r.left=0,r.zIndex=-1;const l=A(this,Yr).createElementNS(ri,"svg");l.setAttribute("width",0),l.setAttribute("height",0),K(this,yi,A(this,Yr).createElementNS(ri,"defs")),t.append(l),l.append(A(this,yi)),A(this,Yr).body.append(t)}return A(this,yi)},of=function(t){if(t.length===1){const n=t[0],c=new Array(256);for(let u=0;u<256;u++)c[u]=n[u]/255;const d=c.join(",");return[d,d,d]}const[r,l,i]=t,s=new Array(256),a=new Array(256),o=new Array(256);for(let n=0;n<256;n++)s[n]=r[n]/255,a[n]=l[n]/255,o[n]=i[n]/255;return[s.join(","),a.join(","),o.join(",")]},Ml=function(t){if(A(this,Co)===void 0){K(this,Co,"");const r=A(this,Yr).URL;r!==A(this,Yr).baseURI&&(Tp(r)?le('#createUrl: ignore "data:"-URL for performance reasons.'):K(this,Co,A1(r,"")))}return`url(${A(this,Co)}#${t})`},fy=function(t){const r=A(this,Yr).createElementNS(ri,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(r)},Fm=function(t){const r=A(this,Yr).createElementNS(ri,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(r)},Rl=function(t){const r=A(this,Yr).createElementNS(ri,"filter");return r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("id",t),A(this,Ft,Tl).append(r),r},mu=function(t,r,l){const i=A(this,Yr).createElementNS(ri,r);i.setAttribute("type","discrete"),i.setAttribute("tableValues",l),t.append(i)},gu=function(t,r,l,i){const s=A(this,Yr).createElementNS(ri,"feComponentTransfer");i.append(s),et(this,Ft,mu).call(this,s,"feFuncR",t),et(this,Ft,mu).call(this,s,"feFuncG",r),et(this,Ft,mu).call(this,s,"feFuncB",l)},jm=function(t,r){const l=A(this,Yr).createElementNS(ri,"feComponentTransfer");r.append(l),et(this,Ft,mu).call(this,l,"feFuncA",t)},bu=function(t){return A(this,Ft,Tl).style.color=t,sg(getComputedStyle(A(this,Ft,Tl)).getPropertyValue("color"))};class py{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){We("Abstract method `_fetch` called.")}}class ib extends py{async _fetch(e){const t=await xd(e,"arraybuffer");return new Uint8Array(t)}}class my{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){We("Abstract method `_fetch` called.")}}class ab extends my{async _fetch(e){const t=await xd(e,"arraybuffer");return new Uint8Array(t)}}cs&&le("Please use the `legacy` build in Node.js environments.");async function ig(g){const t=await process.getBuiltinModule("fs").promises.readFile(g);return new Uint8Array(t)}class J3 extends dy{}class Q3 extends uy{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class t_ extends hy{async _fetch(e){return ig(e)}}class e_ extends py{async _fetch(e){return ig(e)}}class r_ extends my{async _fetch(e){return ig(e)}}const $r={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Bm(g,e){if(!e)return;const t=e[2]-e[0],r=e[3]-e[1],l=new Path2D;l.rect(e[0],e[1],t,r),g.clip(l)}class ag{isModifyingCurrentTransform(){return!1}getPattern(){We("Abstract method `getPattern` called.")}}class s_ extends ag{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)t.addColorStop(r[0],r[1]);return t}getPattern(e,t,r,l){let i;if(l===$r.STROKE||l===$r.FILL){const s=t.current.getClippedPathBoundingBox(l,ar(e))||[0,0,0,0],a=Math.ceil(s[2]-s[0])||1,o=Math.ceil(s[3]-s[1])||1,n=t.cachedCanvases.getCanvas("pattern",a,o),c=n.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-s[0],-s[1]),r=Wt.transform(r,[1,0,0,1,s[0],s[1]]),c.transform(...t.baseTransform),this.matrix&&c.transform(...this.matrix),Bm(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),i=e.createPattern(n.canvas,"no-repeat");const d=new DOMMatrix(r);i.setTransform(d)}else Bm(e,this._bbox),i=this._createGradient(e);return i}}function Zp(g,e,t,r,l,i,s,a){const o=e.coords,n=e.colors,c=g.data,d=g.width*4;let u;o[t+1]>o[r+1]&&(u=t,t=r,r=u,u=i,i=s,s=u),o[r+1]>o[l+1]&&(u=r,r=l,l=u,u=s,s=a,a=u),o[t+1]>o[r+1]&&(u=t,t=r,r=u,u=i,i=s,s=u);const h=(o[t]+e.offsetX)*e.scaleX,p=(o[t+1]+e.offsetY)*e.scaleY,m=(o[r]+e.offsetX)*e.scaleX,f=(o[r+1]+e.offsetY)*e.scaleY,b=(o[l]+e.offsetX)*e.scaleX,y=(o[l+1]+e.offsetY)*e.scaleY;if(p>=y)return;const _=n[i],E=n[i+1],M=n[i+2],D=n[s],z=n[s+1],O=n[s+2],N=n[a],B=n[a+1],H=n[a+2],$=Math.round(p),C=Math.round(y);let R,k,v,w,x,S,T,L;for(let j=$;j<=C;j++){if(j<f){const X=j<p?0:(p-j)/(p-f);R=h-(h-m)*X,k=_-(_-D)*X,v=E-(E-z)*X,w=M-(M-O)*X}else{let X;j>y?X=1:f===y?X=0:X=(f-j)/(f-y),R=m-(m-b)*X,k=D-(D-N)*X,v=z-(z-B)*X,w=O-(O-H)*X}let U;j<p?U=0:j>y?U=1:U=(p-j)/(p-y),x=h-(h-b)*U,S=_-(_-N)*U,T=E-(E-B)*U,L=M-(M-H)*U;const W=Math.round(Math.min(R,x)),Y=Math.round(Math.max(R,x));let F=d*j+W*4;for(let X=W;X<=Y;X++)U=(R-X)/(R-x),U<0?U=0:U>1&&(U=1),c[F++]=k-(k-S)*U|0,c[F++]=v-(v-T)*U|0,c[F++]=w-(w-L)*U|0,c[F++]=255}}function n_(g,e,t){const r=e.coords,l=e.colors;let i,s;switch(e.type){case"lattice":const a=e.verticesPerRow,o=Math.floor(r.length/a)-1,n=a-1;for(i=0;i<o;i++){let c=i*a;for(let d=0;d<n;d++,c++)Zp(g,t,r[c],r[c+1],r[c+a],l[c],l[c+1],l[c+a]),Zp(g,t,r[c+a+1],r[c+1],r[c+a],l[c+a+1],l[c+1],l[c+a])}break;case"triangles":for(i=0,s=r.length;i<s;i+=3)Zp(g,t,r[i],r[i+1],r[i+2],l[i],l[i+1],l[i+2]);break;default:throw new Error("illegal figure")}}class i_ extends ag{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,r){const a=Math.floor(this._bounds[0]),o=Math.floor(this._bounds[1]),n=Math.ceil(this._bounds[2])-a,c=Math.ceil(this._bounds[3])-o,d=Math.min(Math.ceil(Math.abs(n*e[0]*1.1)),3e3),u=Math.min(Math.ceil(Math.abs(c*e[1]*1.1)),3e3),h=n/d,p=c/u,m={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-o,scaleX:1/h,scaleY:1/p},f=d+2*2,b=u+2*2,y=r.getCanvas("mesh",f,b),_=y.context,E=_.createImageData(d,u);if(t){const D=E.data;for(let z=0,O=D.length;z<O;z+=4)D[z]=t[0],D[z+1]=t[1],D[z+2]=t[2],D[z+3]=255}for(const D of this._figures)n_(E,D,m);return _.putImageData(E,2,2),{canvas:y.canvas,offsetX:a-2*h,offsetY:o-2*p,scaleX:h,scaleY:p}}isModifyingCurrentTransform(){return!0}getPattern(e,t,r,l){Bm(e,this._bbox);const i=new Float32Array(2);if(l===$r.SHADING)Wt.singularValueDecompose2dScale(ar(e),i);else if(this.matrix){Wt.singularValueDecompose2dScale(this.matrix,i);const[a,o]=i;Wt.singularValueDecompose2dScale(t.baseTransform,i),i[0]*=a,i[1]*=o}else Wt.singularValueDecompose2dScale(t.baseTransform,i);const s=this._createMeshCanvas(i,l===$r.SHADING?null:this._background,t.cachedCanvases);return l!==$r.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(s.offsetX,s.offsetY),e.scale(s.scaleX,s.scaleY),e.createPattern(s.canvas,"no-repeat")}}class a_ extends ag{getPattern(){return"hotpink"}}function o_(g){switch(g[0]){case"RadialAxial":return new s_(g);case"Mesh":return new i_(g);case"Dummy":return new a_}throw new Error(`Unknown IR type: ${g[0]}`)}const ob={COLORED:1,UNCOLORED:2},rp=class rp{constructor(e,t,r,l){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=r,this.baseTransform=l}createPatternCanvas(e){const{bbox:t,operatorList:r,paintType:l,tilingType:i,color:s,canvasGraphicsFactory:a}=this;let{xstep:o,ystep:n}=this;o=Math.abs(o),n=Math.abs(n),Cp("TilingType: "+i);const c=t[0],d=t[1],u=t[2],h=t[3],p=u-c,m=h-d,f=new Float32Array(2);Wt.singularValueDecompose2dScale(this.matrix,f);const[b,y]=f;Wt.singularValueDecompose2dScale(this.baseTransform,f);const _=b*f[0],E=y*f[1];let M=p,D=m,z=!1,O=!1;const N=Math.ceil(o*_),B=Math.ceil(n*E),H=Math.ceil(p*_),$=Math.ceil(m*E);N>=H?M=o:z=!0,B>=$?D=n:O=!0;const C=this.getSizeAndScale(M,this.ctx.canvas.width,_),R=this.getSizeAndScale(D,this.ctx.canvas.height,E),k=e.cachedCanvases.getCanvas("pattern",C.size,R.size),v=k.context,w=a.createCanvasGraphics(v);if(w.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(w,l,s),v.translate(-C.scale*c,-R.scale*d),w.transform(C.scale,0,0,R.scale,0,0),v.save(),this.clipBbox(w,c,d,u,h),w.baseTransform=ar(w.ctx),w.executeOperatorList(r),w.endDrawing(),v.restore(),z||O){const x=k.canvas;z&&(M=o),O&&(D=n);const S=this.getSizeAndScale(M,this.ctx.canvas.width,_),T=this.getSizeAndScale(D,this.ctx.canvas.height,E),L=S.size,j=T.size,U=e.cachedCanvases.getCanvas("pattern-workaround",L,j),W=U.context,Y=z?Math.floor(p/o):0,F=O?Math.floor(m/n):0;for(let X=0;X<=Y;X++)for(let P=0;P<=F;P++)W.drawImage(x,L*X,j*P,L,j,0,0,L,j);return{canvas:U.canvas,scaleX:S.scale,scaleY:T.scale,offsetX:c,offsetY:d}}return{canvas:k.canvas,scaleX:C.scale,scaleY:R.scale,offsetX:c,offsetY:d}}getSizeAndScale(e,t,r){const l=Math.max(rp.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*r);return i>=l?i=l:r=i/e,{scale:r,size:i}}clipBbox(e,t,r,l,i){const s=l-t,a=i-r;e.ctx.rect(t,r,s,a),Wt.axialAlignedBoundingBox([t,r,l,i],ar(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,r){const l=e.ctx,i=e.current;switch(t){case ob.COLORED:const{fillStyle:s,strokeStyle:a}=this.ctx;l.fillStyle=i.fillColor=s,l.strokeStyle=i.strokeColor=a;break;case ob.UNCOLORED:l.fillStyle=l.strokeStyle=r,i.fillColor=i.strokeColor=r;break;default:throw new E3(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,r,l){let i=r;l!==$r.SHADING&&(i=Wt.transform(i,t.baseTransform),this.matrix&&(i=Wt.transform(i,this.matrix)));const s=this.createPatternCanvas(t);let a=new DOMMatrix(i);a=a.translate(s.offsetX,s.offsetY),a=a.scale(1/s.scaleX,1/s.scaleY);const o=e.createPattern(s.canvas,"repeat");return o.setTransform(a),o}};At(rp,"MAX_PATTERN_SIZE",3e3);let zm=rp;function l_({src:g,srcPos:e=0,dest:t,width:r,height:l,nonBlackColor:i=4294967295,inverseDecode:s=!1}){const a=qr.isLittleEndian?4278190080:255,[o,n]=s?[i,a]:[a,i],c=r>>3,d=r&7,u=g.length;t=new Uint32Array(t.buffer);let h=0;for(let p=0;p<l;p++){for(const f=e+c;e<f;e++){const b=e<u?g[e]:255;t[h++]=b&128?n:o,t[h++]=b&64?n:o,t[h++]=b&32?n:o,t[h++]=b&16?n:o,t[h++]=b&8?n:o,t[h++]=b&4?n:o,t[h++]=b&2?n:o,t[h++]=b&1?n:o}if(d===0)continue;const m=e<u?g[e++]:255;for(let f=0;f<d;f++)t[h++]=m&1<<7-f?n:o}return{srcPos:e,destPos:h}}const lb=16,cb=100,c_=15,ub=10,Ss=16,Jp=new DOMMatrix,Hs=new Float32Array(2),Nl=new Float32Array([1/0,1/0,-1/0,-1/0]);function u_(g,e){if(g._removeMirroring)throw new Error("Context is already forwarding operations.");g.__originalSave=g.save,g.__originalRestore=g.restore,g.__originalRotate=g.rotate,g.__originalScale=g.scale,g.__originalTranslate=g.translate,g.__originalTransform=g.transform,g.__originalSetTransform=g.setTransform,g.__originalResetTransform=g.resetTransform,g.__originalClip=g.clip,g.__originalMoveTo=g.moveTo,g.__originalLineTo=g.lineTo,g.__originalBezierCurveTo=g.bezierCurveTo,g.__originalRect=g.rect,g.__originalClosePath=g.closePath,g.__originalBeginPath=g.beginPath,g._removeMirroring=()=>{g.save=g.__originalSave,g.restore=g.__originalRestore,g.rotate=g.__originalRotate,g.scale=g.__originalScale,g.translate=g.__originalTranslate,g.transform=g.__originalTransform,g.setTransform=g.__originalSetTransform,g.resetTransform=g.__originalResetTransform,g.clip=g.__originalClip,g.moveTo=g.__originalMoveTo,g.lineTo=g.__originalLineTo,g.bezierCurveTo=g.__originalBezierCurveTo,g.rect=g.__originalRect,g.closePath=g.__originalClosePath,g.beginPath=g.__originalBeginPath,delete g._removeMirroring},g.save=function(){e.save(),this.__originalSave()},g.restore=function(){e.restore(),this.__originalRestore()},g.translate=function(t,r){e.translate(t,r),this.__originalTranslate(t,r)},g.scale=function(t,r){e.scale(t,r),this.__originalScale(t,r)},g.transform=function(t,r,l,i,s,a){e.transform(t,r,l,i,s,a),this.__originalTransform(t,r,l,i,s,a)},g.setTransform=function(t,r,l,i,s,a){e.setTransform(t,r,l,i,s,a),this.__originalSetTransform(t,r,l,i,s,a)},g.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},g.rotate=function(t){e.rotate(t),this.__originalRotate(t)},g.clip=function(t){e.clip(t),this.__originalClip(t)},g.moveTo=function(t,r){e.moveTo(t,r),this.__originalMoveTo(t,r)},g.lineTo=function(t,r){e.lineTo(t,r),this.__originalLineTo(t,r)},g.bezierCurveTo=function(t,r,l,i,s,a){e.bezierCurveTo(t,r,l,i,s,a),this.__originalBezierCurveTo(t,r,l,i,s,a)},g.rect=function(t,r,l,i){e.rect(t,r,l,i),this.__originalRect(t,r,l,i)},g.closePath=function(){e.closePath(),this.__originalClosePath()},g.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class h_{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r){let l;return this.cache[e]!==void 0?(l=this.cache[e],this.canvasFactory.reset(l,t,r)):(l=this.canvasFactory.create(t,r),this.cache[e]=l),l}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function $d(g,e,t,r,l,i,s,a,o,n){const[c,d,u,h,p,m]=ar(g);if(d===0&&u===0){const y=s*c+p,_=Math.round(y),E=a*h+m,M=Math.round(E),D=(s+o)*c+p,z=Math.abs(Math.round(D)-_)||1,O=(a+n)*h+m,N=Math.abs(Math.round(O)-M)||1;return g.setTransform(Math.sign(c),0,0,Math.sign(h),_,M),g.drawImage(e,t,r,l,i,0,0,z,N),g.setTransform(c,d,u,h,p,m),[z,N]}if(c===0&&h===0){const y=a*u+p,_=Math.round(y),E=s*d+m,M=Math.round(E),D=(a+n)*u+p,z=Math.abs(Math.round(D)-_)||1,O=(s+o)*d+m,N=Math.abs(Math.round(O)-M)||1;return g.setTransform(0,Math.sign(d),Math.sign(u),0,_,M),g.drawImage(e,t,r,l,i,0,0,N,z),g.setTransform(c,d,u,h,p,m),[N,z]}g.drawImage(e,t,r,l,i,s,a,o,n);const f=Math.hypot(c,d),b=Math.hypot(u,h);return[f*o,b*n]}class hb{constructor(e,t){At(this,"alphaIsShape",!1);At(this,"fontSize",0);At(this,"fontSizeScale",1);At(this,"textMatrix",null);At(this,"textMatrixScale",1);At(this,"fontMatrix",mm);At(this,"leading",0);At(this,"x",0);At(this,"y",0);At(this,"lineX",0);At(this,"lineY",0);At(this,"charSpacing",0);At(this,"wordSpacing",0);At(this,"textHScale",1);At(this,"textRenderingMode",Xr.FILL);At(this,"textRise",0);At(this,"fillColor","#000000");At(this,"strokeColor","#000000");At(this,"patternFill",!1);At(this,"patternStroke",!1);At(this,"fillAlpha",1);At(this,"strokeAlpha",1);At(this,"lineWidth",1);At(this,"activeSMask",null);At(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Nl.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=$r.FILL,t=null){const r=this.minMax.slice();if(e===$r.STROKE){t||We("Stroke bounding box must include transform."),Wt.singularValueDecompose2dScale(t,Hs);const l=Hs[0]*this.lineWidth/2,i=Hs[1]*this.lineWidth/2;r[0]-=l,r[1]-=i,r[2]+=l,r[3]+=i}return r}updateClipFromPath(){const e=Wt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Nl,0)}getClippedPathBoundingBox(e=$r.FILL,t=null){return Wt.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function db(g,e){if(e instanceof ImageData){g.putImageData(e,0,0);return}const t=e.height,r=e.width,l=t%Ss,i=(t-l)/Ss,s=l===0?i:i+1,a=g.createImageData(r,Ss);let o=0,n;const c=e.data,d=a.data;let u,h,p,m;if(e.kind===Yd.GRAYSCALE_1BPP){const f=c.byteLength,b=new Uint32Array(d.buffer,0,d.byteLength>>2),y=b.length,_=r+7>>3,E=4294967295,M=qr.isLittleEndian?4278190080:255;for(u=0;u<s;u++){for(p=u<i?Ss:l,n=0,h=0;h<p;h++){const D=f-o;let z=0;const O=D>_?r:D*8-7,N=O&-8;let B=0,H=0;for(;z<N;z+=8)H=c[o++],b[n++]=H&128?E:M,b[n++]=H&64?E:M,b[n++]=H&32?E:M,b[n++]=H&16?E:M,b[n++]=H&8?E:M,b[n++]=H&4?E:M,b[n++]=H&2?E:M,b[n++]=H&1?E:M;for(;z<O;z++)B===0&&(H=c[o++],B=128),b[n++]=H&B?E:M,B>>=1}for(;n<y;)b[n++]=0;g.putImageData(a,0,u*Ss)}}else if(e.kind===Yd.RGBA_32BPP){for(h=0,m=r*Ss*4,u=0;u<i;u++)d.set(c.subarray(o,o+m)),o+=m,g.putImageData(a,0,h),h+=Ss;u<s&&(m=r*l*4,d.set(c.subarray(o,o+m)),g.putImageData(a,0,h))}else if(e.kind===Yd.RGB_24BPP)for(p=Ss,m=r*p,u=0;u<s;u++){for(u>=i&&(p=l,m=r*p),n=0,h=m;h--;)d[n++]=c[o++],d[n++]=c[o++],d[n++]=c[o++],d[n++]=255;g.putImageData(a,0,u*Ss)}else throw new Error(`bad image kind: ${e.kind}`)}function fb(g,e){if(e.bitmap){g.drawImage(e.bitmap,0,0);return}const t=e.height,r=e.width,l=t%Ss,i=(t-l)/Ss,s=l===0?i:i+1,a=g.createImageData(r,Ss);let o=0;const n=e.data,c=a.data;for(let d=0;d<s;d++){const u=d<i?Ss:l;({srcPos:o}=l_({src:n,srcPos:o,dest:c,width:r,height:u,nonBlackColor:0})),g.putImageData(a,0,d*Ss)}}function su(g,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of t)g[r]!==void 0&&(e[r]=g[r]);g.setLineDash!==void 0&&(e.setLineDash(g.getLineDash()),e.lineDashOffset=g.lineDashOffset)}function Hd(g){g.strokeStyle=g.fillStyle="#000000",g.fillRule="nonzero",g.globalAlpha=1,g.lineWidth=1,g.lineCap="butt",g.lineJoin="miter",g.miterLimit=10,g.globalCompositeOperation="source-over",g.font="10px sans-serif",g.setLineDash!==void 0&&(g.setLineDash([]),g.lineDashOffset=0);const{filter:e}=g;e!=="none"&&e!==""&&(g.filter="none")}function pb(g,e){if(e)return!0;Wt.singularValueDecompose2dScale(g,Hs);const t=Math.fround(Jn.pixelRatio*Ua.PDF_TO_CSS_UNITS);return Hs[0]<=t&&Hs[1]<=t}const d_=["butt","round","square"],f_=["miter","round","bevel"],p_={},mb={};var kn,$m,Hm,Um;const mg=class mg{constructor(e,t,r,l,i,{optionalContentConfig:s,markedContentStack:a=null},o,n){tt(this,kn);this.ctx=e,this.current=new hb(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=l,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=s,this.cachedCanvases=new h_(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=o,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=n,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:l=null}){const i=this.ctx.canvas.width,s=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=l||"#ffffff",this.ctx.fillRect(0,0,i,s),this.ctx.fillStyle=a,r){const o=this.cachedCanvases.getCanvas("transparent",i,s);this.compositeCtx=this.ctx,this.transparentCanvas=o.canvas,this.ctx=o.context,this.ctx.save(),this.ctx.transform(...ar(this.compositeCtx))}this.ctx.save(),Hd(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=ar(this.ctx)}executeOperatorList(e,t,r,l){const i=e.argsArray,s=e.fnArray;let a=t||0;const o=i.length;if(o===a)return a;const n=o-a>ub&&typeof r=="function",c=n?Date.now()+c_:0;let d=0;const u=this.commonObjs,h=this.objs;let p;for(;;){if(l!==void 0&&a===l.nextBreakPoint)return l.breakIt(a,r),a;if(p=s[a],p!==Bf.dependency)this[p].apply(this,i[a]);else for(const m of i[a]){const f=m.startsWith("g_")?u:h;if(!f.has(m))return f.get(m,r),a}if(a++,a===o)return a;if(n&&++d>ub){if(Date.now()>c)return r(),a;d=0}}}endDrawing(){et(this,kn,$m).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),et(this,kn,Hm).call(this)}_scaleImage(e,t){const r=e.width??e.displayWidth,l=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),s=Math.max(Math.hypot(t[2],t[3]),1),a=r,o=l,n="prescale1",c,d;for(;i>2&&a>1||s>2&&o>1;){let u=a,h=o;i>2&&a>1&&(u=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),i/=a/u),s>2&&o>1&&(h=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o)/2,s/=o/h),c=this.cachedCanvases.getCanvas(n,u,h),d=c.context,d.clearRect(0,0,u,h),d.drawImage(e,0,0,a,o,0,0,u,h),e=c.canvas,a=u,o=h,n=n==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:o}}_createMaskCanvas(e){const t=this.ctx,{width:r,height:l}=e,i=this.current.fillColor,s=this.current.patternFill,a=ar(t);let o,n,c,d;if((e.bitmap||e.data)&&e.count>1){const N=e.bitmap||e.data.buffer;n=JSON.stringify(s?a:[a.slice(0,4),i]),o=this._cachedBitmapsMap.get(N),o||(o=new Map,this._cachedBitmapsMap.set(N,o));const B=o.get(n);if(B&&!s){const H=Math.round(Math.min(a[0],a[2])+a[4]),$=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:B,offsetX:H,offsetY:$}}c=B}c||(d=this.cachedCanvases.getCanvas("maskCanvas",r,l),fb(d.context,e));let u=Wt.transform(a,[1/r,0,0,-1/l,0,0]);u=Wt.transform(u,[1,0,0,1,0,-l]);const h=Nl.slice();Wt.axialAlignedBoundingBox([0,0,r,l],u,h);const[p,m,f,b]=h,y=Math.round(f-p)||1,_=Math.round(b-m)||1,E=this.cachedCanvases.getCanvas("fillCanvas",y,_),M=E.context,D=p,z=m;M.translate(-D,-z),M.transform(...u),c||(c=this._scaleImage(d.canvas,Cn(M)),c=c.img,o&&s&&o.set(n,c)),M.imageSmoothingEnabled=pb(ar(M),e.interpolate),$d(M,c,0,0,c.width,c.height,0,0,r,l),M.globalCompositeOperation="source-in";const O=Wt.transform(Cn(M),[1,0,0,1,-D,-z]);return M.fillStyle=s?i.getPattern(t,this,O,$r.FILL):i,M.fillRect(0,0,r,l),o&&!s&&(this.cachedCanvases.delete("fillCanvas"),o.set(n,E.canvas)),{canvas:E.canvas,offsetX:Math.round(D),offsetY:Math.round(z)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=d_[e]}setLineJoin(e){this.ctx.lineJoin=f_[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,r]of e)switch(t){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r[0],r[1]);break;case"CA":this.current.strokeAlpha=r;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=r;break;case"BM":this.ctx.globalCompositeOperation=r;break;case"SMask":this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,l=this.cachedCanvases.getCanvas(r,e,t);this.suspendedCtx=this.ctx;const i=this.ctx=l.context;i.setTransform(this.suspendedCtx.getTransform()),su(this.suspendedCtx,i),u_(i,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),su(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,r,l){const i=l[0],s=l[1],a=l[2]-i,o=l[3]-s;a===0||o===0||(this.genericComposeSMask(t.context,r,a,o,t.subtype,t.backdrop,t.transferMap,i,s,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,t,r,l,i,s,a,o,n,c,d){let u=e.canvas,h=o-c,p=n-d;if(s)if(h<0||p<0||h+r>u.width||p+l>u.height){const f=this.cachedCanvases.getCanvas("maskExtension",r,l),b=f.context;b.drawImage(u,-h,-p),b.globalCompositeOperation="destination-atop",b.fillStyle=s,b.fillRect(0,0,r,l),b.globalCompositeOperation="source-over",u=f.canvas,h=p=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const f=new Path2D;f.rect(h,p,r,l),e.clip(f),e.globalCompositeOperation="destination-atop",e.fillStyle=s,e.fillRect(h,p,r,l),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const m=new Path2D;m.rect(o,n,r,l),t.clip(m),t.globalCompositeOperation="destination-in",t.drawImage(u,h,p,r,l,o,n,r,l),t.restore()}save(){this.inSMaskMode&&su(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&su(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,r,l,i,s){this.ctx.transform(e,t,r,l,i,s),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,r){let[l]=t;if(!r){l||(l=t[0]=new Path2D),this[e](l);return}if(!(l instanceof Path2D)){const i=t[0]=new Path2D;for(let s=0,a=l.length;s<a;)switch(l[s++]){case jd.moveTo:i.moveTo(l[s++],l[s++]);break;case jd.lineTo:i.lineTo(l[s++],l[s++]);break;case jd.curveTo:i.bezierCurveTo(l[s++],l[s++],l[s++],l[s++],l[s++],l[s++]);break;case jd.closePath:i.closePath();break;default:le(`Unrecognized drawing path operator: ${l[s-1]}`);break}l=i}Wt.axialAlignedBoundingBox(r,ar(this.ctx),this.current.minMax),this[e](l)}closePath(){this.ctx.closePath()}stroke(e,t=!0){const r=this.ctx,l=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof l=="object"&&(l!=null&&l.getPattern)){const i=l.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=l.getPattern(r,this,Cn(r),$r.STROKE),i){const s=new Path2D;s.addPath(e,r.getTransform().invertSelf().multiplySelf(i)),e=s}this.rescaleAndStroke(e,!1),r.restore()}else this.rescaleAndStroke(e,!0);t&&this.consumePath(e,this.current.getClippedPathBoundingBox($r.STROKE,ar(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(e){this.stroke(e)}fill(e,t=!0){const r=this.ctx,l=this.current.fillColor,i=this.current.patternFill;let s=!1;if(i){const o=l.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.fillStyle=l.getPattern(r,this,Cn(r),$r.FILL),o){const n=new Path2D;n.addPath(e,r.getTransform().invertSelf().multiplySelf(o)),e=n}s=!0}const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(r.fill(e,"evenodd"),this.pendingEOFill=!1):r.fill(e)),s&&r.restore(),t&&this.consumePath(e,a)}eoFill(e){this.pendingEOFill=!0,this.fill(e)}fillStroke(e){this.fill(e,!1),this.stroke(e,!1),this.consumePath(e)}eoFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}closeFillStroke(e){this.fillStroke(e)}closeEOFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}endPath(e){this.consumePath(e)}rawFillPath(e){this.ctx.fill(e)}clip(){this.pendingClip=p_}eoClip(){this.pendingClip=mb}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0)return;const r=new Path2D,l=t.getTransform().invertSelf();for(const{transform:i,x:s,y:a,fontSize:o,path:n}of e)r.addPath(n,new DOMMatrix(i).preMultiplySelf(l).translate(s,a).scale(o,-o));t.clip(r),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var c;const r=this.commonObjs.get(e),l=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(l.fontMatrix=r.fontMatrix||mm,(l.fontMatrix[0]===0||l.fontMatrix[3]===0)&&le("Invalid font matrix for font "+e),t<0?(t=-t,l.fontDirection=-1):l.fontDirection=1,this.current.font=r,this.current.fontSize=t,r.isType3Font)return;const i=r.loadedName||"sans-serif",s=((c=r.systemFontInfo)==null?void 0:c.css)||`"${i}", ${r.fallbackName}`;let a="normal";r.black?a="900":r.bold&&(a="bold");const o=r.italic?"italic":"normal";let n=t;t<lb?n=lb:t>cb&&(n=cb),this.current.fontSizeScale=t/n,this.ctx.font=`${o} ${a} ${n}px ${s}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e){const{current:t}=this;t.textMatrix=e,t.textMatrixScale=Math.hypot(e[0],e[1]),t.x=t.lineX=0,t.y=t.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,r,l,i){const s=this.ctx,a=this.current,o=a.font,n=a.textRenderingMode,c=a.fontSize/a.fontSizeScale,d=n&Xr.FILL_STROKE_MASK,u=!!(n&Xr.ADD_TO_PATH_FLAG),h=a.patternFill&&!o.missingFile,p=a.patternStroke&&!o.missingFile;let m;if((o.disableFontFace||u||h||p)&&(m=o.getPathGenerator(this.commonObjs,e)),o.disableFontFace||h||p){s.save(),s.translate(t,r),s.scale(c,-c);let f;if((d===Xr.FILL||d===Xr.FILL_STROKE)&&(l?(f=s.getTransform(),s.setTransform(...l),s.fill(et(this,kn,Um).call(this,m,f,l))):s.fill(m)),d===Xr.STROKE||d===Xr.FILL_STROKE)if(i){f||(f=s.getTransform()),s.setTransform(...i);const{a:b,b:y,c:_,d:E}=f,M=Wt.inverseTransform(i),D=Wt.transform([b,y,_,E,0,0],M);Wt.singularValueDecompose2dScale(D,Hs),s.lineWidth*=Math.max(Hs[0],Hs[1])/c,s.stroke(et(this,kn,Um).call(this,m,f,i))}else s.lineWidth/=c,s.stroke(m);s.restore()}else(d===Xr.FILL||d===Xr.FILL_STROKE)&&s.fillText(e,t,r),(d===Xr.STROKE||d===Xr.FILL_STROKE)&&s.strokeText(e,t,r);u&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:ar(s),x:t,y:r,fontSize:c,path:m})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let r=!1;for(let l=3;l<t.length;l+=4)if(t[l]>0&&t[l]<255){r=!0;break}return we(this,"isFontSubpixelAAEnabled",r)}showText(e){const t=this.current,r=t.font;if(r.isType3Font)return this.showType3Text(e);const l=t.fontSize;if(l===0)return;const i=this.ctx,s=t.fontSizeScale,a=t.charSpacing,o=t.wordSpacing,n=t.fontDirection,c=t.textHScale*n,d=e.length,u=r.vertical,h=u?1:-1,p=r.defaultVMetrics,m=l*t.fontMatrix[0],f=t.textRenderingMode===Xr.FILL&&!r.disableFontFace&&!t.patternFill;i.save(),t.textMatrix&&i.transform(...t.textMatrix),i.translate(t.x,t.y+t.textRise),n>0?i.scale(c,-1):i.scale(c,1);let b,y;if(t.patternFill){i.save();const z=t.fillColor.getPattern(i,this,Cn(i),$r.FILL);b=ar(i),i.restore(),i.fillStyle=z}if(t.patternStroke){i.save();const z=t.strokeColor.getPattern(i,this,Cn(i),$r.STROKE);y=ar(i),i.restore(),i.strokeStyle=z}let _=t.lineWidth;const E=t.textMatrixScale;if(E===0||_===0){const z=t.textRenderingMode&Xr.FILL_STROKE_MASK;(z===Xr.STROKE||z===Xr.FILL_STROKE)&&(_=this.getSinglePixelWidth())}else _/=E;if(s!==1&&(i.scale(s,s),_/=s),i.lineWidth=_,r.isInvalidPDFjsFont){const z=[];let O=0;for(const N of e)z.push(N.unicode),O+=N.width;i.fillText(z.join(""),0,0),t.x+=O*m*c,i.restore(),this.compose();return}let M=0,D;for(D=0;D<d;++D){const z=e[D];if(typeof z=="number"){M+=h*z*l/1e3;continue}let O=!1;const N=(z.isSpace?o:0)+a,B=z.fontChar,H=z.accent;let $,C,R=z.width;if(u){const v=z.vmetric||p,w=-(z.vmetric?v[1]:R*.5)*m,x=v[2]*m;R=v?-v[0]:R,$=w/s,C=(M+x)/s}else $=M/s,C=0;if(r.remeasure&&R>0){const v=i.measureText(B).width*1e3/l*s;if(R<v&&this.isFontSubpixelAAEnabled){const w=R/v;O=!0,i.save(),i.scale(w,1),$/=w}else R!==v&&($+=(R-v)/2e3*l/s)}if(this.contentVisible&&(z.isInFont||r.missingFile)){if(f&&!H)i.fillText(B,$,C);else if(this.paintChar(B,$,C,b,y),H){const v=$+l*H.offset.x/s,w=C-l*H.offset.y/s;this.paintChar(H.fontChar,v,w,b,y)}}const k=u?R*m-N*n:R*m+N*n;M+=k,O&&i.restore()}u?t.y-=M:t.x+=M*c,i.restore(),this.compose()}showType3Text(e){const t=this.ctx,r=this.current,l=r.font,i=r.fontSize,s=r.fontDirection,a=l.vertical?1:-1,o=r.charSpacing,n=r.wordSpacing,c=r.textHScale*s,d=r.fontMatrix||mm,u=e.length,h=r.textRenderingMode===Xr.INVISIBLE;let p,m,f,b;if(!(h||i===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),r.textMatrix&&t.transform(...r.textMatrix),t.translate(r.x,r.y+r.textRise),t.scale(c,s),p=0;p<u;++p){if(m=e[p],typeof m=="number"){b=a*m*i/1e3,this.ctx.translate(b,0),r.x+=b*c;continue}const y=(m.isSpace?n:0)+o,_=l.charProcOperatorList[m.operatorListId];_?this.contentVisible&&(this.save(),t.scale(i,i),t.transform(...d),this.executeOperatorList(_),this.restore()):le(`Type3 character "${m.operatorListId}" is not available.`);const E=[m.width,0];Wt.applyTransform(E,d),f=E[0]*i+y,t.translate(f,0),r.x+=f*c}t.restore()}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,r,l,i,s){const a=new Path2D;a.rect(r,l,i-r,s-l),this.ctx.clip(a),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const r=this.baseTransform||ar(this.ctx),l={createCanvasGraphics:i=>new mg(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new zm(e,this.ctx,l,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e){this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e){this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=o_(this.getObject(e)),this.cachedPatterns.set(e,r)),t&&(r.matrix=t),r}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const r=this._getPattern(e);t.fillStyle=r.getPattern(t,this,Cn(t),$r.SHADING);const l=Cn(t);if(l){const{width:i,height:s}=t.canvas,a=Nl.slice();Wt.axialAlignedBoundingBox([0,0,i,s],l,a);const[o,n,c,d]=a;this.ctx.fillRect(o,n,c-o,d-n)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){We("Should not call beginInlineImage")}beginImageData(){We("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=ar(this.ctx),t)){Wt.axialAlignedBoundingBox(t,this.baseTransform,this.current.minMax);const[r,l,i,s]=t,a=new Path2D;a.rect(r,l,i-r,s-l),this.ctx.clip(a),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Cp("TODO: Support non-isolated groups."),e.knockout&&le("Knockout groups not supported.");const r=ar(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let l=Nl.slice();Wt.axialAlignedBoundingBox(e.bbox,ar(t),l);const i=[0,0,t.canvas.width,t.canvas.height];l=Wt.intersect(l,i)||[0,0,0,0];const s=Math.floor(l[0]),a=Math.floor(l[1]),o=Math.max(Math.ceil(l[2])-s,1),n=Math.max(Math.ceil(l[3])-a,1);this.current.startNewPathAndClipBox([0,0,o,n]);let c="groupAt"+this.groupLevel;e.smask&&(c+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(c,o,n),u=d.context;u.translate(-s,-a),u.transform(...r);let h=new Path2D;const[p,m,f,b]=e.bbox;if(h.rect(p,m,f-p,b-m),e.matrix){const y=new Path2D;y.addPath(h,new DOMMatrix(e.matrix)),h=y}u.clip(h),e.smask?this.smaskStack.push({canvas:d.canvas,context:u,offsetX:s,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(s,a),t.save()),su(t,u),this.ctx=u,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const l=ar(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...l);const i=Nl.slice();Wt.axialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],l,i),this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(e,t,r,l,i){if(et(this,kn,$m).call(this),Hd(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const s=t[2]-t[0],a=t[3]-t[1];if(i&&this.annotationCanvasMap){r=r.slice(),r[4]-=t[0],r[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=s,t[3]=a,Wt.singularValueDecompose2dScale(ar(this.ctx),Hs);const{viewportScale:o}=this,n=Math.ceil(s*this.outputScaleX*o),c=Math.ceil(a*this.outputScaleY*o);this.annotationCanvas=this.canvasFactory.create(n,c);const{canvas:d,context:u}=this.annotationCanvas;this.annotationCanvasMap.set(e,d),this.annotationCanvas.savedCtx=this.ctx,this.ctx=u,this.ctx.save(),this.ctx.setTransform(Hs[0],0,0,-Hs[1],0,a*Hs[1]),Hd(this.ctx)}else{Hd(this.ctx),this.endPath();const o=new Path2D;o.rect(t[0],t[1],s,a),this.ctx.clip(o)}}this.current=new hb(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...r),this.transform(...l)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),et(this,kn,Hm).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const r=this.ctx,l=this._createMaskCanvas(e),i=l.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(i,l.offsetX,l.offsetY),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,r=0,l=0,i,s){if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const o=ar(a);a.transform(t,r,l,i,0,0);const n=this._createMaskCanvas(e);a.setTransform(1,0,0,1,n.offsetX-o[4],n.offsetY-o[5]);for(let c=0,d=s.length;c<d;c+=2){const u=Wt.transform(o,[t,r,l,i,s[c],s[c+1]]);a.drawImage(n.canvas,u[4],u[5])}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,r=this.current.fillColor,l=this.current.patternFill;for(const i of e){const{data:s,width:a,height:o,transform:n}=i,c=this.cachedCanvases.getCanvas("maskCanvas",a,o),d=c.context;d.save();const u=this.getObject(s,i);fb(d,u),d.globalCompositeOperation="source-in",d.fillStyle=l?r.getPattern(d,this,Cn(t),$r.FILL):r,d.fillRect(0,0,a,o),d.restore(),t.save(),t.transform(...n),t.scale(1,-1),$d(t,c.canvas,0,0,a,o,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){le("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,r,l){if(!this.contentVisible)return;const i=this.getObject(e);if(!i){le("Dependent image isn't ready yet");return}const s=i.width,a=i.height,o=[];for(let n=0,c=l.length;n<c;n+=2)o.push({transform:[t,0,0,r,l[n],l[n+1]],x:0,y:0,w:s,h:a});this.paintInlineImageXObjectGroup(i,o)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:r,height:l}=e,i=this.cachedCanvases.getCanvas("inlineImage",r,l),s=i.context;return s.filter=this.current.transferMaps,s.drawImage(t,0,0),s.filter="none",i.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,r=e.height,l=this.ctx;this.save();const{filter:i}=l;i!=="none"&&i!==""&&(l.filter="none"),l.scale(1/t,-1/r);let s;if(e.bitmap)s=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)s=e;else{const n=this.cachedCanvases.getCanvas("inlineImage",t,r).context;db(n,e),s=this.applyTransferMapsToCanvas(n)}const a=this._scaleImage(s,Cn(l));l.imageSmoothingEnabled=pb(ar(l),e.interpolate),$d(l,a.img,0,0,a.paintWidth,a.paintHeight,0,-r,t,r),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const r=this.ctx;let l;if(e.bitmap)l=e.bitmap;else{const i=e.width,s=e.height,o=this.cachedCanvases.getCanvas("inlineImage",i,s).context;db(o,e),l=this.applyTransferMapsToCanvas(o)}for(const i of t)r.save(),r.transform(...i.transform),r.scale(1,-1),$d(r,l,i.x,i.y,i.w,i.h,0,-1,1,1),r.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e,t){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const l=this.ctx;this.pendingClip&&(r||(this.pendingClip===mb?l.clip(e,"evenodd"):l.clip(e)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=ar(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),l=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,l)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:r,c:l,d:i}=this.ctx.getTransform();let s,a;if(r===0&&l===0){const o=Math.abs(t),n=Math.abs(i);if(o===n)if(e===0)s=a=1/o;else{const c=o*e;s=a=c<1?1/c:1}else if(e===0)s=1/o,a=1/n;else{const c=o*e,d=n*e;s=c<1?1/c:1,a=d<1?1/d:1}}else{const o=Math.abs(t*i-r*l),n=Math.hypot(t,r),c=Math.hypot(l,i);if(e===0)s=c/o,a=n/o;else{const d=e*o;s=c>d?c/d:1,a=n>d?n/d:1}}this._cachedScaleForStroking[0]=s,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:r,current:{lineWidth:l}}=this,[i,s]=this.getScaleForStroking();if(i===s){r.lineWidth=(l||1)*i,r.stroke(e);return}const a=r.getLineDash();t&&r.save(),r.scale(i,s),Jp.a=1/i,Jp.d=1/s;const o=new Path2D;if(o.addPath(e,Jp),a.length>0){const n=Math.max(i,s);r.setLineDash(a.map(c=>c/n)),r.lineDashOffset/=n}r.lineWidth=l||1,r.stroke(o),t&&r.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};kn=new WeakSet,$m=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Hm=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},Um=function(e,t,r){const l=new Path2D;return l.addPath(e,new DOMMatrix(r).invertSelf().multiplySelf(t)),l};let Wl=mg;for(const g in Bf)Wl.prototype[g]!==void 0&&(Wl.prototype[Bf[g]]=Wl.prototype[g]);var gh,bh;class Kn{static get workerPort(){return A(this,gh)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");K(this,gh,e)}static get workerSrc(){return A(this,bh)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");K(this,bh,e)}}gh=new WeakMap,bh=new WeakMap,tt(Kn,gh,null),tt(Kn,bh,"");var uc,yh;class m_{constructor({parsedData:e,rawData:t}){tt(this,uc);tt(this,yh);K(this,uc,e),K(this,yh,t)}getRaw(){return A(this,yh)}get(e){return A(this,uc).get(e)??null}[Symbol.iterator](){return A(this,uc).entries()}}uc=new WeakMap,yh=new WeakMap;const Il=Symbol("INTERNAL");var vh,wh,_h,hc;class g_{constructor(e,{name:t,intent:r,usage:l,rbGroups:i}){tt(this,vh,!1);tt(this,wh,!1);tt(this,_h,!1);tt(this,hc,!0);K(this,vh,!!(e&$s.DISPLAY)),K(this,wh,!!(e&$s.PRINT)),this.name=t,this.intent=r,this.usage=l,this.rbGroups=i}get visible(){if(A(this,_h))return A(this,hc);if(!A(this,hc))return!1;const{print:e,view:t}=this.usage;return A(this,vh)?(t==null?void 0:t.viewState)!=="OFF":A(this,wh)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,r=!1){e!==Il&&We("Internal method `_setVisible` called."),K(this,_h,r),K(this,hc,t)}}vh=new WeakMap,wh=new WeakMap,_h=new WeakMap,hc=new WeakMap;var ba,Ue,dc,fc,xh,Vm;class b_{constructor(e,t=$s.DISPLAY){tt(this,xh);tt(this,ba,null);tt(this,Ue,new Map);tt(this,dc,null);tt(this,fc,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,K(this,fc,e.order);for(const r of e.groups)A(this,Ue).set(r.id,new g_(t,r));if(e.baseState==="OFF")for(const r of A(this,Ue).values())r._setVisible(Il,!1);for(const r of e.on)A(this,Ue).get(r)._setVisible(Il,!0);for(const r of e.off)A(this,Ue).get(r)._setVisible(Il,!1);K(this,dc,this.getHash())}}isVisible(e){if(A(this,Ue).size===0)return!0;if(!e)return Cp("Optional content group not defined."),!0;if(e.type==="OCG")return A(this,Ue).has(e.id)?A(this,Ue).get(e.id).visible:(le(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return et(this,xh,Vm).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!A(this,Ue).has(t))return le(`Optional content group not found: ${t}`),!0;if(A(this,Ue).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!A(this,Ue).has(t))return le(`Optional content group not found: ${t}`),!0;if(!A(this,Ue).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!A(this,Ue).has(t))return le(`Optional content group not found: ${t}`),!0;if(!A(this,Ue).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!A(this,Ue).has(t))return le(`Optional content group not found: ${t}`),!0;if(A(this,Ue).get(t).visible)return!1}return!0}return le(`Unknown optional content policy ${e.policy}.`),!0}return le(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,r=!0){var i;const l=A(this,Ue).get(e);if(!l){le(`Optional content group not found: ${e}`);return}if(r&&t&&l.rbGroups.length)for(const s of l.rbGroups)for(const a of s)a!==e&&((i=A(this,Ue).get(a))==null||i._setVisible(Il,!1,!0));l._setVisible(Il,!!t,!0),K(this,ba,null)}setOCGState({state:e,preserveRB:t}){let r;for(const l of e){switch(l){case"ON":case"OFF":case"Toggle":r=l;continue}const i=A(this,Ue).get(l);if(i)switch(r){case"ON":this.setVisibility(l,!0,t);break;case"OFF":this.setVisibility(l,!1,t);break;case"Toggle":this.setVisibility(l,!i.visible,t);break}}K(this,ba,null)}get hasInitialVisibility(){return A(this,dc)===null||this.getHash()===A(this,dc)}getOrder(){return A(this,Ue).size?A(this,fc)?A(this,fc).slice():[...A(this,Ue).keys()]:null}getGroup(e){return A(this,Ue).get(e)||null}getHash(){if(A(this,ba)!==null)return A(this,ba);const e=new ny;for(const[t,r]of A(this,Ue))e.update(`${t}:${r.visible}`);return K(this,ba,e.hexdigest())}[Symbol.iterator](){return A(this,Ue).entries()}}ba=new WeakMap,Ue=new WeakMap,dc=new WeakMap,fc=new WeakMap,xh=new WeakSet,Vm=function(e){const t=e.length;if(t<2)return!0;const r=e[0];for(let l=1;l<t;l++){const i=e[l];let s;if(Array.isArray(i))s=et(this,xh,Vm).call(this,i);else if(A(this,Ue).has(i))s=A(this,Ue).get(i).visible;else return le(`Optional content group not found: ${i}`),!0;switch(r){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return r==="And"};class y_{constructor(e,{disableRange:t=!1,disableStream:r=!1}){br(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:l,initialData:i,progressiveDone:s,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=s,this._contentDispositionFilename=a,(i==null?void 0:i.length)>0){const o=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(o)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!t,this._contentLength=l,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((o,n)=>{this._onReceiveData({begin:o,chunk:n})}),e.addProgressListener((o,n)=>{this._onProgress({loaded:o,total:n})}),e.addProgressiveReadListener(o=>{this._onReceiveData({chunk:o})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const r=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const l=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(r),!0)});br(l,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,r,l,i;e.total===void 0?(r=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||r.call(t,{loaded:e.loaded}):(i=(l=this._fullRequestReader)==null?void 0:l.onProgress)==null||i.call(l,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){br(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new v_(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new w_(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeReaders.slice(0))r.cancel(e);this._pdfDataRangeTransport.abort()}}class v_{constructor(e,t,r=!1,l=null){this._stream=e,this._done=r||!1,this._filename=eg(l)?l:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class w_{constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function __(g){let e=!0,t=r("filename\\*","i").exec(g);if(t){t=t[1];let c=a(t);return c=unescape(c),c=o(c),c=n(c),i(c)}if(t=s(g),t){const c=n(t);return i(c)}if(t=r("filename","i").exec(g),t){t=t[1];let c=a(t);return c=n(c),i(c)}function r(c,d){return new RegExp("(?:^|;)\\s*"+c+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function l(c,d){if(c){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const u=new TextDecoder(c,{fatal:!0}),h=_d(d);d=u.decode(h),e=!1}catch{}}return d}function i(c){return e&&/[\x80-\xff]/.test(c)&&(c=l("utf-8",c),e&&(c=l("iso-8859-1",c))),c}function s(c){const d=[];let u;const h=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(u=h.exec(c))!==null;){let[,m,f,b]=u;if(m=parseInt(m,10),m in d){if(m===0)break;continue}d[m]=[f,b]}const p=[];for(let m=0;m<d.length&&m in d;++m){let[f,b]=d[m];b=a(b),f&&(b=unescape(b),m===0&&(b=o(b))),p.push(b)}return p.join("")}function a(c){if(c.startsWith('"')){const d=c.slice(1).split('\\"');for(let u=0;u<d.length;++u){const h=d[u].indexOf('"');h!==-1&&(d[u]=d[u].slice(0,h),d.length=u+1),d[u]=d[u].replaceAll(/\\(.)/g,"$1")}c=d.join('"')}return c}function o(c){const d=c.indexOf("'");if(d===-1)return c;const u=c.slice(0,d),p=c.slice(d+1).replace(/^[^']*'/,"");return l(u,p)}function n(c){return!c.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(c)?c:c.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,u,h,p){if(h==="q"||h==="Q")return p=p.replaceAll("_"," "),p=p.replaceAll(/=([0-9a-fA-F]{2})/g,function(m,f){return String.fromCharCode(parseInt(f,16))}),l(u,p);try{p=atob(p)}catch{}return l(u,p)})}return""}function gy(g,e){const t=new Headers;if(!g||!e||typeof e!="object")return t;for(const r in e){const l=e[r];l!==void 0&&t.append(r,l)}return t}function Mp(g){var e;return((e=URL.parse(g))==null?void 0:e.origin)??null}function by({responseHeaders:g,isHttp:e,rangeChunkSize:t,disableRange:r}){const l={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(g.get("Content-Length"),10);return!Number.isInteger(i)||(l.suggestedLength=i,i<=2*t)||r||!e||g.get("Accept-Ranges")!=="bytes"||(g.get("Content-Encoding")||"identity")!=="identity"||(l.allowRangeRequests=!0),l}function yy(g){const e=g.get("Content-Disposition");if(e){let t=__(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(eg(t))return t}return null}function kd(g,e){return new zf(`Unexpected server response (${g}) while retrieving PDF "${e}".`,g,g===404||g===0&&e.startsWith("file:"))}function vy(g){return g===200||g===206}function wy(g,e,t){return{method:"GET",headers:g,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function _y(g){return g instanceof Uint8Array?g.buffer:g instanceof ArrayBuffer?g:(le(`getArrayBuffer - unexpected data format: ${g}`),new Uint8Array(g).buffer)}class x_{constructor(e){At(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=gy(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return br(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new S_(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new A_(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class S_{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const r=new Headers(e.headers),l=t.url;fetch(l,wy(r,this._withCredentials,this._abortController)).then(i=>{if(e._responseOrigin=Mp(i.url),!vy(i.status))throw kd(i.status,l);this._reader=i.body.getReader(),this._headersCapability.resolve();const s=i.headers,{allowRangeRequests:a,suggestedLength:o}=by({responseHeaders:s,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=o||this._contentLength,this._filename=yy(s),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ha("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:_y(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class A_{constructor(e,t,r){this._stream=e,this._reader=null,this._loaded=0;const l=e.source;this._withCredentials=l.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!l.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range",`bytes=${t}-${r-1}`);const s=l.url;fetch(s,wy(i,this._withCredentials,this._abortController)).then(a=>{const o=Mp(a.url);if(o!==e._responseOrigin)throw new Error(`Expected range response-origin "${o}" to match "${e._responseOrigin}".`);if(!vy(a.status))throw kd(a.status,s);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:_y(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const Qp=200,tm=206;function k_(g){const e=g.response;return typeof e!="string"?e:_d(e).buffer}class E_{constructor({url:e,httpHeaders:t,withCredentials:r}){At(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=gy(this.isHttp,t),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,r=this.currXhrId++,l=this.pendingRequests[r]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,s]of this.headers)t.setRequestHeader(i,s);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),l.expectedStatus=tm):l.expectedStatus=Qp,t.responseType="arraybuffer",br(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),l.onHeadersReceived=e.onHeadersReceived,l.onDone=e.onDone,l.onError=e.onError,l.onProgress=e.onProgress,t.send(null),r}onProgress(e,t){var l;const r=this.pendingRequests[e];r&&((l=r.onProgress)==null||l.call(r,t))}onStateChange(e,t){const r=this.pendingRequests[e];if(!r)return;const l=r.xhr;if(l.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),l.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],l.status===0&&this.isHttp){r.onError(l.status);return}const i=l.status||Qp;if(!(i===Qp&&r.expectedStatus===tm)&&i!==r.expectedStatus){r.onError(l.status);return}const a=k_(l);if(i===tm){const o=l.getResponseHeader("Content-Range"),n=/bytes (\d+)-(\d+)\/(\d+)/.exec(o);n?r.onDone({begin:parseInt(n[1],10),chunk:a}):(le('Missing or invalid "Content-Range" header.'),r.onError(0))}else a?r.onDone({begin:0,chunk:a}):r.onError(l.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class C_{constructor(e){this._source=e,this._manager=new E_(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return br(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new T_(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const r=new M_(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class T_{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Mp(t.responseURL);const r=t.getAllResponseHeaders(),l=new Headers(r?r.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[o,...n]=a.split(": ");return[o,n.join(": ")]}):[]),{allowRangeRequests:i,suggestedLength:s}=by({responseHeaders:l,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=yy(l),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=kd(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class M_{constructor(e,t,r){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:r,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=Mp((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=kd(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const R_=/^[a-z][a-z0-9\-+.]+:/i;function I_(g){if(R_.test(g))return new URL(g);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(g))}class P_{constructor(e){this.source=e,this.url=I_(e.url),br(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return br(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new O_(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new N_(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class O_{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const r=process.getBuiltinModule("fs");r.promises.lstat(this._url).then(l=>{this._contentLength=l.size,this._setReadableStream(r.createReadStream(this._url)),this._headersCapability.resolve()},l=>{l.code==="ENOENT"&&(l=kd(0,this._url.href)),this._storedError=l,this._headersCapability.reject(l)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ha("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class N_{constructor(e,t,r){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const l=e.source;this._isStreamingSupported=!l.disableStream;const i=process.getBuiltinModule("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:r-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const nu=Symbol("INITIAL_DATA");var Rs,Sh,Wm;class xy{constructor(){tt(this,Sh);tt(this,Rs,Object.create(null))}get(e,t=null){if(t){const l=et(this,Sh,Wm).call(this,e);return l.promise.then(()=>t(l.data)),null}const r=A(this,Rs)[e];if(!r||r.data===nu)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const t=A(this,Rs)[e];return!!t&&t.data!==nu}delete(e){const t=A(this,Rs)[e];return!t||t.data===nu?!1:(delete A(this,Rs)[e],!0)}resolve(e,t=null){const r=et(this,Sh,Wm).call(this,e);r.data=t,r.resolve()}clear(){var e;for(const t in A(this,Rs)){const{data:r}=A(this,Rs)[t];(e=r==null?void 0:r.bitmap)==null||e.close()}K(this,Rs,Object.create(null))}*[Symbol.iterator](){for(const e in A(this,Rs)){const{data:t}=A(this,Rs)[e];t!==nu&&(yield[e,t])}}}Rs=new WeakMap,Sh=new WeakSet,Wm=function(e){var t;return(t=A(this,Rs))[e]||(t[e]={...Promise.withResolvers(),data:nu})};const D_=1e5,gb=30;var _b,ya,ws,Ah,kh,Ro,wi,Eh,Ch,Io,pc,mc,va,gc,Th,bc,Po,Mh,Rh,yc,Oo,Ih,wa,vc,qi,Sy,Ay,qm,Ws,lf,Xm,ky,Ey;const xr=class xr{constructor({textContentSource:e,container:t,viewport:r}){tt(this,qi);tt(this,ya,Promise.withResolvers());tt(this,ws,null);tt(this,Ah,!1);tt(this,kh,!!((_b=globalThis.FontInspector)!=null&&_b.enabled));tt(this,Ro,null);tt(this,wi,null);tt(this,Eh,0);tt(this,Ch,0);tt(this,Io,null);tt(this,pc,null);tt(this,mc,0);tt(this,va,0);tt(this,gc,Object.create(null));tt(this,Th,[]);tt(this,bc,null);tt(this,Po,[]);tt(this,Mh,new WeakMap);tt(this,Rh,null);var o;if(e instanceof ReadableStream)K(this,bc,e);else if(typeof e=="object")K(this,bc,new ReadableStream({start(n){n.enqueue(e),n.close()}}));else throw new Error('No "textContentSource" parameter specified.');K(this,ws,K(this,pc,t)),K(this,va,r.scale*Jn.pixelRatio),K(this,mc,r.rotation),K(this,wi,{div:null,properties:null,ctx:null});const{pageWidth:l,pageHeight:i,pageX:s,pageY:a}=r.rawDims;K(this,Rh,[1,0,0,-1,-s,a+i]),K(this,Ch,l),K(this,Eh,i),et(o=xr,Ws,ky).call(o),gl(t,r),A(this,ya).promise.finally(()=>{A(xr,vc).delete(this),K(this,wi,null),K(this,gc,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=qr.platform;return we(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{A(this,Io).read().then(({value:t,done:r})=>{if(r){A(this,ya).resolve();return}A(this,Ro)??K(this,Ro,t.lang),Object.assign(A(this,gc),t.styles),et(this,qi,Sy).call(this,t.items),e()},A(this,ya).reject)};return K(this,Io,A(this,bc).getReader()),A(xr,vc).add(this),e(),A(this,ya).promise}update({viewport:e,onBefore:t=null}){var i;const r=e.scale*Jn.pixelRatio,l=e.rotation;if(l!==A(this,mc)&&(t==null||t(),K(this,mc,l),gl(A(this,pc),{rotation:l})),r!==A(this,va)){t==null||t(),K(this,va,r);const s={div:null,properties:null,ctx:et(i=xr,Ws,lf).call(i,A(this,Ro))};for(const a of A(this,Po))s.properties=A(this,Mh).get(a),s.div=a,et(this,qi,qm).call(this,s)}}cancel(){var t;const e=new Ha("TextLayer task cancelled.");(t=A(this,Io))==null||t.cancel(e).catch(()=>{}),K(this,Io,null),A(this,ya).reject(e)}get textDivs(){return A(this,Po)}get textContentItemsStr(){return A(this,Th)}static cleanup(){if(!(A(this,vc).size>0)){A(this,yc).clear();for(const{canvas:e}of A(this,Oo).values())e.remove();A(this,Oo).clear()}}};ya=new WeakMap,ws=new WeakMap,Ah=new WeakMap,kh=new WeakMap,Ro=new WeakMap,wi=new WeakMap,Eh=new WeakMap,Ch=new WeakMap,Io=new WeakMap,pc=new WeakMap,mc=new WeakMap,va=new WeakMap,gc=new WeakMap,Th=new WeakMap,bc=new WeakMap,Po=new WeakMap,Mh=new WeakMap,Rh=new WeakMap,yc=new WeakMap,Oo=new WeakMap,Ih=new WeakMap,wa=new WeakMap,vc=new WeakMap,qi=new WeakSet,Sy=function(e){var l,i;if(A(this,Ah))return;(i=A(this,wi)).ctx??(i.ctx=et(l=xr,Ws,lf).call(l,A(this,Ro)));const t=A(this,Po),r=A(this,Th);for(const s of e){if(t.length>D_){le("Ignoring additional textDivs for performance reasons."),K(this,Ah,!0);return}if(s.str===void 0){if(s.type==="beginMarkedContentProps"||s.type==="beginMarkedContent"){const a=A(this,ws);K(this,ws,document.createElement("span")),A(this,ws).classList.add("markedContent"),s.id!==null&&A(this,ws).setAttribute("id",`${s.id}`),a.append(A(this,ws))}else s.type==="endMarkedContent"&&K(this,ws,A(this,ws).parentNode);continue}r.push(s.str),et(this,qi,Ay).call(this,s)}},Ay=function(e){var m;const t=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};A(this,Po).push(t);const l=Wt.transform(A(this,Rh),e.transform);let i=Math.atan2(l[1],l[0]);const s=A(this,gc)[e.fontName];s.vertical&&(i+=Math.PI/2);let a=A(this,kh)&&s.fontSubstitution||s.fontFamily;a=xr.fontFamilyMap.get(a)||a;const o=Math.hypot(l[2],l[3]),n=o*et(m=xr,Ws,Ey).call(m,a,s,A(this,Ro));let c,d;i===0?(c=l[4],d=l[5]-n):(c=l[4]+n*Math.sin(i),d=l[5]-n*Math.cos(i));const u="calc(var(--total-scale-factor) *",h=t.style;A(this,ws)===A(this,pc)?(h.left=`${(100*c/A(this,Ch)).toFixed(2)}%`,h.top=`${(100*d/A(this,Eh)).toFixed(2)}%`):(h.left=`${u}${c.toFixed(2)}px)`,h.top=`${u}${d.toFixed(2)}px)`),h.fontSize=`${u}${(A(xr,wa)*o).toFixed(2)}px)`,h.fontFamily=a,r.fontSize=o,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,A(this,kh)&&(t.dataset.fontName=s.fontSubstitutionLoadedName||e.fontName),i!==0&&(r.angle=i*(180/Math.PI));let p=!1;if(e.str.length>1)p=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const f=Math.abs(e.transform[0]),b=Math.abs(e.transform[3]);f!==b&&Math.max(f,b)/Math.min(f,b)>1.5&&(p=!0)}if(p&&(r.canvasWidth=s.vertical?e.height:e.width),A(this,Mh).set(t,r),A(this,wi).div=t,A(this,wi).properties=r,et(this,qi,qm).call(this,A(this,wi)),r.hasText&&A(this,ws).append(t),r.hasEOL){const f=document.createElement("br");f.setAttribute("role","presentation"),A(this,ws).append(f)}},qm=function(e){var a;const{div:t,properties:r,ctx:l}=e,{style:i}=t;let s="";if(A(xr,wa)>1&&(s=`scale(${1/A(xr,wa)})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:o}=i,{canvasWidth:n,fontSize:c}=r;et(a=xr,Ws,Xm).call(a,l,c*A(this,va),o);const{width:d}=l.measureText(t.textContent);d>0&&(s=`scaleX(${n*A(this,va)/d}) ${s}`)}r.angle!==0&&(s=`rotate(${r.angle}deg) ${s}`),s.length>0&&(i.transform=s)},Ws=new WeakSet,lf=function(e=null){let t=A(this,Oo).get(e||(e=""));if(!t){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),t=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),A(this,Oo).set(e,t),A(this,Ih).set(t,{size:0,family:""})}return t},Xm=function(e,t,r){const l=A(this,Ih).get(e);t===l.size&&r===l.family||(e.font=`${t}px ${r}`,l.size=t,l.family=r)},ky=function(){if(A(this,wa)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),K(this,wa,e.getBoundingClientRect().height),e.remove()},Ey=function(e,t,r){const l=A(this,yc).get(e);if(l)return l;const i=et(this,Ws,lf).call(this,r);i.canvas.width=i.canvas.height=gb,et(this,Ws,Xm).call(this,i,gb,e);const s=i.measureText(""),a=s.fontBoundingBoxAscent,o=Math.abs(s.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let n=.8;return a?n=a/(a+o):(qr.platform.isFirefox&&le("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?n=t.ascent:t.descent&&(n=1+t.descent)),A(this,yc).set(e,n),n},tt(xr,Ws),tt(xr,yc,new Map),tt(xr,Oo,new Map),tt(xr,Ih,new WeakMap),tt(xr,wa,null),tt(xr,vc,new Set);let zu=xr;class $u{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};function l(i){var o;if(!i)return;let s=null;const a=i.name;if(a==="#text")s=i.value;else if($u.shouldBuildText(a))(o=i==null?void 0:i.attributes)!=null&&o.textContent?s=i.attributes.textContent:i.value&&(s=i.value);else return;if(s!==null&&t.push({str:s}),!!i.children)for(const n of i.children)l(n)}return l(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const L_=100;function Cy(g={}){typeof g=="string"||g instanceof URL?g={url:g}:(g instanceof ArrayBuffer||ArrayBuffer.isView(g))&&(g={data:g});const e=new Gm,{docId:t}=e,r=g.url?W3(g.url):null,l=g.data?q3(g.data):null,i=g.httpHeaders||null,s=g.withCredentials===!0,a=g.password??null,o=g.range instanceof Ty?g.range:null,n=Number.isInteger(g.rangeChunkSize)&&g.rangeChunkSize>0?g.rangeChunkSize:2**16;let c=g.worker instanceof Hu?g.worker:null;const d=g.verbosity,u=typeof g.docBaseUrl=="string"&&!Tp(g.docBaseUrl)?g.docBaseUrl:null,h=Bd(g.cMapUrl),p=g.cMapPacked!==!1,m=g.CMapReaderFactory||(cs?t_:nb),f=Bd(g.iccUrl),b=Bd(g.standardFontDataUrl),y=g.StandardFontDataFactory||(cs?e_:ib),_=Bd(g.wasmUrl),E=g.WasmFactory||(cs?r_:ab),M=g.stopAtErrors!==!0,D=Number.isInteger(g.maxImageSize)&&g.maxImageSize>-1?g.maxImageSize:-1,z=g.isEvalSupported!==!1,O=typeof g.isOffscreenCanvasSupported=="boolean"?g.isOffscreenCanvasSupported:!cs,N=typeof g.isImageDecoderSupported=="boolean"?g.isImageDecoderSupported:!cs&&(qr.platform.isFirefox||!globalThis.chrome),B=Number.isInteger(g.canvasMaxAreaInBytes)?g.canvasMaxAreaInBytes:-1,H=typeof g.disableFontFace=="boolean"?g.disableFontFace:cs,$=g.fontExtraProperties===!0,C=g.enableXfa===!0,R=g.ownerDocument||globalThis.document,k=g.disableRange===!0,v=g.disableStream===!0,w=g.disableAutoFetch===!0,x=g.pdfBug===!0,S=g.CanvasFactory||(cs?Q3:Y3),T=g.FilterFactory||(cs?J3:Z3),L=g.enableHWA===!0,j=g.useWasm!==!1,U=o?o.length:g.length??NaN,W=typeof g.useSystemFonts=="boolean"?g.useSystemFonts:!cs&&!H,Y=typeof g.useWorkerFetch=="boolean"?g.useWorkerFetch:!!(m===nb&&y===ib&&E===ab&&h&&b&&_&&lu(h,document.baseURI)&&lu(b,document.baseURI)&&lu(_,document.baseURI)),F=null;S3(d);const X={canvasFactory:new S({ownerDocument:R,enableHWA:L}),filterFactory:new T({docId:t,ownerDocument:R}),cMapReaderFactory:Y?null:new m({baseUrl:h,isCompressed:p}),standardFontDataFactory:Y?null:new y({baseUrl:b}),wasmFactory:Y?null:new E({baseUrl:_})};c||(c=Hu.create({verbosity:d,port:Kn.workerPort}),e._worker=c);const P={docId:t,apiVersion:"5.3.93",data:l,password:a,disableAutoFetch:w,rangeChunkSize:n,length:U,docBaseUrl:u,enableXfa:C,evaluatorOptions:{maxImageSize:D,disableFontFace:H,ignoreErrors:M,isEvalSupported:z,isOffscreenCanvasSupported:O,isImageDecoderSupported:N,canvasMaxAreaInBytes:B,fontExtraProperties:$,useSystemFonts:W,useWasm:j,useWorkerFetch:Y,cMapUrl:h,iccUrl:f,standardFontDataUrl:b,wasmUrl:_}},I={ownerDocument:R,pdfBug:x,styleElement:F,loadingParams:{disableAutoFetch:w,enableXfa:C}};return c.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const V=c.messageHandler.sendWithPromise("GetDocRequest",P,l?[l.buffer]:null);let Q;if(o)Q=new y_(o,{disableRange:k,disableStream:v});else if(!l){if(!r)throw new Error("getDocument - no `url` parameter provided.");const G=lu(r)?x_:cs?P_:C_;Q=new G({url:r,length:U,httpHeaders:i,withCredentials:s,rangeChunkSize:n,disableRange:k,disableStream:v})}return V.then(G=>{if(e.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const q=new fu(t,G,c.port),J=new B_(q,e,Q,I,X);e._transport=J,q.send("Ready",null)})}).catch(e._capability.reject),e}var sp;const np=class np{constructor(){At(this,"_capability",Promise.withResolvers());At(this,"_transport",null);At(this,"_worker",null);At(this,"docId",`d${rs(np,sp)._++}`);At(this,"destroyed",!1);At(this,"onPassword",null);At(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,r,l;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(i){throw(r=this._worker)!=null&&r.port&&delete this._worker._pendingDestroy,i}this._transport=null,(l=this._worker)==null||l.destroy(),this._worker=null}async getData(){return this._transport.getData()}};sp=new WeakMap,tt(np,sp,0);let Gm=np;var No,Ph,Oh,Nh,Dh;class Ty{constructor(e,t,r=!1,l=null){tt(this,No,Promise.withResolvers());tt(this,Ph,[]);tt(this,Oh,[]);tt(this,Nh,[]);tt(this,Dh,[]);this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=l}addRangeListener(e){A(this,Dh).push(e)}addProgressListener(e){A(this,Nh).push(e)}addProgressiveReadListener(e){A(this,Oh).push(e)}addProgressiveDoneListener(e){A(this,Ph).push(e)}onDataRange(e,t){for(const r of A(this,Dh))r(e,t)}onDataProgress(e,t){A(this,No).promise.then(()=>{for(const r of A(this,Nh))r(e,t)})}onDataProgressiveRead(e){A(this,No).promise.then(()=>{for(const t of A(this,Oh))t(e)})}onDataProgressiveDone(){A(this,No).promise.then(()=>{for(const e of A(this,Ph))e()})}transportReady(){A(this,No).resolve()}requestDataRange(e,t){We("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}No=new WeakMap,Ph=new WeakMap,Oh=new WeakMap,Nh=new WeakMap,Dh=new WeakMap;class F_{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return we(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var _i,Do,yu;class j_{constructor(e,t,r,l=!1){tt(this,Do);tt(this,_i,!1);this._pageIndex=e,this._pageInfo=t,this._transport=r,this._stats=l?new eb:null,this._pdfBug=l,this.commonObjs=r.commonObjs,this.objs=new xy,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:l=0,dontFlip:i=!1}={}){return new Sd({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:l,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return we(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:r="display",annotationMode:l=ea.ENABLE,transform:i=null,background:s=null,optionalContentConfigPromise:a=null,annotationCanvasMap:o=null,pageColors:n=null,printAnnotationStorage:c=null,isEditing:d=!1}){var E,M;(E=this._stats)==null||E.time("Overall");const u=this._transport.getRenderingIntent(r,l,c,d),{renderingIntent:h,cacheKey:p}=u;K(this,_i,!1),a||(a=this._transport.getOptionalContentConfig(h));let m=this._intentStates.get(p);m||(m=Object.create(null),this._intentStates.set(p,m)),m.streamReaderCancelTimeout&&(clearTimeout(m.streamReaderCancelTimeout),m.streamReaderCancelTimeout=null);const f=!!(h&$s.PRINT);m.displayReadyCapability||(m.displayReadyCapability=Promise.withResolvers(),m.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(M=this._stats)==null||M.time("Page Request"),this._pumpOperatorList(u));const b=D=>{var z;m.renderTasks.delete(y),f&&K(this,_i,!0),et(this,Do,yu).call(this),D?(y.capability.reject(D),this._abortOperatorList({intentState:m,reason:D instanceof Error?D:new Error(D)})):y.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(z=globalThis.Stats)!=null&&z.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},y=new Km({callback:b,params:{canvasContext:e,viewport:t,transform:i,background:s},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:o,operatorList:m.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!f,pdfBug:this._pdfBug,pageColors:n});(m.renderTasks||(m.renderTasks=new Set)).add(y);const _=y.task;return Promise.all([m.displayReadyCapability.promise,a]).then(([D,z])=>{var O;if(this.destroyed){b();return}if((O=this._stats)==null||O.time("Rendering"),!(z.renderingIntent&h))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");y.initializeGraphics({transparency:D,optionalContentConfig:z}),y.operatorListChanged()}).catch(b),_}getOperatorList({intent:e="display",annotationMode:t=ea.ENABLE,printAnnotationStorage:r=null,isEditing:l=!1}={}){var n;function i(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(o))}const s=this._transport.getRenderingIntent(e,t,r,l,!0);let a=this._intentStates.get(s.cacheKey);a||(a=Object.create(null),this._intentStates.set(s.cacheKey,a));let o;return a.opListReadCapability||(o=Object.create(null),o.operatorListChanged=i,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(o),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(n=this._stats)==null||n.time("Page Request"),this._pumpOperatorList(s)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(l){return l.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>$u.textContent(r));const t=this.streamTextContent(e);return new Promise(function(r,l){function i(){s.read().then(function({value:o,done:n}){if(n){r(a);return}a.lang??(a.lang=o.lang),Object.assign(a.styles,o.styles),a.items.push(...o.items),i()},l)}const s=t.getReader(),a={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const r of t.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),K(this,_i,!1),Promise.all(e)}cleanup(e=!1){K(this,_i,!0);const t=et(this,Do,yu).call(this);return e&&t&&this._stats&&(this._stats=new eb),t}_startRenderPage(e,t){var l,i;const r=this._intentStates.get(t);r&&((l=this._stats)==null||l.timeEnd("Page Request"),(i=r.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let r=0,l=e.length;r<l;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const r of t.renderTasks)r.operatorListChanged();e.lastChunk&&et(this,Do,yu).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:r,modifiedIds:l}){const{map:i,transfer:s}=r,o=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:l},s).getReader(),n=this._intentStates.get(t);n.streamReader=o;const c=()=>{o.read().then(({value:d,done:u})=>{if(u){n.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,n),c())},d=>{if(n.streamReader=null,!this._transport.destroyed){if(n.operatorList){n.operatorList.lastChunk=!0;for(const u of n.renderTasks)u.operatorListChanged();et(this,Do,yu).call(this)}if(n.displayReadyCapability)n.displayReadyCapability.reject(d);else if(n.opListReadCapability)n.opListReadCapability.reject(d);else throw d}})};c()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(t instanceof tg){let l=L_;t.extraDelay>0&&t.extraDelay<1e3&&(l+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},l);return}}if(e.streamReader.cancel(new Ha(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[l,i]of this._intentStates)if(i===e){this._intentStates.delete(l);break}this.cleanup()}}}get stats(){return this._stats}}_i=new WeakMap,Do=new WeakSet,yu=function(){if(!A(this,_i)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),K(this,_i,!1),!0};var _a,hn,xi,Lo,ip,Fo,jo,fs,cf,My,Ry,vu,wc,uf;const tr=class tr{constructor({name:e=null,port:t=null,verbosity:r=A3()}={}){tt(this,fs);tt(this,_a,Promise.withResolvers());tt(this,hn,null);tt(this,xi,null);tt(this,Lo,null);if(this.name=e,this.destroyed=!1,this.verbosity=r,t){if(A(tr,jo).has(t))throw new Error("Cannot use more than one PDFWorker per port.");A(tr,jo).set(t,this),et(this,fs,My).call(this,t)}else et(this,fs,Ry).call(this)}get promise(){return A(this,_a).promise}get port(){return A(this,xi)}get messageHandler(){return A(this,hn)}destroy(){var e,t;this.destroyed=!0,(e=A(this,Lo))==null||e.terminate(),K(this,Lo,null),A(tr,jo).delete(A(this,xi)),K(this,xi,null),(t=A(this,hn))==null||t.destroy(),K(this,hn,null)}static create(e){const t=A(this,jo).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new tr(e)}static get workerSrc(){if(Kn.workerSrc)return Kn.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return we(this,"_setupFakeWorkerGlobal",(async()=>A(this,wc,uf)?A(this,wc,uf):(await import(this.workerSrc)).WorkerMessageHandler)())}};_a=new WeakMap,hn=new WeakMap,xi=new WeakMap,Lo=new WeakMap,ip=new WeakMap,Fo=new WeakMap,jo=new WeakMap,fs=new WeakSet,cf=function(){A(this,_a).resolve(),A(this,hn).send("configure",{verbosity:this.verbosity})},My=function(e){K(this,xi,e),K(this,hn,new fu("main","worker",e)),A(this,hn).on("ready",()=>{}),et(this,fs,cf).call(this)},Ry=function(){if(A(tr,Fo)||A(tr,wc,uf)){et(this,fs,vu).call(this);return}let{workerSrc:e}=tr;try{tr._isSameOrigin(window.location,e)||(e=tr._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),r=new fu("main","worker",t),l=()=>{i.abort(),r.destroy(),t.terminate(),this.destroyed?A(this,_a).reject(new Error("Worker was destroyed")):et(this,fs,vu).call(this)},i=new AbortController;t.addEventListener("error",()=>{A(this,Lo)||l()},{signal:i.signal}),r.on("test",a=>{if(i.abort(),this.destroyed||!a){l();return}K(this,hn,r),K(this,xi,t),K(this,Lo,t),et(this,fs,cf).call(this)}),r.on("ready",a=>{if(i.abort(),this.destroyed){l();return}try{s()}catch{et(this,fs,vu).call(this)}});const s=()=>{const a=new Uint8Array;r.send("test",a,[a.buffer])};s();return}catch{Cp("The worker has been disabled.")}et(this,fs,vu).call(this)},vu=function(){A(tr,Fo)||(le("Setting up fake worker."),K(tr,Fo,!0)),tr._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){A(this,_a).reject(new Error("Worker was destroyed"));return}const t=new K3;K(this,xi,t);const r=`fake${rs(tr,ip)._++}`,l=new fu(r+"_worker",r,t);e.setup(l,t),K(this,hn,new fu(r,r+"_worker",t)),et(this,fs,cf).call(this)}).catch(e=>{A(this,_a).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},wc=new WeakSet,uf=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},tt(tr,wc),tt(tr,ip,0),tt(tr,Fo,!1),tt(tr,jo,new WeakMap),cs&&(K(tr,Fo,!0),Kn.workerSrc||(Kn.workerSrc="./pdf.worker.mjs")),tr._isSameOrigin=(e,t)=>{const r=URL.parse(e);if(!(r!=null&&r.origin)||r.origin==="null")return!1;const l=new URL(t,r);return r.origin===l.origin},tr._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},tr.fromPort=e=>{if(L3("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return tr.create(e)};let Hu=tr;var Si,zn,_c,xc,Ai,Bo,wu;class B_{constructor(e,t,r,l,i){tt(this,Bo);tt(this,Si,new Map);tt(this,zn,new Map);tt(this,_c,new Map);tt(this,xc,new Map);tt(this,Ai,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new xy,this.fontLoader=new U3({ownerDocument:l.ownerDocument,styleElement:l.styleElement}),this.loadingParams=l.loadingParams,this._params=l,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return we(this,"annotationStorage",new ng)}getRenderingIntent(e,t=ea.ENABLE,r=null,l=!1,i=!1){let s=$s.DISPLAY,a=Dm;switch(e){case"any":s=$s.ANY;break;case"display":break;case"print":s=$s.PRINT;break;default:le(`getRenderingIntent - invalid intent: ${e}`)}const o=s&$s.PRINT&&r instanceof ay?r:this.annotationStorage;switch(t){case ea.DISABLE:s+=$s.ANNOTATIONS_DISABLE;break;case ea.ENABLE:break;case ea.ENABLE_FORMS:s+=$s.ANNOTATIONS_FORMS;break;case ea.ENABLE_STORAGE:s+=$s.ANNOTATIONS_STORAGE,a=o.serializable;break;default:le(`getRenderingIntent - invalid annotationMode: ${t}`)}l&&(s+=$s.IS_EDITING),i&&(s+=$s.OPLIST);const{ids:n,hash:c}=o.modifiedIds,d=[s,a.hash,c];return{renderingIntent:s,cacheKey:d.join("_"),annotationStorageSerializable:a,modifiedIds:n}}destroy(){var r;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(r=A(this,Ai))==null||r.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const l of A(this,zn).values())e.push(l._destroy());A(this,zn).clear(),A(this,_c).clear(),A(this,xc).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var l,i;this.commonObjs.clear(),this.fontLoader.clear(),A(this,Si).clear(),this.filterFactory.destroy(),zu.cleanup(),(l=this._networkStream)==null||l.cancelAllRequests(new Ha("Worker was terminated.")),(i=this.messageHandler)==null||i.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(r,l)=>{br(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},l.onPull=()=>{this._fullReader.read().then(function({value:i,done:s}){if(s){l.close();return}br(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),l.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{l.error(i)})},l.onCancel=i=>{this._fullReader.cancel(i),l.ready.catch(s=>{if(!this.destroyed)throw s})}}),e.on("ReaderHeadersReady",async r=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:l,isRangeSupported:i,contentLength:s}=this._fullReader;return(!l||!i)&&(this._lastProgress&&((a=t.onProgress)==null||a.call(t,this._lastProgress)),this._fullReader.onProgress=o=>{var n;(n=t.onProgress)==null||n.call(t,{loaded:o.loaded,total:o.total})}),{isStreamingSupported:l,isRangeSupported:i,contentLength:s}}),e.on("GetRangeReader",(r,l)=>{br(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(r.begin,r.end);if(!i){l.close();return}l.onPull=()=>{i.read().then(function({value:s,done:a}){if(a){l.close();return}br(s instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),l.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{l.error(s)})},l.onCancel=s=>{i.cancel(s),l.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,t._capability.resolve(new F_(r,this))}),e.on("DocException",r=>{t._capability.reject(bs(r))}),e.on("PasswordRequest",r=>{K(this,Ai,Promise.withResolvers());try{if(!t.onPassword)throw bs(r);const l=i=>{i instanceof Error?A(this,Ai).reject(i):A(this,Ai).resolve({password:i})};t.onPassword(l,r.code)}catch(l){A(this,Ai).reject(l)}return A(this,Ai).promise}),e.on("DataLoaded",r=>{var l;(l=t.onProgress)==null||l.call(t,{loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;A(this,zn).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,l,i])=>{var s;if(this.destroyed||this.commonObjs.has(r))return null;switch(l){case"Font":if("error"in i){const c=i.error;le(`Error during font loading: ${c}`),this.commonObjs.resolve(r,c);break}const a=this._params.pdfBug&&((s=globalThis.FontInspector)!=null&&s.enabled)?(c,d)=>globalThis.FontInspector.fontAdded(c,d):null,o=new V3(i,a);this.fontLoader.bind(o).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!o.fontExtraProperties&&o.data&&(o.data=null),this.commonObjs.resolve(r,o)});break;case"CopyLocalImage":const{imageRef:n}=i;br(n,"The imageRef must be defined.");for(const c of A(this,zn).values())for(const[,d]of c.objs)if((d==null?void 0:d.ref)===n)return d.dataLen?(this.commonObjs.resolve(r,structuredClone(d)),d.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,i);break;default:throw new Error(`Got unknown common object type ${l}`)}return null}),e.on("obj",([r,l,i,s])=>{var o;if(this.destroyed)return;const a=A(this,zn).get(l);if(!a.objs.has(r)){if(a._intentStates.size===0){(o=s==null?void 0:s.bitmap)==null||o.close();return}switch(i){case"Image":case"Pattern":a.objs.resolve(r,s);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",r=>{var l;this.destroyed||(l=t.onProgress)==null||l.call(t,{loaded:r.loaded,total:r.total})}),e.on("FetchBinaryData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");const l=this[r.type];if(!l)throw new Error(`${r.type} not initialized, see the \`useWorkerFetch\` parameter.`);return l.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var r;this.annotationStorage.size<=0&&le("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((r=this._fullReader)==null?void 0:r.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,r=A(this,_c).get(t);if(r)return r;const l=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&A(this,xc).set(i.refStr,e);const s=new j_(t,i,this,this._params.pdfBug);return A(this,zn).set(t,s),s});return A(this,_c).set(t,l),l}getPageIndex(e){return Lm(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return et(this,Bo,wu).call(this,"GetFieldObjects")}hasJSActions(){return et(this,Bo,wu).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return et(this,Bo,wu).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return et(this,Bo,wu).call(this,"GetOptionalContentConfig").then(t=>new b_(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=A(this,Si).get(e);if(t)return t;const r=this.messageHandler.sendWithPromise(e,null).then(l=>{var i,s;return{info:l[0],metadata:l[1]?new m_(l[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((s=this._fullReader)==null?void 0:s.contentLength)??null}});return A(this,Si).set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of A(this,zn).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),A(this,Si).clear(),this.filterFactory.destroy(!0),zu.cleanup()}}cachedPageNumber(e){if(!Lm(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return A(this,xc).get(t)??null}}Si=new WeakMap,zn=new WeakMap,_c=new WeakMap,xc=new WeakMap,Ai=new WeakMap,Bo=new WeakSet,wu=function(e,t=null){const r=A(this,Si).get(e);if(r)return r;const l=this.messageHandler.sendWithPromise(e,t);return A(this,Si).set(e,l),l};var xa;class z_{constructor(e){tt(this,xa,null);At(this,"onContinue",null);At(this,"onError",null);K(this,xa,e)}get promise(){return A(this,xa).capability.promise}cancel(e=0){A(this,xa).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=A(this,xa).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=A(this,xa);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}xa=new WeakMap;var Sa,zo;const no=class no{constructor({callback:e,params:t,objs:r,commonObjs:l,annotationCanvasMap:i,operatorList:s,pageIndex:a,canvasFactory:o,filterFactory:n,useRequestAnimationFrame:c=!1,pdfBug:d=!1,pageColors:u=null}){tt(this,Sa,null);this.callback=e,this.params=t,this.objs=r,this.commonObjs=l,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=s,this._pageIndex=a,this.canvasFactory=o,this.filterFactory=n,this._pdfBug=d,this.pageColors=u,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=c===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new z_(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var a,o;if(this.cancelled)return;if(this._canvas){if(A(no,zo).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");A(no,zo).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:l,transform:i,background:s}=this.params;this.gfx=new Wl(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:i,viewport:l,transparency:e,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,(o=this.graphicsReadyCallback)==null||o.call(this)}cancel(e=null,t=0){var r,l,i;this.running=!1,this.cancelled=!0,(r=this.gfx)==null||r.endDrawing(),A(this,Sa)&&(window.cancelAnimationFrame(A(this,Sa)),K(this,Sa,null)),A(no,zo).delete(this._canvas),e||(e=new tg(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(i=(l=this.task).onError)==null||i.call(l,e)}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?K(this,Sa,window.requestAnimationFrame(()=>{K(this,Sa,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),A(no,zo).delete(this._canvas),this.callback())))}};Sa=new WeakMap,zo=new WeakMap,tt(no,zo,new WeakSet);let Km=no;const $_="5.3.93",H_="cbeef3233";function bb(g){return Math.floor(Math.max(0,Math.min(1,g))*255).toString(16).padStart(2,"0")}function iu(g){return Math.max(0,Math.min(255,255*g))}class yb{static CMYK_G([e,t,r,l]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+l)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=iu(e),[e,e,e]}static G_HTML([e]){const t=bb(e);return`#${t}${t}${t}`}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_rgb(e){return e.map(iu)}static RGB_HTML(e){return`#${e.map(bb).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,r,l]){return["RGB",1-Math.min(1,e+l),1-Math.min(1,r+l),1-Math.min(1,t+l)]}static CMYK_rgb([e,t,r,l]){return[iu(1-Math.min(1,e+l)),iu(1-Math.min(1,r+l)),iu(1-Math.min(1,t+l))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,r]){const l=1-e,i=1-t,s=1-r,a=Math.min(l,i,s);return["CMYK",l,i,s,a]}}class U_{create(e,t,r=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const l=this._createSVG("svg:svg");return l.setAttribute("version","1.1"),r||(l.setAttribute("width",`${e}px`),l.setAttribute("height",`${t}px`)),l.setAttribute("preserveAspectRatio","none"),l.setAttribute("viewBox",`0 0 ${e} ${t}`),l}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){We("Abstract method `_createSVG` called.")}}class Uf extends U_{_createSVG(e){return document.createElementNS(ri,e)}}class Iy{static setupStorage(e,t,r,l,i){const s=l.getValue(t,{value:null});switch(r.name){case"textarea":if(s.value!==null&&(e.textContent=s.value),i==="print")break;e.addEventListener("input",a=>{l.setValue(t,{value:a.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(s.value===r.attributes.xfaOn?e.setAttribute("checked",!0):s.value===r.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",a=>{l.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(s.value!==null&&e.setAttribute("value",s.value),i==="print")break;e.addEventListener("input",a=>{l.setValue(t,{value:a.target.value})})}break;case"select":if(s.value!==null){e.setAttribute("value",s.value);for(const a of r.children)a.attributes.value===s.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const o=a.target.options,n=o.selectedIndex===-1?"":o[o.selectedIndex].value;l.setValue(t,{value:n})});break}}static setAttributes({html:e,element:t,storage:r=null,intent:l,linkService:i}){const{attributes:s}=t,a=e instanceof HTMLAnchorElement;s.type==="radio"&&(s.name=`${s.name}-${l}`);for(const[o,n]of Object.entries(s))if(n!=null)switch(o){case"class":n.length&&e.setAttribute(o,n.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",n);break;case"style":Object.assign(e.style,n);break;case"textContent":e.textContent=n;break;default:(!a||o!=="href"&&o!=="newWindow")&&e.setAttribute(o,n)}a&&i.addLinkAttributes(e,s.href,s.newWindow),r&&s.dataId&&this.setupStorage(e,s.dataId,t,r)}static render(e){var d,u;const t=e.annotationStorage,r=e.linkService,l=e.xfaHtml,i=e.intent||"display",s=document.createElement(l.name);l.attributes&&this.setAttributes({html:s,element:l,intent:i,linkService:r});const a=i!=="richText",o=e.div;if(o.append(s),e.viewport){const h=`matrix(${e.viewport.transform.join(",")})`;o.style.transform=h}a&&o.setAttribute("class","xfaLayer xfaFont");const n=[];if(l.children.length===0){if(l.value){const h=document.createTextNode(l.value);s.append(h),a&&$u.shouldBuildText(l.name)&&n.push(h)}return{textDivs:n}}const c=[[l,-1,s]];for(;c.length>0;){const[h,p,m]=c.at(-1);if(p+1===h.children.length){c.pop();continue}const f=h.children[++c.at(-1)[1]];if(f===null)continue;const{name:b}=f;if(b==="#text"){const _=document.createTextNode(f.value);n.push(_),m.append(_);continue}const y=(d=f==null?void 0:f.attributes)!=null&&d.xmlns?document.createElementNS(f.attributes.xmlns,b):document.createElement(b);if(m.append(y),f.attributes&&this.setAttributes({html:y,element:f,storage:t,intent:i,linkService:r}),((u=f.children)==null?void 0:u.length)>0)c.push([f,-1,y]);else if(f.value){const _=document.createTextNode(f.value);a&&$u.shouldBuildText(b)&&n.push(_),y.append(_)}}for(const h of o.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))h.setAttribute("readOnly",!0);return{textDivs:n}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const V_=9,yl=new WeakSet;class vb{static create(e){switch(e.data.annotationType){case pr.LINK:return new Py(e);case pr.TEXT:return new W_(e);case pr.WIDGET:switch(e.data.fieldType){case"Tx":return new q_(e);case"Btn":return e.data.radioButton?new Dy(e):e.data.checkBox?new G_(e):new K_(e);case"Ch":return new Y_(e);case"Sig":return new X_(e)}return new wl(e);case pr.POPUP:return new Zm(e);case pr.FREETEXT:return new zy(e);case pr.LINE:return new J_(e);case pr.SQUARE:return new Q_(e);case pr.CIRCLE:return new t4(e);case pr.POLYLINE:return new $y(e);case pr.CARET:return new r4(e);case pr.INK:return new og(e);case pr.POLYGON:return new e4(e);case pr.HIGHLIGHT:return new Hy(e);case pr.UNDERLINE:return new s4(e);case pr.SQUIGGLY:return new n4(e);case pr.STRIKEOUT:return new i4(e);case pr.STAMP:return new Uy(e);case pr.FILEATTACHMENT:return new a4(e);default:return new dr(e)}}}var $o,Sc,Ac,Lh,Ym;const gg=class gg{constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:l=!1}={}){tt(this,Lh);tt(this,$o,null);tt(this,Sc,!1);tt(this,Ac,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(r)),l&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return gg._hasPopupData(this.data)}updateEdited(e){var r;if(!this.container)return;A(this,$o)||K(this,$o,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&et(this,Lh,Ym).call(this,t),(r=A(this,Ac))==null||r.popup.updateEdited(e)}resetEdited(){var e;A(this,$o)&&(et(this,Lh,Ym).call(this,A(this,$o).rect),(e=A(this,Ac))==null||e.popup.resetEdited(),K(this,$o,null))}_createContainer(e){const{data:t,parent:{page:r,viewport:l}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),this instanceof wl||(i.tabIndex=0);const{style:s}=i;if(s.zIndex=this.parent.zIndex++,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof Zm){const{rotation:m}=t;return!t.hasOwnCanvas&&m!==0&&this.setRotation(m,i),i}const{width:a,height:o}=this;if(!e&&t.borderStyle.width>0){s.borderWidth=`${t.borderStyle.width}px`;const m=t.borderStyle.horizontalCornerRadius,f=t.borderStyle.verticalCornerRadius;if(m>0||f>0){const y=`calc(${m}px * var(--total-scale-factor)) / calc(${f}px * var(--total-scale-factor))`;s.borderRadius=y}else if(this instanceof Dy){const y=`calc(${a}px * var(--total-scale-factor)) / calc(${o}px * var(--total-scale-factor))`;s.borderRadius=y}switch(t.borderStyle.style){case Cl.SOLID:s.borderStyle="solid";break;case Cl.DASHED:s.borderStyle="dashed";break;case Cl.BEVELED:le("Unimplemented border style: beveled");break;case Cl.INSET:le("Unimplemented border style: inset");break;case Cl.UNDERLINE:s.borderBottomStyle="solid";break}const b=t.borderColor||null;b?(K(this,Sc,!0),s.borderColor=Wt.makeHexColor(b[0]|0,b[1]|0,b[2]|0)):s.borderWidth=0}const n=Wt.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]),{pageWidth:c,pageHeight:d,pageX:u,pageY:h}=l.rawDims;s.left=`${100*(n[0]-u)/c}%`,s.top=`${100*(n[1]-h)/d}%`;const{rotation:p}=t;return t.hasOwnCanvas||p===0?(s.width=`${100*a/c}%`,s.height=`${100*o/d}%`):this.setRotation(p,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:l}=this.parent.viewport.rawDims;let{width:i,height:s}=this;e%180!==0&&([i,s]=[s,i]),t.style.width=`${100*i/r}%`,t.style.height=`${100*s/l}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,r,l)=>{const i=l.detail[t],s=i[0],a=i.slice(1);l.target.style[r]=yb[`${s}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[r]:yb[`${s}_rgb`](a)})};return we(this,"_commonActions",{display:t=>{const{display:r}=t.detail,l=r%2===1;this.container.style.visibility=l?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:l,noPrint:r===1||r===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:r}=t.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const r=t.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,t){const r=this._commonActions;for(const l of Object.keys(t.detail)){const i=e[l]||r[l];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const r=this._commonActions;for(const[l,i]of Object.entries(t)){const s=r[l];if(s){const a={detail:{[l]:i},target:e};s(a),delete t[l]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,r,l,i]=this.data.rect.map(m=>Math.fround(m));if(e.length===8){const[m,f,b,y]=e.subarray(2,6);if(l===m&&i===f&&t===b&&r===y)return}const{style:s}=this.container;let a;if(A(this,Sc)){const{borderColor:m,borderWidth:f}=s;s.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${m}" stroke-width="${f}">`],this.container.classList.add("hasBorder")}const o=l-t,n=i-r,{svgFactory:c}=this,d=c.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0),d.role="none";const u=c.createElement("defs");d.append(u);const h=c.createElement("clipPath"),p=`clippath_${this.data.id}`;h.setAttribute("id",p),h.setAttribute("clipPathUnits","objectBoundingBox"),u.append(h);for(let m=2,f=e.length;m<f;m+=8){const b=e[m],y=e[m+1],_=e[m+2],E=e[m+3],M=c.createElement("rect"),D=(_-t)/o,z=(i-y)/n,O=(b-_)/o,N=(y-E)/n;M.setAttribute("x",D),M.setAttribute("y",z),M.setAttribute("width",O),M.setAttribute("height",N),h.append(M),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${D}" y="${z}" width="${O}" height="${N}"/>`)}A(this,Sc)&&(a.push("</g></svg>')"),s.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath=`url(#${p})`}_createPopup(){const{data:e}=this,t=K(this,Ac,new Zm({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){We("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const r=[];if(this._fieldObjects){const l=this._fieldObjects[e];if(l)for(const{page:i,id:s,exportValues:a}of l){if(i===-1||s===t)continue;const o=typeof a=="string"?a:null,n=document.querySelector(`[data-element-id="${s}"]`);if(n&&!yl.has(n)){le(`_getElementsByName - element not allowed: ${s}`);continue}r.push({id:s,exportValue:o,domElement:n})}return r}for(const l of document.getElementsByName(e)){const{exportValue:i}=l,s=l.getAttribute("data-element-id");s!==t&&yl.has(l)&&r.push({id:s,exportValue:i,domElement:l})}return r}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var r;(r=this.linkService.eventBus)==null||r.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};$o=new WeakMap,Sc=new WeakMap,Ac=new WeakMap,Lh=new WeakSet,Ym=function(e){const{container:{style:t},data:{rect:r,rotation:l},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:s,pageX:a,pageY:o}}}}=this;r==null||r.splice(0,4,...e),t.left=`${100*(e[0]-a)/i}%`,t.top=`${100*(s-e[3]+o)/s}%`,l===0?(t.width=`${100*(e[2]-e[0])/i}%`,t.height=`${100*(e[3]-e[1])/s}%`):this.setRotation(l)};let dr=gg;var Us,Qa,Oy,Ny;class Py extends dr{constructor(t,r=null){super(t,{isRenderable:!0,ignoreBorder:!!(r!=null&&r.ignoreBorder),createQuadrilaterals:!0});tt(this,Us);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:r}=this,l=document.createElement("a");l.setAttribute("data-element-id",t.id);let i=!1;return t.url?(r.addLinkAttributes(l,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(l,t.action),i=!0):t.attachment?(et(this,Us,Oy).call(this,l,t.attachment,t.attachmentDest),i=!0):t.setOCGState?(et(this,Us,Ny).call(this,l,t.setOCGState),i=!0):t.dest?(this._bindLink(l,t.dest),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(l,t),i=!0),t.resetForm?(this._bindResetFormAction(l,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(l,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(l),this.container}_bindLink(t,r){t.href=this.linkService.getDestinationHash(r),t.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||r==="")&&et(this,Us,Qa).call(this)}_bindNamedAction(t,r){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(r),!1),et(this,Us,Qa).call(this)}_bindJSAction(t,r){t.href=this.linkService.getAnchorUrl("");const l=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(r.actions)){const s=l.get(i);s&&(t[s]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:i}}),!1})}t.onclick||(t.onclick=()=>!1),et(this,Us,Qa).call(this)}_bindResetFormAction(t,r){const l=t.onclick;if(l||(t.href=this.linkService.getAnchorUrl("")),et(this,Us,Qa).call(this),!this._fieldObjects){le('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),l||(t.onclick=()=>!1);return}t.onclick=()=>{var d;l==null||l();const{fields:i,refs:s,include:a}=r,o=[];if(i.length!==0||s.length!==0){const u=new Set(s);for(const h of i){const p=this._fieldObjects[h]||[];for(const{id:m}of p)u.add(m)}for(const h of Object.values(this._fieldObjects))for(const p of h)u.has(p.id)===a&&o.push(p)}else for(const u of Object.values(this._fieldObjects))o.push(...u);const n=this.annotationStorage,c=[];for(const u of o){const{id:h}=u;switch(c.push(h),u.type){case"text":{const m=u.defaultValue||"";n.setValue(h,{value:m});break}case"checkbox":case"radiobutton":{const m=u.defaultValue===u.exportValues;n.setValue(h,{value:m});break}case"combobox":case"listbox":{const m=u.defaultValue||"";n.setValue(h,{value:m});break}default:continue}const p=document.querySelector(`[data-element-id="${h}"]`);if(p){if(!yl.has(p)){le(`_bindResetFormAction - element not allowed: ${h}`);continue}}else continue;p.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}})),!1}}}Us=new WeakSet,Qa=function(){this.container.setAttribute("data-internal-link","")},Oy=function(t,r,l=null){t.href=this.linkService.getAnchorUrl(""),r.description&&(t.title=r.description),t.onclick=()=>{var i;return(i=this.downloadManager)==null||i.openOrDownloadData(r.content,r.filename,l),!1},et(this,Us,Qa).call(this)},Ny=function(t,r){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(r),!1),et(this,Us,Qa).call(this)};class W_ extends dr{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class wl extends dr{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return qr.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,r,l,i){r.includes("mouse")?e.addEventListener(r,s=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:l,value:i(s),shift:s.shiftKey,modifier:this._getKeyModifier(s)}})}):e.addEventListener(r,s=>{var a;if(r==="blur"){if(!t.focused||!s.relatedTarget)return;t.focused=!1}else if(r==="focus"){if(t.focused)return;t.focused=!0}i&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:l,value:i(s)}}))})}_setEventListeners(e,t,r,l){var i,s,a;for(const[o,n]of r)(n==="Action"||(i=this.data.actions)!=null&&i[n])&&((n==="Focus"||n==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,o,n,l),n==="Focus"&&!((s=this.data.actions)!=null&&s.Blur)?this._setEventListener(e,t,"blur","Blur",null):n==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Wt.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,l=this.data.defaultAppearanceData.fontSize||V_,i=e.style;let s;const a=2,o=n=>Math.round(10*n)/10;if(this.data.multiLine){const n=Math.abs(this.data.rect[3]-this.data.rect[1]-a),c=Math.round(n/(Xp*l))||1,d=n/c;s=Math.min(l,o(d/Xp))}else{const n=Math.abs(this.data.rect[3]-this.data.rect[1]-a);s=Math.min(l,o(n/Xp))}i.fontSize=`calc(${s}px * var(--total-scale-factor))`,i.color=Wt.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class q_ extends wl{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,r,l){const i=this.annotationStorage;for(const s of this._getElementsByName(e.name,e.id))s.domElement&&(s.domElement[t]=r),i.setValue(s.id,{[l]:r})}render(){var l,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const s=e.getValue(t,{value:this.data.fieldValue});let a=s.value||"";const o=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;o&&a.length>o&&(a=a.slice(0,o));let n=s.formattedValue||((l=this.data.textContent)==null?void 0:l.join(`
`))||null;n&&this.data.comb&&(n=n.replaceAll(/\s+/g,""));const c={userValue:a,formattedValue:n,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=n??a,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type=this.data.password?"password":"text",r.setAttribute("value",n??a),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),yl.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=0;const d=this.data.dateFormat||this.data.timeFormat;d&&(r.title=d),this._setRequired(r,this.data.required),o&&(r.maxLength=o),r.addEventListener("input",h=>{e.setValue(t,{value:h.target.value}),this.setPropertyOnSiblings(r,"value",h.target.value,"value"),c.formattedValue=null}),r.addEventListener("resetform",h=>{const p=this.data.defaultFieldValue??"";r.value=c.userValue=p,c.formattedValue=null});let u=h=>{const{formattedValue:p}=c;p!=null&&(h.target.value=p),h.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",p=>{var f;if(c.focused)return;const{target:m}=p;c.userValue&&(m.value=c.userValue),c.lastCommittedValue=m.value,c.commitKey=1,(f=this.data.actions)!=null&&f.Focus||(c.focused=!0)}),r.addEventListener("updatefromsandbox",p=>{this.showElementAndHideCanvas(p.target);const m={value(f){c.userValue=f.detail.value??"",e.setValue(t,{value:c.userValue.toString()}),f.target.value=c.userValue},formattedValue(f){const{formattedValue:b}=f.detail;c.formattedValue=b,b!=null&&f.target!==document.activeElement&&(f.target.value=b),e.setValue(t,{formattedValue:b})},selRange(f){f.target.setSelectionRange(...f.detail.selRange)},charLimit:f=>{var E;const{charLimit:b}=f.detail,{target:y}=f;if(b===0){y.removeAttribute("maxLength");return}y.setAttribute("maxLength",b);let _=c.userValue;!_||_.length<=b||(_=_.slice(0,b),y.value=c.userValue=_,e.setValue(t,{value:_}),(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,willCommit:!0,commitKey:1,selStart:y.selectionStart,selEnd:y.selectionEnd}}))}};this._dispatchEventFromSandbox(m,p)}),r.addEventListener("keydown",p=>{var b;c.commitKey=1;let m=-1;if(p.key==="Escape"?m=0:p.key==="Enter"&&!this.data.multiLine?m=2:p.key==="Tab"&&(c.commitKey=3),m===-1)return;const{value:f}=p.target;c.lastCommittedValue!==f&&(c.lastCommittedValue=f,c.userValue=f,(b=this.linkService.eventBus)==null||b.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:f,willCommit:!0,commitKey:m,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}}))});const h=u;u=null,r.addEventListener("blur",p=>{var f,b;if(!c.focused||!p.relatedTarget)return;(f=this.data.actions)!=null&&f.Blur||(c.focused=!1);const{value:m}=p.target;c.userValue=m,c.lastCommittedValue!==m&&((b=this.linkService.eventBus)==null||b.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:m,willCommit:!0,commitKey:c.commitKey,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}})),h(p)}),(i=this.data.actions)!=null&&i.Keystroke&&r.addEventListener("beforeinput",p=>{var D;c.lastCommittedValue=null;const{data:m,target:f}=p,{value:b,selectionStart:y,selectionEnd:_}=f;let E=y,M=_;switch(p.inputType){case"deleteWordBackward":{const z=b.substring(0,y).match(/\w*[^\w]*$/);z&&(E-=z[0].length);break}case"deleteWordForward":{const z=b.substring(y).match(/^[^\w]*\w*/);z&&(M+=z[0].length);break}case"deleteContentBackward":y===_&&(E-=1);break;case"deleteContentForward":y===_&&(M+=1);break}p.preventDefault(),(D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,change:m||"",willCommit:!1,selStart:E,selEnd:M}})}),this._setEventListeners(r,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],p=>p.target.value)}if(u&&r.addEventListener("blur",u),this.data.comb){const p=(this.data.rect[2]-this.data.rect[0])/o;r.classList.add("comb"),r.style.letterSpacing=`calc(${p}px * var(--total-scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class X_ extends wl{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class G_ extends wl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,r=t.id;let l=e.getValue(r,{value:t.exportValue===t.fieldValue}).value;typeof l=="string"&&(l=l!=="Off",e.setValue(r,{value:l})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return yl.add(i),i.setAttribute("data-element-id",r),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,l&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=0,i.addEventListener("change",s=>{const{name:a,checked:o}=s.target;for(const n of this._getElementsByName(a,r)){const c=o&&n.exportValue===t.exportValue;n.domElement&&(n.domElement.checked=c),e.setValue(n.id,{value:c})}e.setValue(r,{value:o})}),i.addEventListener("resetform",s=>{const a=t.defaultFieldValue||"Off";s.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",s=>{const a={value(o){o.target.checked=o.detail.value!=="Off",e.setValue(r,{value:o.target.checked})}};this._dispatchEventFromSandbox(a,s)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],s=>s.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Dy extends wl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,r=t.id;let l=e.getValue(r,{value:t.fieldValue===t.buttonValue}).value;if(typeof l=="string"&&(l=l!==t.buttonValue,e.setValue(r,{value:l})),l)for(const s of this._getElementsByName(t.fieldName,r))e.setValue(s.id,{value:!1});const i=document.createElement("input");if(yl.add(i),i.setAttribute("data-element-id",r),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,l&&i.setAttribute("checked",!0),i.tabIndex=0,i.addEventListener("change",s=>{const{name:a,checked:o}=s.target;for(const n of this._getElementsByName(a,r))e.setValue(n.id,{value:!1});e.setValue(r,{value:o})}),i.addEventListener("resetform",s=>{const a=t.defaultFieldValue;s.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const s=t.buttonValue;i.addEventListener("updatefromsandbox",a=>{const o={value:n=>{const c=s===n.detail.value;for(const d of this._getElementsByName(n.target.name)){const u=c&&d.id===r;d.domElement&&(d.domElement.checked=u),e.setValue(d.id,{value:u})}}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class K_ extends Py{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class Y_ extends wl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,r=e.getValue(t,{value:this.data.fieldValue}),l=document.createElement("select");yl.add(l),l.setAttribute("data-element-id",t),l.disabled=this.data.readOnly,this._setRequired(l,this.data.required),l.name=this.data.fieldName,l.tabIndex=0;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(l.size=this.data.options.length,this.data.multiSelect&&(l.multiple=!0)),l.addEventListener("resetform",c=>{const d=this.data.defaultFieldValue;for(const u of l.options)u.selected=u.value===d});for(const c of this.data.options){const d=document.createElement("option");d.textContent=c.displayValue,d.value=c.exportValue,r.value.includes(c.exportValue)&&(d.setAttribute("selected",!0),i=!1),l.append(d)}let s=null;if(i){const c=document.createElement("option");c.value=" ",c.setAttribute("hidden",!0),c.setAttribute("selected",!0),l.prepend(c),s=()=>{c.remove(),l.removeEventListener("input",s),s=null},l.addEventListener("input",s)}const a=c=>{const d=c?"value":"textContent",{options:u,multiple:h}=l;return h?Array.prototype.filter.call(u,p=>p.selected).map(p=>p[d]):u.selectedIndex===-1?null:u[u.selectedIndex][d]};let o=a(!1);const n=c=>{const d=c.target.options;return Array.prototype.map.call(d,u=>({displayValue:u.textContent,exportValue:u.value}))};return this.enableScripting&&this.hasJSActions?(l.addEventListener("updatefromsandbox",c=>{const d={value(u){s==null||s();const h=u.detail.value,p=new Set(Array.isArray(h)?h:[h]);for(const m of l.options)m.selected=p.has(m.value);e.setValue(t,{value:a(!0)}),o=a(!1)},multipleSelection(u){l.multiple=!0},remove(u){const h=l.options,p=u.detail.remove;h[p].selected=!1,l.remove(p),h.length>0&&Array.prototype.findIndex.call(h,f=>f.selected)===-1&&(h[0].selected=!0),e.setValue(t,{value:a(!0),items:n(u)}),o=a(!1)},clear(u){for(;l.length!==0;)l.remove(0);e.setValue(t,{value:null,items:[]}),o=a(!1)},insert(u){const{index:h,displayValue:p,exportValue:m}=u.detail.insert,f=l.children[h],b=document.createElement("option");b.textContent=p,b.value=m,f?f.before(b):l.append(b),e.setValue(t,{value:a(!0),items:n(u)}),o=a(!1)},items(u){const{items:h}=u.detail;for(;l.length!==0;)l.remove(0);for(const p of h){const{displayValue:m,exportValue:f}=p,b=document.createElement("option");b.textContent=m,b.value=f,l.append(b)}l.options.length>0&&(l.options[0].selected=!0),e.setValue(t,{value:a(!0),items:n(u)}),o=a(!1)},indices(u){const h=new Set(u.detail.indices);for(const p of u.target.options)p.selected=h.has(p.index);e.setValue(t,{value:a(!0)}),o=a(!1)},editable(u){u.target.disabled=!u.detail.editable}};this._dispatchEventFromSandbox(d,c)}),l.addEventListener("input",c=>{var h;const d=a(!0),u=a(!1);e.setValue(t,{value:d}),c.preventDefault(),(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:o,change:u,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(l,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],c=>c.target.value)):l.addEventListener("input",function(c){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(l),this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class Zm extends dr{constructor(e){const{data:t,elements:r}=e;super(e,{isRenderable:dr._hasPopupData(t)}),this.elements=r,this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=new Z_({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),r=[];for(const l of this.elements)l.popup=t,l.container.ariaHasPopup="dialog",r.push(l.data.id),l.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(l=>`${Q0}${l}`).join(",")),this.container}}var kc,ap,op,Ec,Cc,lr,ki,Ho,Fh,jh,Tc,Ei,dn,Ci,Bh,Ti,zh,Uo,Vo,qe,hf,Jm,Ly,Fy,jy,By,df,ff,Qm;class Z_{constructor({container:e,color:t,elements:r,titleObj:l,modificationDate:i,contentsObj:s,richText:a,parent:o,rect:n,parentRect:c,open:d}){tt(this,qe);tt(this,kc,et(this,qe,jy).bind(this));tt(this,ap,et(this,qe,Qm).bind(this));tt(this,op,et(this,qe,ff).bind(this));tt(this,Ec,et(this,qe,df).bind(this));tt(this,Cc,null);tt(this,lr,null);tt(this,ki,null);tt(this,Ho,null);tt(this,Fh,null);tt(this,jh,null);tt(this,Tc,null);tt(this,Ei,!1);tt(this,dn,null);tt(this,Ci,null);tt(this,Bh,null);tt(this,Ti,null);tt(this,zh,null);tt(this,Uo,null);tt(this,Vo,!1);var u;K(this,lr,e),K(this,zh,l),K(this,ki,s),K(this,Ti,a),K(this,jh,o),K(this,Cc,t),K(this,Bh,n),K(this,Tc,c),K(this,Fh,r),K(this,Ho,rg.toDateObject(i)),this.trigger=r.flatMap(h=>h.getElementsToTriggerPopup());for(const h of this.trigger)h.addEventListener("click",A(this,Ec)),h.addEventListener("mouseenter",A(this,op)),h.addEventListener("mouseleave",A(this,ap)),h.classList.add("popupTriggerArea");for(const h of r)(u=h.container)==null||u.addEventListener("keydown",A(this,kc));A(this,lr).hidden=!0,d&&et(this,qe,df).call(this)}render(){if(A(this,dn))return;const e=K(this,dn,document.createElement("div"));if(e.className="popup",A(this,Cc)){const i=e.style.outlineColor=Wt.makeHexColor(...A(this,Cc));e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const t=document.createElement("span");t.className="header";const r=document.createElement("h1");if(t.append(r),{dir:r.dir,str:r.textContent}=A(this,zh),e.append(t),A(this,Ho)){const i=document.createElement("time");i.classList.add("popupDate"),i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:A(this,Ho).valueOf()})),i.dateTime=A(this,Ho).toISOString(),t.append(i)}const l=A(this,qe,hf);if(l)Iy.render({xfaHtml:l,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const i=this._formatContents(A(this,ki));e.append(i)}A(this,lr).append(e)}_formatContents({str:e,dir:t}){const r=document.createElement("p");r.classList.add("popupContent"),r.dir=t;const l=e.split(/(?:\r\n?|\n)/);for(let i=0,s=l.length;i<s;++i){const a=l[i];r.append(document.createTextNode(a)),i<s-1&&r.append(document.createElement("br"))}return r}updateEdited({rect:e,popupContent:t}){var r;A(this,Uo)||K(this,Uo,{contentsObj:A(this,ki),richText:A(this,Ti)}),e&&K(this,Ci,null),t&&(K(this,Ti,et(this,qe,Fy).call(this,t)),K(this,ki,null)),(r=A(this,dn))==null||r.remove(),K(this,dn,null)}resetEdited(){var e;A(this,Uo)&&({contentsObj:rs(this,ki)._,richText:rs(this,Ti)._}=A(this,Uo),K(this,Uo,null),(e=A(this,dn))==null||e.remove(),K(this,dn,null),K(this,Ci,null))}forceHide(){K(this,Vo,this.isVisible),A(this,Vo)&&(A(this,lr).hidden=!0)}maybeShow(){A(this,Vo)&&(A(this,dn)||et(this,qe,ff).call(this),K(this,Vo,!1),A(this,lr).hidden=!1)}get isVisible(){return A(this,lr).hidden===!1}}kc=new WeakMap,ap=new WeakMap,op=new WeakMap,Ec=new WeakMap,Cc=new WeakMap,lr=new WeakMap,ki=new WeakMap,Ho=new WeakMap,Fh=new WeakMap,jh=new WeakMap,Tc=new WeakMap,Ei=new WeakMap,dn=new WeakMap,Ci=new WeakMap,Bh=new WeakMap,Ti=new WeakMap,zh=new WeakMap,Uo=new WeakMap,Vo=new WeakMap,qe=new WeakSet,hf=function(){const e=A(this,Ti),t=A(this,ki);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&A(this,Ti).html||null},Jm=function(){var e,t,r;return((r=(t=(e=A(this,qe,hf))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.fontSize)||0},Ly=function(){var e,t,r;return((r=(t=(e=A(this,qe,hf))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.color)||null},Fy=function(e){const t=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},l={style:{color:A(this,qe,Ly),fontSize:A(this,qe,Jm)?`calc(${A(this,qe,Jm)}px * var(--total-scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:l});return r},jy=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&A(this,Ei))&&et(this,qe,df).call(this)},By=function(){if(A(this,Ci)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:r,pageX:l,pageY:i}}}=A(this,jh);let s=!!A(this,Tc),a=s?A(this,Tc):A(this,Bh);for(const p of A(this,Fh))if(!a||Wt.intersect(p.data.rect,a)!==null){a=p.data.rect,s=!0;break}const o=Wt.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),c=s?a[2]-a[0]+5:0,d=o[0]+c,u=o[1];K(this,Ci,[100*(d-l)/t,100*(u-i)/r]);const{style:h}=A(this,lr);h.left=`${A(this,Ci)[0]}%`,h.top=`${A(this,Ci)[1]}%`},df=function(){K(this,Ei,!A(this,Ei)),A(this,Ei)?(et(this,qe,ff).call(this),A(this,lr).addEventListener("click",A(this,Ec)),A(this,lr).addEventListener("keydown",A(this,kc))):(et(this,qe,Qm).call(this),A(this,lr).removeEventListener("click",A(this,Ec)),A(this,lr).removeEventListener("keydown",A(this,kc)))},ff=function(){A(this,dn)||this.render(),this.isVisible?A(this,Ei)&&A(this,lr).classList.add("focused"):(et(this,qe,By).call(this),A(this,lr).hidden=!1,A(this,lr).style.zIndex=parseInt(A(this,lr).style.zIndex)+1e3)},Qm=function(){A(this,lr).classList.remove("focused"),!(A(this,Ei)||!this.isVisible)&&(A(this,lr).hidden=!0,A(this,lr).style.zIndex=parseInt(A(this,lr).style.zIndex)-1e3)};class zy extends dr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=oe.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const r=document.createElement("span");r.textContent=t,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var $h;class J_ extends dr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});tt(this,$h,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:r,height:l}=this,i=this.svgFactory.create(r,l,!0),s=K(this,$h,this.svgFactory.createElement("svg:line"));return s.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),s.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),s.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),s.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),s.setAttribute("stroke-width",t.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return A(this,$h)}addHighlightArea(){this.container.classList.add("highlightArea")}}$h=new WeakMap;var Hh;class Q_ extends dr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});tt(this,Hh,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:r,height:l}=this,i=this.svgFactory.create(r,l,!0),s=t.borderStyle.width,a=K(this,Hh,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",s/2),a.setAttribute("y",s/2),a.setAttribute("width",r-s),a.setAttribute("height",l-s),a.setAttribute("stroke-width",s||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return A(this,Hh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Hh=new WeakMap;var Uh;class t4 extends dr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});tt(this,Uh,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:r,height:l}=this,i=this.svgFactory.create(r,l,!0),s=t.borderStyle.width,a=K(this,Uh,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",r/2),a.setAttribute("cy",l/2),a.setAttribute("rx",r/2-s/2),a.setAttribute("ry",l/2-s/2),a.setAttribute("stroke-width",s||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return A(this,Uh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Uh=new WeakMap;var Vh;class $y extends dr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});tt(this,Vh,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:r,borderStyle:l,popupRef:i},width:s,height:a}=this;if(!r)return this.container;const o=this.svgFactory.create(s,a,!0);let n=[];for(let d=0,u=r.length;d<u;d+=2){const h=r[d]-t[0],p=t[3]-r[d+1];n.push(`${h},${p}`)}n=n.join(" ");const c=K(this,Vh,this.svgFactory.createElement(this.svgElementName));return c.setAttribute("points",n),c.setAttribute("stroke-width",l.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),o.append(c),this.container.append(o),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return A(this,Vh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Vh=new WeakMap;class e4 extends $y{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class r4 extends dr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Wh,Wo,qh,t0;class og extends dr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});tt(this,qh);tt(this,Wh,null);tt(this,Wo,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?oe.HIGHLIGHT:oe.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:r,inkLists:l,borderStyle:i,popupRef:s}}=this,{transform:a,width:o,height:n}=et(this,qh,t0).call(this,r,t),c=this.svgFactory.create(o,n,!0),d=K(this,Wh,this.svgFactory.createElement("svg:g"));c.append(d),d.setAttribute("stroke-width",i.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",a);for(let u=0,h=l.length;u<h;u++){const p=this.svgFactory.createElement(this.svgElementName);A(this,Wo).push(p),p.setAttribute("points",l[u].join(",")),d.append(p)}return!s&&this.hasPopupData&&this._createPopup(),this.container.append(c),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:r,points:l,rect:i}=t,s=A(this,Wh);if(r>=0&&s.setAttribute("stroke-width",r||1),l)for(let a=0,o=A(this,Wo).length;a<o;a++)A(this,Wo)[a].setAttribute("points",l[a].join(","));if(i){const{transform:a,width:o,height:n}=et(this,qh,t0).call(this,this.data.rotation,i);s.parentElement.setAttribute("viewBox",`0 0 ${o} ${n}`),s.setAttribute("transform",a)}}getElementsToTriggerPopup(){return A(this,Wo)}addHighlightArea(){this.container.classList.add("highlightArea")}}Wh=new WeakMap,Wo=new WeakMap,qh=new WeakSet,t0=function(t,r){switch(t){case 90:return{transform:`rotate(90) translate(${-r[0]},${r[1]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};case 180:return{transform:`rotate(180) translate(${-r[2]},${r[1]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]};case 270:return{transform:`rotate(270) translate(${-r[2]},${r[3]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};default:return{transform:`translate(${-r[0]},${r[3]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]}}};class Hy extends dr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=oe.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const r=document.createElement("mark");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class s4 extends dr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class n4 extends dr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class i4 extends dr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const r=document.createElement("s");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class Uy extends dr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=oe.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Xh,Gh,e0;class a4 extends dr{constructor(t){var l;super(t,{isRenderable:!0});tt(this,Gh);tt(this,Xh,null);const{file:r}=this.data;this.filename=r.filename,this.content=r.content,(l=this.linkService.eventBus)==null||l.dispatch("fileattachmentannotation",{source:this,...r})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:r}=this;let l;r.hasAppearance||r.fillAlpha===0?l=document.createElement("div"):(l=document.createElement("img"),l.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(r.name)?"paperclip":"pushpin"}.svg`,r.fillAlpha&&r.fillAlpha<1&&(l.style=`filter: opacity(${Math.round(r.fillAlpha*100)}%);`)),l.addEventListener("dblclick",et(this,Gh,e0).bind(this)),K(this,Xh,l);const{isMac:i}=qr.platform;return t.addEventListener("keydown",s=>{s.key==="Enter"&&(i?s.metaKey:s.ctrlKey)&&et(this,Gh,e0).call(this)}),!r.popupRef&&this.hasPopupData?this._createPopup():l.classList.add("popupTriggerArea"),t.append(l),t}getElementsToTriggerPopup(){return A(this,Xh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Xh=new WeakMap,Gh=new WeakSet,e0=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Kh,qo,Aa,Yh,qa,s0,n0;const bg=class bg{constructor({div:e,accessibilityManager:t,annotationCanvasMap:r,annotationEditorUIManager:l,page:i,viewport:s,structTreeLayer:a}){tt(this,qa);tt(this,Kh,null);tt(this,qo,null);tt(this,Aa,new Map);tt(this,Yh,null);this.div=e,K(this,Kh,t),K(this,qo,r),K(this,Yh,a||null),this.page=i,this.viewport=s,this.zIndex=0,this._annotationEditorUIManager=l}hasEditableAnnotations(){return A(this,Aa).size>0}async render(e){var s;const{annotations:t}=e,r=this.div;gl(r,this.viewport);const l=new Map,i={data:null,layer:r,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Uf,annotationStorage:e.annotationStorage||new ng,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const o=a.annotationType===pr.POPUP;if(o){const d=l.get(a.id);if(!d)continue;i.elements=d}else if(a.rect[2]===a.rect[0]||a.rect[3]===a.rect[1])continue;i.data=a;const n=vb.create(i);if(!n.isRenderable)continue;if(!o&&a.popupRef){const d=l.get(a.popupRef);d?d.push(n):l.set(a.popupRef,[n])}const c=n.render();a.hidden&&(c.style.visibility="hidden"),await et(this,qa,s0).call(this,c,a.id,i.elements),n._isEditable&&(A(this,Aa).set(n.data.id,n),(s=this._annotationEditorUIManager)==null||s.renderAnnotationElement(n))}et(this,qa,n0).call(this)}async addLinkAnnotations(e,t){const r={data:null,layer:this.div,linkService:t,svgFactory:new Uf,parent:this};for(const l of e){l.borderStyle||(l.borderStyle=bg._defaultBorderStyle),r.data=l;const i=vb.create(r);if(!i.isRenderable)continue;const s=i.render();await et(this,qa,s0).call(this,s,l.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,gl(t,{rotation:e.rotation}),et(this,qa,n0).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(A(this,Aa).values())}getEditableAnnotation(e){return A(this,Aa).get(e)}static get _defaultBorderStyle(){return we(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Cl.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};Kh=new WeakMap,qo=new WeakMap,Aa=new WeakMap,Yh=new WeakMap,qa=new WeakSet,s0=async function(e,t,r){var a,o;const l=e.firstChild||e,i=l.id=`${Q0}${t}`,s=await((a=A(this,Yh))==null?void 0:a.getAriaAttributes(i));if(s)for(const[n,c]of s)l.setAttribute(n,c);r?r.at(-1).container.after(e):(this.div.append(e),(o=A(this,Kh))==null||o.moveElementInDOM(this.div,e,l,!1))},n0=function(){var t;if(!A(this,qo))return;const e=this.div;for(const[r,l]of A(this,qo)){const i=e.querySelector(`[data-annotation-id="${r}"]`);if(!i)continue;l.className="annotationContent";const{firstChild:s}=i;s?s.nodeName==="CANVAS"?s.replaceWith(l):s.classList.contains("annotationContent")?s.after(l):s.before(l):i.append(l);const a=A(this,Aa).get(r);a&&(a._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(r,i.id,l),a._hasNoCanvas=!1):a.canvas=l)}A(this,qo).clear()};let r0=bg;const Ud=/\r\n?|\n/g;var fn,Is,Zh,Xo,Ps,yr,Vy,Wy,qy,pf,Hi,mf,gf,Xy,a0,Gy;const Ye=class Ye extends Je{constructor(t){super({...t,name:"freeTextEditor"});tt(this,yr);tt(this,fn);tt(this,Is,"");tt(this,Zh,`${this.id}-editor`);tt(this,Xo,null);tt(this,Ps);K(this,fn,t.color||Ye._defaultColor||Je._defaultLineColor),K(this,Ps,t.fontSize||Ye._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=Ye.prototype,r=s=>s.isEmpty(),l=bl.TRANSLATE_SMALL,i=bl.TRANSLATE_BIG;return we(this,"_keyboardManager",new Ad([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-l,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:r}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[l,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:r}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-l],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:r}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,l],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:r}]]))}static initialize(t,r){Je.initialize(t,r);const l=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(l.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,r){switch(t){case xe.FREETEXT_SIZE:Ye._defaultFontSize=r;break;case xe.FREETEXT_COLOR:Ye._defaultColor=r;break}}updateParams(t,r){switch(t){case xe.FREETEXT_SIZE:et(this,yr,Vy).call(this,r);break;case xe.FREETEXT_COLOR:et(this,yr,Wy).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[xe.FREETEXT_SIZE,Ye._defaultFontSize],[xe.FREETEXT_COLOR,Ye._defaultColor||Je._defaultLineColor]]}get propertiesToUpdate(){return[[xe.FREETEXT_SIZE,A(this,Ps)],[xe.FREETEXT_COLOR,A(this,fn)]]}_translateEmpty(t,r){this._uiManager.translateSelectedEditors(t,r,!0)}getInitialTranslation(){const t=this.parentScale;return[-Ye._internalPadding*t,-(Ye._internalPadding+A(this,Ps))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),K(this,Xo,new AbortController);const t=this._uiManager.combinedSignal(A(this,Xo));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",A(this,Zh)),this._isDraggable=!0,(t=A(this,Xo))==null||t.abort(),K(this,Xo,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var r;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(r=this._initialOptions)!=null&&r.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=A(this,Is),r=K(this,Is,et(this,yr,qy).call(this).trimEnd());if(t===r)return;const l=i=>{if(K(this,Is,i),!i){this.remove();return}et(this,yr,gf).call(this),this._uiManager.rebuild(this),et(this,yr,pf).call(this)};this.addCommands({cmd:()=>{l(r)},undo:()=>{l(t)},mustExec:!1}),et(this,yr,pf).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Ye._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,r;(this._isCopy||this.annotationElementId)&&(t=this.x,r=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",A(this,Zh)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:l}=this.editorDiv;if(l.fontSize=`calc(${A(this,Ps)}px * var(--total-scale-factor))`,l.color=A(this,fn),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,s]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[o,n]=this.getInitialTranslation();[o,n]=this.pageTranslationToScreen(o,n);const[c,d]=this.pageDimensions,[u,h]=this.pageTranslation;let p,m;switch(this.rotation){case 0:p=t+(a[0]-u)/c,m=r+this.height-(a[1]-h)/d;break;case 90:p=t+(a[0]-u)/c,m=r-(a[1]-h)/d,[o,n]=[n,-o];break;case 180:p=t-this.width+(a[0]-u)/c,m=r-(a[1]-h)/d,[o,n]=[-o,-n];break;case 270:p=t+(a[0]-u-this.height*d)/c,m=r+(a[1]-h-this.width*c)/d,[o,n]=[-n,o];break}this.setAt(p*i,m*s,o,n)}else this._moveAfterPaste(t,r);et(this,yr,gf).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var p,m,f;const r=t.clipboardData||window.clipboardData,{types:l}=r;if(l.length===1&&l[0]==="text/plain")return;t.preventDefault();const i=et(p=Ye,Hi,a0).call(p,r.getData("text")||"").replaceAll(Ud,`
`);if(!i)return;const s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();const a=s.getRangeAt(0);if(!i.includes(`
`)){a.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),s.collapseToStart();return}const{startContainer:o,startOffset:n}=a,c=[],d=[];if(o.nodeType===Node.TEXT_NODE){const b=o.parentElement;if(d.push(o.nodeValue.slice(n).replaceAll(Ud,"")),b!==this.editorDiv){let y=c;for(const _ of this.editorDiv.childNodes){if(_===b){y=d;continue}y.push(et(m=Ye,Hi,mf).call(m,_))}}c.push(o.nodeValue.slice(0,n).replaceAll(Ud,""))}else if(o===this.editorDiv){let b=c,y=0;for(const _ of this.editorDiv.childNodes)y++===n&&(b=d),b.push(et(f=Ye,Hi,mf).call(f,_))}K(this,Is,`${c.join(`
`)}${i}${d.join(`
`)}`),et(this,yr,gf).call(this);const u=new Range;let h=Math.sumPrecise(c.map(b=>b.length));for(const{firstChild:b}of this.editorDiv.childNodes)if(b.nodeType===Node.TEXT_NODE){const y=b.nodeValue.length;if(h<=y){u.setStart(b,h),u.setEnd(b,h);break}h-=y}s.removeAllRanges(),s.addRange(u)}get contentDiv(){return this.editorDiv}static async deserialize(t,r,l){var a;let i=null;if(t instanceof zy){const{data:{defaultAppearanceData:{fontSize:o,fontColor:n},rect:c,rotation:d,id:u,popupRef:h},textContent:p,textPosition:m,parent:{page:{pageNumber:f}}}=t;if(!p||p.length===0)return null;i=t={annotationType:oe.FREETEXT,color:Array.from(n),fontSize:o,value:p.join(`
`),position:m,pageIndex:f-1,rect:c.slice(0),rotation:d,annotationElementId:u,id:u,deleted:!1,popupRef:h}}const s=await super.deserialize(t,r,l);return K(s,Ps,t.fontSize),K(s,fn,Wt.makeHexColor(...t.color)),K(s,Is,et(a=Ye,Hi,a0).call(a,t.value)),s._initialData=i,s}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=Ye._internalPadding*this.parentScale,l=this.getRect(r,r),i=Je._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:A(this,fn)),s={annotationType:oe.FREETEXT,color:i,fontSize:A(this,Ps),value:et(this,yr,Xy).call(this),pageIndex:this.pageIndex,rect:l,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(s.isCopy=!0,s):this.annotationElementId&&!et(this,yr,Gy).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(t){const r=super.renderAnnotationElement(t);if(this.deleted)return r;const{style:l}=r;l.fontSize=`calc(${A(this,Ps)}px * var(--total-scale-factor))`,l.color=A(this,fn),r.replaceChildren();for(const s of A(this,Is).split(`
`)){const a=document.createElement("div");a.append(s?document.createTextNode(s):document.createElement("br")),r.append(a)}const i=Ye._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(i,i),popupContent:A(this,Is)}),r}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};fn=new WeakMap,Is=new WeakMap,Zh=new WeakMap,Xo=new WeakMap,Ps=new WeakMap,yr=new WeakSet,Vy=function(t){const r=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-A(this,Ps))*this.parentScale),K(this,Ps,i),et(this,yr,pf).call(this)},l=A(this,Ps);this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:xe.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Wy=function(t){const r=i=>{K(this,fn,this.editorDiv.style.color=i)},l=A(this,fn);this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:xe.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},qy=function(){var l;const t=[];this.editorDiv.normalize();let r=null;for(const i of this.editorDiv.childNodes)(r==null?void 0:r.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(et(l=Ye,Hi,mf).call(l,i)),r=i);return t.join(`
`)},pf=function(){const[t,r]=this.parentDimensions;let l;if(this.isAttachedToDOM)l=this.div.getBoundingClientRect();else{const{currentLayer:i,div:s}=this,a=s.style.display,o=s.classList.contains("hidden");s.classList.remove("hidden"),s.style.display="hidden",i.div.append(this.div),l=s.getBoundingClientRect(),s.remove(),s.style.display=a,s.classList.toggle("hidden",o)}this.rotation%180===this.parentRotation%180?(this.width=l.width/t,this.height=l.height/r):(this.width=l.height/t,this.height=l.width/r),this.fixAndSetPosition()},Hi=new WeakSet,mf=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Ud,"")},gf=function(){if(this.editorDiv.replaceChildren(),!!A(this,Is))for(const t of A(this,Is).split(`
`)){const r=document.createElement("div");r.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(r)}},Xy=function(){return A(this,Is).replaceAll(" "," ")},a0=function(t){return t.replaceAll(" "," ")},Gy=function(t){const{value:r,fontSize:l,color:i,pageIndex:s}=this._initialData;return this._hasBeenMoved||t.value!==r||t.fontSize!==l||t.color.some((a,o)=>a!==i[o])||t.pageIndex!==s},tt(Ye,Hi),At(Ye,"_freeTextDefaultContent",""),At(Ye,"_internalPadding",0),At(Ye,"_defaultColor",null),At(Ye,"_defaultFontSize",10),At(Ye,"_type","freetext"),At(Ye,"_editorType",oe.FREETEXT);let i0=Ye;class Bt{toSVGPath(){We("Abstract method `toSVGPath` must be implemented.")}get box(){We("Abstract getter `box` must be implemented.")}serialize(e,t){We("Abstract method `serialize` must be implemented.")}static _rescale(e,t,r,l,i,s){s||(s=new Float32Array(e.length));for(let a=0,o=e.length;a<o;a+=2)s[a]=t+e[a]*l,s[a+1]=r+e[a+1]*i;return s}static _rescaleAndSwap(e,t,r,l,i,s){s||(s=new Float32Array(e.length));for(let a=0,o=e.length;a<o;a+=2)s[a]=t+e[a+1]*l,s[a+1]=r+e[a]*i;return s}static _translate(e,t,r,l){l||(l=new Float32Array(e.length));for(let i=0,s=e.length;i<s;i+=2)l[i]=t+e[i],l[i+1]=r+e[i+1];return l}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,r,l,i){switch(i){case 90:return[1-t/r,e/l];case 180:return[1-e/r,1-t/l];case 270:return[t/r,1-e/l];default:return[e/r,t/l]}}static _normalizePagePoint(e,t,r){switch(r){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,r,l,i,s){return[(e+5*r)/6,(t+5*l)/6,(5*r+i)/6,(5*l+s)/6,(r+i)/2,(l+s)/2]}}At(Bt,"PRECISION",1e-4);var Os,pn,Mc,Rc,$n,ge,Go,Ko,Jh,Qh,Ic,Pc,ka,td,lp,cp,Er,_u,Ky,Yy,Zy,Jy,Qy,tv;const oi=class oi{constructor({x:e,y:t},r,l,i,s,a=0){tt(this,Er);tt(this,Os);tt(this,pn,[]);tt(this,Mc);tt(this,Rc);tt(this,$n,[]);tt(this,ge,new Float32Array(18));tt(this,Go);tt(this,Ko);tt(this,Jh);tt(this,Qh);tt(this,Ic);tt(this,Pc);tt(this,ka,[]);K(this,Os,r),K(this,Pc,i*l),K(this,Rc,s),A(this,ge).set([NaN,NaN,NaN,NaN,e,t],6),K(this,Mc,a),K(this,Qh,A(oi,td)*l),K(this,Jh,A(oi,cp)*l),K(this,Ic,l),A(this,ka).push(e,t)}isEmpty(){return isNaN(A(this,ge)[8])}add({x:e,y:t}){var N;K(this,Go,e),K(this,Ko,t);const[r,l,i,s]=A(this,Os);let[a,o,n,c]=A(this,ge).subarray(8,12);const d=e-n,u=t-c,h=Math.hypot(d,u);if(h<A(this,Jh))return!1;const p=h-A(this,Qh),m=p/h,f=m*d,b=m*u;let y=a,_=o;a=n,o=c,n+=f,c+=b,(N=A(this,ka))==null||N.push(e,t);const E=-b/p,M=f/p,D=E*A(this,Pc),z=M*A(this,Pc);return A(this,ge).set(A(this,ge).subarray(2,8),0),A(this,ge).set([n+D,c+z],4),A(this,ge).set(A(this,ge).subarray(14,18),12),A(this,ge).set([n-D,c-z],16),isNaN(A(this,ge)[6])?(A(this,$n).length===0&&(A(this,ge).set([a+D,o+z],2),A(this,$n).push(NaN,NaN,NaN,NaN,(a+D-r)/i,(o+z-l)/s),A(this,ge).set([a-D,o-z],14),A(this,pn).push(NaN,NaN,NaN,NaN,(a-D-r)/i,(o-z-l)/s)),A(this,ge).set([y,_,a,o,n,c],6),!this.isEmpty()):(A(this,ge).set([y,_,a,o,n,c],6),Math.abs(Math.atan2(_-o,y-a)-Math.atan2(b,f))<Math.PI/2?([a,o,n,c]=A(this,ge).subarray(2,6),A(this,$n).push(NaN,NaN,NaN,NaN,((a+n)/2-r)/i,((o+c)/2-l)/s),[a,o,y,_]=A(this,ge).subarray(14,18),A(this,pn).push(NaN,NaN,NaN,NaN,((y+a)/2-r)/i,((_+o)/2-l)/s),!0):([y,_,a,o,n,c]=A(this,ge).subarray(0,6),A(this,$n).push(((y+5*a)/6-r)/i,((_+5*o)/6-l)/s,((5*a+n)/6-r)/i,((5*o+c)/6-l)/s,((a+n)/2-r)/i,((o+c)/2-l)/s),[n,c,a,o,y,_]=A(this,ge).subarray(12,18),A(this,pn).push(((y+5*a)/6-r)/i,((_+5*o)/6-l)/s,((5*a+n)/6-r)/i,((5*o+c)/6-l)/s,((a+n)/2-r)/i,((o+c)/2-l)/s),!0))}toSVGPath(){if(this.isEmpty())return"";const e=A(this,$n),t=A(this,pn);if(isNaN(A(this,ge)[6])&&!this.isEmpty())return et(this,Er,Ky).call(this);const r=[];r.push(`M${e[4]} ${e[5]}`);for(let l=6;l<e.length;l+=6)isNaN(e[l])?r.push(`L${e[l+4]} ${e[l+5]}`):r.push(`C${e[l]} ${e[l+1]} ${e[l+2]} ${e[l+3]} ${e[l+4]} ${e[l+5]}`);et(this,Er,Zy).call(this,r);for(let l=t.length-6;l>=6;l-=6)isNaN(t[l])?r.push(`L${t[l+4]} ${t[l+5]}`):r.push(`C${t[l]} ${t[l+1]} ${t[l+2]} ${t[l+3]} ${t[l+4]} ${t[l+5]}`);return et(this,Er,Yy).call(this,r),r.join(" ")}newFreeDrawOutline(e,t,r,l,i,s){return new ev(e,t,r,l,i,s)}getOutlines(){var d;const e=A(this,$n),t=A(this,pn),r=A(this,ge),[l,i,s,a]=A(this,Os),o=new Float32Array((((d=A(this,ka))==null?void 0:d.length)??0)+2);for(let u=0,h=o.length-2;u<h;u+=2)o[u]=(A(this,ka)[u]-l)/s,o[u+1]=(A(this,ka)[u+1]-i)/a;if(o[o.length-2]=(A(this,Go)-l)/s,o[o.length-1]=(A(this,Ko)-i)/a,isNaN(r[6])&&!this.isEmpty())return et(this,Er,Jy).call(this,o);const n=new Float32Array(A(this,$n).length+24+A(this,pn).length);let c=e.length;for(let u=0;u<c;u+=2){if(isNaN(e[u])){n[u]=n[u+1]=NaN;continue}n[u]=e[u],n[u+1]=e[u+1]}c=et(this,Er,tv).call(this,n,c);for(let u=t.length-6;u>=6;u-=6)for(let h=0;h<6;h+=2){if(isNaN(t[u+h])){n[c]=n[c+1]=NaN,c+=2;continue}n[c]=t[u+h],n[c+1]=t[u+h+1],c+=2}return et(this,Er,Qy).call(this,n,c),this.newFreeDrawOutline(n,o,A(this,Os),A(this,Ic),A(this,Mc),A(this,Rc))}};Os=new WeakMap,pn=new WeakMap,Mc=new WeakMap,Rc=new WeakMap,$n=new WeakMap,ge=new WeakMap,Go=new WeakMap,Ko=new WeakMap,Jh=new WeakMap,Qh=new WeakMap,Ic=new WeakMap,Pc=new WeakMap,ka=new WeakMap,td=new WeakMap,lp=new WeakMap,cp=new WeakMap,Er=new WeakSet,_u=function(){const e=A(this,ge).subarray(4,6),t=A(this,ge).subarray(16,18),[r,l,i,s]=A(this,Os);return[(A(this,Go)+(e[0]-t[0])/2-r)/i,(A(this,Ko)+(e[1]-t[1])/2-l)/s,(A(this,Go)+(t[0]-e[0])/2-r)/i,(A(this,Ko)+(t[1]-e[1])/2-l)/s]},Ky=function(){const[e,t,r,l]=A(this,Os),[i,s,a,o]=et(this,Er,_u).call(this);return`M${(A(this,ge)[2]-e)/r} ${(A(this,ge)[3]-t)/l} L${(A(this,ge)[4]-e)/r} ${(A(this,ge)[5]-t)/l} L${i} ${s} L${a} ${o} L${(A(this,ge)[16]-e)/r} ${(A(this,ge)[17]-t)/l} L${(A(this,ge)[14]-e)/r} ${(A(this,ge)[15]-t)/l} Z`},Yy=function(e){const t=A(this,pn);e.push(`L${t[4]} ${t[5]} Z`)},Zy=function(e){const[t,r,l,i]=A(this,Os),s=A(this,ge).subarray(4,6),a=A(this,ge).subarray(16,18),[o,n,c,d]=et(this,Er,_u).call(this);e.push(`L${(s[0]-t)/l} ${(s[1]-r)/i} L${o} ${n} L${c} ${d} L${(a[0]-t)/l} ${(a[1]-r)/i}`)},Jy=function(e){const t=A(this,ge),[r,l,i,s]=A(this,Os),[a,o,n,c]=et(this,Er,_u).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(t[2]-r)/i,(t[3]-l)/s,NaN,NaN,NaN,NaN,(t[4]-r)/i,(t[5]-l)/s,NaN,NaN,NaN,NaN,a,o,NaN,NaN,NaN,NaN,n,c,NaN,NaN,NaN,NaN,(t[16]-r)/i,(t[17]-l)/s,NaN,NaN,NaN,NaN,(t[14]-r)/i,(t[15]-l)/s],0),this.newFreeDrawOutline(d,e,A(this,Os),A(this,Ic),A(this,Mc),A(this,Rc))},Qy=function(e,t){const r=A(this,pn);return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],t),t+=6},tv=function(e,t){const r=A(this,ge).subarray(4,6),l=A(this,ge).subarray(16,18),[i,s,a,o]=A(this,Os),[n,c,d,u]=et(this,Er,_u).call(this);return e.set([NaN,NaN,NaN,NaN,(r[0]-i)/a,(r[1]-s)/o,NaN,NaN,NaN,NaN,n,c,NaN,NaN,NaN,NaN,d,u,NaN,NaN,NaN,NaN,(l[0]-i)/a,(l[1]-s)/o],t),t+=24},tt(oi,td,8),tt(oi,lp,2),tt(oi,cp,A(oi,td)+A(oi,lp));let Vf=oi;var Oc,Yo,Mi,ed,Ns,rd,ur,up,rv;class ev extends Bt{constructor(t,r,l,i,s,a){super();tt(this,up);tt(this,Oc);tt(this,Yo,new Float32Array(4));tt(this,Mi);tt(this,ed);tt(this,Ns);tt(this,rd);tt(this,ur);K(this,ur,t),K(this,Ns,r),K(this,Oc,l),K(this,rd,i),K(this,Mi,s),K(this,ed,a),this.lastPoint=[NaN,NaN],et(this,up,rv).call(this,a);const[o,n,c,d]=A(this,Yo);for(let u=0,h=t.length;u<h;u+=2)t[u]=(t[u]-o)/c,t[u+1]=(t[u+1]-n)/d;for(let u=0,h=r.length;u<h;u+=2)r[u]=(r[u]-o)/c,r[u+1]=(r[u+1]-n)/d}toSVGPath(){const t=[`M${A(this,ur)[4]} ${A(this,ur)[5]}`];for(let r=6,l=A(this,ur).length;r<l;r+=6){if(isNaN(A(this,ur)[r])){t.push(`L${A(this,ur)[r+4]} ${A(this,ur)[r+5]}`);continue}t.push(`C${A(this,ur)[r]} ${A(this,ur)[r+1]} ${A(this,ur)[r+2]} ${A(this,ur)[r+3]} ${A(this,ur)[r+4]} ${A(this,ur)[r+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,r,l,i],s){const a=l-t,o=i-r;let n,c;switch(s){case 0:n=Bt._rescale(A(this,ur),t,i,a,-o),c=Bt._rescale(A(this,Ns),t,i,a,-o);break;case 90:n=Bt._rescaleAndSwap(A(this,ur),t,r,a,o),c=Bt._rescaleAndSwap(A(this,Ns),t,r,a,o);break;case 180:n=Bt._rescale(A(this,ur),l,r,-a,o),c=Bt._rescale(A(this,Ns),l,r,-a,o);break;case 270:n=Bt._rescaleAndSwap(A(this,ur),l,i,-a,-o),c=Bt._rescaleAndSwap(A(this,Ns),l,i,-a,-o);break}return{outline:Array.from(n),points:[Array.from(c)]}}get box(){return A(this,Yo)}newOutliner(t,r,l,i,s,a=0){return new Vf(t,r,l,i,s,a)}getNewOutline(t,r){const[l,i,s,a]=A(this,Yo),[o,n,c,d]=A(this,Oc),u=s*c,h=a*d,p=l*c+o,m=i*d+n,f=this.newOutliner({x:A(this,Ns)[0]*u+p,y:A(this,Ns)[1]*h+m},A(this,Oc),A(this,rd),t,A(this,ed),r??A(this,Mi));for(let b=2;b<A(this,Ns).length;b+=2)f.add({x:A(this,Ns)[b]*u+p,y:A(this,Ns)[b+1]*h+m});return f.getOutlines()}}Oc=new WeakMap,Yo=new WeakMap,Mi=new WeakMap,ed=new WeakMap,Ns=new WeakMap,rd=new WeakMap,ur=new WeakMap,up=new WeakSet,rv=function(t){const r=A(this,ur);let l=r[4],i=r[5];const s=[l,i,l,i];let a=l,o=i;const n=t?Math.max:Math.min;for(let d=6,u=r.length;d<u;d+=6){const h=r[d+4],p=r[d+5];if(isNaN(r[d]))Wt.pointBoundingBox(h,p,s),o<p?(a=h,o=p):o===p&&(a=n(a,h));else{const m=[1/0,1/0,-1/0,-1/0];Wt.bezierBoundingBox(l,i,...r.slice(d,d+6),m),Wt.rectBoundingBox(...m,s),o<m[3]?(a=m[2],o=m[3]):o===m[3]&&(a=n(a,m[2]))}l=h,i=p}const c=A(this,Yo);c[0]=s[0]-A(this,Mi),c[1]=s[1]-A(this,Mi),c[2]=s[2]-s[0]+2*A(this,Mi),c[3]=s[3]-s[1]+2*A(this,Mi),this.lastPoint=[a,o]};var sd,nd,Ea,mn,ps,sv,bf,nv,iv,l0;class o0{constructor(e,t=0,r=0,l=!0){tt(this,ps);tt(this,sd);tt(this,nd);tt(this,Ea,[]);tt(this,mn,[]);const i=[1/0,1/0,-1/0,-1/0],s=10**-4;for(const{x:h,y:p,width:m,height:f}of e){const b=Math.floor((h-t)/s)*s,y=Math.ceil((h+m+t)/s)*s,_=Math.floor((p-t)/s)*s,E=Math.ceil((p+f+t)/s)*s,M=[b,_,E,!0],D=[y,_,E,!1];A(this,Ea).push(M,D),Wt.rectBoundingBox(b,_,y,E,i)}const a=i[2]-i[0]+2*r,o=i[3]-i[1]+2*r,n=i[0]-r,c=i[1]-r,d=A(this,Ea).at(l?-1:-2),u=[d[0],d[2]];for(const h of A(this,Ea)){const[p,m,f]=h;h[0]=(p-n)/a,h[1]=(m-c)/o,h[2]=(f-c)/o}K(this,sd,new Float32Array([n,c,a,o])),K(this,nd,u)}getOutlines(){A(this,Ea).sort((t,r)=>t[0]-r[0]||t[1]-r[1]||t[2]-r[2]);const e=[];for(const t of A(this,Ea))t[3]?(e.push(...et(this,ps,l0).call(this,t)),et(this,ps,nv).call(this,t)):(et(this,ps,iv).call(this,t),e.push(...et(this,ps,l0).call(this,t)));return et(this,ps,sv).call(this,e)}}sd=new WeakMap,nd=new WeakMap,Ea=new WeakMap,mn=new WeakMap,ps=new WeakSet,sv=function(e){const t=[],r=new Set;for(const s of e){const[a,o,n]=s;t.push([a,o,s],[a,n,s])}t.sort((s,a)=>s[1]-a[1]||s[0]-a[0]);for(let s=0,a=t.length;s<a;s+=2){const o=t[s][2],n=t[s+1][2];o.push(n),n.push(o),r.add(o),r.add(n)}const l=[];let i;for(;r.size>0;){const s=r.values().next().value;let[a,o,n,c,d]=s;r.delete(s);let u=a,h=o;for(i=[a,n],l.push(i);;){let p;if(r.has(c))p=c;else if(r.has(d))p=d;else break;r.delete(p),[a,o,n,c,d]=p,u!==a&&(i.push(u,h,a,h===o?o:n),u=a),h=h===o?n:o}i.push(u,h)}return new o4(l,A(this,sd),A(this,nd))},bf=function(e){const t=A(this,mn);let r=0,l=t.length-1;for(;r<=l;){const i=r+l>>1,s=t[i][0];if(s===e)return i;s<e?r=i+1:l=i-1}return l+1},nv=function([,e,t]){const r=et(this,ps,bf).call(this,e);A(this,mn).splice(r,0,[e,t])},iv=function([,e,t]){const r=et(this,ps,bf).call(this,e);for(let l=r;l<A(this,mn).length;l++){const[i,s]=A(this,mn)[l];if(i!==e)break;if(i===e&&s===t){A(this,mn).splice(l,1);return}}for(let l=r-1;l>=0;l--){const[i,s]=A(this,mn)[l];if(i!==e)break;if(i===e&&s===t){A(this,mn).splice(l,1);return}}},l0=function(e){const[t,r,l]=e,i=[[t,r,l]],s=et(this,ps,bf).call(this,l);for(let a=0;a<s;a++){const[o,n]=A(this,mn)[a];for(let c=0,d=i.length;c<d;c++){const[,u,h]=i[c];if(!(n<=u||h<=o)){if(u>=o){if(h>n)i[c][1]=n;else{if(d===1)return[];i.splice(c,1),c--,d--}continue}i[c][2]=o,h>n&&i.push([t,n,h])}}}return i};var id,Nc;class o4 extends Bt{constructor(t,r,l){super();tt(this,id);tt(this,Nc);K(this,Nc,t),K(this,id,r),this.lastPoint=l}toSVGPath(){const t=[];for(const r of A(this,Nc)){let[l,i]=r;t.push(`M${l} ${i}`);for(let s=2;s<r.length;s+=2){const a=r[s],o=r[s+1];a===l?(t.push(`V${o}`),i=o):o===i&&(t.push(`H${a}`),l=a)}t.push("Z")}return t.join(" ")}serialize([t,r,l,i],s){const a=[],o=l-t,n=i-r;for(const c of A(this,Nc)){const d=new Array(c.length);for(let u=0;u<c.length;u+=2)d[u]=t+c[u]*o,d[u+1]=i-c[u+1]*n;a.push(d)}return a}get box(){return A(this,id)}get classNamesForOutlining(){return["highlightOutline"]}}id=new WeakMap,Nc=new WeakMap;class c0 extends Vf{newFreeDrawOutline(e,t,r,l,i,s){return new l4(e,t,r,l,i,s)}}class l4 extends ev{newOutliner(e,t,r,l,i,s=0){return new c0(e,t,r,l,i,s)}}var Ds,Zo,Dc,kr,ad,Lc,Ri,od,Ca,gn,Fc,ld,Ve,u0,h0,d0,to,av,Zi;const ys=class ys{constructor({editor:e=null,uiManager:t=null}){tt(this,Ve);tt(this,Ds,null);tt(this,Zo,null);tt(this,Dc);tt(this,kr,null);tt(this,ad,!1);tt(this,Lc,!1);tt(this,Ri,null);tt(this,od);tt(this,Ca,null);tt(this,gn,null);tt(this,Fc);var r,l;e?(K(this,Lc,!1),K(this,Fc,xe.HIGHLIGHT_COLOR),K(this,Ri,e)):(K(this,Lc,!0),K(this,Fc,xe.HIGHLIGHT_DEFAULT_COLOR)),K(this,gn,(e==null?void 0:e._uiManager)||t),K(this,od,A(this,gn)._eventBus),K(this,Dc,((r=e==null?void 0:e.color)==null?void 0:r.toUpperCase())||((l=A(this,gn))==null?void 0:l.highlightColors.values().next().value)||"#FFFF98"),A(ys,ld)||K(ys,ld,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return we(this,"_keyboardManager",new Ad([[["Escape","mac+Escape"],ys.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ys.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ys.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ys.prototype._moveToPrevious],[["Home","mac+Home"],ys.prototype._moveToBeginning],[["End","mac+End"],ys.prototype._moveToEnd]]))}renderButton(){const e=K(this,Ds,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",A(this,Ri)&&(e.ariaControls=`${A(this,Ri).id}_colorpicker_dropdown`);const t=A(this,gn)._signal;e.addEventListener("click",et(this,Ve,to).bind(this),{signal:t}),e.addEventListener("keydown",et(this,Ve,d0).bind(this),{signal:t});const r=K(this,Zo,document.createElement("span"));return r.className="swatch",r.ariaHidden="true",r.style.backgroundColor=A(this,Dc),e.append(r),e}renderMainDropdown(){const e=K(this,kr,et(this,Ve,u0).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===A(this,Ds)){et(this,Ve,to).call(this,e);return}const t=e.target.getAttribute("data-color");t&&et(this,Ve,h0).call(this,t,e)}_moveToNext(e){var t,r;if(!A(this,Ve,Zi)){et(this,Ve,to).call(this,e);return}if(e.target===A(this,Ds)){(t=A(this,kr).firstChild)==null||t.focus();return}(r=e.target.nextSibling)==null||r.focus()}_moveToPrevious(e){var t,r;if(e.target===((t=A(this,kr))==null?void 0:t.firstChild)||e.target===A(this,Ds)){A(this,Ve,Zi)&&this._hideDropdownFromKeyboard();return}A(this,Ve,Zi)||et(this,Ve,to).call(this,e),(r=e.target.previousSibling)==null||r.focus()}_moveToBeginning(e){var t;if(!A(this,Ve,Zi)){et(this,Ve,to).call(this,e);return}(t=A(this,kr).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!A(this,Ve,Zi)){et(this,Ve,to).call(this,e);return}(t=A(this,kr).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=A(this,kr))==null||e.classList.add("hidden"),A(this,Ds).ariaExpanded="false",(t=A(this,Ca))==null||t.abort(),K(this,Ca,null)}_hideDropdownFromKeyboard(){var e;if(!A(this,Lc)){if(!A(this,Ve,Zi)){(e=A(this,Ri))==null||e.unselect();return}this.hideDropdown(),A(this,Ds).focus({preventScroll:!0,focusVisible:A(this,ad)})}}updateColor(e){if(A(this,Zo)&&(A(this,Zo).style.backgroundColor=e),!A(this,kr))return;const t=A(this,gn).highlightColors.values();for(const r of A(this,kr).children)r.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=A(this,Ds))==null||e.remove(),K(this,Ds,null),K(this,Zo,null),(t=A(this,kr))==null||t.remove(),K(this,kr,null)}};Ds=new WeakMap,Zo=new WeakMap,Dc=new WeakMap,kr=new WeakMap,ad=new WeakMap,Lc=new WeakMap,Ri=new WeakMap,od=new WeakMap,Ca=new WeakMap,gn=new WeakMap,Fc=new WeakMap,ld=new WeakMap,Ve=new WeakSet,u0=function(){const e=document.createElement("div"),t=A(this,gn)._signal;e.addEventListener("contextmenu",An,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),A(this,Ri)&&(e.id=`${A(this,Ri).id}_colorpicker_dropdown`);for(const[r,l]of A(this,gn).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",l),i.title=r,i.setAttribute("data-l10n-id",A(ys,ld)[r]);const s=document.createElement("span");i.append(s),s.className="swatch",s.style.backgroundColor=l,i.ariaSelected=l===A(this,Dc),i.addEventListener("click",et(this,Ve,h0).bind(this,l),{signal:t}),e.append(i)}return e.addEventListener("keydown",et(this,Ve,d0).bind(this),{signal:t}),e},h0=function(e,t){t.stopPropagation(),A(this,od).dispatch("switchannotationeditorparams",{source:this,type:A(this,Fc),value:e})},d0=function(e){ys._keyboardManager.exec(this,e)},to=function(e){if(A(this,Ve,Zi)){this.hideDropdown();return}if(K(this,ad,e.detail===0),A(this,Ca)||(K(this,Ca,new AbortController),window.addEventListener("pointerdown",et(this,Ve,av).bind(this),{signal:A(this,gn).combinedSignal(A(this,Ca))})),A(this,Ds).ariaExpanded="true",A(this,kr)){A(this,kr).classList.remove("hidden");return}const t=K(this,kr,et(this,Ve,u0).call(this));A(this,Ds).append(t)},av=function(e){var t;(t=A(this,kr))!=null&&t.contains(e.target)||this.hideDropdown()},Zi=function(){return A(this,kr)&&!A(this,kr).classList.contains("hidden")},tt(ys,ld,null);let Wf=ys;var jc,cd,Ii,Jo,ud,_s,hd,dd,Qo,Zs,Ls,Br,Bc,Pi,Zr,zc,Js,fd,he,f0,yf,ov,lv,cv,p0,eo,en,Pl,uv,vf,xu,hv,dv,fv,pv,mv;const Ie=class Ie extends Je{constructor(t){super({...t,name:"highlightEditor"});tt(this,he);tt(this,jc,null);tt(this,cd,0);tt(this,Ii);tt(this,Jo,null);tt(this,ud,null);tt(this,_s,null);tt(this,hd,null);tt(this,dd,0);tt(this,Qo,null);tt(this,Zs,null);tt(this,Ls,null);tt(this,Br,!1);tt(this,Bc,null);tt(this,Pi);tt(this,Zr,null);tt(this,zc,"");tt(this,Js);tt(this,fd,"");this.color=t.color||Ie._defaultColor,K(this,Js,t.thickness||Ie._defaultThickness),K(this,Pi,t.opacity||Ie._defaultOpacity),K(this,Ii,t.boxes||null),K(this,fd,t.methodOfCreation||""),K(this,zc,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(K(this,Br,!0),et(this,he,yf).call(this,t),et(this,he,eo).call(this)):A(this,Ii)&&(K(this,jc,t.anchorNode),K(this,cd,t.anchorOffset),K(this,hd,t.focusNode),K(this,dd,t.focusOffset),et(this,he,f0).call(this),et(this,he,eo).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=Ie.prototype;return we(this,"_keyboardManager",new Ad([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:A(this,Br)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:A(this,Js),methodOfCreation:A(this,fd)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,r){var l;Je.initialize(t,r),Ie._defaultColor||(Ie._defaultColor=((l=r.highlightColors)==null?void 0:l.values().next().value)||"#fff066")}static updateDefaultParams(t,r){switch(t){case xe.HIGHLIGHT_DEFAULT_COLOR:Ie._defaultColor=r;break;case xe.HIGHLIGHT_THICKNESS:Ie._defaultThickness=r;break}}translateInPage(t,r){}get toolbarPosition(){return A(this,Bc)}updateParams(t,r){switch(t){case xe.HIGHLIGHT_COLOR:et(this,he,ov).call(this,r);break;case xe.HIGHLIGHT_THICKNESS:et(this,he,lv).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[xe.HIGHLIGHT_DEFAULT_COLOR,Ie._defaultColor],[xe.HIGHLIGHT_THICKNESS,Ie._defaultThickness]]}get propertiesToUpdate(){return[[xe.HIGHLIGHT_COLOR,this.color||Ie._defaultColor],[xe.HIGHLIGHT_THICKNESS,A(this,Js)||Ie._defaultThickness],[xe.HIGHLIGHT_FREE,A(this,Br)]]}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",K(this,ud,new Wf({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(et(this,he,xu).call(this))}getBaseTranslation(){return[0,0]}getRect(t,r){return super.getRect(t,r,et(this,he,xu).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){et(this,he,p0).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(et(this,he,eo).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var l;let r=!1;this.parent&&!t?et(this,he,p0).call(this):t&&(et(this,he,eo).call(this,t),r=!this.parent&&((l=this.div)==null?void 0:l.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),r&&this.select()}rotate(t){var i,s,a;const{drawLayer:r}=this.parent;let l;A(this,Br)?(t=(t-this.rotation+360)%360,l=et(i=Ie,en,Pl).call(i,A(this,Zs).box,t)):l=et(s=Ie,en,Pl).call(s,[this.x,this.y,this.width,this.height],t),r.updateProperties(A(this,Ls),{bbox:l,root:{"data-main-rotation":t}}),r.updateProperties(A(this,Zr),{bbox:et(a=Ie,en,Pl).call(a,A(this,_s).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();A(this,zc)&&(t.setAttribute("aria-label",A(this,zc)),t.setAttribute("role","mark")),A(this,Br)?t.classList.add("free"):this.div.addEventListener("keydown",et(this,he,uv).bind(this),{signal:this._uiManager._signal});const r=K(this,Qo,document.createElement("div"));t.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",r.style.clipPath=A(this,Jo);const[l,i]=this.parentDimensions;return this.setDims(this.width*l,this.height*i),N1(this,A(this,Qo),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(A(this,Zr),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(A(this,Zr),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:et(this,he,vf).call(this,!0);break;case 1:case 3:et(this,he,vf).call(this,!1);break}}select(){var t;super.select(),A(this,Zr)&&((t=this.parent)==null||t.drawLayer.updateProperties(A(this,Zr),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),A(this,Zr)&&((t=this.parent)==null||t.drawLayer.updateProperties(A(this,Zr),{rootClass:{selected:!1}}),A(this,Br)||et(this,he,vf).call(this,!1))}get _mustFixPosition(){return!A(this,Br)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(A(this,Ls),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(A(this,Zr),{rootClass:{hidden:!t}}))}static startHighlighting(t,r,{target:l,x:i,y:s}){const{x:a,y:o,width:n,height:c}=l.getBoundingClientRect(),d=new AbortController,u=t.combinedSignal(d),h=p=>{d.abort(),et(this,en,pv).call(this,t,p)};window.addEventListener("blur",h,{signal:u}),window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("pointerdown",gr,{capture:!0,passive:!1,signal:u}),window.addEventListener("contextmenu",An,{signal:u}),l.addEventListener("pointermove",et(this,en,fv).bind(this,t),{signal:u}),this._freeHighlight=new c0({x:i,y:s},[a,o,n,c],t.scale,this._defaultThickness/2,r,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,r,l){var m,f,b,y;let i=null;if(t instanceof Hy){const{data:{quadPoints:_,rect:E,rotation:M,id:D,color:z,opacity:O,popupRef:N},parent:{page:{pageNumber:B}}}=t;i=t={annotationType:oe.HIGHLIGHT,color:Array.from(z),opacity:O,quadPoints:_,boxes:null,pageIndex:B-1,rect:E.slice(0),rotation:M,annotationElementId:D,id:D,deleted:!1,popupRef:N}}else if(t instanceof og){const{data:{inkLists:_,rect:E,rotation:M,id:D,color:z,borderStyle:{rawWidth:O},popupRef:N},parent:{page:{pageNumber:B}}}=t;i=t={annotationType:oe.HIGHLIGHT,color:Array.from(z),thickness:O,inkLists:_,boxes:null,pageIndex:B-1,rect:E.slice(0),rotation:M,annotationElementId:D,id:D,deleted:!1,popupRef:N}}const{color:s,quadPoints:a,inkLists:o,opacity:n}=t,c=await super.deserialize(t,r,l);c.color=Wt.makeHexColor(...s),K(c,Pi,n||1),o&&K(c,Js,t.thickness),c._initialData=i;const[d,u]=c.pageDimensions,[h,p]=c.pageTranslation;if(a){const _=K(c,Ii,[]);for(let E=0;E<a.length;E+=8)_.push({x:(a[E]-h)/d,y:1-(a[E+1]-p)/u,width:(a[E+2]-a[E])/d,height:(a[E+1]-a[E+5])/u});et(m=c,he,f0).call(m),et(f=c,he,eo).call(f),c.rotate(c.rotation)}else if(o){K(c,Br,!0);const _=o[0],E={x:_[0]-h,y:u-(_[1]-p)},M=new c0(E,[0,0,d,u],1,A(c,Js)/2,!0,.001);for(let O=0,N=_.length;O<N;O+=2)E.x=_[O]-h,E.y=u-(_[O+1]-p),M.add(E);const{id:D,clipPathId:z}=r.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:c.color,"fill-opacity":c._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:M.toSVGPath()}},!0,!0);et(b=c,he,yf).call(b,{highlightOutlines:M.getOutlines(),highlightId:D,clipPathId:z}),et(y=c,he,eo).call(y),c.rotate(c.parentRotation)}return c}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const r=this.getRect(0,0),l=Je._colorManager.convert(this.color),i={annotationType:oe.HIGHLIGHT,color:l,opacity:A(this,Pi),thickness:A(this,Js),quadPoints:et(this,he,hv).call(this),outlines:et(this,he,dv).call(this,r),pageIndex:this.pageIndex,rect:r,rotation:et(this,he,xu).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!et(this,he,mv).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};jc=new WeakMap,cd=new WeakMap,Ii=new WeakMap,Jo=new WeakMap,ud=new WeakMap,_s=new WeakMap,hd=new WeakMap,dd=new WeakMap,Qo=new WeakMap,Zs=new WeakMap,Ls=new WeakMap,Br=new WeakMap,Bc=new WeakMap,Pi=new WeakMap,Zr=new WeakMap,zc=new WeakMap,Js=new WeakMap,fd=new WeakMap,he=new WeakSet,f0=function(){const t=new o0(A(this,Ii),.001);K(this,Zs,t.getOutlines()),[this.x,this.y,this.width,this.height]=A(this,Zs).box;const r=new o0(A(this,Ii),.0025,.001,this._uiManager.direction==="ltr");K(this,_s,r.getOutlines());const{lastPoint:l}=A(this,_s);K(this,Bc,[(l[0]-this.x)/this.width,(l[1]-this.y)/this.height])},yf=function({highlightOutlines:t,highlightId:r,clipPathId:l}){var d,u;if(K(this,Zs,t),K(this,_s,t.getNewOutline(A(this,Js)/2+1.5,.0025)),r>=0)K(this,Ls,r),K(this,Jo,l),this.parent.drawLayer.finalizeDraw(r,{bbox:t.box,path:{d:t.toSVGPath()}}),K(this,Zr,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:A(this,_s).box,path:{d:A(this,_s).toSVGPath()}},!0));else if(this.parent){const h=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(A(this,Ls),{bbox:et(d=Ie,en,Pl).call(d,A(this,Zs).box,(h-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(A(this,Zr),{bbox:et(u=Ie,en,Pl).call(u,A(this,_s).box,h),path:{d:A(this,_s).toSVGPath()}})}const[s,a,o,n]=t.box;switch(this.rotation){case 0:this.x=s,this.y=a,this.width=o,this.height=n;break;case 90:{const[h,p]=this.parentDimensions;this.x=a,this.y=1-s,this.width=o*p/h,this.height=n*h/p;break}case 180:this.x=1-s,this.y=1-a,this.width=o,this.height=n;break;case 270:{const[h,p]=this.parentDimensions;this.x=1-a,this.y=s,this.width=o*p/h,this.height=n*h/p;break}}const{lastPoint:c}=A(this,_s);K(this,Bc,[(c[0]-s)/o,(c[1]-a)/n])},ov=function(t){const r=(s,a)=>{var o,n;this.color=s,K(this,Pi,a),(o=this.parent)==null||o.drawLayer.updateProperties(A(this,Ls),{root:{fill:s,"fill-opacity":a}}),(n=A(this,ud))==null||n.updateColor(s)},l=this.color,i=A(this,Pi);this.addCommands({cmd:r.bind(this,t,Ie._defaultOpacity),undo:r.bind(this,l,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:xe.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},lv=function(t){const r=A(this,Js),l=i=>{K(this,Js,i),et(this,he,cv).call(this,i)};this.addCommands({cmd:l.bind(this,t),undo:l.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:xe.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},cv=function(t){if(!A(this,Br))return;et(this,he,yf).call(this,{highlightOutlines:A(this,Zs).getNewOutline(t/2)}),this.fixAndSetPosition();const[r,l]=this.parentDimensions;this.setDims(this.width*r,this.height*l)},p0=function(){A(this,Ls)===null||!this.parent||(this.parent.drawLayer.remove(A(this,Ls)),K(this,Ls,null),this.parent.drawLayer.remove(A(this,Zr)),K(this,Zr,null))},eo=function(t=this.parent){A(this,Ls)===null&&({id:rs(this,Ls)._,clipPathId:rs(this,Jo)._}=t.drawLayer.draw({bbox:A(this,Zs).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":A(this,Pi)},rootClass:{highlight:!0,free:A(this,Br)},path:{d:A(this,Zs).toSVGPath()}},!1,!0),K(this,Zr,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:A(this,Br)},bbox:A(this,_s).box,path:{d:A(this,_s).toSVGPath()}},A(this,Br))),A(this,Qo)&&(A(this,Qo).style.clipPath=A(this,Jo)))},en=new WeakSet,Pl=function([t,r,l,i],s){switch(s){case 90:return[1-r-i,t,i,l];case 180:return[1-t-l,1-r-i,l,i];case 270:return[r,1-t-l,i,l]}return[t,r,l,i]},uv=function(t){Ie._keyboardManager.exec(this,t)},vf=function(t){if(!A(this,jc))return;const r=window.getSelection();t?r.setPosition(A(this,jc),A(this,cd)):r.setPosition(A(this,hd),A(this,dd))},xu=function(){return A(this,Br)?this.rotation:0},hv=function(){if(A(this,Br))return null;const[t,r]=this.pageDimensions,[l,i]=this.pageTranslation,s=A(this,Ii),a=new Float32Array(s.length*8);let o=0;for(const{x:n,y:c,width:d,height:u}of s){const h=n*t+l,p=(1-c)*r+i;a[o]=a[o+4]=h,a[o+1]=a[o+3]=p,a[o+2]=a[o+6]=h+d*t,a[o+5]=a[o+7]=p-u*r,o+=8}return a},dv=function(t){return A(this,Zs).serialize(t,et(this,he,xu).call(this))},fv=function(t,r){this._freeHighlight.add(r)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},pv=function(t,r){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(r,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},mv=function(t){const{color:r}=this._initialData;return t.color.some((l,i)=>l!==r[i])},tt(Ie,en),At(Ie,"_defaultColor",null),At(Ie,"_defaultOpacity",1),At(Ie,"_defaultThickness",12),At(Ie,"_type","highlight"),At(Ie,"_editorType",oe.HIGHLIGHT),At(Ie,"_freeHighlightId",-1),At(Ie,"_freeHighlight",null),At(Ie,"_freeHighlightClipId","");let qf=Ie;var tl;class gv{constructor(){tt(this,tl,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,r]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,r)}updateSVGProperty(e,t){A(this,tl)[e]=t}toSVGProperties(){const e=A(this,tl);return K(this,tl,Object.create(null)),{root:e}}reset(){K(this,tl,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){We("Not implemented")}}tl=new WeakMap;var Fs,$c,Ir,el,rl,Ta,Ma,Ra,sl,Ee,m0,g0,b0,Su,bv,wf,Au,Ol;const zt=class zt extends Je{constructor(t){super(t);tt(this,Ee);tt(this,Fs,null);tt(this,$c);At(this,"_drawId",null);K(this,$c,t.mustBeCommitted||!1),this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(et(this,Ee,m0).call(this,t),et(this,Ee,Su).call(this))}static _mergeSVGProperties(t,r){const l=new Set(Object.keys(t));for(const[i,s]of Object.entries(r))l.has(i)?Object.assign(t[i],s):t[i]=s;return t}static getDefaultDrawingOptions(t){We("Not implemented")}static get typesMap(){We("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,r){const l=this.typesMap.get(t);l&&this._defaultDrawingOptions.updateProperty(l,r),this._currentParent&&(A(zt,Ir).updateProperty(l,r),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,r){const l=this.constructor.typesMap.get(t);l&&this._updateProperty(t,l,r)}static get defaultPropertiesToUpdate(){const t=[],r=this._defaultDrawingOptions;for(const[l,i]of this.typesMap)t.push([l,r[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:r}=this;for(const[l,i]of this.constructor.typesMap)t.push([l,r[i]]);return t}_updateProperty(t,r,l){const i=this._drawingOptions,s=i[r],a=o=>{var c;i.updateProperty(r,o);const n=A(this,Fs).updateProperty(r,o);n&&et(this,Ee,Au).call(this,n),(c=this.parent)==null||c.drawLayer.updateProperties(this._drawId,i.toSVGProperties())};this.addCommands({cmd:a.bind(this,l),undo:a.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,zt._mergeSVGProperties(A(this,Fs).getPathResizingSVGProperties(et(this,Ee,wf).call(this)),{bbox:et(this,Ee,Ol).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,zt._mergeSVGProperties(A(this,Fs).getPathResizedSVGProperties(et(this,Ee,wf).call(this)),{bbox:et(this,Ee,Ol).call(this)}))}_onTranslating(t,r){var l;(l=this.parent)==null||l.drawLayer.updateProperties(this._drawId,{bbox:et(this,Ee,Ol).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,zt._mergeSVGProperties(A(this,Fs).getPathTranslatedSVGProperties(et(this,Ee,wf).call(this),this.parentDimensions),{bbox:et(this,Ee,Ol).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,A(this,$c)&&(K(this,$c,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){et(this,Ee,b0).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(et(this,Ee,Su).call(this),et(this,Ee,Au).call(this,A(this,Fs).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var l;let r=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),et(this,Ee,b0).call(this)):t&&(this._uiManager.addShouldRescale(this),et(this,Ee,Su).call(this,t),r=!this.parent&&((l=this.div)==null?void 0:l.classList.contains("selectedEditor"))),super.setParent(t),r&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,zt._mergeSVGProperties({bbox:et(this,Ee,Ol).call(this)},A(this,Fs).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&et(this,Ee,Au).call(this,A(this,Fs).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,r;this._isCopy&&(t=this.x,r=this.y);const l=super.render();l.classList.add("draw");const i=document.createElement("div");l.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";const[s,a]=this.parentDimensions;return this.setDims(this.width*s,this.height*a),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,r),l}static createDrawerInstance(t,r,l,i,s){We("Not implemented")}static startDrawing(t,r,l,i){var f;const{target:s,offsetX:a,offsetY:o,pointerId:n,pointerType:c}=i;if(A(zt,Ma)&&A(zt,Ma)!==c)return;const{viewport:{rotation:d}}=t,{width:u,height:h}=s.getBoundingClientRect(),p=K(zt,el,new AbortController),m=t.combinedSignal(p);if(A(zt,Ta)||K(zt,Ta,n),A(zt,Ma)??K(zt,Ma,c),window.addEventListener("pointerup",b=>{var y;A(zt,Ta)===b.pointerId?this._endDraw(b):(y=A(zt,Ra))==null||y.delete(b.pointerId)},{signal:m}),window.addEventListener("pointercancel",b=>{var y;A(zt,Ta)===b.pointerId?this._currentParent.endDrawingSession():(y=A(zt,Ra))==null||y.delete(b.pointerId)},{signal:m}),window.addEventListener("pointerdown",b=>{A(zt,Ma)===b.pointerType&&((A(zt,Ra)||K(zt,Ra,new Set)).add(b.pointerId),A(zt,Ir).isCancellable()&&(A(zt,Ir).removeLastElement(),A(zt,Ir).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",An,{signal:m}),s.addEventListener("pointermove",this._drawMove.bind(this),{signal:m}),s.addEventListener("touchmove",b=>{b.timeStamp===A(zt,sl)&&gr(b)},{signal:m}),t.toggleDrawing(),(f=r._editorUndoBar)==null||f.hide(),A(zt,Ir)){t.drawLayer.updateProperties(this._currentDrawId,A(zt,Ir).startNew(a,o,u,h,d));return}r.updateUIForDefaultProperties(this),K(zt,Ir,this.createDrawerInstance(a,o,u,h,d)),K(zt,rl,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(A(zt,rl).toSVGProperties(),A(zt,Ir).defaultSVGProperties),!0,!1)}static _drawMove(t){var s;if(K(zt,sl,-1),!A(zt,Ir))return;const{offsetX:r,offsetY:l,pointerId:i}=t;if(A(zt,Ta)===i){if(((s=A(zt,Ra))==null?void 0:s.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,A(zt,Ir).add(r,l)),K(zt,sl,t.timeStamp),gr(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,K(zt,Ir,null),K(zt,rl,null),K(zt,Ma,null),K(zt,sl,NaN)),A(zt,el)&&(A(zt,el).abort(),K(zt,el,null),K(zt,Ta,NaN),K(zt,Ra,null))}static _endDraw(t){const r=this._currentParent;if(r){if(r.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===r.div&&r.drawLayer.updateProperties(this._currentDrawId,A(zt,Ir).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const l=A(zt,Ir),i=this._currentDrawId,s=l.getLastElement();r.addCommands({cmd:()=>{r.drawLayer.updateProperties(i,l.setLastElement(s))},undo:()=>{r.drawLayer.updateProperties(i,l.removeLastElement())},mustExec:!1,type:xe.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const r=this._currentParent;if(!r)return null;if(r.toggleDrawing(!0),r.cleanUndoStack(xe.DRAW_STEP),!A(zt,Ir).isEmpty()){const{pageDimensions:[l,i],scale:s}=r,a=r.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:A(zt,Ir).getOutlines(l*s,i*s,s,this._INNER_MARGIN),drawingOptions:A(zt,rl),mustBeCommitted:!t});return this._cleanup(!0),a}return r.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,r,l,i,s,a){We("Not implemented")}static async deserialize(t,r,l){var d,u;const{rawDims:{pageWidth:i,pageHeight:s,pageX:a,pageY:o}}=r.viewport,n=this.deserializeDraw(a,o,i,s,this._INNER_MARGIN,t),c=await super.deserialize(t,r,l);return c.createDrawingOptions(t),et(d=c,Ee,m0).call(d,{drawOutlines:n}),et(u=c,Ee,Su).call(u),c.onScaleChanging(),c.rotate(),c}serializeDraw(t){const[r,l]=this.pageTranslation,[i,s]=this.pageDimensions;return A(this,Fs).serialize([r,l,i,s],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Fs=new WeakMap,$c=new WeakMap,Ir=new WeakMap,el=new WeakMap,rl=new WeakMap,Ta=new WeakMap,Ma=new WeakMap,Ra=new WeakMap,sl=new WeakMap,Ee=new WeakSet,m0=function({drawOutlines:t,drawId:r,drawingOptions:l}){K(this,Fs,t),this._drawingOptions||(this._drawingOptions=l),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),r>=0?(this._drawId=r,this.parent.drawLayer.finalizeDraw(r,t.defaultProperties)):this._drawId=et(this,Ee,g0).call(this,t,this.parent),et(this,Ee,Au).call(this,t.box)},g0=function(t,r){const{id:l}=r.drawLayer.draw(zt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return l},b0=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Su=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=et(this,Ee,g0).call(this,A(this,Fs),t)}},bv=function([t,r,l,i]){const{parentDimensions:[s,a],rotation:o}=this;switch(o){case 90:return[r,1-t,l*(a/s),i*(s/a)];case 180:return[1-t,1-r,l,i];case 270:return[1-r,t,l*(a/s),i*(s/a)];default:return[t,r,l,i]}},wf=function(){const{x:t,y:r,width:l,height:i,parentDimensions:[s,a],rotation:o}=this;switch(o){case 90:return[1-r,t,l*(s/a),i*(a/s)];case 180:return[1-t,1-r,l,i];case 270:return[r,1-t,l*(s/a),i*(a/s)];default:return[t,r,l,i]}},Au=function(t){if([this.x,this.y,this.width,this.height]=et(this,Ee,bv).call(this,t),this.div){this.fixAndSetPosition();const[r,l]=this.parentDimensions;this.setDims(this.width*r,this.height*l)}this._onResized()},Ol=function(){const{x:t,y:r,width:l,height:i,rotation:s,parentRotation:a,parentDimensions:[o,n]}=this;switch((s*4+a)/90){case 1:return[1-r-i,t,i,l];case 2:return[1-t-l,1-r-i,l,i];case 3:return[r,1-t-l,i,l];case 4:return[t,r-l*(o/n),i*(n/o),l*(o/n)];case 5:return[1-r,t,l*(o/n),i*(n/o)];case 6:return[1-t-i*(n/o),1-r,i*(n/o),l*(o/n)];case 7:return[r-l*(o/n),1-t-i*(n/o),l*(o/n),i*(n/o)];case 8:return[t-l,r-i,l,i];case 9:return[1-r,t-l,i,l];case 10:return[1-t,1-r,l,i];case 11:return[r-i,1-t,i,l];case 12:return[t-i*(n/o),r,i*(n/o),l*(o/n)];case 13:return[1-r-l*(o/n),t-i*(n/o),l*(o/n),i*(n/o)];case 14:return[1-t,1-r-l*(o/n),i*(n/o),l*(o/n)];case 15:return[r,1-t,l*(o/n),i*(n/o)];default:return[t,r,l,i]}},At(zt,"_currentDrawId",-1),At(zt,"_currentParent",null),tt(zt,Ir,null),tt(zt,el,null),tt(zt,rl,null),tt(zt,Ta,NaN),tt(zt,Ma,null),tt(zt,Ra,null),tt(zt,sl,NaN),At(zt,"_INNER_MARGIN",3);let Xf=zt;var Hn,Pr,Or,nl,Hc,as,zr,Qs,il,al,ol,Uc,_f;class c4{constructor(e,t,r,l,i,s){tt(this,Uc);tt(this,Hn,new Float64Array(6));tt(this,Pr);tt(this,Or);tt(this,nl);tt(this,Hc);tt(this,as);tt(this,zr,"");tt(this,Qs,0);tt(this,il,new Ed);tt(this,al);tt(this,ol);K(this,al,r),K(this,ol,l),K(this,nl,i),K(this,Hc,s),[e,t]=et(this,Uc,_f).call(this,e,t);const a=K(this,Pr,[NaN,NaN,NaN,NaN,e,t]);K(this,as,[e,t]),K(this,Or,[{line:a,points:A(this,as)}]),A(this,Hn).set(a,0)}updateProperty(e,t){e==="stroke-width"&&K(this,Hc,t)}isEmpty(){return!A(this,Or)||A(this,Or).length===0}isCancellable(){return A(this,as).length<=10}add(e,t){[e,t]=et(this,Uc,_f).call(this,e,t);const[r,l,i,s]=A(this,Hn).subarray(2,6),a=e-i,o=t-s;return Math.hypot(A(this,al)*a,A(this,ol)*o)<=2?null:(A(this,as).push(e,t),isNaN(r)?(A(this,Hn).set([i,s,e,t],2),A(this,Pr).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(A(this,Hn)[0])&&A(this,Pr).splice(6,6),A(this,Hn).set([r,l,i,s,e,t],0),A(this,Pr).push(...Bt.createBezierPoints(r,l,i,s,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const r=this.add(e,t);return r||(A(this,as).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,r,l,i){K(this,al,r),K(this,ol,l),K(this,nl,i),[e,t]=et(this,Uc,_f).call(this,e,t);const s=K(this,Pr,[NaN,NaN,NaN,NaN,e,t]);K(this,as,[e,t]);const a=A(this,Or).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),A(this,Or).push({line:s,points:A(this,as)}),A(this,Hn).set(s,0),K(this,Qs,0),this.toSVGPath(),null}getLastElement(){return A(this,Or).at(-1)}setLastElement(e){return A(this,Or)?(A(this,Or).push(e),K(this,Pr,e.line),K(this,as,e.points),K(this,Qs,0),{path:{d:this.toSVGPath()}}):A(this,il).setLastElement(e)}removeLastElement(){if(!A(this,Or))return A(this,il).removeLastElement();A(this,Or).pop(),K(this,zr,"");for(let e=0,t=A(this,Or).length;e<t;e++){const{line:r,points:l}=A(this,Or)[e];K(this,Pr,r),K(this,as,l),K(this,Qs,0),this.toSVGPath()}return{path:{d:A(this,zr)}}}toSVGPath(){const e=Bt.svgRound(A(this,Pr)[4]),t=Bt.svgRound(A(this,Pr)[5]);if(A(this,as).length===2)return K(this,zr,`${A(this,zr)} M ${e} ${t} Z`),A(this,zr);if(A(this,as).length<=6){const l=A(this,zr).lastIndexOf("M");K(this,zr,`${A(this,zr).slice(0,l)} M ${e} ${t}`),K(this,Qs,6)}if(A(this,as).length===4){const l=Bt.svgRound(A(this,Pr)[10]),i=Bt.svgRound(A(this,Pr)[11]);return K(this,zr,`${A(this,zr)} L ${l} ${i}`),K(this,Qs,12),A(this,zr)}const r=[];A(this,Qs)===0&&(r.push(`M ${e} ${t}`),K(this,Qs,6));for(let l=A(this,Qs),i=A(this,Pr).length;l<i;l+=6){const[s,a,o,n,c,d]=A(this,Pr).slice(l,l+6).map(Bt.svgRound);r.push(`C${s} ${a} ${o} ${n} ${c} ${d}`)}return K(this,zr,A(this,zr)+r.join(" ")),K(this,Qs,A(this,Pr).length),A(this,zr)}getOutlines(e,t,r,l){const i=A(this,Or).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),A(this,il).build(A(this,Or),e,t,r,A(this,nl),A(this,Hc),l),K(this,Hn,null),K(this,Pr,null),K(this,Or,null),K(this,zr,null),A(this,il)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Hn=new WeakMap,Pr=new WeakMap,Or=new WeakMap,nl=new WeakMap,Hc=new WeakMap,as=new WeakMap,zr=new WeakMap,Qs=new WeakMap,il=new WeakMap,al=new WeakMap,ol=new WeakMap,Uc=new WeakSet,_f=function(e,t){return Bt._normalizePoint(e,t,A(this,al),A(this,ol),A(this,nl))};var os,pd,md,js,Un,Vn,Vc,Wc,ll,Hr,ni,yv,vv,wv;class Ed extends Bt{constructor(){super(...arguments);tt(this,Hr);tt(this,os);tt(this,pd,0);tt(this,md);tt(this,js);tt(this,Un);tt(this,Vn);tt(this,Vc);tt(this,Wc);tt(this,ll)}build(t,r,l,i,s,a,o){K(this,Un,r),K(this,Vn,l),K(this,Vc,i),K(this,Wc,s),K(this,ll,a),K(this,md,o??0),K(this,js,t),et(this,Hr,vv).call(this)}get thickness(){return A(this,ll)}setLastElement(t){return A(this,js).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return A(this,js).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:r}of A(this,js)){if(t.push(`M${Bt.svgRound(r[4])} ${Bt.svgRound(r[5])}`),r.length===6){t.push("Z");continue}if(r.length===12&&isNaN(r[6])){t.push(`L${Bt.svgRound(r[10])} ${Bt.svgRound(r[11])}`);continue}for(let l=6,i=r.length;l<i;l+=6){const[s,a,o,n,c,d]=r.subarray(l,l+6).map(Bt.svgRound);t.push(`C${s} ${a} ${o} ${n} ${c} ${d}`)}}return t.join("")}serialize([t,r,l,i],s){const a=[],o=[],[n,c,d,u]=et(this,Hr,yv).call(this);let h,p,m,f,b,y,_,E,M;switch(A(this,Wc)){case 0:M=Bt._rescale,h=t,p=r+i,m=l,f=-i,b=t+n*l,y=r+(1-c-u)*i,_=t+(n+d)*l,E=r+(1-c)*i;break;case 90:M=Bt._rescaleAndSwap,h=t,p=r,m=l,f=i,b=t+c*l,y=r+n*i,_=t+(c+u)*l,E=r+(n+d)*i;break;case 180:M=Bt._rescale,h=t+l,p=r,m=-l,f=i,b=t+(1-n-d)*l,y=r+c*i,_=t+(1-n)*l,E=r+(c+u)*i;break;case 270:M=Bt._rescaleAndSwap,h=t+l,p=r+i,m=-l,f=-i,b=t+(1-c-u)*l,y=r+(1-n-d)*i,_=t+(1-c)*l,E=r+(1-n)*i;break}for(const{line:D,points:z}of A(this,js))a.push(M(D,h,p,m,f,s?new Array(D.length):null)),o.push(M(z,h,p,m,f,s?new Array(z.length):null));return{lines:a,points:o,rect:[b,y,_,E]}}static deserialize(t,r,l,i,s,{paths:{lines:a,points:o},rotation:n,thickness:c}){const d=[];let u,h,p,m,f;switch(n){case 0:f=Bt._rescale,u=-t/l,h=r/i+1,p=1/l,m=-1/i;break;case 90:f=Bt._rescaleAndSwap,u=-r/i,h=-t/l,p=1/i,m=1/l;break;case 180:f=Bt._rescale,u=t/l+1,h=-r/i,p=-1/l,m=1/i;break;case 270:f=Bt._rescaleAndSwap,u=r/i+1,h=t/l+1,p=-1/i,m=-1/l;break}if(!a){a=[];for(const y of o){const _=y.length;if(_===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,y[0],y[1]]));continue}if(_===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,y[0],y[1],NaN,NaN,NaN,NaN,y[2],y[3]]));continue}const E=new Float32Array(3*(_-2));a.push(E);let[M,D,z,O]=y.subarray(0,4);E.set([NaN,NaN,NaN,NaN,M,D],0);for(let N=4;N<_;N+=2){const B=y[N],H=y[N+1];E.set(Bt.createBezierPoints(M,D,z,O,B,H),(N-2)*3),[M,D,z,O]=[z,O,B,H]}}}for(let y=0,_=a.length;y<_;y++)d.push({line:f(a[y].map(E=>E??NaN),u,h,p,m),points:f(o[y].map(E=>E??NaN),u,h,p,m)});const b=new this.prototype.constructor;return b.build(d,l,i,1,n,c,s),b}get box(){return A(this,os)}updateProperty(t,r){return t==="stroke-width"?et(this,Hr,wv).call(this,r):null}updateParentDimensions([t,r],l){const[i,s]=et(this,Hr,ni).call(this);K(this,Un,t),K(this,Vn,r),K(this,Vc,l);const[a,o]=et(this,Hr,ni).call(this),n=a-i,c=o-s,d=A(this,os);return d[0]-=n,d[1]-=c,d[2]+=2*n,d[3]+=2*c,d}updateRotation(t){return K(this,pd,t),{path:{transform:this.rotationTransform}}}get viewBox(){return A(this,os).map(Bt.svgRound).join(" ")}get defaultProperties(){const[t,r]=A(this,os);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Bt.svgRound(t)} ${Bt.svgRound(r)}`}}}get rotationTransform(){const[,,t,r]=A(this,os);let l=0,i=0,s=0,a=0,o=0,n=0;switch(A(this,pd)){case 90:i=r/t,s=-t/r,o=t;break;case 180:l=-1,a=-1,o=t,n=r;break;case 270:i=-r/t,s=t/r,n=r;break;default:return""}return`matrix(${l} ${i} ${s} ${a} ${Bt.svgRound(o)} ${Bt.svgRound(n)})`}getPathResizingSVGProperties([t,r,l,i]){const[s,a]=et(this,Hr,ni).call(this),[o,n,c,d]=A(this,os);if(Math.abs(c-s)<=Bt.PRECISION||Math.abs(d-a)<=Bt.PRECISION){const f=t+l/2-(o+c/2),b=r+i/2-(n+d/2);return{path:{"transform-origin":`${Bt.svgRound(t)} ${Bt.svgRound(r)}`,transform:`${this.rotationTransform} translate(${f} ${b})`}}}const u=(l-2*s)/(c-2*s),h=(i-2*a)/(d-2*a),p=c/l,m=d/i;return{path:{"transform-origin":`${Bt.svgRound(o)} ${Bt.svgRound(n)}`,transform:`${this.rotationTransform} scale(${p} ${m}) translate(${Bt.svgRound(s)} ${Bt.svgRound(a)}) scale(${u} ${h}) translate(${Bt.svgRound(-s)} ${Bt.svgRound(-a)})`}}}getPathResizedSVGProperties([t,r,l,i]){const[s,a]=et(this,Hr,ni).call(this),o=A(this,os),[n,c,d,u]=o;if(o[0]=t,o[1]=r,o[2]=l,o[3]=i,Math.abs(d-s)<=Bt.PRECISION||Math.abs(u-a)<=Bt.PRECISION){const b=t+l/2-(n+d/2),y=r+i/2-(c+u/2);for(const{line:_,points:E}of A(this,js))Bt._translate(_,b,y,_),Bt._translate(E,b,y,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Bt.svgRound(t)} ${Bt.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const h=(l-2*s)/(d-2*s),p=(i-2*a)/(u-2*a),m=-h*(n+s)+t+s,f=-p*(c+a)+r+a;if(h!==1||p!==1||m!==0||f!==0)for(const{line:b,points:y}of A(this,js))Bt._rescale(b,m,f,h,p,b),Bt._rescale(y,m,f,h,p,y);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Bt.svgRound(t)} ${Bt.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,r],l){const[i,s]=l,a=A(this,os),o=t-a[0],n=r-a[1];if(A(this,Un)===i&&A(this,Vn)===s)for(const{line:c,points:d}of A(this,js))Bt._translate(c,o,n,c),Bt._translate(d,o,n,d);else{const c=A(this,Un)/i,d=A(this,Vn)/s;K(this,Un,i),K(this,Vn,s);for(const{line:u,points:h}of A(this,js))Bt._rescale(u,o,n,c,d,u),Bt._rescale(h,o,n,c,d,h);a[2]*=c,a[3]*=d}return a[0]=t,a[1]=r,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Bt.svgRound(t)} ${Bt.svgRound(r)}`}}}get defaultSVGProperties(){const t=A(this,os);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Bt.svgRound(t[0])} ${Bt.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}os=new WeakMap,pd=new WeakMap,md=new WeakMap,js=new WeakMap,Un=new WeakMap,Vn=new WeakMap,Vc=new WeakMap,Wc=new WeakMap,ll=new WeakMap,Hr=new WeakSet,ni=function(t=A(this,ll)){const r=A(this,md)+t/2*A(this,Vc);return A(this,Wc)%180===0?[r/A(this,Un),r/A(this,Vn)]:[r/A(this,Vn),r/A(this,Un)]},yv=function(){const[t,r,l,i]=A(this,os),[s,a]=et(this,Hr,ni).call(this,0);return[t+s,r+a,l-2*s,i-2*a]},vv=function(){const t=K(this,os,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of A(this,js)){if(i.length<=12){for(let o=4,n=i.length;o<n;o+=6)Wt.pointBoundingBox(i[o],i[o+1],t);continue}let s=i[4],a=i[5];for(let o=6,n=i.length;o<n;o+=6){const[c,d,u,h,p,m]=i.subarray(o,o+6);Wt.bezierBoundingBox(s,a,c,d,u,h,p,m,t),s=p,a=m}}const[r,l]=et(this,Hr,ni).call(this);t[0]=us(t[0]-r,0,1),t[1]=us(t[1]-l,0,1),t[2]=us(t[2]+r,0,1),t[3]=us(t[3]+l,0,1),t[2]-=t[0],t[3]-=t[1]},wv=function(t){const[r,l]=et(this,Hr,ni).call(this);K(this,ll,t);const[i,s]=et(this,Hr,ni).call(this),[a,o]=[i-r,s-l],n=A(this,os);return n[0]-=a,n[1]-=o,n[2]+=2*a,n[3]+=2*o,n};class Rp extends gv{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Je._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new Rp(this._viewParameters);return e.updateAll(this),e}}var hp,_v;const Ll=class Ll extends Xf{constructor(t){super({...t,name:"inkEditor"});tt(this,hp);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,r){Je.initialize(t,r),this._defaultDrawingOptions=new Rp(r.viewParameters)}static getDefaultDrawingOptions(t){const r=this._defaultDrawingOptions.clone();return r.updateProperties(t),r}static get supportMultipleDrawings(){return!0}static get typesMap(){return we(this,"typesMap",new Map([[xe.INK_THICKNESS,"stroke-width"],[xe.INK_COLOR,"stroke"],[xe.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,r,l,i,s){return new c4(t,r,l,i,s,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,r,l,i,s,a){return Ed.deserialize(t,r,l,i,s,a)}static async deserialize(t,r,l){let i=null;if(t instanceof og){const{data:{inkLists:a,rect:o,rotation:n,id:c,color:d,opacity:u,borderStyle:{rawWidth:h},popupRef:p},parent:{page:{pageNumber:m}}}=t;i=t={annotationType:oe.INK,color:Array.from(d),thickness:h,opacity:u,paths:{points:a},boxes:null,pageIndex:m-1,rect:o.slice(0),rotation:n,annotationElementId:c,id:c,deleted:!1,popupRef:p}}const s=await super.deserialize(t,r,l);return s._initialData=i,s}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:r,parent:l}=this;r.updateSVGProperty("stroke-width"),l.drawLayer.updateProperties(t,r.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:r,opacity:l}){this._drawingOptions=Ll.getDefaultDrawingOptions({stroke:Wt.makeHexColor(...t),"stroke-width":r,"stroke-opacity":l})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:r,points:l,rect:i}=this.serializeDraw(t),{_drawingOptions:{stroke:s,"stroke-opacity":a,"stroke-width":o}}=this,n={annotationType:oe.INK,color:Je._colorManager.convert(s),opacity:a,thickness:o,paths:{lines:r,points:l},pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(n.isCopy=!0,n):this.annotationElementId&&!et(this,hp,_v).call(this,n)?null:(n.id=this.annotationElementId,n)}renderAnnotationElement(t){const{points:r,rect:l}=this.serializeDraw(!1);return t.updateEdited({rect:l,thickness:this._drawingOptions["stroke-width"],points:r}),null}};hp=new WeakSet,_v=function(t){const{color:r,thickness:l,opacity:i,pageIndex:s}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((a,o)=>a!==r[o])||t.thickness!==l||t.opacity!==i||t.pageIndex!==s},At(Ll,"_type","ink"),At(Ll,"_editorType",oe.INK),At(Ll,"_defaultDrawingOptions",null);let y0=Ll;class v0 extends Ed{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Vd=8,au=3;var cl,Fe,w0,bn,xv,Sv,_0,xf,Av,kv,Ev,x0,S0,Cv;class zi{static extractContoursFromText(e,{fontFamily:t,fontStyle:r,fontWeight:l},i,s,a,o){let n=new OffscreenCanvas(1,1),c=n.getContext("2d",{alpha:!1});const d=200,u=c.font=`${r} ${l} ${d}px ${t}`,{actualBoundingBoxLeft:h,actualBoundingBoxRight:p,actualBoundingBoxAscent:m,actualBoundingBoxDescent:f,fontBoundingBoxAscent:b,fontBoundingBoxDescent:y,width:_}=c.measureText(e),E=1.5,M=Math.ceil(Math.max(Math.abs(h)+Math.abs(p)||0,_)*E),D=Math.ceil(Math.max(Math.abs(m)+Math.abs(f)||d,Math.abs(b)+Math.abs(y)||d)*E);n=new OffscreenCanvas(M,D),c=n.getContext("2d",{alpha:!0,willReadFrequently:!0}),c.font=u,c.filter="grayscale(1)",c.fillStyle="white",c.fillRect(0,0,M,D),c.fillStyle="black",c.fillText(e,M*(E-1)/2,D*(3-E)/2);const z=et(this,Fe,x0).call(this,c.getImageData(0,0,M,D).data),O=et(this,Fe,Ev).call(this,z),N=et(this,Fe,S0).call(this,O),B=et(this,Fe,_0).call(this,z,M,D,N);return this.processDrawnLines({lines:{curves:B,width:M,height:D},pageWidth:i,pageHeight:s,rotation:a,innerMargin:o,mustSmooth:!0,areContours:!0})}static process(e,t,r,l,i){const[s,a,o]=et(this,Fe,Cv).call(this,e),[n,c]=et(this,Fe,kv).call(this,s,a,o,Math.hypot(a,o)*A(this,cl).sigmaSFactor,A(this,cl).sigmaR,A(this,cl).kernelSize),d=et(this,Fe,S0).call(this,c),u=et(this,Fe,_0).call(this,n,a,o,d);return this.processDrawnLines({lines:{curves:u,width:a,height:o},pageWidth:t,pageHeight:r,rotation:l,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:r,rotation:l,innerMargin:i,mustSmooth:s,areContours:a}){l%180!==0&&([t,r]=[r,t]);const{curves:o,width:n,height:c}=e,d=e.thickness??0,u=[],h=Math.min(t/n,r/c),p=h/t,m=h/r,f=[];for(const{points:y}of o){const _=s?et(this,Fe,Av).call(this,y):y;if(!_)continue;f.push(_);const E=_.length,M=new Float32Array(E),D=new Float32Array(3*(E===2?2:E-2));if(u.push({line:D,points:M}),E===2){M[0]=_[0]*p,M[1]=_[1]*m,D.set([NaN,NaN,NaN,NaN,M[0],M[1]],0);continue}let[z,O,N,B]=_;z*=p,O*=m,N*=p,B*=m,M.set([z,O,N,B],0),D.set([NaN,NaN,NaN,NaN,z,O],0);for(let H=4;H<E;H+=2){const $=M[H]=_[H]*p,C=M[H+1]=_[H+1]*m;D.set(Bt.createBezierPoints(z,O,N,B,$,C),(H-2)*3),[z,O,N,B]=[N,B,$,C]}}if(u.length===0)return null;const b=a?new v0:new Ed;return b.build(u,t,r,1,l,a?0:d,i),{outline:b,newCurves:f,areContours:a,thickness:d,width:n,height:c}}static async compressSignature({outlines:e,areContours:t,thickness:r,width:l,height:i}){let s=1/0,a=-1/0,o=0;for(const _ of e){o+=_.length;for(let E=2,M=_.length;E<M;E++){const D=_[E]-_[E-2];s=Math.min(s,D),a=Math.max(a,D)}}let n;s>=-128&&a<=127?n=Int8Array:s>=-32768&&a<=32767?n=Int16Array:n=Int32Array;const c=e.length,d=Vd+au*c,u=new Uint32Array(d);let h=0;u[h++]=d*Uint32Array.BYTES_PER_ELEMENT+(o-2*c)*n.BYTES_PER_ELEMENT,u[h++]=0,u[h++]=l,u[h++]=i,u[h++]=t?0:1,u[h++]=Math.max(0,Math.floor(r??0)),u[h++]=c,u[h++]=n.BYTES_PER_ELEMENT;for(const _ of e)u[h++]=_.length-2,u[h++]=_[0],u[h++]=_[1];const p=new CompressionStream("deflate-raw"),m=p.writable.getWriter();await m.ready,m.write(u);const f=n.prototype.constructor;for(const _ of e){const E=new f(_.length-2);for(let M=2,D=_.length;M<D;M++)E[M-2]=_[M]-_[M-2];m.write(E)}m.close();const b=await new Response(p.readable).arrayBuffer(),y=new Uint8Array(b);return C1(y)}static async decompressSignature(e){try{const t=O3(e),{readable:r,writable:l}=new DecompressionStream("deflate-raw"),i=l.getWriter();await i.ready,i.write(t).then(async()=>{await i.ready,await i.close()}).catch(()=>{});let s=null,a=0;for await(const _ of r)s||(s=new Uint8Array(new Uint32Array(_.buffer,0,4)[0])),s.set(_,a),a+=_.length;const o=new Uint32Array(s.buffer,0,s.length>>2),n=o[1];if(n!==0)throw new Error(`Invalid version: ${n}`);const c=o[2],d=o[3],u=o[4]===0,h=o[5],p=o[6],m=o[7],f=[],b=(Vd+au*p)*Uint32Array.BYTES_PER_ELEMENT;let y;switch(m){case Int8Array.BYTES_PER_ELEMENT:y=new Int8Array(s.buffer,b);break;case Int16Array.BYTES_PER_ELEMENT:y=new Int16Array(s.buffer,b);break;case Int32Array.BYTES_PER_ELEMENT:y=new Int32Array(s.buffer,b);break}a=0;for(let _=0;_<p;_++){const E=o[au*_+Vd],M=new Float32Array(E+2);f.push(M);for(let D=0;D<au-1;D++)M[D]=o[au*_+Vd+D+1];for(let D=0;D<E;D++)M[D+2]=M[D]+y[a++]}return{areContours:u,thickness:h,outlines:f,width:c,height:d}}catch(t){return le(`decompressSignature: ${t}`),null}}}cl=new WeakMap,Fe=new WeakSet,w0=function(e,t,r,l){return r-=e,l-=t,r===0?l>0?0:4:r===1?l+6:2-l},bn=new WeakMap,xv=function(e,t,r,l,i,s,a){const o=et(this,Fe,w0).call(this,r,l,i,s);for(let n=0;n<8;n++){const c=(-n+o-a+16)%8,d=A(this,bn)[2*c],u=A(this,bn)[2*c+1];if(e[(r+d)*t+(l+u)]!==0)return c}return-1},Sv=function(e,t,r,l,i,s,a){const o=et(this,Fe,w0).call(this,r,l,i,s);for(let n=0;n<8;n++){const c=(n+o+a+16)%8,d=A(this,bn)[2*c],u=A(this,bn)[2*c+1];if(e[(r+d)*t+(l+u)]!==0)return c}return-1},_0=function(e,t,r,l){const i=e.length,s=new Int32Array(i);for(let c=0;c<i;c++)s[c]=e[c]<=l?1:0;for(let c=1;c<r-1;c++)s[c*t]=s[c*t+t-1]=0;for(let c=0;c<t;c++)s[c]=s[t*r-1-c]=0;let a=1,o;const n=[];for(let c=1;c<r-1;c++){o=1;for(let d=1;d<t-1;d++){const u=c*t+d,h=s[u];if(h===0)continue;let p=c,m=d;if(h===1&&s[u-1]===0)a+=1,m-=1;else if(h>=1&&s[u+1]===0)a+=1,m+=1,h>1&&(o=h);else{h!==1&&(o=Math.abs(h));continue}const f=[d,c],b=m===d+1,y={isHole:b,points:f,id:a,parent:0};n.push(y);let _;for(const H of n)if(H.id===o){_=H;break}_?_.isHole?y.parent=b?_.parent:o:y.parent=b?o:_.parent:y.parent=b?o:0;const E=et(this,Fe,xv).call(this,s,t,c,d,p,m,0);if(E===-1){s[u]=-a,s[u]!==1&&(o=Math.abs(s[u]));continue}let M=A(this,bn)[2*E],D=A(this,bn)[2*E+1];const z=c+M,O=d+D;p=z,m=O;let N=c,B=d;for(;;){const H=et(this,Fe,Sv).call(this,s,t,N,B,p,m,1);M=A(this,bn)[2*H],D=A(this,bn)[2*H+1];const $=N+M,C=B+D;f.push(C,$);const R=N*t+B;if(s[R+1]===0?s[R]=-a:s[R]===1&&(s[R]=a),$===c&&C===d&&N===z&&B===O){s[u]!==1&&(o=Math.abs(s[u]));break}else p=N,m=B,N=$,B=C}}}return n},xf=function(e,t,r,l){if(r-t<=4){for(let z=t;z<r-2;z+=2)l.push(e[z],e[z+1]);return}const i=e[t],s=e[t+1],a=e[r-4]-i,o=e[r-3]-s,n=Math.hypot(a,o),c=a/n,d=o/n,u=c*s-d*i,h=o/a,p=1/n,m=Math.atan(h),f=Math.cos(m),b=Math.sin(m),y=p*(Math.abs(f)+Math.abs(b)),_=p*(1-y+y**2),E=Math.max(Math.atan(Math.abs(b+f)*_),Math.atan(Math.abs(b-f)*_));let M=0,D=t;for(let z=t+2;z<r-2;z+=2){const O=Math.abs(u-c*e[z+1]+d*e[z]);O>M&&(D=z,M=O)}M>(n*E)**2?(et(this,Fe,xf).call(this,e,t,D+2,l),et(this,Fe,xf).call(this,e,D,r,l)):l.push(i,s)},Av=function(e){const t=[],r=e.length;return et(this,Fe,xf).call(this,e,0,r,t),t.push(e[r-2],e[r-1]),t.length<=4?null:t},kv=function(e,t,r,l,i,s){const a=new Float32Array(s**2),o=-2*l**2,n=s>>1;for(let m=0;m<s;m++){const f=(m-n)**2;for(let b=0;b<s;b++)a[m*s+b]=Math.exp((f+(b-n)**2)/o)}const c=new Float32Array(256),d=-2*i**2;for(let m=0;m<256;m++)c[m]=Math.exp(m**2/d);const u=e.length,h=new Uint8Array(u),p=new Uint32Array(256);for(let m=0;m<r;m++)for(let f=0;f<t;f++){const b=m*t+f,y=e[b];let _=0,E=0;for(let D=0;D<s;D++){const z=m+D-n;if(!(z<0||z>=r))for(let O=0;O<s;O++){const N=f+O-n;if(N<0||N>=t)continue;const B=e[z*t+N],H=a[D*s+O]*c[Math.abs(B-y)];_+=B*H,E+=H}}const M=h[b]=Math.round(_/E);p[M]++}return[h,p]},Ev=function(e){const t=new Uint32Array(256);for(const r of e)t[r]++;return t},x0=function(e){const t=e.length,r=new Uint8ClampedArray(t>>2);let l=-1/0,i=1/0;for(let a=0,o=r.length;a<o;a++){if(e[(a<<2)+3]===0){l=r[a]=255;continue}const c=r[a]=e[a<<2];c>l&&(l=c),c<i&&(i=c)}const s=255/(l-i);for(let a=0;a<t;a++)r[a]=(r[a]-i)*s;return r},S0=function(e){let t,r=-1/0,l=-1/0;const i=e.findIndex(o=>o!==0);let s=i,a=i;for(t=i;t<256;t++){const o=e[t];o>r&&(t-s>l&&(l=t-s,a=t-1),r=o,s=t)}for(t=a-1;t>=0&&!(e[t]>e[t+1]);t--);return t},Cv=function(e){const t=e,{width:r,height:l}=e,{maxDim:i}=A(this,cl);let s=r,a=l;if(r>i||l>i){let u=r,h=l,p=Math.log2(Math.max(r,l)/i);const m=Math.floor(p);p=p===m?m-1:m;for(let b=0;b<p;b++){s=Math.ceil(u/2),a=Math.ceil(h/2);const y=new OffscreenCanvas(s,a);y.getContext("2d").drawImage(e,0,0,u,h,0,0,s,a),u=s,h=a,e!==t&&e.close(),e=y.transferToImageBitmap()}const f=Math.min(i/s,i/a);s=Math.round(s*f),a=Math.round(a*f)}const n=new OffscreenCanvas(s,a).getContext("2d",{willReadFrequently:!0});n.filter="grayscale(1)",n.drawImage(e,0,0,e.width,e.height,0,0,s,a);const c=n.getImageData(0,0,s,a).data;return[et(this,Fe,x0).call(this,c),s,a]},tt(zi,Fe),tt(zi,cl,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),tt(zi,bn,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class lg extends gv{constructor(){super(),super.updateProperties({fill:Je._defaultLineColor,"stroke-width":0})}clone(){const e=new lg;return e.updateAll(this),e}}class cg extends Rp{constructor(e){super(e),super.updateProperties({stroke:Je._defaultLineColor,"stroke-width":1})}clone(){const e=new cg(this._viewParameters);return e.updateAll(this),e}}var Ia,Wn,Pa,ul;const Es=class Es extends Xf{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});tt(this,Ia,!1);tt(this,Wn,null);tt(this,Pa,null);tt(this,ul,null);this._willKeepAspectRatio=!0,K(this,Pa,t.signatureData||null),K(this,Wn,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,r){Je.initialize(t,r),this._defaultDrawingOptions=new lg,this._defaultDrawnSignatureOptions=new cg(r.viewParameters)}static getDefaultDrawingOptions(t){const r=this._defaultDrawingOptions.clone();return r.updateProperties(t),r}static get supportMultipleDrawings(){return!1}static get typesMap(){return we(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!A(this,Wn)}}static computeTelemetryFinalData(t){const r=t.get("hasDescription");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,r;const{_isCopy:l}=this;if(l&&(this._isCopy=!1,t=this.x,r=this.y),super.render(),this._drawId===null)if(A(this,Pa)){const{lines:i,mustSmooth:s,areContours:a,description:o,uuid:n,heightInPage:c}=A(this,Pa),{rawDims:{pageWidth:d,pageHeight:u},rotation:h}=this.parent.viewport,p=zi.processDrawnLines({lines:i,pageWidth:d,pageHeight:u,rotation:h,innerMargin:Es._INNER_MARGIN,mustSmooth:s,areContours:a});this.addSignature(p,c,o,n)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return l&&(this._isCopy=!0,this._moveAfterPaste(t,r)),this.div}setUuid(t){K(this,ul,t),this.addEditToolbar()}getUuid(){return A(this,ul)}get description(){return A(this,Wn)}set description(t){K(this,Wn,t),super.addEditToolbar().then(r=>{r==null||r.updateEditSignatureButton(t)})}getSignaturePreview(){const{newCurves:t,areContours:r,thickness:l,width:i,height:s}=A(this,Pa),a=Math.max(i,s),o=zi.processDrawnLines({lines:{curves:t.map(n=>({points:n})),thickness:l,width:i,height:s},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:r});return{areContours:r,outline:o.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,r,l,i){const{x:s,y:a}=this,{outline:o}=K(this,Pa,t);K(this,Ia,o instanceof v0),this.description=l,this.div.setAttribute("data-l10n-args",JSON.stringify({description:l}));let n;A(this,Ia)?n=Es.getDefaultDrawingOptions():(n=Es._defaultDrawnSignatureOptions.clone(),n.updateProperties({"stroke-width":o.thickness})),this._addOutlines({drawOutlines:o,drawingOptions:n});const[c,d]=this.parentDimensions,[,u]=this.pageDimensions;let h=r/u;h=h>=1?.5:h,this.width*=h/this.height,this.width>=1&&(h*=.9/this.width,this.width=.9),this.height=h,this.setDims(c*this.width,d*this.height),this.x=s,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!l}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:r,pageHeight:l},rotation:i}=this.parent.viewport;return zi.process(t,r,l,i,Es._INNER_MARGIN)}getFromText(t,r){const{rawDims:{pageWidth:l,pageHeight:i},rotation:s}=this.parent.viewport;return zi.extractContoursFromText(t,r,l,i,s,Es._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:r,pageHeight:l},rotation:i}=this.parent.viewport;return zi.processDrawnLines({lines:t,pageWidth:r,pageHeight:l,rotation:i,innerMargin:Es._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:r}){t?this._drawingOptions=Es.getDefaultDrawingOptions():(this._drawingOptions=Es._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":r}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:r,points:l,rect:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":s}}=this,a={annotationType:oe.SIGNATURE,isSignature:!0,areContours:A(this,Ia),color:[0,0,0],thickness:A(this,Ia)?0:s,pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(a.paths={lines:r,points:l},a.uuid=A(this,ul),a.isCopy=!0):a.lines=r,A(this,Wn)&&(a.accessibilityData={type:"Figure",alt:A(this,Wn)}),a}static deserializeDraw(t,r,l,i,s,a){return a.areContours?v0.deserialize(t,r,l,i,s,a):Ed.deserialize(t,r,l,i,s,a)}static async deserialize(t,r,l){var s;const i=await super.deserialize(t,r,l);return K(i,Ia,t.areContours),K(i,Wn,((s=t.accessibilityData)==null?void 0:s.alt)||""),K(i,ul,t.uuid),i}};Ia=new WeakMap,Wn=new WeakMap,Pa=new WeakMap,ul=new WeakMap,At(Es,"_type","signature"),At(Es,"_editorType",oe.SIGNATURE),At(Es,"_defaultDrawingOptions",null);let A0=Es;var rr,Nr,Oa,Oi,Na,qc,Ni,hl,qn,Bs,Xc,Ce,ku,Eu,Sf,Af,kf,E0,Ef,Tv;class k0 extends Je{constructor(t){super({...t,name:"stampEditor"});tt(this,Ce);tt(this,rr,null);tt(this,Nr,null);tt(this,Oa,null);tt(this,Oi,null);tt(this,Na,null);tt(this,qc,"");tt(this,Ni,null);tt(this,hl,!1);tt(this,qn,null);tt(this,Bs,!1);tt(this,Xc,!1);K(this,Oi,t.bitmapUrl),K(this,Na,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,r){Je.initialize(t,r)}static isHandlingMimeForPasting(t){return ym.includes(t)}static paste(t,r){r.pasteEditor({mode:oe.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const r=t.get("hasAltText");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}async mlGuessAltText(t=null,r=!0){if(this.hasAltTextData())return null;const{mlManager:l}=this._uiManager;if(!l)throw new Error("No ML.");if(!await l.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:s,height:a}=t||this.copyCanvas(null,null,!0).imageData,o=await l.guess({name:"altText",request:{data:i,width:s,height:a,channels:i.length/(s*a)}});if(!o)throw new Error("No response from the AI service.");if(o.error)throw new Error("Error from the AI service.");if(o.cancel)return null;if(!o.output)throw new Error("No valid response from the AI service.");const n=o.output;return await this.setGuessedAltText(n),r&&!this.hasAltTextData()&&(this.altTextData={alt:n,decorative:!1}),n}remove(){var t;A(this,Nr)&&(K(this,rr,null),this._uiManager.imageManager.deleteId(A(this,Nr)),(t=A(this,Ni))==null||t.remove(),K(this,Ni,null),A(this,qn)&&(clearTimeout(A(this,qn)),K(this,qn,null))),super.remove()}rebuild(){if(!this.parent){A(this,Nr)&&et(this,Ce,Sf).call(this);return}super.rebuild(),this.div!==null&&(A(this,Nr)&&A(this,Ni)===null&&et(this,Ce,Sf).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(A(this,Oa)||A(this,rr)||A(this,Oi)||A(this,Na)||A(this,Nr)||A(this,hl))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,r;return this._isCopy&&(t=this.x,r=this.y),super.render(),this.div.hidden=!0,this.createAltText(),A(this,hl)||(A(this,rr)?et(this,Ce,Af).call(this):et(this,Ce,Sf).call(this)),this._isCopy&&this._moveAfterPaste(t,r),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,r){const{id:l,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,r);r.remove(),l&&this._uiManager.imageManager.isValidId(l)&&(K(this,Nr,l),i&&K(this,rr,i),K(this,hl,!1),et(this,Ce,Af).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;A(this,qn)!==null&&clearTimeout(A(this,qn)),K(this,qn,setTimeout(()=>{K(this,qn,null),et(this,Ce,E0).call(this)},200))}copyCanvas(t,r,l=!1){var h;t||(t=224);const{width:i,height:s}=A(this,rr),a=new Jn;let o=A(this,rr),n=i,c=s,d=null;if(r){if(i>r||s>r){const O=Math.min(r/i,r/s);n=Math.floor(i*O),c=Math.floor(s*O)}d=document.createElement("canvas");const p=d.width=Math.ceil(n*a.sx),m=d.height=Math.ceil(c*a.sy);A(this,Bs)||(o=et(this,Ce,kf).call(this,p,m));const f=d.getContext("2d");f.filter=this._uiManager.hcmFilter;let b="white",y="#cfcfd8";this._uiManager.hcmFilter!=="none"?y="black":(h=window.matchMedia)!=null&&h.call(window,"(prefers-color-scheme: dark)").matches&&(b="#8f8f9d",y="#42414d");const _=15,E=_*a.sx,M=_*a.sy,D=new OffscreenCanvas(E*2,M*2),z=D.getContext("2d");z.fillStyle=b,z.fillRect(0,0,E*2,M*2),z.fillStyle=y,z.fillRect(0,0,E,M),z.fillRect(E,M,E,M),f.fillStyle=f.createPattern(D,"repeat"),f.fillRect(0,0,p,m),f.drawImage(o,0,0,o.width,o.height,0,0,p,m)}let u=null;if(l){let p,m;if(a.symmetric&&o.width<t&&o.height<t)p=o.width,m=o.height;else if(o=A(this,rr),i>t||s>t){const y=Math.min(t/i,t/s);p=Math.floor(i*y),m=Math.floor(s*y),A(this,Bs)||(o=et(this,Ce,kf).call(this,p,m))}const b=new OffscreenCanvas(p,m).getContext("2d",{willReadFrequently:!0});b.drawImage(o,0,0,o.width,o.height,0,0,p,m),u={width:p,height:m,data:b.getImageData(0,0,p,m).data}}return{canvas:d,width:n,height:c,imageData:u}}static async deserialize(t,r,l){var f;let i=null,s=!1;if(t instanceof Uy){const{data:{rect:b,rotation:y,id:_,structParent:E,popupRef:M},container:D,parent:{page:{pageNumber:z}},canvas:O}=t;let N,B;O?(delete t.canvas,{id:N,bitmap:B}=l.imageManager.getFromCanvas(D.id,O),O.remove()):(s=!0,t._hasNoCanvas=!0);const H=((f=await r._structTree.getAriaAttributes(`${Q0}${_}`))==null?void 0:f.get("aria-label"))||"";i=t={annotationType:oe.STAMP,bitmapId:N,bitmap:B,pageIndex:z-1,rect:b.slice(0),rotation:y,annotationElementId:_,id:_,deleted:!1,accessibilityData:{decorative:!1,altText:H},isSvg:!1,structParent:E,popupRef:M}}const a=await super.deserialize(t,r,l),{rect:o,bitmap:n,bitmapUrl:c,bitmapId:d,isSvg:u,accessibilityData:h}=t;s?(l.addMissingCanvas(t.id,a),K(a,hl,!0)):d&&l.imageManager.isValidId(d)?(K(a,Nr,d),n&&K(a,rr,n)):K(a,Oi,c),K(a,Bs,u);const[p,m]=a.pageDimensions;return a.width=(o[2]-o[0])/p,a.height=(o[3]-o[1])/m,h&&(a.altTextData=h),a._initialData=i,K(a,Xc,!!i),a}serialize(t=!1,r=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const l={annotationType:oe.STAMP,bitmapId:A(this,Nr),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:A(this,Bs),structTreeParentId:this._structTreeParentId};if(t)return l.bitmapUrl=et(this,Ce,Ef).call(this,!0),l.accessibilityData=this.serializeAltText(!0),l.isCopy=!0,l;const{decorative:i,altText:s}=this.serializeAltText(!1);if(!i&&s&&(l.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){const o=et(this,Ce,Tv).call(this,l);if(o.isSame)return null;o.isSameAltText?delete l.accessibilityData:l.accessibilityData.structParent=this._initialData.structParent??-1}if(l.id=this.annotationElementId,r===null)return l;r.stamps||(r.stamps=new Map);const a=A(this,Bs)?(l.rect[2]-l.rect[0])*(l.rect[3]-l.rect[1]):null;if(!r.stamps.has(A(this,Nr)))r.stamps.set(A(this,Nr),{area:a,serialized:l}),l.bitmap=et(this,Ce,Ef).call(this,!1);else if(A(this,Bs)){const o=r.stamps.get(A(this,Nr));a>o.area&&(o.area=a,o.serialized.bitmap.close(),o.serialized.bitmap=et(this,Ce,Ef).call(this,!1))}return l}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}}rr=new WeakMap,Nr=new WeakMap,Oa=new WeakMap,Oi=new WeakMap,Na=new WeakMap,qc=new WeakMap,Ni=new WeakMap,hl=new WeakMap,qn=new WeakMap,Bs=new WeakMap,Xc=new WeakMap,Ce=new WeakSet,ku=function(t,r=!1){if(!t){this.remove();return}K(this,rr,t.bitmap),r||(K(this,Nr,t.id),K(this,Bs,t.isSvg)),t.file&&K(this,qc,t.file.name),et(this,Ce,Af).call(this)},Eu=function(){if(K(this,Oa,null),this._uiManager.enableWaiting(!1),!!A(this,Ni)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&A(this,rr)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&A(this,rr)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Sf=function(){if(A(this,Nr)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(A(this,Nr)).then(l=>et(this,Ce,ku).call(this,l,!0)).finally(()=>et(this,Ce,Eu).call(this));return}if(A(this,Oi)){const l=A(this,Oi);K(this,Oi,null),this._uiManager.enableWaiting(!0),K(this,Oa,this._uiManager.imageManager.getFromUrl(l).then(i=>et(this,Ce,ku).call(this,i)).finally(()=>et(this,Ce,Eu).call(this)));return}if(A(this,Na)){const l=A(this,Na);K(this,Na,null),this._uiManager.enableWaiting(!0),K(this,Oa,this._uiManager.imageManager.getFromFile(l).then(i=>et(this,Ce,ku).call(this,i)).finally(()=>et(this,Ce,Eu).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=ym.join(",");const r=this._uiManager._signal;K(this,Oa,new Promise(l=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),et(this,Ce,ku).call(this,i)}l()},{signal:r}),t.addEventListener("cancel",()=>{this.remove(),l()},{signal:r})}).finally(()=>et(this,Ce,Eu).call(this))),t.click()},Af=function(){var d;const{div:t}=this;let{width:r,height:l}=A(this,rr);const[i,s]=this.pageDimensions,a=.75;if(this.width)r=this.width*i,l=this.height*s;else if(r>a*i||l>a*s){const u=Math.min(a*i/r,a*s/l);r*=u,l*=u}const[o,n]=this.parentDimensions;this.setDims(r*o/i,l*n/s),this._uiManager.enableWaiting(!1);const c=K(this,Ni,document.createElement("canvas"));c.setAttribute("role","img"),this.addContainer(c),this.width=r/i,this.height=l/s,(d=this._initialOptions)!=null&&d.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),et(this,Ce,E0).call(this),A(this,Xc)||(this.parent.addUndoableEditor(this),K(this,Xc,!0)),this._reportTelemetry({action:"inserted_image"}),A(this,qc)&&this.div.setAttribute("aria-description",A(this,qc)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},kf=function(t,r){const{width:l,height:i}=A(this,rr);let s=l,a=i,o=A(this,rr);for(;s>2*t||a>2*r;){const n=s,c=a;s>2*t&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),a>2*r&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const d=new OffscreenCanvas(s,a);d.getContext("2d").drawImage(o,0,0,n,c,0,0,s,a),o=d.transferToImageBitmap()}return o},E0=function(){const[t,r]=this.parentDimensions,{width:l,height:i}=this,s=new Jn,a=Math.ceil(l*t*s.sx),o=Math.ceil(i*r*s.sy),n=A(this,Ni);if(!n||n.width===a&&n.height===o)return;n.width=a,n.height=o;const c=A(this,Bs)?A(this,rr):et(this,Ce,kf).call(this,a,o),d=n.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(c,0,0,c.width,c.height,0,0,a,o)},Ef=function(t){if(t){if(A(this,Bs)){const i=this._uiManager.imageManager.getSvgUrl(A(this,Nr));if(i)return i}const r=document.createElement("canvas");return{width:r.width,height:r.height}=A(this,rr),r.getContext("2d").drawImage(A(this,rr),0,0),r.toDataURL()}if(A(this,Bs)){const[r,l]=this.pageDimensions,i=Math.round(this.width*r*Ua.PDF_TO_CSS_UNITS),s=Math.round(this.height*l*Ua.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(i,s);return a.getContext("2d").drawImage(A(this,rr),0,0,A(this,rr).width,A(this,rr).height,0,0,i,s),a.transferToImageBitmap()}return structuredClone(A(this,rr))},Tv=function(t){var a;const{pageIndex:r,accessibilityData:{altText:l}}=this._initialData,i=t.pageIndex===r,s=(((a=t.accessibilityData)==null?void 0:a.alt)||"")===l;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&i&&s,isSameAltText:s}},At(k0,"_type","stamp"),At(k0,"_editorType",oe.STAMP);var dl,Gc,Xn,Da,Di,zs,La,Kc,fl,yn,Li,Dr,Fi,Fa,Yc,Ht,ja,sr,Mv,Mn,T0,M0,Cf;const on=class on{constructor({uiManager:e,pageIndex:t,div:r,structTreeLayer:l,accessibilityManager:i,annotationLayer:s,drawLayer:a,textLayer:o,viewport:n,l10n:c}){tt(this,sr);tt(this,dl);tt(this,Gc,!1);tt(this,Xn,null);tt(this,Da,null);tt(this,Di,null);tt(this,zs,new Map);tt(this,La,!1);tt(this,Kc,!1);tt(this,fl,!1);tt(this,yn,null);tt(this,Li,null);tt(this,Dr,null);tt(this,Fi,null);tt(this,Fa,null);tt(this,Yc,-1);tt(this,Ht);const d=[...A(on,ja).values()];if(!on._initialized){on._initialized=!0;for(const u of d)u.initialize(c,e)}e.registerEditorTypes(d),K(this,Ht,e),this.pageIndex=t,this.div=r,K(this,dl,i),K(this,Xn,s),this.viewport=n,K(this,Dr,o),this.drawLayer=a,this._structTree=l,A(this,Ht).addLayer(this)}get isEmpty(){return A(this,zs).size===0}get isInvisible(){return this.isEmpty&&A(this,Ht).getMode()===oe.NONE}updateToolbar(e){A(this,Ht).updateToolbar(e)}updateMode(e=A(this,Ht).getMode()){switch(et(this,sr,Cf).call(this),e){case oe.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case oe.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case oe.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const r of A(on,ja).values())t.toggle(`${r._type}Editing`,e===r._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=A(this,Dr))==null?void 0:t.div)}setEditingState(e){A(this,Ht).setEditingState(e)}addCommands(e){A(this,Ht).addCommands(e)}cleanUndoStack(e){A(this,Ht).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=A(this,Xn))==null||t.div.classList.toggle("disabled",!e)}async enable(){var r;K(this,fl,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),(r=A(this,Fa))==null||r.abort(),K(this,Fa,null);const e=new Set;for(const l of A(this,zs).values())l.enableEditing(),l.show(!0),l.annotationElementId&&(A(this,Ht).removeChangedExistingAnnotation(l),e.add(l.annotationElementId));if(!A(this,Xn)){K(this,fl,!1);return}const t=A(this,Xn).getEditableAnnotations();for(const l of t){if(l.hide(),A(this,Ht).isDeletedAnnotationElement(l.data.id)||e.has(l.data.id))continue;const i=await this.deserialize(l);i&&(this.addOrRebuild(i),i.enableEditing())}K(this,fl,!1)}disable(){var l;if(K(this,Kc,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),A(this,Dr)&&!A(this,Fa)){K(this,Fa,new AbortController);const i=A(this,Ht).combinedSignal(A(this,Fa));A(this,Dr).div.addEventListener("pointerdown",s=>{const{clientX:o,clientY:n,timeStamp:c}=s,d=A(this,Yc);if(c-d>500){K(this,Yc,c);return}K(this,Yc,-1);const{classList:u}=this.div;u.toggle("getElements",!0);const h=document.elementsFromPoint(o,n);if(u.toggle("getElements",!1),!this.div.contains(h[0]))return;let p;const m=new RegExp(`^${x1}[0-9]+$`);for(const b of h)if(m.test(b.id)){p=b.id;break}if(!p)return;const f=A(this,zs).get(p);(f==null?void 0:f.annotationElementId)===null&&(s.stopPropagation(),s.preventDefault(),f.dblclick())},{signal:i,capture:!0})}const e=new Map,t=new Map;for(const i of A(this,zs).values())if(i.disableEditing(),!!i.annotationElementId){if(i.serialize()!==null){e.set(i.annotationElementId,i);continue}else t.set(i.annotationElementId,i);(l=this.getEditableAnnotation(i.annotationElementId))==null||l.show(),i.remove()}if(A(this,Xn)){const i=A(this,Xn).getEditableAnnotations();for(const s of i){const{id:a}=s.data;if(A(this,Ht).isDeletedAnnotationElement(a))continue;let o=t.get(a);if(o){o.resetAnnotationElement(s),o.show(!1),s.show();continue}o=e.get(a),o&&(A(this,Ht).addChangedExistingAnnotation(o),o.renderAnnotationElement(s)&&o.show(!1)),s.show()}}et(this,sr,Cf).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const i of A(on,ja).values())r.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),K(this,Kc,!1)}getEditableAnnotation(e){var t;return((t=A(this,Xn))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){A(this,Ht).getActive()!==e&&A(this,Ht).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=A(this,Dr))!=null&&e.div&&!A(this,Fi)){K(this,Fi,new AbortController);const t=A(this,Ht).combinedSignal(A(this,Fi));A(this,Dr).div.addEventListener("pointerdown",et(this,sr,Mv).bind(this),{signal:t}),A(this,Dr).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=A(this,Dr))!=null&&e.div&&A(this,Fi)&&(A(this,Fi).abort(),K(this,Fi,null),A(this,Dr).div.classList.remove("highlighting"))}enableClick(){if(A(this,Da))return;K(this,Da,new AbortController);const e=A(this,Ht).combinedSignal(A(this,Da));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=A(this,Da))==null||e.abort(),K(this,Da,null)}attach(e){A(this,zs).set(e.id,e);const{annotationElementId:t}=e;t&&A(this,Ht).isDeletedAnnotationElement(t)&&A(this,Ht).removeDeletedAnnotationElement(e)}detach(e){var t;A(this,zs).delete(e.id),(t=A(this,dl))==null||t.removePointerInTextLayer(e.contentDiv),!A(this,Kc)&&e.annotationElementId&&A(this,Ht).addDeletedAnnotationElement(e)}remove(e){this.detach(e),A(this,Ht).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(A(this,Ht).addDeletedAnnotationElement(e.annotationElementId),Je.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),A(this,Ht).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!A(this,fl)),A(this,Ht).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var r;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!A(this,Di)&&(e._focusEventsAllowed=!1,K(this,Di,setTimeout(()=>{K(this,Di,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:A(this,Ht)._signal}),t.focus())},0))),e._structTreeParentId=(r=A(this,dl))==null?void 0:r.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:t,undo:r,mustExec:!1})}getNextId(){return A(this,Ht).getId()}combinedSignal(e){return A(this,Ht).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=A(this,sr,Mn))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await A(this,Ht).updateMode(e.mode);const{offsetX:r,offsetY:l}=et(this,sr,M0).call(this),i=this.getNextId(),s=et(this,sr,T0).call(this,{parent:this,id:i,x:r,y:l,uiManager:A(this,Ht),isCentered:!0,...t});s&&this.add(s)}async deserialize(e){var t;return await((t=A(on,ja).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,A(this,Ht)))||null}createAndAddNewEditor(e,t,r={}){const l=this.getNextId(),i=et(this,sr,T0).call(this,{parent:this,id:l,x:e.offsetX,y:e.offsetY,uiManager:A(this,Ht),isCentered:t,...r});return i&&this.add(i),i}addNewEditor(e={}){this.createAndAddNewEditor(et(this,sr,M0).call(this),!0,e)}setSelected(e){A(this,Ht).setSelected(e)}toggleSelected(e){A(this,Ht).toggleSelected(e)}unselect(e){A(this,Ht).unselect(e)}pointerup(e){var l;const{isMac:t}=qr.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!A(this,La)||(K(this,La,!1),(l=A(this,sr,Mn))!=null&&l.isDrawer&&A(this,sr,Mn).supportMultipleDrawings))return;if(!A(this,Gc)){K(this,Gc,!0);return}const r=A(this,Ht).getMode();if(r===oe.STAMP||r===oe.SIGNATURE){A(this,Ht).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var l;if(A(this,Ht).getMode()===oe.HIGHLIGHT&&this.enableTextSelection(),A(this,La)){K(this,La,!1);return}const{isMac:t}=qr.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(K(this,La,!0),(l=A(this,sr,Mn))!=null&&l.isDrawer){this.startDrawingSession(e);return}const r=A(this,Ht).getActive();K(this,Gc,!r||r.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),A(this,yn)){A(this,sr,Mn).startDrawing(this,A(this,Ht),!1,e);return}A(this,Ht).setCurrentDrawingSession(this),K(this,yn,new AbortController);const t=A(this,Ht).combinedSignal(A(this,yn));this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&(K(this,Li,null),this.commitOrRemove())},{signal:t}),A(this,sr,Mn).startDrawing(this,A(this,Ht),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&K(this,Li,t);return}A(this,Li)&&setTimeout(()=>{var t;(t=A(this,Li))==null||t.focus(),K(this,Li,null)},0)}endDrawingSession(e=!1){return A(this,yn)?(A(this,Ht).setCurrentDrawingSession(null),A(this,yn).abort(),K(this,yn,null),K(this,Li,null),A(this,sr,Mn).endDrawing(e)):null}findNewParent(e,t,r){const l=A(this,Ht).findParent(t,r);return l===null||l===this?!1:(l.changeParent(e),!0)}commitOrRemove(){return A(this,yn)?(this.endDrawingSession(),!0):!1}onScaleChanging(){A(this,yn)&&A(this,sr,Mn).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=A(this,Ht).getActive())==null?void 0:e.parent)===this&&(A(this,Ht).commitOrRemove(),A(this,Ht).setActiveEditor(null)),A(this,Di)&&(clearTimeout(A(this,Di)),K(this,Di,null));for(const r of A(this,zs).values())(t=A(this,dl))==null||t.removePointerInTextLayer(r.contentDiv),r.setParent(null),r.isAttachedToDOM=!1,r.div.remove();this.div=null,A(this,zs).clear(),A(this,Ht).removeLayer(this)}render({viewport:e}){this.viewport=e,gl(this.div,e);for(const t of A(this,Ht).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){A(this,Ht).commitOrRemove(),et(this,sr,Cf).call(this);const t=this.viewport.rotation,r=e.rotation;if(this.viewport=e,gl(this.div,{rotation:r}),t!==r)for(const l of A(this,zs).values())l.rotate(r)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return A(this,Ht).viewParameters.realScale}};dl=new WeakMap,Gc=new WeakMap,Xn=new WeakMap,Da=new WeakMap,Di=new WeakMap,zs=new WeakMap,La=new WeakMap,Kc=new WeakMap,fl=new WeakMap,yn=new WeakMap,Li=new WeakMap,Dr=new WeakMap,Fi=new WeakMap,Fa=new WeakMap,Yc=new WeakMap,Ht=new WeakMap,ja=new WeakMap,sr=new WeakSet,Mv=function(e){A(this,Ht).unselectAll();const{target:t}=e;if(t===A(this,Dr).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&A(this,Dr).div.contains(t)){const{isMac:r}=qr.platform;if(e.button!==0||e.ctrlKey&&r)return;A(this,Ht).showAllEditors("highlight",!0,!0),A(this,Dr).div.classList.add("free"),this.toggleDrawing(),qf.startHighlighting(this,A(this,Ht).direction==="ltr",{target:A(this,Dr).div,x:e.x,y:e.y}),A(this,Dr).div.addEventListener("pointerup",()=>{A(this,Dr).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:A(this,Ht)._signal}),e.preventDefault()}},Mn=function(){return A(on,ja).get(A(this,Ht).getMode())},T0=function(e){const t=A(this,sr,Mn);return t?new t.prototype.constructor(e):null},M0=function(){const{x:e,y:t,width:r,height:l}=this.div.getBoundingClientRect(),i=Math.max(0,e),s=Math.max(0,t),a=Math.min(window.innerWidth,e+r),o=Math.min(window.innerHeight,t+l),n=(i+a)/2-e,c=(s+o)/2-t,[d,u]=this.viewport.rotation%180===0?[n,c]:[c,n];return{offsetX:d,offsetY:u}},Cf=function(){for(const e of A(this,zs).values())e.isEmpty()&&e.remove()},At(on,"_initialized",!1),tt(on,ja,new Map([i0,y0,k0,qf,A0].map(e=>[e._editorType,e])));let C0=on;var vn,ls,pl,gd,dp,Rv,Qn,I0,Iv,P0;const Sr=class Sr{constructor({pageIndex:e}){tt(this,Qn);tt(this,vn,null);tt(this,ls,new Map);tt(this,pl,new Map);this.pageIndex=e}setParent(e){if(!A(this,vn)){K(this,vn,e);return}if(A(this,vn)!==e){if(A(this,ls).size>0)for(const t of A(this,ls).values())t.remove(),e.append(t);K(this,vn,e)}}static get _svgFactory(){return we(this,"_svgFactory",new Uf)}draw(e,t=!1,r=!1){const l=rs(Sr,gd)._++,i=et(this,Qn,I0).call(this),s=Sr._svgFactory.createElement("defs");i.append(s);const a=Sr._svgFactory.createElement("path");s.append(a);const o=`path_p${this.pageIndex}_${l}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke"),t&&A(this,pl).set(l,a);const n=r?et(this,Qn,Iv).call(this,s,o):null,c=Sr._svgFactory.createElement("use");return i.append(c),c.setAttribute("href",`#${o}`),this.updateProperties(i,e),A(this,ls).set(l,i),{id:l,clipPathId:`url(#${n})`}}drawOutline(e,t){const r=rs(Sr,gd)._++,l=et(this,Qn,I0).call(this),i=Sr._svgFactory.createElement("defs");l.append(i);const s=Sr._svgFactory.createElement("path");i.append(s);const a=`path_p${this.pageIndex}_${r}`;s.setAttribute("id",a),s.setAttribute("vector-effect","non-scaling-stroke");let o;if(t){const d=Sr._svgFactory.createElement("mask");i.append(d),o=`mask_p${this.pageIndex}_${r}`,d.setAttribute("id",o),d.setAttribute("maskUnits","objectBoundingBox");const u=Sr._svgFactory.createElement("rect");d.append(u),u.setAttribute("width","1"),u.setAttribute("height","1"),u.setAttribute("fill","white");const h=Sr._svgFactory.createElement("use");d.append(h),h.setAttribute("href",`#${a}`),h.setAttribute("stroke","none"),h.setAttribute("fill","black"),h.setAttribute("fill-rule","nonzero"),h.classList.add("mask")}const n=Sr._svgFactory.createElement("use");l.append(n),n.setAttribute("href",`#${a}`),o&&n.setAttribute("mask",`url(#${o})`);const c=n.cloneNode();return l.append(c),n.classList.add("mainOutline"),c.classList.add("secondaryOutline"),this.updateProperties(l,e),A(this,ls).set(r,l),r}finalizeDraw(e,t){A(this,pl).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var o;if(!t)return;const{root:r,bbox:l,rootClass:i,path:s}=t,a=typeof e=="number"?A(this,ls).get(e):e;if(a){if(r&&et(this,Qn,P0).call(this,a,r),l&&et(o=Sr,dp,Rv).call(o,a,l),i){const{classList:n}=a;for(const[c,d]of Object.entries(i))n.toggle(c,d)}if(s){const c=a.firstChild.firstChild;et(this,Qn,P0).call(this,c,s)}}}updateParent(e,t){if(t===this)return;const r=A(this,ls).get(e);r&&(A(t,vn).append(r),A(this,ls).delete(e),A(t,ls).set(e,r))}remove(e){A(this,pl).delete(e),A(this,vn)!==null&&(A(this,ls).get(e).remove(),A(this,ls).delete(e))}destroy(){K(this,vn,null);for(const e of A(this,ls).values())e.remove();A(this,ls).clear(),A(this,pl).clear()}};vn=new WeakMap,ls=new WeakMap,pl=new WeakMap,gd=new WeakMap,dp=new WeakSet,Rv=function(e,[t,r,l,i]){const{style:s}=e;s.top=`${100*r}%`,s.left=`${100*t}%`,s.width=`${100*l}%`,s.height=`${100*i}%`},Qn=new WeakSet,I0=function(){const e=Sr._svgFactory.create(1,1,!0);return A(this,vn).append(e),e.setAttribute("aria-hidden",!0),e},Iv=function(e,t){const r=Sr._svgFactory.createElement("clipPath");e.append(r);const l=`clip_${t}`;r.setAttribute("id",l),r.setAttribute("clipPathUnits","objectBoundingBox");const i=Sr._svgFactory.createElement("use");return r.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),l},P0=function(e,t){for(const[r,l]of Object.entries(t))l===null?e.removeAttribute(r):e.setAttribute(r,l)},tt(Sr,dp),tt(Sr,gd,0);let R0=Sr;globalThis._pdfjsTestingUtils={HighlightOutliner:o0};globalThis.pdfjsLib={AbortException:Ha,AnnotationEditorLayer:C0,AnnotationEditorParamsType:xe,AnnotationEditorType:oe,AnnotationEditorUIManager:bl,AnnotationLayer:r0,AnnotationMode:ea,AnnotationType:pr,build:H_,ColorPicker:Wf,createValidAbsoluteUrl:S1,DOMSVGFactory:Uf,DrawLayer:R0,FeatureTest:qr,fetchData:xd,getDocument:Cy,getFilenameFromUrl:N3,getPdfFilenameFromUrl:D3,getUuid:E1,getXfaPageViewport:F3,GlobalWorkerOptions:Kn,ImageKind:Yd,InvalidPDFException:gm,isDataScheme:Tp,isPdfFile:eg,isValidExplicitDest:G3,MathClamp:us,noContextMenu:An,normalizeUnicode:I3,OPS:Bf,OutputScale:Jn,PasswordResponses:x3,PDFDataRangeTransport:Ty,PDFDateString:rg,PDFWorker:Hu,PermissionFlag:_3,PixelsPerInch:Ua,RenderingCancelledException:tg,ResponseException:zf,setLayerDimensions:gl,shadow:we,SignatureExtractor:zi,stopEvent:gr,SupportedImageMimeTypes:ym,TextLayer:zu,TouchManager:Hf,updateUrlHash:A1,Util:Wt,VerbosityLevel:kp,version:$_,XfaLayer:Iy};class Ip{parseAmount(e){throw new Error("Метод parseAmount должен быть переопределен в дочернем классе")}parseDate(e){throw new Error("Метод parseDate должен быть переопределен в дочернем классе")}extractTransactions(e){throw new Error("Метод extractTransactions должен быть переопределен в дочернем классе")}}class u4 extends Ip{parseAmount(e){try{const r=e.replace(/\s/g,"").replace(/₽/g,"").match(/[+-]?(\d+(?:,\d{2})?)/);if(!r)return 0;let l=r[0].replace(/\s/g,"").replace(",",".");return parseFloat(l)}catch(t){return console.error("Ошибка при парсинге суммы Сбера:",e,t),0}}parseDate(e){try{if(!/^\d{2}\.\d{2}\.\d{4}$/.test(e))return null;const[t,r,l]=e.split("."),i=parseInt(t,10),s=parseInt(r,10),a=parseInt(l,10);if(i<1||i>31||s<1||s>12||a<1900||a>2100)return null;const o=new Date(a,s-1,i);return o.getDate()!==i||o.getMonth()!==s-1||o.getFullYear()!==a?null:o}catch(t){return console.warn("Не удалось распарсить дату Сбера:",e,t),null}}extractTransactions(e){const t=[],r=/(\d{2}\.\d{2}\.\d{4})\s+(\d{2}:\d{2})\s+(\d+)\s+(.+?)\s+([+-]?\d{1,3}(?:\s\d{3})*(?:,\d{2})?)\s+(\d{1,3}(?:\s\d{3})*(?:,\d{2})?)/g;let l;for(;(l=r.exec(e))!==null;){const[,i,s,a,o,n,c]=l,d=this.parseDate(i),u=this.parseAmount(n);if(d&&u!==0){const h={date:d,description:o.trim(),amount:u,category:this.detectCategory(o),bank:"Сбербанк",raw:l[0],meta:{time:s,code:a,balance:this.parseAmount(c)}};t.push(h)}}return t}detectCategory(e){const t=(e||"").toLowerCase();return t.includes("пенсия пфр")?"Пенсия":t.includes("перевод с карты")||t.includes("альфа-банк")?"Переводы":t.includes("прочие операции")||t.includes("прочие")||t.includes("прочее")?"Прочее":t.includes("продукт")||t.includes("магнит")||t.includes("пятерочка")?"Продукты":t.includes("транспорт")||t.includes("метро")||t.includes("автобус")?"Транспорт":t.includes("кафе")||t.includes("ресторан")||t.includes("еда")?"Питание":t.includes("зарплат")||t.includes("доход")?"Доходы":"Прочее"}}class h4 extends Ip{parseAmount(e){try{const r=e.replace(/\s/g,"").replace(/₽/g,"").match(/[+-]?(\d+(?:\.\d{2})?)/);if(!r)return 0;let l=r[0].replace(/\s/g,"");return parseFloat(l)}catch(t){return console.error("Ошибка при парсинге суммы Тинькофф:",e,t),0}}parseDate(e){try{if(/^\d{2}\.\d{2}\.\d{4}$/.test(e)){const[t,r,l]=e.split(".");return new Date(parseInt(l),parseInt(r)-1,parseInt(t))}return/^\d{4}-\d{2}-\d{2}$/.test(e)?new Date(e):null}catch(t){return console.warn("Не удалось распарсить дату Тинькофф:",e,t),null}}extractTransactions(e){const t=[],r=/(\d{2}\.\d{2}\.\d{4})\s+\d{2}:\d{2}\s+\d{2}\.\d{2}\.\d{4}\s+\d{2}:\d{2}\s+([+-]?\d[\d\s]*[.,]\d{2})\s*₽\s*[+-]?\d[\d\s]*[.,]\d{2}\s*₽\s*([А-Яа-яA-Za-z0-9 .№()%-]+?)\s+\d{4}/g;let l;for(;(l=r.exec(e))!==null;){const[,i,s,a]=l,o=this.parseDate(i),n=this.parseAmount(s);if(o&&n!==0){const c={date:o,description:a.trim(),amount:n,category:this.detectCategory(a),bank:"Тинькофф",raw:l[0],meta:{bank:"Тинькофф"}};t.push(c)}}return t}detectCategory(e){return"Прочее"}}class d4 extends Ip{parseAmount(e){try{const r=e.replace(/\s/g,"").replace(/₽/g,"").match(/[+-]?(\d+(?:\.\d{2})?)/);if(!r)return 0;let l=r[0].replace(/\s/g,"");return parseFloat(l)}catch(t){return console.error("Ошибка при парсинге суммы Озон-банка:",e,t),0}}parseDate(e){try{if(!/^\d{2}\.\d{2}\.\d{4}$/.test(e))return null;const[t,r,l]=e.split(".");return new Date(parseInt(l),parseInt(r)-1,parseInt(t))}catch(t){return console.warn("Не удалось распарсить дату Озон-банка:",e,t),null}}extractTransactions(e){const t=[],r=/(\d{2}\.\d{2}\.\d{4})\s+(\d{2}:\d{2}:\d{2})\s+(\d+)\s+(.+?)\s+([+-])\s?([\d\s]+[.,]\d{2})\s?₽/g;let l;for(;(l=r.exec(e))!==null;){const[,i,s,a,o,n,c]=l,d=this.parseDate(i),u=this.parseAmount(n+c);if(d&&u!==0){const h={date:d,description:o.trim(),amount:u,category:this.detectCategory(o),bank:"Озон-банк",raw:l[0],meta:{time:s,number:a,sign:n}};t.push(h)}}return t}detectCategory(e){return"Прочее"}}class f4 extends Ip{parseAmount(e){try{const r=e.replace(/\s/g,"").replace(/₽/g,"").match(/[+-]?(\d+(?:\.\d{2})?)/);if(!r)return 0;let l=r[0].replace(/\s/g,"");return parseFloat(l)}catch(t){return console.error("Ошибка при парсинге суммы Альфа-банка:",e,t),0}}parseDate(e){try{if(/^\d{2}\.\d{2}\.\d{4}$/.test(e)){const[t,r,l]=e.split(".");return new Date(parseInt(l),parseInt(r)-1,parseInt(t))}return null}catch(t){return console.warn("Не удалось распарсить дату Альфа-банка:",e,t),null}}extractTransactions(e){const t=[],r=/(\d{2}\.\d{2}\.\d{4})\s+\d{2}:\d{2}\s+(.+?)\s+([+-]?\d[\d\s]*[.,]\d{2})\s*₽/g;let l;for(;(l=r.exec(e))!==null;){const[,i,s,a]=l,o=this.parseDate(i),n=this.parseAmount(a);if(o&&n!==0){const c={date:o,description:s.trim(),amount:n,category:this.detectCategory(s),bank:"Альфа-банк",raw:l[0],meta:{bank:"Альфа-банк"}};t.push(c)}}return t}detectCategory(e){return"Прочее"}}function p4(g){switch(g){case"sberbank":return new u4;case"tinkoff":return new h4;case"ozon":return new d4;case"alfabank":return new f4;default:throw new Error(`Неизвестный банк: ${g}`)}}Kn.workerSrc="/pdf.worker.min.mjs";class Pv{constructor(){this.supportedBanks={sberbank:{name:"Сбербанк",patterns:[{datePattern:/(\d{2}\.\d{2}\.\d{4})/,amountPattern:/([+-]?\d+[,\s]*\d*[,\s]*\d*[,\s]*\d*)/,descriptionPattern:/([А-Яа-я\s\d\-.]+)/}]}}}detectBankFormat(e){const t=e.toLowerCase();return e.includes("Сбербанк")||t.includes("сбербанк")?{bankKey:"sberbank",bankName:"Сбербанк"}:t.includes("тинькофф")||t.includes("tinkoff")||t.includes("тбанк")?{bankKey:"tinkoff",bankName:"Тинькофф"}:e.includes("ОЗОН Банк")||t.includes("ozon")?{bankKey:"ozon",bankName:"Озон Банк"}:t.includes("альфа-банк")||t.includes("alfa-bank")||t.includes("alfabank")?{bankKey:"alfabank",bankName:"Альфа-Банк"}:null}async parsePdfFile(e){try{const t=await e.arrayBuffer(),r=await Cy({data:t}).promise;let l="";for(let h=1;h<=r.numPages;h++){const f=(await(await r.getPage(h)).getTextContent()).items.map(b=>b.str).join(" ");l+=f+`
`}const i=this.detectBankFormat(l);if(!i)throw new Error("Не удалось определить формат банковской выписки");let s,a,o;const n=l.match(/(№\s*\d{20,})/);n&&(s=n[0].replace(/[^\d]/g,""));const c=l.match(/Владелец:([^\n]+)/);c&&(a=c[1].trim());const d=l.match(/Период выписки:\s*(\d{2}\.\d{2}\.\d{4})\s*[–-]\s*(\d{2}\.\d{2}\.\d{4})/);d&&(o={from:this.parseDate(d[1]),to:this.parseDate(d[2])});const u=this.extractTransactions(l,i).map(h=>({date:h.date,description:h.description,amount:h.amount,category:h.category,raw:h.raw,meta:h.meta}));return{bank:i.bankName,account:s,owner:a,period:o,transactions:u,rawData:this.getRawData(l),fileName:e.name,parsedAt:new Date}}catch(t){throw new Error(`Ошибка при обработке PDF файла: ${t.message}`)}}extractTransactions(e,t){try{const l=p4(t.bankKey).extractTransactions(e),i=[];for(const s of l)i.some(o=>{var n,c;return((n=o.date)==null?void 0:n.getTime())===((c=s.date)==null?void 0:c.getTime())&&o.description===s.description&&o.amount===s.amount})||i.push(s);return i}catch(r){return console.error(`❌ Ошибка при извлечении транзакций для банка ${t.bankKey}:`,r),[]}}parseDate(e){try{if(!/^\d{2}\.\d{2}\.\d{4}$/.test(e))return console.warn("Неверный формат даты:",e),null;const[t,r,l]=e.split("."),i=parseInt(t,10),s=parseInt(r,10),a=parseInt(l,10);if(i<1||i>31||s<1||s>12||a<1900||a>2100)return console.warn("Недопустимые значения даты:",e),null;const o=new Date(a,s-1,i);return o.getDate()!==i||o.getMonth()!==s-1||o.getFullYear()!==a?(console.warn("Недопустимая дата:",e),null):o}catch(t){return console.warn("Не удалось распарсить дату:",e,t),null}}parseAmount(e){try{const r=e.replace(/\s/g,"").replace(/₽/g,"").match(/[+-]?(\d{1,3}(?:\s\d{3})*(?:,\d{2})?|\d+(?:,\d{2})?)/);if(!r)return 0;let l=r[0].replace(/\s/g,"").replace(",",".");return parseFloat(l)}catch{return console.warn("Не удалось распарсить сумму:",e),0}}detectCategory(e){const t=(e||"").toLowerCase();return t.includes("пенсия пфр")?"Пенсия":t.includes("перевод с карты")||t.includes("альфа-банк")?"Переводы":t.includes("прочие операции")||t.includes("прочие")||t.includes("прочее")?"Прочее":t.includes("продукт")||t.includes("магнит")||t.includes("пятерочка")?"Продукты":t.includes("транспорт")||t.includes("метро")||t.includes("автобус")?"Транспорт":t.includes("кафе")||t.includes("ресторан")||t.includes("еда")?"Питание":t.includes("зарплат")||t.includes("доход")?"Доходы":"Прочее"}enhanceDescription(e,t,r){let l=r.trim();const i=t.replace(/\./g,"\\."),s=new RegExp(`${i}\\s+\\d{2}:\\d{2}\\s+\\d+\\s+${r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}\\s+[+-]?\\d+[,\\s]*\\d*[,\\s]*\\d*[,\\s]*\\d*\\s*(.+?)(?=\\d{2}\\.\\d{2}\\.\\d{4}|$)`,"s"),a=e.match(s);if(a&&a[1]){const o=a[1].trim();o.includes("Пенсия ПФР")?l+=" (Пенсия ПФР)":o.includes("Альфа-банк")?l+=" (Альфа-банк)":o.includes("Операция по счету")&&(l+=" (Операция по счету)")}return l}isValidTransaction(e){if(!e.date||!e.description||e.amount===0)return!1;const t=e.description.toLowerCase(),r=["действителен до","для проверки подлинности","итого по операциям","остаток на","генеральная лицензия","расшифровка операций","продолжение на следующей странице","дата формирования","пао сбербанк","www.sberbank.ru"];for(const l of r)if(t.includes(l))return!1;return!(e.description.length<3||/^\d+$/.test(e.description.trim())||Math.abs(e.amount)>1e6)}getRawData(e){return e.split(`
`).filter(r=>r.trim()).slice(0,20).map(r=>[r])}}function m4(g,e){return Array.isArray(g)?g.map(t=>({...t,category:t.category||e.detectCategory(t.description)})):[]}function wb(g){if(!Array.isArray(g))return[];const e=new Pv,t=g.flatMap(r=>(r.transactions||[]).map(l=>({...l,bank:l.bank||r.bank,account:r.account,fileName:r.fileName,period:r.period,parsedAt:r.parsedAt})));return m4(t,e)}function g4(g,e={},t={}){let r=Array.isArray(g)?[...g]:[];if(e.bank&&(r=r.filter(l=>l.bank===e.bank)),e.category&&(r=r.filter(l=>l.category===e.category)),e.dateFrom&&(r=r.filter(l=>{if(!l.date)return!1;const i=l.date instanceof Date?l.date:new Date(l.date),s=e.dateFrom instanceof Date?e.dateFrom:new Date(e.dateFrom);return i>=s})),e.dateTo&&(r=r.filter(l=>{if(!l.date)return!1;const i=l.date instanceof Date?l.date:new Date(l.date),s=e.dateTo instanceof Date?e.dateTo:new Date(e.dateTo);return i<=s})),e.search){const l=e.search.toLowerCase();r=r.filter(i=>i.description&&i.description.toLowerCase().includes(l)||i.category&&i.category.toLowerCase().includes(l)||i.bank&&i.bank.toLowerCase().includes(l))}return t.field&&r.sort((l,i)=>{let s=l[t.field],a=i[t.field];return s instanceof Date&&a instanceof Date&&(s=s.getTime(),a=a.getTime()),typeof s=="string"&&typeof a=="string"&&(s=s.toLowerCase(),a=a.toLowerCase()),s===void 0?1:a===void 0?-1:s<a?t.direction==="desc"?1:-1:s>a?t.direction==="desc"?-1:1:0}),r}function em(g){const e=new Set;return g.filter(t=>{const r=[t.date instanceof Date?t.date.toISOString().slice(0,10):t.date,t.amount,(t.description||"").replace(/\s+/g,"").toLowerCase(),t.bank].join("|");return e.has(r)?!1:(e.add(r),!0)})}const b4=new Pv;class y4{constructor(){this.parsers={excel:w3,pdf:b4}}detectFileType(e){const t=e.name.toLowerCase();if(t.endsWith(".xlsx")||t.endsWith(".xls"))return"excel";if(t.endsWith(".pdf"))return"pdf";if(e.type){if(e.type.includes("spreadsheet")||e.type.includes("excel"))return"excel";if(e.type==="application/pdf")return"pdf"}throw new Error("Неподдерживаемый тип файла. Поддерживаются Excel (.xlsx, .xls) и PDF (.pdf) файлы")}async parseFile(e){try{console.log("🔍 Определение типа файла:",e.name);const t=this.detectFileType(e),r=this.parsers[t];if(!r)throw new Error(`Парсер для типа ${t} не найден`);if(t==="excel")return await r.parseExcelFile(e);if(t==="pdf")return await r.parsePdfFile(e)}catch(t){throw console.error("Ошибка при парсинге файла:",t),t}}getSupportedFormats(){return[{name:"Excel файлы",extensions:[".xlsx",".xls"],type:"excel"},{name:"PDF файлы",extensions:[".pdf"],type:"pdf"}]}getAcceptString(){return this.getSupportedFormats().map(t=>t.extensions.join(",")).join(",")}}const rm=new y4,v4={class:"space-y-3"},w4={key:0,class:"space-y-3"},_4=["accept"],x4={class:"text-xs text-gray-500"},S4={key:1,class:"space-y-3"},A4={key:0,class:"bg-red-50 border border-red-200 rounded-lg p-3"},k4={class:"flex"},E4={class:"text-xs text-red-700 mt-0.5"},C4={key:1,class:"bg-green-50 border border-green-200 rounded-lg p-3"},T4={class:"flex justify-between items-start"},M4={class:"flex"},R4={class:"text-xs text-green-700 mt-0.5"},I4={key:0},P4={__name:"FileUpload",props:{accept:{type:String,default:rm.getAcceptString()},maxSize:{type:Number,default:10*1024*1024}},emits:["file-parsed","error"],setup(g,{emit:e}){const t=g,r=e,l=Me(!1),i=Me(!1),s=Me(null),a=Me(null),o=Me(null);vd(()=>{o.value&&(o.value.value="")});const n=Vr(()=>({"border-blue-500 bg-blue-50":l.value,"border-gray-300 bg-white":!l.value})),c=b=>{b.preventDefault(),l.value=!0},d=b=>{b.preventDefault(),l.value=!1},u=async b=>{b.preventDefault(),l.value=!1;const y=Array.from(b.dataTransfer.files);y.length>0&&await p(y)},h=async b=>{const y=Array.from(b.target.files);y.length>0&&await p(y)},p=async b=>{try{i.value=!0,a.value=null,s.value=null;const y=[],_=[];for(const E of b)try{if(E.size>t.maxSize)throw new Error(`Файл ${E.name} слишком большой. Максимальный размер: ${t.maxSize/1024/1024}MB`);const M=rm.getSupportedFormats();if(!M.some(O=>O.extensions.some(N=>E.name.toLowerCase().endsWith(N)))){const O=M.map(N=>N.extensions.join(", ")).join(", ");throw new Error(`Файл ${E.name}: поддерживаются только файлы: ${O}`)}const z=await rm.parseFile(E);y.push(z)}catch(M){console.error(`❌ Ошибка в обработке файла ${E.name}:`,M),_.push({file:E.name,error:M.message})}if(_.length>0){const E=_.map(M=>`${M.file}: ${M.error}`).join(`
`);a.value=`Ошибки обработки:
${E}`,r("error",E)}if(y.length>0)if(y.length===1)s.value=y[0],r("file-parsed",y[0]);else{const E=m(y);s.value=E,r("file-parsed",E)}}catch(y){console.error("❌ Общая ошибка в processFiles:",y),a.value=y.message,r("error",y.message)}finally{i.value=!1}},m=b=>{const y=[],_=[];let E=0;const M=[...new Set(b.map(z=>z.bankName).filter(Boolean))],D=M.length>0?M.join(", "):"Неизвестный банк";for(const z of b){if(z.transactions){const O=z.transactions.map(N=>({...N,bank:N.bank||z.bank}));y.push(...O),E+=z.totalTransactions||0}z.rawData&&_.push(...z.rawData)}return{bankName:D,totalTransactions:E,transactions:y,rawData:_,sourceFiles:b.length}},f=()=>{s.value=null,a.value=null};return(b,y)=>(Ut(),Zt("div",v4,[ft("div",{class:Cr(["border-2 border-dashed rounded-lg p-6 text-center transition-colors",n.value]),onDragover:c,onDragleave:d,onDrop:u},[!i.value&&!s.value?(Ut(),Zt("div",w4,[y[3]||(y[3]=ft("div",{class:"text-4xl text-gray-400"},"📄",-1)),ft("div",null,[y[0]||(y[0]=ft("h3",{class:"text-base font-medium text-gray-900 mb-2"},"Загрузите банковскую выписку",-1)),y[1]||(y[1]=ft("p",{class:"text-sm text-gray-600 mb-3"}," Перетащите файлы сюда или нажмите для выбора (можно выбрать несколько) ",-1)),ft("input",{type:"file",accept:g.accept,multiple:"",class:"hidden",onChange:h,id:"file-upload",autocomplete:"off",ref_key:"fileInput",ref:o},null,40,_4),y[2]||(y[2]=ft("label",{for:"file-upload",class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors cursor-pointer font-medium text-sm shadow-md"}," 📁 Выбрать файлы ",-1))]),ft("p",x4," Поддерживаются Excel (.xlsx, .xls) и PDF (.pdf) файлы до "+ie(g.maxSize/1024/1024)+"MB ",1)])):hr("",!0),i.value?(Ut(),Zt("div",S4,y[4]||(y[4]=[ft("div",{class:"text-4xl text-blue-500"},"⏳",-1),ft("h3",{class:"text-base font-medium text-gray-900"},"Обрабатываем файл...",-1),ft("p",{class:"text-sm text-gray-600"},"Пожалуйста, подождите",-1)]))):hr("",!0)],34),a.value?(Ut(),Zt("div",A4,[ft("div",k4,[y[6]||(y[6]=ft("div",{class:"text-red-500 text-lg mr-2"},"⚠️",-1)),ft("div",null,[y[5]||(y[5]=ft("h3",{class:"text-sm font-medium text-red-800"},"Ошибка обработки",-1)),ft("p",E4,ie(a.value),1)])])])):hr("",!0),s.value?(Ut(),Zt("div",C4,[ft("div",T4,[ft("div",M4,[y[8]||(y[8]=ft("div",{class:"text-green-500 text-lg mr-2"},"✅",-1)),ft("div",null,[y[7]||(y[7]=ft("h3",{class:"text-sm font-medium text-green-800"},"Файл успешно обработан",-1)),ft("p",R4,[s.value.sourceFiles>1?(Ut(),Zt("span",I4," Файлов: "+ie(s.value.sourceFiles)+" | ",1)):hr("",!0),io(" Банк: "+ie(s.value.bankName)+" | Транзакций: "+ie(s.value.totalTransactions),1)])])]),ft("button",{onClick:f,class:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium text-sm"}," 🔄 Загрузить другой файл ")])])):hr("",!0)]))}},Ov=(g,e)=>{const t=g.__vccOpts||g;for(const[r,l]of e)t[r]=l;return t},O4={class:"w-full"},N4={class:"w-full caption-bottom text-sm"},D4={class:"border-b bg-gray-50"},L4={class:"divide-y divide-gray-200 min-h-[200px]"},F4={__name:"Table",props:{data:{type:Array,default:()=>[]},striped:{type:Boolean,default:!1},hover:{type:Boolean,default:!0}},setup(g){return(e,t)=>(Ut(),Zt("div",O4,[ft("table",N4,[ft("thead",D4,[ft("tr",null,[Of(e.$slots,"header",{},void 0,!0)])]),ft("tbody",L4,[(Ut(!0),Zt(Ge,null,wn(g.data,(r,l)=>(Ut(),Zt("tr",{key:r.id||`${r.date}-${r.description}-${r.amount}-${l}`,class:Cr([g.hover&&"hover:bg-gray-50 transition-colors",g.striped&&l%2===1&&"bg-gray-50"])},[Of(e.$slots,"row",{row:r,index:l},void 0,!0)],2))),128))])])]))}},j4=Ov(F4,[["__scopeId","data-v-8c842db0"]]),B4={class:"relative"},z4={class:"truncate"},$4={key:0,class:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",style:{"min-width":"280px",width:"max-content"}},H4={class:"sticky top-0 bg-white border-b border-gray-200 p-2"},U4={class:"py-1"},V4=["onClick"],W4={key:0,class:"px-3 py-2 text-sm text-gray-500"},q4={class:"border-t border-gray-200 p-2"},X4={class:"flex space-x-2"},G4=["disabled"],Nv={__name:"CategorySelect",props:{modelValue:{type:String,default:""},categories:{type:Array,default:()=>[]}},emits:["update:modelValue","category-added"],setup(g,{emit:e}){const t=g,r=e,l=Me(!1),i=Me(""),s=Me(""),a=Vr(()=>{let h=t.categories;return i.value&&(h=h.filter(p=>p.toLowerCase().includes(i.value.toLowerCase()))),h});function o(){l.value=!l.value,l.value,i.value="",s.value=""}function n(h){r("update:modelValue",h),l.value=!1,i.value=""}function c(){const h=s.value.trim();h&&!t.categories.includes(h)?(r("category-added",h),r("update:modelValue",h),l.value=!1,s.value="",i.value=""):h&&t.categories.includes(h)&&(r("update:modelValue",h),l.value=!1,s.value="",i.value="")}function d(h){h.target.closest(".relative")||(l.value=!1)}function u(){i.value="",s.value=""}return vd(()=>{document.addEventListener("click",d),window.addEventListener("categories-updated",u)}),G0(()=>{document.removeEventListener("click",d),window.removeEventListener("categories-updated",u)}),(h,p)=>(Ut(),Zt("div",B4,[ft("div",{onClick:o,class:Cr(["flex items-center justify-between w-full px-3 py-2 text-sm bg-white border border-gray-300 rounded-lg cursor-pointer hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",{"border-blue-500 ring-2 ring-blue-500":l.value}])},[ft("span",z4,ie(g.modelValue||"Выберите категорию"),1),(Ut(),Zt("svg",{class:Cr(["w-4 h-4 text-gray-400 transition-transform",{"rotate-180":l.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},p[4]||(p[4]=[ft("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),l.value?(Ut(),Zt("div",$4,[ft("div",H4,[tn(ft("input",{"onUpdate:modelValue":p[0]||(p[0]=m=>i.value=m),type:"text",placeholder:"Поиск категории...",class:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",onClick:p[1]||(p[1]=Bu(()=>{},["stop"]))},null,512),[[za,i.value]])]),ft("div",U4,[(Ut(!0),Zt(Ge,null,wn(a.value,m=>(Ut(),Zt("div",{key:m,onClick:f=>n(m),class:Cr(["px-3 py-2 text-sm cursor-pointer hover:bg-blue-50 hover:text-blue-700 break-words",{"bg-blue-100 text-blue-700":g.modelValue===m}])},ie(m),11,V4))),128)),a.value.length===0&&i.value.value?(Ut(),Zt("div",W4," Категория не найдена. Введите новую категорию ниже. ")):hr("",!0)]),ft("div",q4,[ft("div",X4,[tn(ft("input",{"onUpdate:modelValue":p[2]||(p[2]=m=>s.value=m),type:"text",placeholder:"Новая категория...",class:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",onClick:p[3]||(p[3]=Bu(()=>{},["stop"])),onKeyup:u3(c,["enter"])},null,544),[[za,s.value]]),ft("button",{onClick:c,disabled:!s.value.trim(),class:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"}," + ",8,G4)])])])):hr("",!0)]))}};function Qc(g){return new Promise((e,t)=>{g.oncomplete=g.onsuccess=()=>e(g.result),g.onabort=g.onerror=()=>t(g.error)})}function K4(g,e){let t;const r=()=>{if(t)return t;const l=indexedDB.open(g);return l.onupgradeneeded=()=>l.result.createObjectStore(e),t=Qc(l),t.then(i=>{i.onclose=()=>t=void 0},()=>{}),t};return(l,i)=>r().then(s=>i(s.transaction(e,l).objectStore(e)))}let sm;function Pp(){return sm||(sm=K4("keyval-store","keyval")),sm}function ug(g,e=Pp()){return e("readonly",t=>Qc(t.get(g)))}function hg(g,e,t=Pp()){return t("readwrite",r=>(r.put(e,g),Qc(r.transaction)))}function Dv(g,e=Pp()){return e("readwrite",t=>(t.delete(g),Qc(t.transaction)))}function Y4(g,e){return g.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Qc(g.transaction)}function Lv(g=Pp()){return g("readonly",e=>{if(e.getAllKeys)return Qc(e.getAllKeys());const t=[];return Y4(e,r=>t.push(r.key)).then(()=>t)})}const dg="transaction-",Fv="categories";function Z4(){return dg+Date.now()+"-"+Math.random().toString(36).substr(2,9)}function jv(g){if(!g)return"Прочее";const e=g.trim();return e==="Прочие операции"||e==="Прочие"||e==="прочие операции"||e==="прочие"?"Прочее":e}async function Bv(g){try{g.bank||console.warn("Транзакция без банка:",g);const e=Z4(),r={...{...g,category:jv(g.category),bank:g.bank||"Неизвестный банк",date:g.date instanceof Date?g.date.toISOString():g.date},id:e,createdAt:new Date().toISOString()},l=JSON.parse(JSON.stringify(r));return await hg(e,l),e}catch(e){throw console.error("Ошибка при сохранении транзакции:",e),e}}async function J4(g){try{const e=[];for(const t of g){const r=await Bv(t);e.push(r)}return e}catch(e){throw console.error("Ошибка при сохранении транзакций:",e),e}}async function Op(){try{const e=(await Lv()).filter(r=>typeof r=="string"&&r.startsWith(dg)),t=[];for(const r of e){const l=await ug(r);if(l){const i={...l,date:l.date?new Date(l.date):null};t.push(i)}}return t}catch(g){return console.error("Ошибка при получении транзакций:",g),[]}}async function Q4(g){try{const e=await Op(),t=[],r=[];for(const l of g)e.some(s=>{const a=m=>m instanceof Date?m.toISOString().slice(0,10):typeof m=="string"?new Date(m).toISOString().slice(0,10):m,o=a(s.date),n=a(l.date),c=o===n,d=s.amount===l.amount,u=s.bank===l.bank,h=(s.description||"").replace(/\s+/g,"").toLowerCase()===(l.description||"").replace(/\s+/g,"").toLowerCase();return c&&d&&u&&h})?t.push(l):r.push(l);return{duplicates:t,uniqueTransactions:r,duplicateCount:t.length,uniqueCount:r.length}}catch(e){throw console.error("Ошибка при проверке дубликатов:",e),e}}async function t6(g,e){try{const t=await ug(g);if(!t)throw new Error(`Транзакция с ID ${g} не найдена`);const r={...e};r.category!==void 0&&(r.category=jv(r.category));const l={...t,...r,updatedAt:new Date().toISOString()};return await hg(g,l),l}catch(t){throw console.error("Ошибка при обновлении транзакции:",t),t}}async function e6(){try{const e=(await Lv()).filter(t=>typeof t=="string"&&t.startsWith(dg));for(const t of e)await Dv(t);return{success:!0,deletedCount:e.length}}catch(g){throw console.error("Ошибка при удалении всех транзакций:",g),g}}async function zv(g){try{const e={categories:g,updatedAt:new Date().toISOString(),version:"1.0"};return await hg(Fv,e),!0}catch(e){throw console.error("Ошибка при сохранении категорий:",e),e}}async function Np(){try{const g=await ug(Fv);return g&&g.categories?g.categories:null}catch(g){return console.error("Ошибка при получении категорий:",g),null}}async function r6(g){try{let t=await Np()||[];return t.includes(g)||(t.push(g),t.sort(),await zv(t)),t}catch(e){throw console.error("Ошибка при добавлении категории:",e),e}}async function s6(){try{const g=await Op(),e=await Np(),t={version:"2.0",exportedAt:new Date().toISOString(),format:"transactions",transactions:g,categories:e||[],summary:{totalTransactions:g.length,totalCategories:e?e.length:0,banks:[...new Set(g.map(s=>s.bank))],dateRange:g.length>0?{from:new Date(Math.min(...g.map(s=>new Date(s.date)))),to:new Date(Math.max(...g.map(s=>new Date(s.date))))}:null}},r=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),l=URL.createObjectURL(r),i=document.createElement("a");return i.href=l,i.download=`family-budget-backup-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(l),{success:!0,count:g.length,categoriesCount:e?e.length:0}}catch(g){throw console.error("Ошибка при экспорте данных:",g),g}}async function n6(g){try{const e=typeof g=="string"?JSON.parse(g):g;if(!e.transactions||!Array.isArray(e.transactions))throw new Error("Неверный формат файла: отсутствует массив transactions");let t=0;for(const r of e.transactions)if(r){const{id:l,createdAt:i,updatedAt:s,...a}=r;await Bv(a),t++}return e.categories&&Array.isArray(e.categories)&&await zv(e.categories),{success:!0,count:t,categoriesRestored:!!e.categories}}catch(e){throw console.error("Ошибка при импорте данных:",e),e}}async function i6(){try{const g=await Op();if(g.length===0)return{success:!0,removedCount:0,remainingCount:0};const e=new Set,t=[],r=[];for(const l of g){const a=[(o=>o instanceof Date?o.toISOString().slice(0,10):typeof o=="string"?new Date(o).toISOString().slice(0,10):o)(l.date),l.amount,(l.description||"").replace(/\s+/g,"").toLowerCase(),l.bank].join("|");e.has(a)?r.push(l.id):(e.add(a),t.push(l))}for(const l of r)await Dv(l);return{success:!0,removedCount:r.length,remainingCount:t.length}}catch(g){throw console.error("Ошибка при удалении дубликатов из БД:",g),g}}const a6={class:"mb-4"},o6={class:"text-lg font-semibold text-gray-900"},l6={class:"text-gray-600 text-sm"},c6={class:"fixed top-2 right-2 z-50 flex flex-col gap-2"},u6={key:0,class:"mb-4 space-y-3"},h6={class:"flex items-center justify-between bg-blue-50 border border-blue-200 rounded-lg p-3"},d6={class:"flex items-center"},f6={class:"text-sm text-blue-700"},p6={class:"mb-4 flex flex-wrap gap-2 items-end"},m6=["value"],g6=["value"],b6={class:"ml-auto text-xs text-gray-500"},y6={key:0},v6={key:0},w6={key:0},_6={key:0},x6={class:"whitespace-nowrap"},S6={class:"whitespace-nowrap px-4"},A6=["title","onBlur"],k6=["onBlur"],E6={class:"table-category"},C6=["title","onBlur"],T6={__name:"AllTransactionsTable",props:{transactions:{type:Array,default:()=>[]}},emits:["categoriesUpdated","saveToDatabase"],setup(g,{expose:e,emit:t}){const r=t,l=Me([]),i=Me(!1),s=Me([]),a=Me(0);async function o(){try{const U=await Np();U&&Array.isArray(U)&&(s.value=U,await Ru(),r("categoriesUpdated"),window.dispatchEvent(new CustomEvent("categories-updated",{detail:{categories:O.value}})))}catch(U){console.error("Ошибка при загрузке категорий из БД:",U)}}Ul(s,()=>{Ru(()=>{})},{deep:!0});const n=Me([]);function c(U,W="info",Y=3500){const F=Date.now()+Math.random();n.value.push({id:F,msg:U,type:W}),setTimeout(()=>{n.value=n.value.filter(X=>X.id!==F)},Y)}async function d(U){if(!U||!U.transactions)return;if(l.value.some(Y=>{var F,X,P,I,V,Q,G,q;return Y.fileName===U.fileName&&((X=(F=Y.period)==null?void 0:F.from)==null?void 0:X.toString())===((I=(P=U.period)==null?void 0:P.from)==null?void 0:I.toString())&&((Q=(V=Y.period)==null?void 0:V.to)==null?void 0:Q.toString())===((q=(G=U.period)==null?void 0:G.to)==null?void 0:q.toString())})){c("Этот файл уже был загружен","warning");return}try{const{uniqueTransactions:Y,duplicateCount:F,uniqueCount:X}=await Q4(U.transactions),P={...U,transactions:Y},I=wb(l.value),V=P.transactions,Q=em([...I,...V]).length-em(I).length,G=V.length-Q;l.value.push(P),a.value=a.value+1,X>0&&c(`Добавлено новых транзакций: ${X}`,"success"),F>0&&c(`Дубликатов в БД: ${F}`,"warning"),G>0&&c(`Локальных дубликатов: ${G}`,"info"),X===0&&c("Все транзакции уже есть в базе данных","info")}catch(Y){console.error("Ошибка при проверке дубликатов:",Y),c("Ошибка при проверке дубликатов","error")}}const u=Me(""),h=Me(""),p=Me(""),m=Me(""),f=Me(""),b=Me("date"),y=Me("desc"),_=Me(0),E=Vr(()=>(_.value,wb(l.value)));function M(){return E.value}const D=Vr(()=>Array.from(new Set(E.value.map(U=>U.bank))).filter(Boolean)),z=Vr(()=>Array.from(new Set(E.value.map(U=>U.category))).filter(Boolean)),O=Vr(()=>{const U=["Продукты","Доставка еды","Кофе","Товары для дома","Кафе и рестораны","Вода","Коты","Кварт.плата","Интернет и телефон","Аптеки","Здоровье","Фитнес","Развлечения","Хобби","Техника","Одежда","Обувь","Аксессуары","Топливо","Машина","Красота","Косметика","Повседневные товары для ухода","Семья","Подарки друзьям","Прочее"],W=z.value;return[...new Set([...U,...W,...s.value])].sort()});async function N(U){s.value.includes(U)||(s.value.push(U),s.value.sort(),await Ru(),r("categoriesUpdated"),window.dispatchEvent(new CustomEvent("categories-updated",{detail:{categories:O.value}})));try{await r6(U),c(`Добавлена новая категория: ${U}`,"success")}catch(W){console.error("Ошибка при сохранении категории в БД:",W),c("Ошибка при сохранении категории","error")}}function B(U){if(U instanceof Date)return U;if(typeof U=="string"&&/^\d{2}\.\d{2}\.\d{4}$/.test(U)){const[Y,F,X]=U.split(".");return new Date(parseInt(X),parseInt(F)-1,parseInt(Y))}const W=new Date(U);return isNaN(W.getTime())?(console.warn("Не удалось распарсить дату:",U),null):W}const H=Vr(()=>g4(E.value,{bank:u.value||void 0,category:h.value||void 0,dateFrom:p.value?B(p.value):void 0,dateTo:m.value?B(m.value):void 0,search:f.value||void 0},{field:b.value,direction:y.value}));function $(U){b.value===U?y.value=y.value==="asc"?"desc":"asc":(b.value=U,y.value="asc"),a.value=a.value+1}async function C(){try{let U=0,W=0;for(const Y of l.value){const F=Y.transactions.map(X=>({...X,bank:X.bank||Y.bank||"Неизвестный банк"}));await J4(F),W+=F.length,U++}c(`Сохранено ${W} транзакций из ${U} выписок в базу`,"success"),await R(),a.value=a.value+1}catch(U){c("Ошибка при сохранении в базу","error"),console.error("Ошибка сохранения:",U)}}async function R(){try{const U=await Op();if(Array.isArray(U)&&U.length>0){const W=em(U);if(W.length<U.length){const F=U.length-W.length;c(`Удалено ${F} дубликатов при загрузке из БД`,"info")}const Y={};W.forEach(F=>{const X=F.bank||"Неизвестный банк";Y[X]||(Y[X]=[]),Y[X].push(F)}),l.value=Object.entries(Y).map(([F,X])=>({bank:F,totalTransactions:X.length,transactions:X,fileName:`Импортированные транзакции ${F}`,period:{from:new Date(Math.min(...X.map(P=>new Date(P.date)))),to:new Date(Math.max(...X.map(P=>new Date(P.date))))}})),i.value=!0,c(`Загружено ${W.length} уникальных транзакций из IndexedDB`,"success")}else l.value=[],i.value=!0,c("Нет сохраненных транзакций в базе данных","info");await o()}catch(U){c("Ошибка при загрузке из IndexedDB","error"),console.error("Ошибка загрузки из IndexedDB:",U)}}function k(){l.value=[],i.value=!1}async function v(){try{const U=await s6();c(`Экспортировано ${U.count} транзакций`,"success")}catch(U){c("Ошибка при экспорте данных","error"),console.error("Ошибка экспорта:",U)}}async function w(U){const W=U.target.files[0];if(W){try{const Y=await W.text(),F=await n6(Y);c(`Импортировано ${F.count} транзакций`,"success"),await R()}catch(Y){c("Ошибка при импорте данных","error"),console.error("Ошибка импорта:",Y)}U.target.value=""}}async function x(){if(confirm("Вы уверены, что хотите удалить ВСЕ данные из базы? Это действие нельзя отменить."))try{const U=await e6();c(`Удалено ${U.deletedCount} транзакций из базы`,"success"),l.value=[],a.value=a.value+1}catch(U){c("Ошибка при удалении данных","error"),console.error("Ошибка удаления:",U)}}async function S(){if(confirm("Удалить дубликаты из базы данных? Это действие нельзя отменить."))try{const U=await i6();c(`Удалено ${U.removedCount} дубликатов, осталось ${U.remainingCount} уникальных транзакций`,"success"),await R()}catch(U){c("Ошибка при удалении дубликатов","error"),console.error("Ошибка удаления дубликатов:",U)}}async function T(U,W,Y){if(W==="amount"){const F=parseFloat(Y.replace(/[^\d\-.,]/g,"").replace(",","."));U.amount=isNaN(F)?0:F}else U[W]=Y;if(i.value&&U.id)try{const F=await t6(U.id,{[W]:U[W]});if(F)for(const X of l.value){const P=X.transactions.findIndex(I=>I.id===U.id);if(P!==-1){X.transactions[P][W]=F[W];break}}a.value=a.value+1,c(`Поле "${W}" обновлено`,"success")}catch(F){console.error("Ошибка при сохранении изменений:",F),c("Ошибка при сохранении изменений","error")}}function L(U){i.value=U}async function j(U){const W={fileName:"Ручной ввод",transactions:[U],period:{from:new Date(U.date),to:new Date(U.date)},meta:{source:"manual",addedAt:new Date().toISOString()}};l.value.push(W),a.value++,c("Транзакция добавлена","success")}return e({addStatement:d,addManualTransaction:j,loadStatementsFromDb:R,clearStatements:k,exportData:v,importData:w,clearAllData:x,removeDuplicates:S,getAllTransactions:M,getCategories:()=>O.value,saveAllToDb:C,setDatabaseMode:L}),(U,W)=>(Ut(),Zt(Ge,null,[ft("div",a6,[ft("h3",o6,ie(i.value?"📊 Все транзакции":"📋 Загруженные данные"),1),ft("p",l6,ie(i.value?"Просмотр и анализ всех сохраненных транзакций":"Просмотрите данные перед сохранением в базу"),1)]),ft("div",c6,[(Ut(!0),Zt(Ge,null,wn(n.value,Y=>(Ut(),Zt("div",{key:Y.id,class:Cr(["px-4 py-2 rounded shadow text-sm",Y.type==="success"?"bg-green-100 text-green-800":Y.type==="warning"?"bg-yellow-100 text-yellow-800":Y.type==="error"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"])},ie(Y.msg),3))),128))]),!i.value&&l.value.length>0?(Ut(),Zt("div",u6,[ft("div",h6,[ft("div",d6,[W[11]||(W[11]=ft("div",{class:"text-blue-600 text-lg mr-2"},"💾",-1)),ft("div",null,[W[10]||(W[10]=ft("h3",{class:"font-medium text-blue-800"},"Несохраненные данные",-1)),ft("p",f6,"Загружено выписок: "+ie(l.value.length),1)])]),ft("button",{onClick:W[0]||(W[0]=Y=>r("saveToDatabase")),class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium"}," 💾 Сохранить все в базу ")])])):hr("",!0),ft("div",p6,[ft("div",null,[W[13]||(W[13]=ft("label",{class:"block text-xs mb-1"},"Банк",-1)),tn(ft("select",{"onUpdate:modelValue":W[1]||(W[1]=Y=>u.value=Y),class:"border rounded px-2 py-1 h-8"},[W[12]||(W[12]=ft("option",{value:""},"Все",-1)),(Ut(!0),Zt(Ge,null,wn(D.value,Y=>(Ut(),Zt("option",{key:Y,value:Y},ie(Y),9,m6))),128))],512),[[Ff,u.value]])]),ft("div",null,[W[15]||(W[15]=ft("label",{class:"block text-xs mb-1"},"Категория",-1)),tn(ft("select",{"onUpdate:modelValue":W[2]||(W[2]=Y=>h.value=Y),class:"border rounded px-2 py-1 h-8"},[W[14]||(W[14]=ft("option",{value:""},"Все",-1)),(Ut(!0),Zt(Ge,null,wn(O.value,Y=>(Ut(),Zt("option",{key:Y,value:Y},ie(Y),9,g6))),128))],512),[[Ff,h.value]])]),ft("div",null,[W[16]||(W[16]=ft("label",{class:"block text-xs mb-1"},"Дата с",-1)),tn(ft("input",{type:"date","onUpdate:modelValue":W[3]||(W[3]=Y=>p.value=Y),class:"border rounded px-2 py-1 h-8"},null,512),[[za,p.value]])]),ft("div",null,[W[17]||(W[17]=ft("label",{class:"block text-xs mb-1"},"Дата по",-1)),tn(ft("input",{type:"date","onUpdate:modelValue":W[4]||(W[4]=Y=>m.value=Y),class:"border rounded px-2 py-1 h-8"},null,512),[[za,m.value]])]),ft("div",null,[W[18]||(W[18]=ft("label",{class:"block text-xs mb-1"},"Поиск",-1)),tn(ft("input",{type:"text","onUpdate:modelValue":W[5]||(W[5]=Y=>f.value=Y),placeholder:"Описание, категория...",class:"border rounded px-2 py-1 h-8"},null,512),[[za,f.value]])]),ft("div",b6,"Показано: "+ie(H.value.length),1)]),(Ut(),Zc(j4,{data:H.value,key:a.value},{header:ta(()=>[ft("th",{class:"cursor-pointer whitespace-nowrap",onClick:W[6]||(W[6]=Y=>$("date"))},[W[19]||(W[19]=io(" Дата ")),b.value==="date"?(Ut(),Zt("span",y6,ie(y.value==="asc"?"▲":"▼"),1)):hr("",!0)]),ft("th",{class:"cursor-pointer whitespace-nowrap",onClick:W[7]||(W[7]=Y=>$("bank"))},[W[20]||(W[20]=io(" Банк ")),b.value==="bank"?(Ut(),Zt("span",v6,ie(y.value==="asc"?"▲":"▼"),1)):hr("",!0)]),W[23]||(W[23]=ft("th",{class:"table-description"},"Описание",-1)),ft("th",{class:"cursor-pointer whitespace-nowrap",onClick:W[8]||(W[8]=Y=>$("amount"))},[W[21]||(W[21]=io(" Сумма ")),b.value==="amount"?(Ut(),Zt("span",w6,ie(y.value==="asc"?"▲":"▼"),1)):hr("",!0)]),ft("th",{class:"cursor-pointer whitespace-nowrap table-category",onClick:W[9]||(W[9]=Y=>$("category"))},[W[22]||(W[22]=io(" Категория ")),b.value==="category"?(Ut(),Zt("span",_6,ie(y.value==="asc"?"▲":"▼"),1)):hr("",!0)]),W[24]||(W[24]=ft("th",{class:"table-comment min-w-40 max-w-60"},"Комментарий",-1))]),row:ta(({row:Y})=>{var F;return[ft("td",x6,ie(Y.date?(F=B(Y.date))==null?void 0:F.toLocaleDateString():""),1),ft("td",S6,ie(Y.bank),1),ft("td",{class:"table-description",contenteditable:"",title:Y.description,onBlur:X=>T(Y,"description",X.target.innerText)},ie(Y.description),41,A6),ft("td",{class:Cr(Y.amount>0?"text-green-600":"text-red-600"),contenteditable:"",onBlur:X=>T(Y,"amount",X.target.innerText)},ie(Y.amount>0?"+":"")+ie(Y.amount.toLocaleString("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:2})),43,k6),ft("td",E6,[(Ut(),Zc(Nv,{modelValue:Y.category,"onUpdate:modelValue":[X=>Y.category=X,X=>T(Y,"category",X)],categories:O.value,key:`${Y.id||Y.date}-${Y.description}-${Y.amount}-${Y.category}-${a.value}`,onCategoryAdded:N},null,8,["modelValue","onUpdate:modelValue","categories"]))]),ft("td",{class:"table-comment",contenteditable:"",title:Y.comment||"",onBlur:X=>T(Y,"comment",X.target.innerText)},ie(Y.comment||""),41,C6)]}),_:1},8,["data"]))],64))}},M6=Ov(T6,[["__scopeId","data-v-fed2c5c1"]]),R6={class:"flex justify-between items-center p-6 border-b"},I6={class:"flex items-center gap-3"},P6={class:"flex items-center gap-2"},O6=["value"],N6={class:"p-6 overflow-auto max-h-[calc(90vh-120px)]"},D6={key:0,class:"text-center py-8"},L6={key:1,class:"mb-4 text-sm text-gray-600"},F6={key:2,class:"overflow-x-auto"},j6={class:"min-w-full border-collapse"},B6={class:"bg-gray-50"},z6={class:"bg-gray-50"},$6={class:"border px-3 py-2 font-medium text-gray-900"},H6={class:"border px-2 py-2 text-right font-semibold bg-green-100 text-gray-900"},U6={class:"border px-2 py-2 text-right font-semibold bg-red-100 text-gray-900"},V6={class:"bg-gray-100 font-bold"},W6={class:"border px-2 py-2 text-right bg-green-200 text-gray-900"},q6={class:"border px-2 py-2 text-right bg-red-200 text-gray-900"},X6={class:"border px-2 py-2 text-right bg-green-300 text-gray-900"},G6={class:"border px-2 py-2 text-right bg-red-300 text-gray-900"},K6={__name:"MonthlyTable",props:{transactions:{type:Array,default:()=>[]}},emits:["close"],setup(g,{expose:e}){const t=g,r=Me(""),l=Me([]),i=Vr(()=>{let O=Object.keys(a.value).sort();r.value&&(O=O.filter(B=>B.startsWith(r.value+"-")));const N={"01":"Январь","02":"Февраль","03":"Март","04":"Апрель","05":"Май","06":"Июнь","07":"Июль","08":"Август","09":"Сентябрь",10:"Октябрь",11:"Ноябрь",12:"Декабрь"};return O.map(B=>{const[H,$]=B.split("-");return{key:B,label:`${N[$]} ${H}`,year:H,month:$}})}),s=Vr(()=>{const O=new Set;return Object.keys(a.value).forEach(N=>{const B=N.split("-")[0];O.add(B)}),Array.from(O).sort()}),a=Vr(()=>{const O={};return t.transactions.forEach(N=>{if(!N.date||!N.amount)return;const B=E(N.date);if(!B){console.warn("Недопустимая дата для транзакции:",N);return}const H=B.getFullYear(),$=String(B.getMonth()+1).padStart(2,"0"),C=`${H}-${$}`,R=N.category||"Прочее";O[C]||(O[C]={}),O[C][R]||(O[C][R]={income:0,expense:0}),N.amount>0?O[C][R].income+=N.amount:O[C][R].expense+=Math.abs(N.amount)}),O}),o=Vr(()=>{const O=[];return Object.values(a.value).forEach(N=>{Object.values(N).forEach(B=>{B.income>0&&O.push(B.income)})}),O.length===0?{min:0,max:0}:{min:Math.min(...O),max:Math.max(...O)}}),n=Vr(()=>{const O=[];return Object.values(a.value).forEach(N=>{Object.values(N).forEach(B=>{B.expense>0&&O.push(B.expense)})}),O.length===0?{min:0,max:0}:{min:Math.min(...O),max:Math.max(...O)}}),c=Me([]),d=Vr(()=>{const O=Array.from(new Set(t.transactions.map(B=>B.category))).filter(Boolean);return[...new Set([...c.value,...O])].sort()});vd(async()=>{await u()});async function u(){try{const O=await Np();O&&(c.value=O,l.value=[...O])}catch(O){console.error("Ошибка при загрузке категорий из БД:",O)}}const h=()=>{const O=Array.from(new Set(t.transactions.map(N=>N.category))).filter(Boolean);l.value=O.sort()};Ul([d,c,()=>t.transactions],()=>{h()},{immediate:!0});function p(O){return Object.values(a.value).reduce((N,B)=>{var H;return N+(((H=B[O])==null?void 0:H.income)||0)},0)}function m(O){return Object.values(a.value).reduce((N,B)=>{var H;return N+(((H=B[O])==null?void 0:H.expense)||0)},0)}function f(O){const N=a.value[O]||{};return Object.values(N).reduce((B,H)=>B+(H.income||0),0)}function b(O){const N=a.value[O]||{};return Object.values(N).reduce((B,H)=>B+(H.expense||0),0)}function y(){return Object.keys(a.value).reduce((O,N)=>O+f(N),0)}function _(){return Object.keys(a.value).reduce((O,N)=>O+b(N),0)}function E(O){if(O instanceof Date)return O;if(typeof O=="string"&&/^\d{2}\.\d{2}\.\d{4}$/.test(O)){const[B,H,$]=O.split(".");return new Date(parseInt($),parseInt(H)-1,parseInt(B))}const N=new Date(O);return isNaN(N.getTime())?(console.warn("Не удалось распарсить дату:",O),null):N}function M(O){return O===0?"0":O.toLocaleString("ru-RU",{minimumFractionDigits:0,maximumFractionDigits:0})}function D(O,N="income"){if(O===0)return"";const B=N==="income"?o.value:n.value;if(B.max===0)return"";const H=O/B.max;return N==="income"?H>=.8?"bg-green-600 text-white font-semibold":H>=.6?"bg-green-500 text-white":H>=.4?"bg-green-400 text-white":H>=.2?"bg-green-300 text-gray-800":"bg-green-100 text-gray-800":H>=.8?"bg-red-600 text-white font-semibold":H>=.6?"bg-red-500 text-white":H>=.4?"bg-red-400 text-white":H>=.2?"bg-red-300 text-gray-800":"bg-red-100 text-gray-800"}function z(){}return e({refreshCategoriesFromDb:u}),(O,N)=>(Ut(),Zt("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:N[3]||(N[3]=B=>O.$emit("close"))},[ft("div",{class:"bg-white rounded-lg shadow-xl w-full max-h-[90vh] overflow-hidden",onClick:N[2]||(N[2]=Bu(()=>{},["stop"]))},[ft("div",R6,[N[6]||(N[6]=ft("h2",{class:"text-2xl font-bold text-gray-900"},"📊 Таблица расходов по месяцам",-1)),ft("div",I6,[ft("div",P6,[N[5]||(N[5]=ft("label",{class:"text-sm text-gray-600"},"Год:",-1)),tn(ft("select",{"onUpdate:modelValue":N[0]||(N[0]=B=>r.value=B),class:"text-sm border rounded px-2 py-1",onChange:z},[N[4]||(N[4]=ft("option",{value:""},"Все годы",-1)),(Ut(!0),Zt(Ge,null,wn(s.value,B=>(Ut(),Zt("option",{key:B,value:B},ie(B),9,O6))),128))],544),[[Ff,r.value]])]),ft("button",{onClick:N[1]||(N[1]=B=>O.$emit("close")),class:"text-gray-400 hover:text-gray-600 text-2xl font-bold"}," × ")])]),ft("div",N6,[!a.value||Object.keys(a.value).length===0?(Ut(),Zt("div",D6,N[7]||(N[7]=[ft("p",{class:"text-gray-500"},"Нет данных для отображения",-1)]))):hr("",!0),a.value&&Object.keys(a.value).length>0?(Ut(),Zt("div",L6," Всего транзакций: "+ie(t.transactions.length)+" | Показано месяцев: "+ie(i.value.length)+" | Категорий: "+ie(l.value.length),1)):hr("",!0),a.value&&Object.keys(a.value).length>0?(Ut(),Zt("div",F6,[ft("table",j6,[ft("thead",null,[ft("tr",B6,[N[8]||(N[8]=ft("th",{class:"border px-3 py-2 text-left font-semibold text-gray-700"},"Категория",-1)),(Ut(!0),Zt(Ge,null,wn(i.value,B=>(Ut(),Zt("th",{key:B.key,class:"border px-3 py-2 text-center font-semibold text-gray-700",colspan:"2"},ie(B.label),1))),128)),N[9]||(N[9]=ft("th",{class:"border px-3 py-2 text-center font-semibold text-gray-700",colspan:"2"}," Итого ",-1))]),ft("tr",z6,[N[12]||(N[12]=ft("th",{class:"border px-3 py-2 text-left font-semibold text-gray-700"},null,-1)),(Ut(!0),Zt(Ge,null,wn(i.value,B=>(Ut(),Zt(Ge,{key:B.key},[N[10]||(N[10]=ft("th",{class:"border px-2 py-1 text-center text-xs font-medium bg-green-100 text-green-800"}," + ",-1)),N[11]||(N[11]=ft("th",{class:"border px-2 py-1 text-center text-xs font-medium bg-red-100 text-red-800"}," - ",-1))],64))),128)),N[13]||(N[13]=ft("th",{class:"border px-2 py-1 text-center text-xs font-medium bg-green-100 text-green-800"}," + ",-1)),N[14]||(N[14]=ft("th",{class:"border px-2 py-1 text-center text-xs font-medium bg-red-100 text-red-800"}," - ",-1))])]),ft("tbody",null,[(Ut(!0),Zt(Ge,null,wn(l.value,B=>(Ut(),Zt("tr",{key:B,class:"hover:bg-gray-50"},[ft("td",$6,ie(B),1),(Ut(!0),Zt(Ge,null,wn(i.value,H=>{var $,C,R,k,v,w,x,S;return Ut(),Zt(Ge,{key:H.key},[ft("td",{class:Cr(["border px-2 py-2 text-right",D(((C=($=a.value[H.key])==null?void 0:$[B])==null?void 0:C.income)||0,"income")])},ie(M(((k=(R=a.value[H.key])==null?void 0:R[B])==null?void 0:k.income)||0)),3),ft("td",{class:Cr(["border px-2 py-2 text-right",D(((w=(v=a.value[H.key])==null?void 0:v[B])==null?void 0:w.expense)||0,"expense")])},ie(M(((S=(x=a.value[H.key])==null?void 0:x[B])==null?void 0:S.expense)||0)),3)],64)}),128)),ft("td",H6,ie(M(p(B))),1),ft("td",U6,ie(M(m(B))),1)]))),128)),ft("tr",V6,[N[15]||(N[15]=ft("td",{class:"border px-3 py-2 text-gray-900"},"ИТОГО",-1)),(Ut(!0),Zt(Ge,null,wn(i.value,B=>(Ut(),Zt(Ge,{key:B.key},[ft("td",W6,ie(M(f(B.key))),1),ft("td",q6,ie(M(b(B.key))),1)],64))),128)),ft("td",X6,ie(M(y())),1),ft("td",G6,ie(M(_())),1)])])])])):hr("",!0)])])]))}},Y6={class:"p-6"},Z6={class:"flex items-center justify-between mb-4"},J6={class:"flex space-x-3 pt-4"},Q6=["disabled"],tx={__name:"AddTransactionModal",props:{isOpen:{type:Boolean,default:!1},categories:{type:Array,default:()=>[]}},emits:["close","add-transaction"],setup(g,{emit:e}){const t=g,r=e,l=Me({date:"",description:"",amount:"",category:"",bank:"Ручной ввод"}),i=Vr(()=>l.value.date&&l.value.description.trim()&&l.value.amount!==""&&parseFloat(l.value.amount)!==0);Ul(()=>t.isOpen,a=>{if(a){const o=new Date;l.value.date=o.toISOString().split("T")[0],l.value.description="",l.value.amount="",l.value.category="",l.value.bank="Ручной ввод"}});function s(){if(!i.value)return;const a={date:l.value.date,description:l.value.description.trim(),amount:parseFloat(l.value.amount),category:l.value.category||"Прочее",bank:l.value.bank,raw:`Ручной ввод: ${l.value.description}`,meta:{source:"manual",addedAt:new Date().toISOString()}};r("add-transaction",a),r("close")}return(a,o)=>g.isOpen?(Ut(),Zt("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:o[8]||(o[8]=n=>a.$emit("close"))},[ft("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",onClick:o[7]||(o[7]=Bu(()=>{},["stop"]))},[ft("div",Y6,[ft("div",Z6,[o[9]||(o[9]=ft("h2",{class:"text-lg font-semibold text-gray-900"},"➕ Добавить транзакцию",-1)),ft("button",{onClick:o[0]||(o[0]=n=>a.$emit("close")),class:"text-gray-400 hover:text-gray-600 transition-colors"}," ✕ ")]),ft("form",{onSubmit:Bu(s,["prevent"]),class:"space-y-4"},[ft("div",null,[o[10]||(o[10]=ft("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Дата",-1)),tn(ft("input",{"onUpdate:modelValue":o[1]||(o[1]=n=>l.value.date=n),type:"date",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[za,l.value.date]])]),ft("div",null,[o[11]||(o[11]=ft("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Описание",-1)),tn(ft("input",{"onUpdate:modelValue":o[2]||(o[2]=n=>l.value.description=n),type:"text",required:"",placeholder:"Введите описание транзакции",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[za,l.value.description]])]),ft("div",null,[o[12]||(o[12]=ft("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Сумма",-1)),tn(ft("input",{"onUpdate:modelValue":o[3]||(o[3]=n=>l.value.amount=n),type:"number",step:"0.01",required:"",placeholder:"0.00",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[za,l.value.amount]]),o[13]||(o[13]=ft("p",{class:"text-xs text-gray-500 mt-1"}," Положительная сумма = доход, отрицательная = расход ",-1))]),ft("div",null,[o[14]||(o[14]=ft("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Категория",-1)),mr(Nv,{modelValue:l.value.category,"onUpdate:modelValue":o[4]||(o[4]=n=>l.value.category=n),categories:g.categories,placeholder:"Выберите категорию"},null,8,["modelValue","categories"])]),ft("div",null,[o[16]||(o[16]=ft("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Банк",-1)),tn(ft("select",{"onUpdate:modelValue":o[5]||(o[5]=n=>l.value.bank=n),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},o[15]||(o[15]=[y1('<option value="">Выберите банк</option><option value="Сбербанк">Сбербанк</option><option value="Тинькофф">Тинькофф</option><option value="Озон-банк">Озон-банк</option><option value="Альфа-банк">Альфа-банк</option><option value="Ручной ввод">Ручной ввод</option>',6)]),512),[[Ff,l.value.bank]])]),ft("div",J6,[ft("button",{type:"button",onClick:o[6]||(o[6]=n=>a.$emit("close")),class:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"}," Отмена "),ft("button",{type:"submit",disabled:!i.value,class:Cr(["flex-1 px-4 py-2 rounded-lg font-medium transition-colors",i.value?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"])}," Добавить ",10,Q6)])],32)])])])):hr("",!0)}},ex={class:"min-h-screen bg-gray-50"},rx={class:"w-full max-w-none mx-auto space-y-4 p-4"},sx={class:"bg-white border-b border-gray-200 px-4 py-3"},nx={class:"flex items-center justify-between"},ix={class:"flex items-center space-x-3"},ax={key:0,class:"flex items-center"},ox={key:0,class:"fixed top-3 right-3 z-50"},lx={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},cx={class:"text-xs text-gray-500 mb-1"},ux={class:"text-2xl font-bold text-green-600 mb-2"},hx={class:"text-xs text-gray-500 mb-1"},dx={class:"text-2xl font-bold text-green-500 mb-2"},fx={class:"text-xs text-gray-500 mb-1"},px={class:"text-2xl font-bold text-red-500 mb-2"},mx={class:"flex space-x-2 mb-4"},gx={key:0},bx={key:1},yx={class:"flex flex-wrap gap-2"},vx=["disabled"],Ax={__name:"App",setup(g){const e=Me(null),t=Me(null),r=Me("upload"),l=Me(!1),i=Me(!1),s=Me(!1),a=Me(!1);async function o(N){e.value&&e.value.addStatement&&(await e.value.addStatement(N),s.value=!0,a.value=!0,setTimeout(()=>{a.value=!1},5e3))}async function n(){e.value&&e.value.saveAllToDb&&(await e.value.saveAllToDb(),s.value=!1,r.value="database",await u())}function c(){r.value="upload",e.value&&e.value.clearStatements&&e.value.clearStatements(),e.value&&e.value.setDatabaseMode&&e.value.setDatabaseMode(!1),s.value=!1,a.value=!1}function d(){r.value="database",e.value&&e.value.loadStatementsFromDb&&e.value.loadStatementsFromDb(),e.value&&e.value.setDatabaseMode&&e.value.setDatabaseMode(!0),u(),s.value=!1,a.value=!1}async function u(){t.value&&t.value.refreshCategoriesFromDb&&await t.value.refreshCategoriesFromDb()}async function h(){await u()}async function p(N){e.value&&e.value.addManualTransaction&&(await e.value.addManualTransaction(N),s.value=!0)}function m(N){if(N instanceof Date)return N;if(typeof N=="string"&&/^\d{2}\.\d{2}\.\d{4}$/.test(N)){const[H,$,C]=N.split(".");return new Date(parseInt(C),parseInt($)-1,parseInt(H))}const B=new Date(N);return isNaN(B.getTime())?(console.warn("Не удалось распарсить дату:",N),null):B}function f(N){return Array.isArray(N)?N.reduce((B,H)=>B+(H.amount||0),0):0}function b(N){if(!Array.isArray(N)||N.length===0)return null;const B=new Set;return N.forEach(H=>{if(H.date){const $=m(H.date);$&&B.add($.getFullYear())}}),B.size===0?null:Math.max(...B)}function y(N){if(!Array.isArray(N)||N.length===0)return 0;const B=b(N);return B?N.filter($=>{if(!$.date)return!1;const C=m($.date);if(!C)return!1;const R=C.getFullYear()===B,k=($.amount||0)>0;return R&&k}).reduce(($,C)=>$+(C.amount||0),0):0}function _(N){if(!Array.isArray(N)||N.length===0)return 0;const B=b(N);return B?N.filter($=>{if(!$.date)return!1;const C=m($.date);if(!C)return!1;const R=C.getFullYear()===B,k=($.amount||0)<0;return R&&k}).reduce(($,C)=>$+Math.abs(C.amount||0),0):0}const E=Vr(()=>{var B,H;if(!e.value)return{balance:0,income:0,expenses:0};const N=((H=(B=e.value).getAllTransactions)==null?void 0:H.call(B))||[];return{balance:f(N),income:y(N),expenses:_(N)}}),M=Vr(()=>{var B,H;return e.value?(((H=(B=e.value).getAllTransactions)==null?void 0:H.call(B))||[]).length>0:!1});vd(async()=>{setTimeout(async()=>{if(e.value&&e.value.loadStatementsFromDb)try{await e.value.loadStatementsFromDb(),r.value="database",e.value&&e.value.setDatabaseMode&&e.value.setDatabaseMode(!0)}catch{e.value&&e.value.clearStatements&&e.value.clearStatements(),e.value&&e.value.setDatabaseMode&&e.value.setDatabaseMode(!1)}},100)});function D(){e.value&&e.value.exportData&&e.value.exportData()}function z(){const N=document.createElement("input");N.type="file",N.accept=".json",N.onchange=B=>{e.value&&e.value.importData&&e.value.importData(B)},N.click()}function O(){e.value&&e.value.clearAllData&&e.value.clearAllData()}return(N,B)=>{var $,C,R,k;const H=K2("Card");return Ut(),Zt("div",ex,[ft("div",rx,[ft("header",sx,[ft("div",nx,[ft("div",ix,[B[5]||(B[5]=ft("h1",{class:"text-lg font-bold text-gray-900"},"💰 Семейный бюджет",-1)),s.value?(Ut(),Zt("div",ax,B[4]||(B[4]=[ft("span",{class:"inline-flex items-center px-2 py-1 bg-yellow-100 text-yellow-800 text-xs font-medium rounded-full"}," ⚠️ Есть несохраненные данные ",-1)]))):hr("",!0)]),B[6]||(B[6]=ft("p",{class:"text-xs text-gray-500"},"Local-first PWA для управления финансами",-1))])]),a.value?(Ut(),Zt("div",ox,B[7]||(B[7]=[y1('<div class="bg-green-50 border border-green-200 rounded-lg p-3 shadow-lg max-w-sm"><div class="flex items-center"><div class="text-green-500 text-lg mr-2">✅</div><div><h3 class="font-medium text-green-800 text-sm">Файл успешно загружен</h3><p class="text-xs text-green-700 mt-0.5"> Данные добавлены в таблицу. Не забудьте сохранить их в базу! </p></div></div></div>',1)]))):hr("",!0),ft("div",lx,[mr(H,{class:"text-center hover:shadow-lg transition-shadow"},{default:ta(()=>[ft("div",cx,ie(r.value==="upload"?"📁 Загруженные файлы":"💾 База данных"),1),ft("div",ux,ie(E.value.balance>=0?"+":"")+ie(E.value.balance.toLocaleString("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0})),1),B[8]||(B[8]=ft("div",{class:"text-gray-600"},"Общий баланс",-1))]),_:1,__:[8]}),mr(H,{class:"text-center hover:shadow-lg transition-shadow"},{default:ta(()=>[ft("div",hx,ie(r.value==="upload"?"📁 Загруженные файлы":"💾 База данных"),1),ft("div",dx,ie(E.value.income.toLocaleString("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0})),1),B[9]||(B[9]=ft("div",{class:"text-gray-600"},"Доходы за год",-1))]),_:1,__:[9]}),mr(H,{class:"text-center hover:shadow-lg transition-shadow"},{default:ta(()=>[ft("div",fx,ie(r.value==="upload"?"📁 Загруженные файлы":"💾 База данных"),1),ft("div",px,ie(E.value.expenses.toLocaleString("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0})),1),B[10]||(B[10]=ft("div",{class:"text-gray-600"},"Расходы за год",-1))]),_:1,__:[10]})]),mr(H,null,{default:ta(()=>[ft("div",mx,[ft("button",{onClick:c,class:Cr(["px-4 py-2 rounded-lg font-medium transition-colors text-sm",r.value==="upload"?"bg-blue-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," 📁 Загрузить файлы ",2),ft("button",{onClick:d,class:Cr(["px-4 py-2 rounded-lg font-medium transition-colors text-sm",r.value==="database"?"bg-blue-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," 💾 Мои данные ",2)]),r.value==="upload"?(Ut(),Zt("div",gx,[B[11]||(B[11]=ft("h2",{class:"text-lg font-semibold text-gray-900 mb-3"}," 📊 Загрузить новую банковскую выписку ",-1)),B[12]||(B[12]=ft("p",{class:"text-gray-600 mb-4 text-sm"}," Загрузите Excel или PDF файл с банковской выпиской. После загрузки данные будут отображаться в таблице ниже, где вы сможете их просмотреть и сохранить в базу. ",-1)),B[13]||(B[13]=ft("div",{class:"mb-3 p-2 bg-blue-50 border border-blue-200 rounded text-xs text-blue-700"},[ft("span",{class:"font-medium"},"🏦 Поддерживаемые банки:"),io(" Сбербанк, Тинькофф, Озон-банк, Альфа-банк ")],-1)),mr(P4,{onFileParsed:o})])):hr("",!0),r.value==="database"?(Ut(),Zt("div",bx,[B[17]||(B[17]=ft("h2",{class:"text-lg font-semibold text-gray-900 mb-3"},"💾 Мои сохраненные данные",-1)),B[18]||(B[18]=ft("p",{class:"text-gray-600 mb-4 text-sm"}," Здесь отображаются все сохраненные выписки из локальной базы данных. Вы можете просматривать, анализировать и экспортировать данные. ",-1)),ft("div",yx,[ft("button",{onClick:B[0]||(B[0]=v=>l.value=!0),class:"px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-medium text-sm"}," 📊 По месяцам "),B[14]||(B[14]=ft("div",{class:"w-4"},null,-1)),ft("button",{onClick:B[1]||(B[1]=v=>i.value=!0),class:"px-3 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-medium text-sm"}," ➕ Добавить "),B[15]||(B[15]=ft("div",{class:"w-4"},null,-1)),ft("button",{onClick:D,disabled:!M.value,class:Cr(["px-3 py-2 rounded-lg transition-colors font-medium text-sm",M.value?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"])}," 📥 Экспорт ",10,vx),ft("button",{onClick:z,class:"px-3 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors font-medium text-sm"}," 📤 Импорт "),B[16]||(B[16]=ft("div",{class:"w-4"},null,-1)),ft("button",{onClick:O,class:"px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium text-sm"}," 🗑️ Очистить ")])])):hr("",!0)]),_:1}),mr(H,null,{default:ta(()=>[mr(M6,{ref_key:"allTable",ref:e,onCategoriesUpdated:h,onSaveToDatabase:n},null,512)]),_:1}),l.value?(Ut(),Zc(K6,{key:1,ref_key:"monthlyTable",ref:t,transactions:((C=($=e.value)==null?void 0:$.getAllTransactions)==null?void 0:C.call($))||[],onClose:B[2]||(B[2]=v=>l.value=!1),onCategoriesUpdated:h},null,8,["transactions"])):hr("",!0),mr(tx,{"is-open":i.value,categories:((k=(R=e.value)==null?void 0:R.getCategories)==null?void 0:k.call(R))||[],onClose:B[3]||(B[3]=v=>i.value=!1),onAddTransaction:p},null,8,["is-open","categories"])])])}}},wx=["disabled"],kx={__name:"Button",props:{variant:{type:String,default:"primary",validator:g=>["primary","secondary","outline","ghost"].includes(g)},size:{type:String,default:"md",validator:g=>["sm","md","lg"].includes(g)},disabled:{type:Boolean,default:!1}},setup(g){return(e,t)=>(Ut(),Zt("button",{class:Cr(["inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",g.variant==="primary"&&"bg-blue-600 text-white hover:bg-blue-700 focus-visible:ring-blue-500",g.variant==="secondary"&&"bg-gray-100 text-gray-900 hover:bg-gray-200 focus-visible:ring-gray-500",g.variant==="outline"&&"border border-gray-300 bg-transparent hover:bg-gray-50 focus-visible:ring-gray-500",g.variant==="ghost"&&"hover:bg-gray-100 focus-visible:ring-gray-500",g.size==="sm"&&"h-8 px-3 text-sm",g.size==="md"&&"h-10 px-4 py-2",g.size==="lg"&&"h-12 px-8 text-lg"]),disabled:g.disabled},[Of(e.$slots,"default")],10,wx))}},Ex={__name:"Card",props:{padding:{type:String,default:"md",validator:g=>["none","sm","md","lg"].includes(g)}},setup(g){return(e,t)=>(Ut(),Zt("div",{class:Cr(["rounded-lg border bg-white shadow-sm",g.padding==="none"&&"",g.padding==="sm"&&"p-3",g.padding==="md"&&"p-6",g.padding==="lg"&&"p-8"])},[Of(e.$slots,"default")],2))}},_x=["disabled","placeholder"],Cx={__name:"Input",props:{size:{type:String,default:"md",validator:g=>["sm","md","lg"].includes(g)},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:""}},emits:["update:modelValue"],setup(g){return(e,t)=>(Ut(),Zt("input",{class:Cr(["flex w-full rounded-md border border-gray-300 bg-white px-3 font-medium transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",g.size==="sm"&&"h-8 text-sm",g.size==="md"&&"h-10",g.size==="lg"&&"h-12 text-lg"]),disabled:g.disabled,placeholder:g.placeholder,onInput:t[0]||(t[0]=r=>e.$emit("update:modelValue",r.target.value))},null,42,_x))}};export{j4 as T,kx as _,Ex as a,Cx as b,Sx as c,P4 as d,Ax as e};
